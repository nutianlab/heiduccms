/*
 * jabsorb - a Java to JavaScript Advanced Object Request Broker
 * http://www.jabsorb.org
 *
 * Copyright 2007-2009 The jabsorb team
 * Copyright (c) 2005 Michael Clark, Metaparadigm Pte Ltd
 * Copyright (c) 2003-2004 Jan-Klaas Kollhof
 *
 * This code is based on original code from the json-rpc-java library
 * which was originally based on Jan-Klaas' JavaScript o lait library
 * (jsolait).
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *    http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 */

/*! jQuery v2.1.3 | (c) 2005, 2014 jQuery Foundation, Inc. | jquery.org/license */

//     Underscore.js 1.6.0
//     http://underscorejs.org
//     (c) 2009-2014 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
//     Underscore may be freely distributed under the MIT license.

//     Backbone.js 0.5.3
//     (c) 2010 Jeremy Ashkenas, DocumentCloud Inc.
//     Backbone may be freely distributed under the MIT license.
//     For all details and documentation:
//     http://documentcloud.github.com/backbone

/**
 * @license text 2.0.15 Copyright jQuery Foundation and other contributors.
 * Released under MIT license, http://github.com/requirejs/text/LICENSE
 */

/*
 * Treeview 1.5pre - jQuery plugin to hide and show branches of a tree
 * 
 * http://bassistance.de/jquery-plugins/jquery-plugin-treeview/
 * http://docs.jquery.com/Plugins/Treeview
 *
 * Copyright (c) 2007 Jörn Zaefferer
 *
 * Dual licensed under the MIT and GPL licenses:
 *   http://www.opensource.org/licenses/mit-license.php
 *   http://www.gnu.org/licenses/gpl.html
 *
 * Revision: $Id: jquery.treeview.js 5759 2008-07-01 07:50:28Z joern.zaefferer $
 *
 */

/*!
 * jQuery Form Plugin
 * version: 2.95 (30-JAN-2012)
 * @requires jQuery v1.3.2 or later
 *
 * Examples and documentation at: http://malsup.com/jquery/form/
 * Dual licensed under the MIT and GPL licenses:
 *	http://www.opensource.org/licenses/mit-license.php
 *	http://www.gnu.org/licenses/gpl.html
 */

/*!
 * jQuery Cookie Plugin v1.3.1
 * https://github.com/carhartl/jquery-cookie
 *
 * Copyright 2013 Klaus Hartl
 * Released under the MIT license
 */

/*
 * jQuery xmlDOM Plugin v1.0
 * http://outwestmedia.com/jquery-plugins/xmldom/
 *
 * Released: 2009-04-06
 * Version: 1.0
 *
 * Copyright (c) 2009 Jonathan Sharp, Out West Media LLC.
 * Dual licensed under the MIT and GPL licenses.
 * http://docs.jquery.com/License
 */

/*
 * jQote2 - client-side Javascript templating engine
 * Copyright (C) 2010, aefxx
 * http://aefxx.com/
 *
 * Dual licensed under the WTFPL v2 or MIT (X11) licenses
 * WTFPL v2 Copyright (C) 2004, Sam Hocevar
 *
 * Date: Thu, Oct 21st, 2010
 * Version: 0.9.7
 */

//! moment.js
//! version : 2.4.0
//! authors : Tim Wood, Iskren Chernev, Moment.js contributors
//! license : MIT
//! momentjs.com

/**
 * noty - jQuery Notification Plugin v2.2.2
 * Contributors: https://github.com/needim/noty/graphs/contributors
 *
 * Examples and Documentation - http://needim.github.com/noty/
 *
 * Licensed under the MIT licenses:
 * http://www.opensource.org/licenses/mit-license.php
 *
 **/

/*
 * jQuery Easing v1.3 - http://gsgd.co.uk/sandbox/jquery/easing/
 *
 * Uses the built in easing capabilities added In jQuery 1.1
 * to offer multiple easing options
 *
 * TERMS OF USE - jQuery Easing
 * 
 * Open source under the BSD License. 
 * 
 * Copyright © 2008 George McGinley Smith
 * All rights reserved.
 * 
 * Redistribution and use in source and binary forms, with or without modification, 
 * are permitted provided that the following conditions are met:
 * 
 * Redistributions of source code must retain the above copyright notice, this list of 
 * conditions and the following disclaimer.
 * Redistributions in binary form must reproduce the above copyright notice, this list 
 * of conditions and the following disclaimer in the documentation and/or other materials 
 * provided with the distribution.
 * 
 * Neither the name of the author nor the names of contributors may be used to endorse 
 * or promote products derived from this software without specific prior written permission.
 * 
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY 
 * EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE
 *  COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
 *  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE
 *  GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED 
 * AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
 *  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED 
 * OF THE POSSIBILITY OF SUCH DAMAGE. 
 *
*/

/*
 *
 * TERMS OF USE - EASING EQUATIONS
 * 
 * Open source under the BSD License. 
 * 
 * Copyright © 2001 Robert Penner
 * All rights reserved.
 * 
 * Redistribution and use in source and binary forms, with or without modification, 
 * are permitted provided that the following conditions are met:
 * 
 * Redistributions of source code must retain the above copyright notice, this list of 
 * conditions and the following disclaimer.
 * Redistributions in binary form must reproduce the above copyright notice, this list 
 * of conditions and the following disclaimer in the documentation and/or other materials 
 * provided with the distribution.
 * 
 * Neither the name of the author nor the names of contributors may be used to endorse 
 * or promote products derived from this software without specific prior written permission.
 * 
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY 
 * EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE
 *  COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
 *  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE
 *  GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED 
 * AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
 *  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED 
 * OF THE POSSIBILITY OF SUCH DAMAGE. 
 *
 */

/*!
 * Bootstrap v3.3.4 (http://getbootstrap.com)
 * Copyright 2011-2015 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 */

/* =========================================================
 * bootstrap-datepicker.js
 * Repo: https://github.com/eternicode/bootstrap-datepicker/
 * Demo: http://eternicode.github.io/bootstrap-datepicker/
 * Docs: http://bootstrap-datepicker.readthedocs.org/
 * Forked from http://www.eyecon.ro/bootstrap-datepicker
 * =========================================================
 * Started by Stefan Petre; improvements by Andrew Rowls + contributors
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * ========================================================= */

function toJSON(e){function i(){var e;while(n)e=n[t].prev,delete n[t],n=e}function u(e,a,f){var l=[],c,h,p,d,v;if(e===null||e===undefined)return"null";if(typeof e=="string")return escapeJSONString(e);if(typeof e=="number")return e.toString();if(typeof e=="boolean")return e.toString();if(e[t]){c=[f],p=a;while(p)h&&h.unshift(p[t].ref),p===e&&(d=p,h=[d[t].ref]),c.unshift(p[t].ref),p=p[t].parent;if(d){if(JSONRpcClient.fixupCircRefs)return c.shift(),h.shift(),r.push([c,h]),s;throw i(),new Error("circular reference detected!")}if(JSONRpcClient.fixupDuplicates){h=[e[t].ref],p=e[t].parent;while(p)h.unshift(p[t].ref),p=p[t].parent;return c.shift(),h.shift(),r.push([c,h]),s}}else e[t]={parent:a,prev:n,ref:f},n=e;if(e.constructor===Date)return e.javaClass?'{javaClass: "'+e.javaClass+'", time: '+e.valueOf()+"}":'{javaClass: "java.util.Date", time: '+e.valueOf()+"}";if(e.constructor===Array){for(v=0;v<e.length;v++)o=u(e[v],e,v),l.push(o===s?null:o);return"["+l.join(", ")+"]"}for(var m in e)m!==t&&(e[m]===null||e[m]===undefined?l.push('"'+m+'": null'):typeof e[m]!="function"&&(o=u(e[m],e,m),o!==s&&l.push(escapeJSONString(m)+": "+o)));return"{"+l.join(", ")+"}"}var t="$_$jabsorbed$813492",n,r=[],s={},o;return o=u(e,null,"root"),i(),r.length?{json:o,fixups:r}:{json:o}}function JSONRpcClient(){var e=0,t,n,r,i,s,o=typeof arguments[0],u=!0;o==="function"?(this.readyCB=arguments[0],e++):arguments[0]&&o==="object"&&arguments[0].length&&(this._addMethods(arguments[0]),e++,u=!1),this.serverURL=arguments[e],this.user=arguments[e+1],this.pass=arguments[e+2],this.objectID=0,u&&(this._addMethods(["system.listMethods"]),t=JSONRpcClient._makeRequest(this,"system.listMethods",[]),this.readyCB&&(i=this,t.cb=function(e,t){t||i._addMethods(e),i.readyCB(e,t)}),this.readyCB?(JSONRpcClient.async_requests.push(t),JSONRpcClient.kick_async()):(r=JSONRpcClient._sendRequest(this,t),this._addMethods(r)))}function JSONRPCCallableProxy(){this.objectID=arguments[0],this.javaClass=arguments[1],this.JSONRPCType="CallableReference"}var escapeJSONString=function(){var e=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,t={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};return function(n){return e.lastIndex=0,e.test(n)?'"'+n.replace(e,function(e){var n=t[e];return typeof n=="string"?n:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+n+'"'}}();JSONRpcClient.prototype.createCallableProxy=function(e,t){var n,r,i,s,o;n=new JSONRPCCallableProxy(e,t);for(s in JSONRpcClient.knownClasses[t])n[s]=JSONRpcClient.bind(JSONRpcClient.knownClasses[t][s],n);return n},JSONRpcClient.knownClasses={},JSONRpcClient.Exception=function(e){var t;for(var n in e)e.hasOwnProperty(n)&&(this[n]=e[n]);this.trace&&(t=this.trace.match(/^([^:]*)/),t&&(this.name=t[0])),this.name||(this.name="JSONRpcClientException")},JSONRpcClient.Exception.CODE_REMOTE_EXCEPTION=490,JSONRpcClient.Exception.CODE_ERR_CLIENT=550,JSONRpcClient.Exception.CODE_ERR_PARSE=590,JSONRpcClient.Exception.CODE_ERR_NOMETHOD=591,JSONRpcClient.Exception.CODE_ERR_UNMARSHALL=592,JSONRpcClient.Exception.CODE_ERR_MARSHALL=593,JSONRpcClient.Exception.prototype=new Error,JSONRpcClient.Exception.prototype.toString=function(e,t){var n="";return this.name&&(n+=this.name),this.message&&(n+=": "+this.message),n.length==0&&(n="no exception information given"),n},JSONRpcClient.default_ex_handler=function(e){var t,n="";for(t in e)n+=t+"	"+e[t]+"\n";alert(n)},JSONRpcClient.toplevel_ex_handler=JSONRpcClient.default_ex_handler,JSONRpcClient.profile_async=!1,JSONRpcClient.max_req_active=1,JSONRpcClient.requestId=1,JSONRpcClient.fixupCircRefs=!0,JSONRpcClient.fixupDuplicates=!0,JSONRpcClient.transformDates=!1,JSONRpcClient.transformDateWithoutHint=!1,JSONRpcClient.javaDateClasses={"java.util.Date":!0,"java.sql.Date":!0,"java.sql.Time":!0,"java.sql.Timestamp":!0},JSONRpcClient.bind=function(e,t){return function(){return e.apply(t,arguments)}},JSONRpcClient._createMethod=function(e,t){var n=function(){var n=[],r;for(var i=0;i<arguments.length;i++)n.push(arguments[i]);typeof n[0]=="function"&&(r=n.shift());var s=JSONRpcClient._makeRequest(this,t,n,this.objectID,r);return r?(JSONRpcClient.async_requests.push(s),JSONRpcClient.kick_async(),s.requestId):JSONRpcClient._sendRequest(e,s)};return n},JSONRpcClient.prototype.createObject=function(){var e=[],t=null,n,r,i;for(var s=0;s<arguments.length;s++)e.push(arguments[s]);return typeof e[0]=="function"&&(t=e.shift()),n=e[0]+".$constructor",r=e[1],i=JSONRpcClient._makeRequest(this,n,r,0,t),t===null?JSONRpcClient._sendRequest(this,i):(JSONRpcClient.async_requests.push(i),JSONRpcClient.kick_async(),i.requestId)},JSONRpcClient.CALLABLE_REFERENCE_METHOD_PREFIX=".ref",JSONRpcClient.prototype._addMethods=function(e,t){var n,r,i,s,o,u=[],a,f,l,c;for(var h=0;h<e.length;h++){r=this,i=e[h].split("."),l=e[h].indexOf("["),c=e[h].indexOf("]");if(e[h].substring(0,JSONRpcClient.CALLABLE_REFERENCE_METHOD_PREFIX.length)==JSONRpcClient.CALLABLE_REFERENCE_METHOD_PREFIX&&l!=-1&&c!=-1&&l<c)a=e[h].substring(l+1,c);else for(s=0;s<i.length-1;s++)n=i[s],r[n]?r=r[n]:(r[n]={},r=r[n]);n=i[i.length-1],a?(o=JSONRpcClient._createMethod(this,n),JSONRpcClient.knownClasses[a]||(JSONRpcClient.knownClasses[a]={}),JSONRpcClient.knownClasses[a][n]=o):(o=JSONRpcClient._createMethod(this,e[h]),!r[n]&&!t&&(r[n]=JSONRpcClient.bind(o,this)),u.push(o)),a=null}return u},JSONRpcClient._getCharsetFromHeaders=function(e){var t,n,r;try{t=e.getResponseHeader("Content-type"),n=t.split(/\s*;\s*/);for(r=0;r<n.length;r++)if(n[r].substring(0,8)=="charset=")return n[r].substring(8,n[r].length)}catch(i){}return"UTF-8"},JSONRpcClient.async_requests=[],JSONRpcClient.async_inflight={},JSONRpcClient.async_responses=[],JSONRpcClient.async_timeout=null,JSONRpcClient.num_req_active=0,JSONRpcClient._async_handler=function(){var e,t;JSONRpcClient.async_timeout=null;while(JSONRpcClient.async_responses.length>0){e=JSONRpcClient.async_responses.shift();if(e.canceled)continue;e.profile&&(e.profile.dispatch=new Date);try{e.cb(e.result,e.ex,e.profile)}catch(n){JSONRpcClient.toplevel_ex_handler(n)}}while(JSONRpcClient.async_requests.length>0&&JSONRpcClient.num_req_active<JSONRpcClient.max_req_active){t=JSONRpcClient.async_requests.shift();if(t.canceled)continue;JSONRpcClient._sendRequest(t.client,t)}},JSONRpcClient.kick_async=function(){JSONRpcClient.async_timeout||(JSONRpcClient.async_timeout=setTimeout(JSONRpcClient._async_handler,0))},JSONRpcClient.cancelRequest=function(e){if(JSONRpcClient.async_inflight[e])return JSONRpcClient.async_inflight[e].canceled=!0,!0;var t;for(t in JSONRpcClient.async_requests)if(JSONRpcClient.async_requests[t].requestId==e)return JSONRpcClient.async_requests[t].canceled=!0,!0;for(t in JSONRpcClient.async_responses)if(JSONRpcClient.async_responses[t].requestId==e)return JSONRpcClient.async_responses[t].canceled=!0,!0;return!1},JSONRpcClient._makeRequest=function(e,t,n,r,i){var s={};s.client=e,s.requestId=JSONRpcClient.requestId++;var o="{id:"+s.requestId+",method:";r&&r>0?o+='".obj['+r+"]."+t+'"':o+='"'+t+'"',i&&(s.cb=i),JSONRpcClient.profile_async&&(s.profile={submit:new Date});var u=toJSON(n);return o+=",params:"+u.json,u.fixups&&(o+=",fixups:"+toJSON(u.fixups).json),s.data=o+"}",s},JSONRpcClient._sendRequest=function(e,t){var n;t.profile&&(t.profile.start=new Date),n=JSONRpcClient.poolGetHTTPRequest(),JSONRpcClient.num_req_active++,n.open("POST",e.serverURL,!!t.cb,e.user,e.pass);try{n.setRequestHeader("Content-type","text/plain")}catch(r){}t.cb?n.onreadystatechange=function(){var r;if(n.readyState==4){n.onreadystatechange=function(){},r={cb:t.cb,result:null,ex:null},t.profile?(r.profile=t.profile,r.profile.end=new Date):r.profile=!1;try{r.result=e._handleResponse(n)}catch(i){r.ex=i}JSONRpcClient.async_inflight[t.requestId].canceled||JSONRpcClient.async_responses.push(r),delete JSONRpcClient.async_inflight[t.requestId],JSONRpcClient.kick_async()}}:n.onreadystatechange=function(){},JSONRpcClient.async_inflight[t.requestId]=t;try{n.send(t.data)}catch(r){throw JSONRpcClient.poolReturnHTTPRequest(n),JSONRpcClient.num_req_active--,new JSONRpcClient.Exception({code:JSONRpcClient.Exception.CODE_ERR_CLIENT,message:"Connection failed"})}return t.cb?null:(delete JSONRpcClient.async_inflight[t.requestId],e._handleResponse(n))},JSONRpcClient.prototype._handleResponse=function(e){this.charset||(this.charset=JSONRpcClient._getCharsetFromHeaders(e));var t,n,r;try{t=e.status,n=e.statusText,r=e.responseText}catch(i){throw JSONRpcClient.poolReturnHTTPRequest(e),JSONRpcClient.num_req_active--,JSONRpcClient.kick_async(),new JSONRpcClient.Exception({code:JSONRpcClient.Exception.CODE_ERR_CLIENT,message:"Connection failed"})}JSONRpcClient.poolReturnHTTPRequest(e),JSONRpcClient.num_req_active--;if(t!=200)throw new JSONRpcClient.Exception({code:t,message:n});return this.unmarshallResponse(r)},JSONRpcClient.prototype.unmarshallResponse=function(data){function applyFixups(e,t){function n(e,t){for(var n=0,r=t.length;n<r;n++)e=e[t[n]];return e}function r(e,t,n){var r=t.length-1;for(var i=0;i<r;i++)e=e[t[i]];e[t[r]]=n}for(var i=0,s=t.length;i<s;i++)r(e,t[i][0],n(e,t[i][1]))}function transformDate(e){function t(e,t){var n,r=0;if(e.hasOwnProperty(t)){for(n in e)if(e.hasOwnProperty(n)){r++;if(r>1)return}return!0}}var n,r;if(e&&typeof e=="object"){if(e.javaClass&&JSONRpcClient.javaDateClasses[e.javaClass])return r=new Date(e.time),e.javaClass!=="java.util.Date"&&(r.javaClass=e.javaClass),r;if(JSONRpcClient.transformDateWithoutHint&&t(e,"time"))return new Date(e.time);for(n in e)e.hasOwnProperty(n)&&(e[n]=transformDate(e[n]));return e}return e}var obj;try{eval("obj = "+data)}catch(e){throw new JSONRpcClient.Exception({code:550,message:"error parsing result"})}if(obj.error)throw new JSONRpcClient.Exception(obj.error);var r=obj.result,i,tmp;if(r){if(r.objectID&&r.JSONRPCType=="CallableReference")return this.createCallableProxy(r.objectID,r.javaClass);r=JSONRpcClient.extractCallableReferences(this,JSONRpcClient.transformDates?transformDate(r):r),obj.fixups&&applyFixups(r,obj.fixups)}return r},JSONRpcClient.extractCallableReferences=function(e,t){var n,r,i;for(n in t)typeof t[n]=="object"&&(r=JSONRpcClient.makeCallableReference(e,t[n]),r?t[n]=r:(r=JSONRpcClient.extractCallableReferences(e,t[n]),t[n]=r)),typeof n=="object"&&(r=JSONRpcClient.makeCallableReference(e,n),r?(i=t[n],delete t[n],t[r]=i):(r=JSONRpcClient.extractCallableReferences(e,n),i=t[n],delete t[n],t[r]=i));return t},JSONRpcClient.makeCallableReference=function(e,t){return t&&t.objectID&&t.javaClass&&t.JSONRPCType=="CallableReference"?e.createCallableProxy(t.objectID,t.javaClass):null},JSONRpcClient.http_spare=[],JSONRpcClient.http_max_spare=8,JSONRpcClient.poolGetHTTPRequest=function(){var e=JSONRpcClient.http_spare.pop();return e?e:JSONRpcClient.getHTTPRequest()},JSONRpcClient.poolReturnHTTPRequest=function(e){JSONRpcClient.http_spare.length>=JSONRpcClient.http_max_spare?delete e:JSONRpcClient.http_spare.push(e)},JSONRpcClient.msxmlNames=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","MSXML2.XMLHTTP.5.0","MSXML2.XMLHTTP.4.0","Microsoft.XMLHTTP"],JSONRpcClient.getHTTPRequest=function(){try{return JSONRpcClient.httpObjectName="XMLHttpRequest",new XMLHttpRequest}catch(e){}for(var t=0;t<JSONRpcClient.msxmlNames.length;t++)try{return JSONRpcClient.httpObjectName=JSONRpcClient.msxmlNames[t],new ActiveXObject(JSONRpcClient.msxmlNames[t])}catch(e){}throw JSONRpcClient.httpObjectName=null,new JSONRpcClient.Exception({code:0,message:"Can't create XMLHttpRequest object"})},define("jsonrpc",function(){});var Heiduc={};Heiduc.javaList=function(e){return{javaClass:"java.util.ArrayList",list:e}},Heiduc.javaMap=function(e){return{javaClass:"java.util.HashMap",map:e}},Heiduc.accents={"ÀÁÂÃÄÅ":"A","Æ":"AE","Ç":"C","ÈÉÊË":"E","ÌÍÎÏ":"I","Ð":"Th","Ñ":"N","ÒÓÔÕÖØ":"O","ÙÚÛÜ":"U","Ý":"Y","Þ":"Th","ß":"ss","àáâãäå":"a","æ":"ae","ç":"c","èéêë":"e","ìíîï":"i","ð":"o","ñ":"n","òóôõöø":"o","ùúûü":"u","ýÿ":"y","þ":"th"},Heiduc.replaceAccents=function(e){return $.each(Heiduc.accents,function(t,n){for(var r=0;r<t.length;r++)e=e.replace(t.charAt(r),n)}),e.toLowerCase()},Heiduc.urlFromTitle=function(e){return Heiduc.replaceAccents(e.toLowerCase()).replace(/\W/g,"-")},Heiduc.nameFromTitle=function(e){return e.toLowerCase().replace(/\W/g,"_")},Heiduc.isImage=function(e){var t=Heiduc.getFileExt(e);return t.toLowerCase().match(/gif|jpg|jpeg|png|ico/)!=null},Heiduc.getFileExt=function(e){return e.substring(e.lastIndexOf(".")+1,e.length)},Heiduc.getFileName=function(e){var t=e.lastIndexOf("\\");return t==-1&&(t=e.lastIndexOf("/")),t==-1?e:e.substring(t+1,e.length)},Heiduc.formatDate=function(e){return $.datepicker.formatDate("dd.mm.yy",e)},Heiduc.formatTime=function(e){return $.datepicker.formatDate("HH:MM",e)},Heiduc.identifier_regex=/^[a-zA-Z_][a-zA-Z0-9_]*$/,Heiduc.isValidIdentifier=function(e){return Heiduc.identifier_regex.test(e)},Heiduc.strip=function(e){var t=0;while(t<e.length&&e[t]==" ")t++;var n=e.substring(t);t=n.length-1;while(t>=0&&n[t]==" ")t--;return n.slice(0,t+1)},Heiduc.getQueryParam=function(e){var t=window.location.search.match(new RegExp("(\\?|&)"+e+"(\\[\\])?=([^&]*)"));return Heiduc.escapeHtml(t?t[3]:"")},Heiduc.escapeHtml=function(e){return e.replace(/&/g,"&amp;").replace(/>/g,"&gt;").replace(/</g,"&lt;").replace(/"/g,"&quot;").replace(/`/g,"&lsquo;").replace(/'/g,"&rsquo;")},Heiduc.unescapeHtml=function(e){return e.replace(/&amp;/g,"&").replace(/&gt;/g,">").replace(/&lt;/g,"<").replace(/&quot;/g,'"').replace(/&lsquo;/g,"`").replace(/&rsquo;/g,"'")},Heiduc.generateGUID=function(){function e(){return((1+Math.random())*65536|0).toString(16).substring(1)}return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()},Heiduc.jsonrpc="",Heiduc.jsonrpcListeners=[],Heiduc.jsonrpcSystemListeners=[],Heiduc.jsonrpcInitialized=!1,Heiduc.jsonrpcInitError=null,Heiduc.createJSONRpc=function(){Heiduc.jsonrpc=new JSONRpcClient(function(e,t){if(t)Heiduc.jsonrpcInitError="Error during JSON-RPC initialization "+t+" "+t.message;else{while(Heiduc.jsonrpcSystemListeners.length>0){var n=Heiduc.jsonrpcSystemListeners.pop();n()}while(Heiduc.jsonrpcListeners.length>0){var n=Heiduc.jsonrpcListeners.pop();n()}}Heiduc.jsonrpcInitialized=!0},"/json-rpc/")},Heiduc.createJSONRpc(),Heiduc.initJSONRpc=function(e){if(e==undefined)return;Heiduc.jsonrpcInitialized?e():Heiduc.jsonrpcListeners.push(e)},Heiduc.initJSONRpcSystem=function(e){if(e==undefined)return;Heiduc.jsonrpcInitialized?e():Heiduc.jsonrpcSystemListeners.push(e)},Heiduc.serviceFailed=function(e){return e!=null?(alert("JSON-RPC service fail "+e+" "+e.message),!0):!1},Heiduc.changeLanguage=function(e){var t=location.href.replace("#",""),n=t.indexOf("language="),r=location.search.indexOf("?")==-1?"?":"&";if(n>0){var i=t.substr(n+1),s=i.indexOf("&");t=t.substr(0,n)+"language="+e,s>0&&(t+=i.substr(s+1)),t.indexOf("&")<0&&(r="")}else t=t+r+"language="+e;location.href=t},String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")},String.prototype.ltrim=function(){return this.replace(/^\s+/,"")},String.prototype.rtrim=function(){return this.replace(/\s+$/,"")},String.prototype.startsWith=function(e){return this.match("^"+e)==e},String.prototype.endsWith=function(e){return this.match(e+"$")==e},define("heiduc",function(){}),!function(e,t){"object"==typeof module&&"object"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return t(e)}:t(e)}("undefined"!=typeof window?window:this,function(a,b){function s(e){var t=e.length,r=n.type(e);return"function"===r||n.isWindow(e)?!1:1===e.nodeType&&t?!0:"array"===r||0===t||"number"==typeof t&&t>0&&t-1 in e}function x(e,t,r){if(n.isFunction(t))return n.grep(e,function(e,n){return!!t.call(e,n,e)!==r});if(t.nodeType)return n.grep(e,function(e){return e===t!==r});if("string"==typeof t){if(w.test(t))return n.filter(t,e,r);t=n.filter(t,e)}return n.grep(e,function(e){return g.call(t,e)>=0!==r})}function D(e,t){while((e=e[t])&&1!==e.nodeType);return e}function G(e){var t=F[e]={};return n.each(e.match(E)||[],function(e,n){t[n]=!0}),t}function I(){l.removeEventListener("DOMContentLoaded",I,!1),a.removeEventListener("load",I,!1),n.ready()}function K(){Object.defineProperty(this.cache={},0,{get:function(){return{}}}),this.expando=n.expando+K.uid++}function P(e,t,r){var i;if(void 0===r&&1===e.nodeType)if(i="data-"+t.replace(O,"-$1").toLowerCase(),r=e.getAttribute(i),"string"==typeof r){try{r="true"===r?!0:"false"===r?!1:"null"===r?null:+r+""===r?+r:N.test(r)?n.parseJSON(r):r}catch(s){}M.set(e,t,r)}else r=void 0;return r}function Z(){return!0}function $(){return!1}function _(){try{return l.activeElement}catch(e){}}function jb(e,t){return n.nodeName(e,"table")&&n.nodeName(11!==t.nodeType?t:t.firstChild,"tr")?e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody")):e}function kb(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function lb(e){var t=gb.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function mb(e,t){for(var n=0,r=e.length;r>n;n++)L.set(e[n],"globalEval",!t||L.get(t[n],"globalEval"))}function nb(e,t){var r,i,s,o,u,a,f,l;if(1===t.nodeType){if(L.hasData(e)&&(o=L.access(e),u=L.set(t,o),l=o.events)){delete u.handle,u.events={};for(s in l)for(r=0,i=l[s].length;i>r;r++)n.event.add(t,s,l[s][r])}M.hasData(e)&&(a=M.access(e),f=n.extend({},a),M.set(t,f))}}function ob(e,t){var r=e.getElementsByTagName?e.getElementsByTagName(t||"*"):e.querySelectorAll?e.querySelectorAll(t||"*"):[];return void 0===t||t&&n.nodeName(e,t)?n.merge([e],r):r}function pb(e,t){var n=t.nodeName.toLowerCase();"input"===n&&T.test(e.type)?t.checked=e.checked:("input"===n||"textarea"===n)&&(t.defaultValue=e.defaultValue)}function sb(e,t){var r,i=n(t.createElement(e)).appendTo(t.body),s=a.getDefaultComputedStyle&&(r=a.getDefaultComputedStyle(i[0]))?r.display:n.css(i[0],"display");return i.detach(),s}function tb(e){var t=l,r=rb[e];return r||(r=sb(e,t),"none"!==r&&r||(qb=(qb||n("<iframe frameborder='0' width='0' height='0'/>")).appendTo(t.documentElement),t=qb[0].contentDocument,t.write(),t.close(),r=sb(e,t),qb.detach()),rb[e]=r),r}function xb(e,t,r){var i,s,o,u,a=e.style;return r=r||wb(e),r&&(u=r.getPropertyValue(t)||r[t]),r&&(""!==u||n.contains(e.ownerDocument,e)||(u=n.style(e,t)),vb.test(u)&&ub.test(t)&&(i=a.width,s=a.minWidth,o=a.maxWidth,a.minWidth=a.maxWidth=a.width=u,u=r.width,a.width=i,a.minWidth=s,a.maxWidth=o)),void 0!==u?u+"":u}function yb(e,t){return{get:function(){return e()?void delete this.get:(this.get=t).apply(this,arguments)}}}function Fb(e,t){if(t in e)return t;var n=t[0].toUpperCase()+t.slice(1),r=t,i=Eb.length;while(i--)if(t=Eb[i]+n,t in e)return t;return r}function Gb(e,t,n){var r=Ab.exec(t);return r?Math.max(0,r[1]-(n||0))+(r[2]||"px"):t}function Hb(e,t,r,i,s){for(var o=r===(i?"border":"content")?4:"width"===t?1:0,u=0;4>o;o+=2)"margin"===r&&(u+=n.css(e,r+R[o],!0,s)),i?("content"===r&&(u-=n.css(e,"padding"+R[o],!0,s)),"margin"!==r&&(u-=n.css(e,"border"+R[o]+"Width",!0,s))):(u+=n.css(e,"padding"+R[o],!0,s),"padding"!==r&&(u+=n.css(e,"border"+R[o]+"Width",!0,s)));return u}function Ib(e,t,r){var i=!0,s="width"===t?e.offsetWidth:e.offsetHeight,o=wb(e),u="border-box"===n.css(e,"boxSizing",!1,o);if(0>=s||null==s){if(s=xb(e,t,o),(0>s||null==s)&&(s=e.style[t]),vb.test(s))return s;i=u&&(k.boxSizingReliable()||s===e.style[t]),s=parseFloat(s)||0}return s+Hb(e,t,r||(u?"border":"content"),i,o)+"px"}function Jb(e,t){for(var r,i,s,o=[],u=0,a=e.length;a>u;u++)i=e[u],i.style&&(o[u]=L.get(i,"olddisplay"),r=i.style.display,t?(o[u]||"none"!==r||(i.style.display=""),""===i.style.display&&S(i)&&(o[u]=L.access(i,"olddisplay",tb(i.nodeName)))):(s=S(i),"none"===r&&s||L.set(i,"olddisplay",s?r:n.css(i,"display"))));for(u=0;a>u;u++)i=e[u],i.style&&(t&&"none"!==i.style.display&&""!==i.style.display||(i.style.display=t?o[u]||"":"none"));return e}function Kb(e,t,n,r,i){return new Kb.prototype.init(e,t,n,r,i)}function Sb(){return setTimeout(function(){Lb=void 0}),Lb=n.now()}function Tb(e,t){var n,r=0,i={height:e};for(t=t?1:0;4>r;r+=2-t)n=R[r],i["margin"+n]=i["padding"+n]=e;return t&&(i.opacity=i.width=e),i}function Ub(e,t,n){for(var r,i=(Rb[t]||[]).concat(Rb["*"]),s=0,o=i.length;o>s;s++)if(r=i[s].call(n,t,e))return r}function Vb(e,t,r){var i,s,o,u,a,f,l,c,h=this,p={},d=e.style,v=e.nodeType&&S(e),m=L.get(e,"fxshow");r.queue||(a=n._queueHooks(e,"fx"),null==a.unqueued&&(a.unqueued=0,f=a.empty.fire,a.empty.fire=function(){a.unqueued||f()}),a.unqueued++,h.always(function(){h.always(function(){a.unqueued--,n.queue(e,"fx").length||a.empty.fire()})})),1===e.nodeType&&("height"in t||"width"in t)&&(r.overflow=[d.overflow,d.overflowX,d.overflowY],l=n.css(e,"display"),c="none"===l?L.get(e,"olddisplay")||tb(e.nodeName):l,"inline"===c&&"none"===n.css(e,"float")&&(d.display="inline-block")),r.overflow&&(d.overflow="hidden",h.always(function(){d.overflow=r.overflow[0],d.overflowX=r.overflow[1],d.overflowY=r.overflow[2]}));for(i in t)if(s=t[i],Nb.exec(s)){if(delete t[i],o=o||"toggle"===s,s===(v?"hide":"show")){if("show"!==s||!m||void 0===m[i])continue;v=!0}p[i]=m&&m[i]||n.style(e,i)}else l=void 0;if(n.isEmptyObject(p))"inline"===("none"===l?tb(e.nodeName):l)&&(d.display=l);else{m?"hidden"in m&&(v=m.hidden):m=L.access(e,"fxshow",{}),o&&(m.hidden=!v),v?n(e).show():h.done(function(){n(e).hide()}),h.done(function(){var t;L.remove(e,"fxshow");for(t in p)n.style(e,t,p[t])});for(i in p)u=Ub(v?m[i]:0,i,h),i in m||(m[i]=u.start,v&&(u.end=u.start,u.start="width"===i||"height"===i?1:0))}}function Wb(e,t){var r,i,s,o,u;for(r in e)if(i=n.camelCase(r),s=t[i],o=e[r],n.isArray(o)&&(s=o[1],o=e[r]=o[0]),r!==i&&(e[i]=o,delete e[r]),u=n.cssHooks[i],u&&"expand"in u){o=u.expand(o),delete e[i];for(r in o)r in e||(e[r]=o[r],t[r]=s)}else t[i]=s}function Xb(e,t,r){var i,s,o=0,u=Qb.length,a=n.Deferred().always(function(){delete f.elem}),f=function(){if(s)return!1;for(var t=Lb||Sb(),n=Math.max(0,l.startTime+l.duration-t),r=n/l.duration||0,i=1-r,o=0,u=l.tweens.length;u>o;o++)l.tweens[o].run(i);return a.notifyWith(e,[l,i,n]),1>i&&u?n:(a.resolveWith(e,[l]),!1)},l=a.promise({elem:e,props:n.extend({},t),opts:n.extend(!0,{specialEasing:{}},r),originalProperties:t,originalOptions:r,startTime:Lb||Sb(),duration:r.duration,tweens:[],createTween:function(t,r){var i=n.Tween(e,l.opts,t,r,l.opts.specialEasing[t]||l.opts.easing);return l.tweens.push(i),i},stop:function(t){var n=0,r=t?l.tweens.length:0;if(s)return this;for(s=!0;r>n;n++)l.tweens[n].run(1);return t?a.resolveWith(e,[l,t]):a.rejectWith(e,[l,t]),this}}),c=l.props;for(Wb(c,l.opts.specialEasing);u>o;o++)if(i=Qb[o].call(l,e,c,l.opts))return i;return n.map(c,Ub,l),n.isFunction(l.opts.start)&&l.opts.start.call(e,l),n.fx.timer(n.extend(f,{elem:e,anim:l,queue:l.opts.queue})),l.progress(l.opts.progress).done(l.opts.done,l.opts.complete).fail(l.opts.fail).always(l.opts.always)}function qc(e){return function(t,r){"string"!=typeof t&&(r=t,t="*");var i,s=0,o=t.toLowerCase().match(E)||[];if(n.isFunction(r))while(i=o[s++])"+"===i[0]?(i=i.slice(1)||"*",(e[i]=e[i]||[]).unshift(r)):(e[i]=e[i]||[]).push(r)}}function rc(e,t,r,i){function u(l){var h;return s[l]=!0,n.each(e[l]||[],function(e,n){var a=n(t,r,i);return"string"!=typeof a||o||s[a]?o?!(h=a):void 0:(t.dataTypes.unshift(a),u(a),!1)}),h}var s={},o=e===mc;return u(t.dataTypes[0])||!s["*"]&&u("*")}function sc(e,t){var r,i,s=n.ajaxSettings.flatOptions||{};for(r in t)void 0!==t[r]&&((s[r]?e:i||(i={}))[r]=t[r]);return i&&n.extend(!0,e,i),e}function tc(e,t,n){var r,i,s,o,u=e.contents,a=e.dataTypes;while("*"===a[0])a.shift(),void 0===r&&(r=e.mimeType||t.getResponseHeader("Content-Type"));if(r)for(i in u)if(u[i]&&u[i].test(r)){a.unshift(i);break}if(a[0]in n)s=a[0];else{for(i in n){if(!a[0]||e.converters[i+" "+a[0]]){s=i;break}o||(o=i)}s=s||o}return s?(s!==a[0]&&a.unshift(s),n[s]):void 0}function uc(e,t,n,r){var i,s,o,u,a,f={},l=e.dataTypes.slice();if(l[1])for(o in e.converters)f[o.toLowerCase()]=e.converters[o];s=l.shift();while(s)if(e.responseFields[s]&&(n[e.responseFields[s]]=t),!a&&r&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),a=s,s=l.shift())if("*"===s)s=a;else if("*"!==a&&a!==s){if(o=f[a+" "+s]||f["* "+s],!o)for(i in f)if(u=i.split(" "),u[1]===s&&(o=f[a+" "+u[0]]||f["* "+u[0]])){o===!0?o=f[i]:f[i]!==!0&&(s=u[0],l.unshift(u[1]));break}if(o!==!0)if(o&&e["throws"])t=o(t);else try{t=o(t)}catch(c){return{state:"parsererror",error:o?c:"No conversion from "+a+" to "+s}}}return{state:"success",data:t}}function Ac(e,t,r,i){var s;if(n.isArray(t))n.each(t,function(t,n){r||wc.test(e)?i(e,n):Ac(e+"["+("object"==typeof n?t:"")+"]",n,r,i)});else if(r||"object"!==n.type(t))i(e,t);else for(s in t)Ac(e+"["+s+"]",t[s],r,i)}function Jc(e){return n.isWindow(e)?e:9===e.nodeType&&e.defaultView}var c=[],d=c.slice,e=c.concat,f=c.push,g=c.indexOf,h={},i=h.toString,j=h.hasOwnProperty,k={},l=a.document,m="2.1.3",n=function(e,t){return new n.fn.init(e,t)},o=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,p=/^-ms-/,q=/-([\da-z])/gi,r=function(e,t){return t.toUpperCase()};n.fn=n.prototype={jquery:m,constructor:n,selector:"",length:0,toArray:function(){return d.call(this)},get:function(e){return null!=e?0>e?this[e+this.length]:this[e]:d.call(this)},pushStack:function(e){var t=n.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e,t){return n.each(this,e,t)},map:function(e){return this.pushStack(n.map(this,function(t,n){return e.call(t,n,t)}))},slice:function(){return this.pushStack(d.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(0>e?t:0);return this.pushStack(n>=0&&t>n?[this[n]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:f,sort:c.sort,splice:c.splice},n.extend=n.fn.extend=function(){var e,t,r,i,s,o,u=arguments[0]||{},a=1,f=arguments.length,l=!1;for("boolean"==typeof u&&(l=u,u=arguments[a]||{},a++),"object"==typeof u||n.isFunction(u)||(u={}),a===f&&(u=this,a--);f>a;a++)if(null!=(e=arguments[a]))for(t in e)r=u[t],i=e[t],u!==i&&(l&&i&&(n.isPlainObject(i)||(s=n.isArray(i)))?(s?(s=!1,o=r&&n.isArray(r)?r:[]):o=r&&n.isPlainObject(r)?r:{},u[t]=n.extend(l,o,i)):void 0!==i&&(u[t]=i));return u},n.extend({expando:"jQuery"+(m+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isFunction:function(e){return"function"===n.type(e)},isArray:Array.isArray,isWindow:function(e){return null!=e&&e===e.window},isNumeric:function(e){return!n.isArray(e)&&e-parseFloat(e)+1>=0},isPlainObject:function(e){return"object"!==n.type(e)||e.nodeType||n.isWindow(e)?!1:e.constructor&&!j.call(e.constructor.prototype,"isPrototypeOf")?!1:!0},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},type:function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?h[i.call(e)]||"object":typeof e},globalEval:function(a){var b,c=eval;a=n.trim(a),a&&(1===a.indexOf("use strict")?(b=l.createElement("script"),b.text=a,l.head.appendChild(b).parentNode.removeChild(b)):c(a))},camelCase:function(e){return e.replace(p,"ms-").replace(q,r)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t,n){var r,i=0,o=e.length,u=s(e);if(n){if(u){for(;o>i;i++)if(r=t.apply(e[i],n),r===!1)break}else for(i in e)if(r=t.apply(e[i],n),r===!1)break}else if(u){for(;o>i;i++)if(r=t.call(e[i],i,e[i]),r===!1)break}else for(i in e)if(r=t.call(e[i],i,e[i]),r===!1)break;return e},trim:function(e){return null==e?"":(e+"").replace(o,"")},makeArray:function(e,t){var r=t||[];return null!=e&&(s(Object(e))?n.merge(r,"string"==typeof e?[e]:e):f.call(r,e)),r},inArray:function(e,t,n){return null==t?-1:g.call(t,e,n)},merge:function(e,t){for(var n=+t.length,r=0,i=e.length;n>r;r++)e[i++]=t[r];return e.length=i,e},grep:function(e,t,n){for(var r,i=[],s=0,o=e.length,u=!n;o>s;s++)r=!t(e[s],s),r!==u&&i.push(e[s]);return i},map:function(t,n,r){var i,o=0,u=t.length,a=s(t),f=[];if(a)for(;u>o;o++)i=n(t[o],o,r),null!=i&&f.push(i);else for(o in t)i=n(t[o],o,r),null!=i&&f.push(i);return e.apply([],f)},guid:1,proxy:function(e,t){var r,i,s;return"string"==typeof t&&(r=e[t],t=e,e=r),n.isFunction(e)?(i=d.call(arguments,2),s=function(){return e.apply(t||this,i.concat(d.call(arguments)))},s.guid=e.guid=e.guid||n.guid++,s):void 0},now:Date.now,support:k}),n.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(e,t){h["[object "+t+"]"]=t.toLowerCase()});var t=function(e){function ot(e,t,r,i){var s,u,f,l,c,d,g,y,S,x;if((t?t.ownerDocument||t:E)!==p&&h(t),t=t||p,r=r||[],l=t.nodeType,"string"!=typeof e||!e||1!==l&&9!==l&&11!==l)return r;if(!i&&v){if(11!==l&&(s=Z.exec(e)))if(f=s[1]){if(9===l){if(u=t.getElementById(f),!u||!u.parentNode)return r;if(u.id===f)return r.push(u),r}else if(t.ownerDocument&&(u=t.ownerDocument.getElementById(f))&&b(t,u)&&u.id===f)return r.push(u),r}else{if(s[2])return D.apply(r,t.getElementsByTagName(e)),r;if((f=s[3])&&n.getElementsByClassName)return D.apply(r,t.getElementsByClassName(f)),r}if(n.qsa&&(!m||!m.test(e))){if(y=g=w,S=t,x=1!==l&&e,1===l&&"object"!==t.nodeName.toLowerCase()){d=o(e),(g=t.getAttribute("id"))?y=g.replace(tt,"\\$&"):t.setAttribute("id",y),y="[id='"+y+"'] ",c=d.length;while(c--)d[c]=y+gt(d[c]);S=et.test(e)&&vt(t.parentNode)||t,x=d.join(",")}if(x)try{return D.apply(r,S.querySelectorAll(x)),r}catch(T){}finally{g||t.removeAttribute("id")}}}return a(e.replace(z,"$1"),t,r,i)}function ut(){function t(n,i){return e.push(n+" ")>r.cacheLength&&delete t[e.shift()],t[n+" "]=i}var e=[];return t}function at(e){return e[w]=!0,e}function ft(e){var t=p.createElement("div");try{return!!e(t)}catch(n){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function lt(e,t){var n=e.split("|"),i=e.length;while(i--)r.attrHandle[n[i]]=t}function ct(e,t){var n=t&&e,r=n&&1===e.nodeType&&1===t.nodeType&&(~t.sourceIndex||L)-(~e.sourceIndex||L);if(r)return r;if(n)while(n=n.nextSibling)if(n===t)return-1;return e?1:-1}function ht(e){return function(t){var n=t.nodeName.toLowerCase();return"input"===n&&t.type===e}}function pt(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function dt(e){return at(function(t){return t=+t,at(function(n,r){var i,s=e([],n.length,t),o=s.length;while(o--)n[i=s[o]]&&(n[i]=!(r[i]=n[i]))})})}function vt(e){return e&&"undefined"!=typeof e.getElementsByTagName&&e}function mt(){}function gt(e){for(var t=0,n=e.length,r="";n>t;t++)r+=e[t].value;return r}function yt(e,t,n){var r=t.dir,i=n&&"parentNode"===r,s=x++;return t.first?function(t,n,s){while(t=t[r])if(1===t.nodeType||i)return e(t,n,s)}:function(t,n,o){var u,a,f=[S,s];if(o){while(t=t[r])if((1===t.nodeType||i)&&e(t,n,o))return!0}else while(t=t[r])if(1===t.nodeType||i){if(a=t[w]||(t[w]={}),(u=a[r])&&u[0]===S&&u[1]===s)return f[2]=u[2];if(a[r]=f,f[2]=e(t,n,o))return!0}}}function bt(e){return e.length>1?function(t,n,r){var i=e.length;while(i--)if(!e[i](t,n,r))return!1;return!0}:e[0]}function wt(e,t,n){for(var r=0,i=t.length;i>r;r++)ot(e,t[r],n);return n}function Et(e,t,n,r,i){for(var s,o=[],u=0,a=e.length,f=null!=t;a>u;u++)(s=e[u])&&(!n||n(s,r,i))&&(o.push(s),f&&t.push(u));return o}function St(e,t,n,r,i,s){return r&&!r[w]&&(r=St(r)),i&&!i[w]&&(i=St(i,s)),at(function(s,o,u,a){var f,l,c,h=[],p=[],d=o.length,v=s||wt(t||"*",u.nodeType?[u]:u,[]),m=!e||!s&&t?v:Et(v,h,e,u,a),g=n?i||(s?e:d||r)?[]:o:m;if(n&&n(m,g,u,a),r){f=Et(g,p),r(f,[],u,a),l=f.length;while(l--)(c=f[l])&&(g[p[l]]=!(m[p[l]]=c))}if(s){if(i||e){if(i){f=[],l=g.length;while(l--)(c=g[l])&&f.push(m[l]=c);i(null,g=[],f,a)}l=g.length;while(l--)(c=g[l])&&(f=i?H(s,c):h[l])>-1&&(s[f]=!(o[f]=c))}}else g=Et(g===o?g.splice(d,g.length):g),i?i(null,o,g,a):D.apply(o,g)})}function xt(e){for(var t,n,i,s=e.length,o=r.relative[e[0].type],u=o||r.relative[" "],a=o?1:0,l=yt(function(e){return e===t},u,!0),c=yt(function(e){return H(t,e)>-1},u,!0),h=[function(e,n,r){var i=!o&&(r||n!==f)||((t=n).nodeType?l(e,n,r):c(e,n,r));return t=null,i}];s>a;a++)if(n=r.relative[e[a].type])h=[yt(bt(h),n)];else{if(n=r.filter[e[a].type].apply(null,e[a].matches),n[w]){for(i=++a;s>i;i++)if(r.relative[e[i].type])break;return St(a>1&&bt(h),a>1&&gt(e.slice(0,a-1).concat({value:" "===e[a-2].type?"*":""})).replace(z,"$1"),n,i>a&&xt(e.slice(a,i)),s>i&&xt(e=e.slice(i)),s>i&&gt(e))}h.push(n)}return bt(h)}function Tt(e,t){var n=t.length>0,i=e.length>0,s=function(s,o,u,a,l){var c,h,d,v=0,m="0",g=s&&[],y=[],b=f,w=s||i&&r.find.TAG("*",l),E=S+=null==b?1:Math.random()||.1,x=w.length;for(l&&(f=o!==p&&o);m!==x&&null!=(c=w[m]);m++){if(i&&c){h=0;while(d=e[h++])if(d(c,o,u)){a.push(c);break}l&&(S=E)}n&&((c=!d&&c)&&v--,s&&g.push(c))}if(v+=m,n&&m!==v){h=0;while(d=t[h++])d(g,y,o,u);if(s){if(v>0)while(m--)g[m]||y[m]||(y[m]=M.call(a));y=Et(y)}D.apply(a,y),l&&!s&&y.length>0&&v+t.length>1&&ot.uniqueSort(a)}return l&&(S=E,f=b),g};return n?at(s):s}var t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w="sizzle"+1*new Date,E=e.document,S=0,x=0,T=ut(),N=ut(),C=ut(),k=function(e,t){return e===t&&(c=!0),0},L=1<<31,A={}.hasOwnProperty,O=[],M=O.pop,_=O.push,D=O.push,P=O.slice,H=function(e,t){for(var n=0,r=e.length;r>n;n++)if(e[n]===t)return n;return-1},B="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",j="[\\x20\\t\\r\\n\\f]",F="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",I=F.replace("w","w#"),q="\\["+j+"*("+F+")(?:"+j+"*([*^$|!~]?=)"+j+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+I+"))|)"+j+"*\\]",R=":("+F+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+q+")*)|.*)\\)|)",U=new RegExp(j+"+","g"),z=new RegExp("^"+j+"+|((?:^|[^\\\\])(?:\\\\.)*)"+j+"+$","g"),W=new RegExp("^"+j+"*,"+j+"*"),X=new RegExp("^"+j+"*([>+~]|"+j+")"+j+"*"),V=new RegExp("="+j+"*([^\\]'\"]*?)"+j+"*\\]","g"),$=new RegExp(R),J=new RegExp("^"+I+"$"),K={ID:new RegExp("^#("+F+")"),CLASS:new RegExp("^\\.("+F+")"),TAG:new RegExp("^("+F.replace("w","w*")+")"),ATTR:new RegExp("^"+q),PSEUDO:new RegExp("^"+R),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+j+"*(even|odd|(([+-]|)(\\d*)n|)"+j+"*(?:([+-]|)"+j+"*(\\d+)|))"+j+"*\\)|)","i"),bool:new RegExp("^(?:"+B+")$","i"),needsContext:new RegExp("^"+j+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+j+"*((?:-\\d)?\\d*)"+j+"*\\)|)(?=[^-]|$)","i")},Q=/^(?:input|select|textarea|button)$/i,G=/^h\d$/i,Y=/^[^{]+\{\s*\[native \w/,Z=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,et=/[+~]/,tt=/'|\\/g,nt=new RegExp("\\\\([\\da-f]{1,6}"+j+"?|("+j+")|.)","ig"),rt=function(e,t,n){var r="0x"+t-65536;return r!==r||n?t:0>r?String.fromCharCode(r+65536):String.fromCharCode(r>>10|55296,1023&r|56320)},it=function(){h()};try{D.apply(O=P.call(E.childNodes),E.childNodes),O[E.childNodes.length].nodeType}catch(st){D={apply:O.length?function(e,t){_.apply(e,P.call(t))}:function(e,t){var n=e.length,r=0;while(e[n++]=t[r++]);e.length=n-1}}}n=ot.support={},s=ot.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return t?"HTML"!==t.nodeName:!1},h=ot.setDocument=function(e){var t,i,o=e?e.ownerDocument||e:E;return o!==p&&9===o.nodeType&&o.documentElement?(p=o,d=o.documentElement,i=o.defaultView,i&&i!==i.top&&(i.addEventListener?i.addEventListener("unload",it,!1):i.attachEvent&&i.attachEvent("onunload",it)),v=!s(o),n.attributes=ft(function(e){return e.className="i",!e.getAttribute("className")}),n.getElementsByTagName=ft(function(e){return e.appendChild(o.createComment("")),!e.getElementsByTagName("*").length}),n.getElementsByClassName=Y.test(o.getElementsByClassName),n.getById=ft(function(e){return d.appendChild(e).id=w,!o.getElementsByName||!o.getElementsByName(w).length}),n.getById?(r.find.ID=function(e,t){if("undefined"!=typeof t.getElementById&&v){var n=t.getElementById(e);return n&&n.parentNode?[n]:[]}},r.filter.ID=function(e){var t=e.replace(nt,rt);return function(e){return e.getAttribute("id")===t}}):(delete r.find.ID,r.filter.ID=function(e){var t=e.replace(nt,rt);return function(e){var n="undefined"!=typeof e.getAttributeNode&&e.getAttributeNode("id");return n&&n.value===t}}),r.find.TAG=n.getElementsByTagName?function(e,t){return"undefined"!=typeof t.getElementsByTagName?t.getElementsByTagName(e):n.qsa?t.querySelectorAll(e):void 0}:function(e,t){var n,r=[],i=0,s=t.getElementsByTagName(e);if("*"===e){while(n=s[i++])1===n.nodeType&&r.push(n);return r}return s},r.find.CLASS=n.getElementsByClassName&&function(e,t){return v?t.getElementsByClassName(e):void 0},g=[],m=[],(n.qsa=Y.test(o.querySelectorAll))&&(ft(function(e){d.appendChild(e).innerHTML="<a id='"+w+"'></a><select id='"+w+"-\f]' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&m.push("[*^$]="+j+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||m.push("\\["+j+"*(?:value|"+B+")"),e.querySelectorAll("[id~="+w+"-]").length||m.push("~="),e.querySelectorAll(":checked").length||m.push(":checked"),e.querySelectorAll("a#"+w+"+*").length||m.push(".#.+[+~]")}),ft(function(e){var t=o.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&m.push("name"+j+"*[*^$|!~]?="),e.querySelectorAll(":enabled").length||m.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),m.push(",.*:")})),(n.matchesSelector=Y.test(y=d.matches||d.webkitMatchesSelector||d.mozMatchesSelector||d.oMatchesSelector||d.msMatchesSelector))&&ft(function(e){n.disconnectedMatch=y.call(e,"div"),y.call(e,"[s!='']:x"),g.push("!=",R)}),m=m.length&&new RegExp(m.join("|")),g=g.length&&new RegExp(g.join("|")),t=Y.test(d.compareDocumentPosition),b=t||Y.test(d.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,r=t&&t.parentNode;return e===r||!!r&&1===r.nodeType&&!!(n.contains?n.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition(r))}:function(e,t){if(t)while(t=t.parentNode)if(t===e)return!0;return!1},k=t?function(e,t){if(e===t)return c=!0,0;var r=!e.compareDocumentPosition-!t.compareDocumentPosition;return r?r:(r=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1,1&r||!n.sortDetached&&t.compareDocumentPosition(e)===r?e===o||e.ownerDocument===E&&b(E,e)?-1:t===o||t.ownerDocument===E&&b(E,t)?1:l?H(l,e)-H(l,t):0:4&r?-1:1)}:function(e,t){if(e===t)return c=!0,0;var n,r=0,i=e.parentNode,s=t.parentNode,u=[e],a=[t];if(!i||!s)return e===o?-1:t===o?1:i?-1:s?1:l?H(l,e)-H(l,t):0;if(i===s)return ct(e,t);n=e;while(n=n.parentNode)u.unshift(n);n=t;while(n=n.parentNode)a.unshift(n);while(u[r]===a[r])r++;return r?ct(u[r],a[r]):u[r]===E?-1:a[r]===E?1:0},o):p},ot.matches=function(e,t){return ot(e,null,null,t)},ot.matchesSelector=function(e,t){if((e.ownerDocument||e)!==p&&h(e),t=t.replace(V,"='$1']"),!(!n.matchesSelector||!v||g&&g.test(t)||m&&m.test(t)))try{var r=y.call(e,t);if(r||n.disconnectedMatch||e.document&&11!==e.document.nodeType)return r}catch(i){}return ot(t,p,null,[e]).length>0},ot.contains=function(e,t){return(e.ownerDocument||e)!==p&&h(e),b(e,t)},ot.attr=function(e,t){(e.ownerDocument||e)!==p&&h(e);var i=r.attrHandle[t.toLowerCase()],s=i&&A.call(r.attrHandle,t.toLowerCase())?i(e,t,!v):void 0;return void 0!==s?s:n.attributes||!v?e.getAttribute(t):(s=e.getAttributeNode(t))&&s.specified?s.value:null},ot.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},ot.uniqueSort=function(e){var t,r=[],i=0,s=0;if(c=!n.detectDuplicates,l=!n.sortStable&&e.slice(0),e.sort(k),c){while(t=e[s++])t===e[s]&&(i=r.push(s));while(i--)e.splice(r[i],1)}return l=null,e},i=ot.getText=function(e){var t,n="",r=0,s=e.nodeType;if(s){if(1===s||9===s||11===s){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=i(e)}else if(3===s||4===s)return e.nodeValue}else while(t=e[r++])n+=i(t);return n},r=ot.selectors={cacheLength:50,createPseudo:at,match:K,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(nt,rt),e[3]=(e[3]||e[4]||e[5]||"").replace(nt,rt),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||ot.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&ot.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return K.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&$.test(n)&&(t=o(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(nt,rt).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=T[e+" "];return t||(t=new RegExp("(^|"+j+")"+e+"("+j+"|$)"))&&T(e,function(e){return t.test("string"==typeof e.className&&e.className||"undefined"!=typeof e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(e,t,n){return function(r){var i=ot.attr(r,e);return null==i?"!="===t:t?(i+="","="===t?i===n:"!="===t?i!==n:"^="===t?n&&0===i.indexOf(n):"*="===t?n&&i.indexOf(n)>-1:"$="===t?n&&i.slice(-n.length)===n:"~="===t?(" "+i.replace(U," ")+" ").indexOf(n)>-1:"|="===t?i===n||i.slice(0,n.length+1)===n+"-":!1):!0}},CHILD:function(e,t,n,r,i){var s="nth"!==e.slice(0,3),o="last"!==e.slice(-4),u="of-type"===t;return 1===r&&0===i?function(e){return!!e.parentNode}:function(t,n,a){var f,l,c,h,p,d,v=s!==o?"nextSibling":"previousSibling",m=t.parentNode,g=u&&t.nodeName.toLowerCase(),y=!a&&!u;if(m){if(s){while(v){c=t;while(c=c[v])if(u?c.nodeName.toLowerCase()===g:1===c.nodeType)return!1;d=v="only"===e&&!d&&"nextSibling"}return!0}if(d=[o?m.firstChild:m.lastChild],o&&y){l=m[w]||(m[w]={}),f=l[e]||[],p=f[0]===S&&f[1],h=f[0]===S&&f[2],c=p&&m.childNodes[p];while(c=++p&&c&&c[v]||(h=p=0)||d.pop())if(1===c.nodeType&&++h&&c===t){l[e]=[S,p,h];break}}else if(y&&(f=(t[w]||(t[w]={}))[e])&&f[0]===S)h=f[1];else while(c=++p&&c&&c[v]||(h=p=0)||d.pop())if((u?c.nodeName.toLowerCase()===g:1===c.nodeType)&&++h&&(y&&((c[w]||(c[w]={}))[e]=[S,h]),c===t))break;return h-=i,h===r||h%r===0&&h/r>=0}}},PSEUDO:function(e,t){var n,i=r.pseudos[e]||r.setFilters[e.toLowerCase()]||ot.error("unsupported pseudo: "+e);return i[w]?i(t):i.length>1?(n=[e,e,"",t],r.setFilters.hasOwnProperty(e.toLowerCase())?at(function(e,n){var r,s=i(e,t),o=s.length;while(o--)r=H(e,s[o]),e[r]=!(n[r]=s[o])}):function(e){return i(e,0,n)}):i}},pseudos:{not:at(function(e){var t=[],n=[],r=u(e.replace(z,"$1"));return r[w]?at(function(e,t,n,i){var s,o=r(e,null,i,[]),u=e.length;while(u--)(s=o[u])&&(e[u]=!(t[u]=s))}):function(e,i,s){return t[0]=e,r(t,null,s,n),t[0]=null,!n.pop()}}),has:at(function(e){return function(t){return ot(e,t).length>0}}),contains:at(function(e){return e=e.replace(nt,rt),function(t){return(t.textContent||t.innerText||i(t)).indexOf(e)>-1}}),lang:at(function(e){return J.test(e||"")||ot.error("unsupported lang: "+e),e=e.replace(nt,rt).toLowerCase(),function(t){var n;do if(n=v?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return n=n.toLowerCase(),n===e||0===n.indexOf(e+"-");while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===d},focus:function(e){return e===p.activeElement&&(!p.hasFocus||p.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return e.disabled===!1},disabled:function(e){return e.disabled===!0},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!r.pseudos.empty(e)},header:function(e){return G.test(e.nodeName)},input:function(e){return Q.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:dt(function(){return[0]}),last:dt(function(e,t){return[t-1]}),eq:dt(function(e,t,n){return[0>n?n+t:n]}),even:dt(function(e,t){for(var n=0;t>n;n+=2)e.push(n);return e}),odd:dt(function(e,t){for(var n=1;t>n;n+=2)e.push(n);return e}),lt:dt(function(e,t,n){for(var r=0>n?n+t:n;--r>=0;)e.push(r);return e}),gt:dt(function(e,t,n){for(var r=0>n?n+t:n;++r<t;)e.push(r);return e})}},r.pseudos.nth=r.pseudos.eq;for(t in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})r.pseudos[t]=ht(t);for(t in{submit:!0,reset:!0})r.pseudos[t]=pt(t);return mt.prototype=r.filters=r.pseudos,r.setFilters=new mt,o=ot.tokenize=function(e,t){var n,i,s,o,u,a,f,l=N[e+" "];if(l)return t?0:l.slice(0);u=e,a=[],f=r.preFilter;while(u){(!n||(i=W.exec(u)))&&(i&&(u=u.slice(i[0].length)||u),a.push(s=[])),n=!1,(i=X.exec(u))&&(n=i.shift(),s.push({value:n,type:i[0].replace(z," ")}),u=u.slice(n.length));for(o in r.filter)!(i=K[o].exec(u))||f[o]&&!(i=f[o](i))||(n=i.shift(),s.push({value:n,type:o,matches:i}),u=u.slice(n.length));if(!n)break}return t?u.length:u?ot.error(e):N(e,a).slice(0)},u=ot.compile=function(e,t){var n,r=[],i=[],s=C[e+" "];if(!s){t||(t=o(e)),n=t.length;while(n--)s=xt(t[n]),s[w]?r.push(s):i.push(s);s=C(e,Tt(i,r)),s.selector=e}return s},a=ot.select=function(e,t,i,s){var a,f,l,c,h,p="function"==typeof e&&e,d=!s&&o(e=p.selector||e);if(i=i||[],1===d.length){if(f=d[0]=d[0].slice(0),f.length>2&&"ID"===(l=f[0]).type&&n.getById&&9===t.nodeType&&v&&r.relative[f[1].type]){if(t=(r.find.ID(l.matches[0].replace(nt,rt),t)||[])[0],!t)return i;p&&(t=t.parentNode),e=e.slice(f.shift().value.length)}a=K.needsContext.test(e)?0:f.length;while(a--){if(l=f[a],r.relative[c=l.type])break;if((h=r.find[c])&&(s=h(l.matches[0].replace(nt,rt),et.test(f[0].type)&&vt(t.parentNode)||t))){if(f.splice(a,1),e=s.length&&gt(f),!e)return D.apply(i,s),i;break}}}return(p||u(e,d))(s,t,!v,i,et.test(e)&&vt(t.parentNode)||t),i},n.sortStable=w.split("").sort(k).join("")===w,n.detectDuplicates=!!c,h(),n.sortDetached=ft(function(e){return 1&e.compareDocumentPosition(p.createElement("div"))}),ft(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||lt("type|href|height|width",function(e,t,n){return n?void 0:e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),n.attributes&&ft(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||lt("value",function(e,t,n){return n||"input"!==e.nodeName.toLowerCase()?void 0:e.defaultValue}),ft(function(e){return null==e.getAttribute("disabled")})||lt(B,function(e,t,n){var r;return n?void 0:e[t]===!0?t.toLowerCase():(r=e.getAttributeNode(t))&&r.specified?r.value:null}),ot}(a);n.find=t,n.expr=t.selectors,n.expr[":"]=n.expr.pseudos,n.unique=t.uniqueSort,n.text=t.getText,n.isXMLDoc=t.isXML,n.contains=t.contains;var u=n.expr.match.needsContext,v=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,w=/^.[^:#\[\.,]*$/;n.filter=function(e,t,r){var i=t[0];return r&&(e=":not("+e+")"),1===t.length&&1===i.nodeType?n.find.matchesSelector(i,e)?[i]:[]:n.find.matches(e,n.grep(t,function(e){return 1===e.nodeType}))},n.fn.extend({find:function(e){var t,r=this.length,i=[],s=this;if("string"!=typeof e)return this.pushStack(n(e).filter(function(){for(t=0;r>t;t++)if(n.contains(s[t],this))return!0}));for(t=0;r>t;t++)n.find(e,s[t],i);return i=this.pushStack(r>1?n.unique(i):i),i.selector=this.selector?this.selector+" "+e:e,i},filter:function(e){return this.pushStack(x(this,e||[],!1))},not:function(e){return this.pushStack(x(this,e||[],!0))},is:function(e){return!!x(this,"string"==typeof e&&u.test(e)?n(e):e||[],!1).length}});var y,z=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,A=n.fn.init=function(e,t){var r,i;if(!e)return this;if("string"==typeof e){if(r="<"===e[0]&&">"===e[e.length-1]&&e.length>=3?[null,e,null]:z.exec(e),!r||!r[1]&&t)return!t||t.jquery?(t||y).find(e):this.constructor(t).find(e);if(r[1]){if(t=t instanceof n?t[0]:t,n.merge(this,n.parseHTML(r[1],t&&t.nodeType?t.ownerDocument||t:l,!0)),v.test(r[1])&&n.isPlainObject(t))for(r in t)n.isFunction(this[r])?this[r](t[r]):this.attr(r,t[r]);return this}return i=l.getElementById(r[2]),i&&i.parentNode&&(this.length=1,this[0]=i),this.context=l,this.selector=e,this}return e.nodeType?(this.context=this[0]=e,this.length=1,this):n.isFunction(e)?"undefined"!=typeof y.ready?y.ready(e):e(n):(void 0!==e.selector&&(this.selector=e.selector,this.context=e.context),n.makeArray(e,this))};A.prototype=n.fn,y=n(l);var B=/^(?:parents|prev(?:Until|All))/,C={children:!0,contents:!0,next:!0,prev:!0};n.extend({dir:function(e,t,r){var i=[],s=void 0!==r;while((e=e[t])&&9!==e.nodeType)if(1===e.nodeType){if(s&&n(e).is(r))break;i.push(e)}return i},sibling:function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n}}),n.fn.extend({has:function(e){var t=n(e,this),r=t.length;return this.filter(function(){for(var e=0;r>e;e++)if(n.contains(this,t[e]))return!0})},closest:function(e,t){for(var r,i=0,s=this.length,o=[],a=u.test(e)||"string"!=typeof e?n(e,t||this.context):0;s>i;i++)for(r=this[i];r&&r!==t;r=r.parentNode)if(r.nodeType<11&&(a?a.index(r)>-1:1===r.nodeType&&n.find.matchesSelector(r,e))){o.push(r);break}return this.pushStack(o.length>1?n.unique(o):o)},index:function(e){return e?"string"==typeof e?g.call(n(e),this[0]):g.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(n.unique(n.merge(this.get(),n(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),n.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return n.dir(e,"parentNode")},parentsUntil:function(e,t,r){return n.dir(e,"parentNode",r)},next:function(e){return D(e,"nextSibling")},prev:function(e){return D(e,"previousSibling")},nextAll:function(e){return n.dir(e,"nextSibling")},prevAll:function(e){return n.dir(e,"previousSibling")},nextUntil:function(e,t,r){return n.dir(e,"nextSibling",r)},prevUntil:function(e,t,r){return n.dir(e,"previousSibling",r)},siblings:function(e){return n.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return n.sibling(e.firstChild)},contents:function(e){return e.contentDocument||n.merge([],e.childNodes)}},function(e,t){n.fn[e]=function(r,i){var s=n.map(this,t,r);return"Until"!==e.slice(-5)&&(i=r),i&&"string"==typeof i&&(s=n.filter(i,s)),this.length>1&&(C[e]||n.unique(s),B.test(e)&&s.reverse()),this.pushStack(s)}});var E=/\S+/g,F={};n.Callbacks=function(e){e="string"==typeof e?F[e]||G(e):n.extend({},e);var t,r,i,s,o,u,a=[],f=!e.once&&[],l=function(n){for(t=e.memory&&n,r=!0,u=s||0,s=0,o=a.length,i=!0;a&&o>u;u++)if(a[u].apply(n[0],n[1])===!1&&e.stopOnFalse){t=!1;break}i=!1,a&&(f?f.length&&l(f.shift()):t?a=[]:c.disable())},c={add:function(){if(a){var r=a.length;!function u(t){n.each(t,function(t,r){var i=n.type(r);"function"===i?e.unique&&c.has(r)||a.push(r):r&&r.length&&"string"!==i&&u(r)})}(arguments),i?o=a.length:t&&(s=r,l(t))}return this},remove:function(){return a&&n.each(arguments,function(e,t){var r;while((r=n.inArray(t,a,r))>-1)a.splice(r,1),i&&(o>=r&&o--,u>=r&&u--)}),this},has:function(e){return e?n.inArray(e,a)>-1:!!a&&!!a.length},empty:function(){return a=[],o=0,this},disable:function(){return a=f=t=void 0,this},disabled:function(){return!a},lock:function(){return f=void 0,t||c.disable(),this},locked:function(){return!f},fireWith:function(e,t){return!a||r&&!f||(t=t||[],t=[e,t.slice?t.slice():t],i?f.push(t):l(t)),this},fire:function(){return c.fireWith(this,arguments),this},fired:function(){return!!r}};return c},n.extend({Deferred:function(e){var t=[["resolve","done",n.Callbacks("once memory"),"resolved"],["reject","fail",n.Callbacks("once memory"),"rejected"],["notify","progress",n.Callbacks("memory")]],r="pending",i={state:function(){return r},always:function(){return s.done(arguments).fail(arguments),this},then:function(){var e=arguments;return n.Deferred(function(r){n.each(t,function(t,o){var u=n.isFunction(e[t])&&e[t];s[o[1]](function(){var e=u&&u.apply(this,arguments);e&&n.isFunction(e.promise)?e.promise().done(r.resolve).fail(r.reject).progress(r.notify):r[o[0]+"With"](this===i?r.promise():this,u?[e]:arguments)})}),e=null}).promise()},promise:function(e){return null!=e?n.extend(e,i):i}},s={};return i.pipe=i.then,n.each(t,function(e,n){var o=n[2],u=n[3];i[n[1]]=o.add,u&&o.add(function(){r=u},t[1^e][2].disable,t[2][2].lock),s[n[0]]=function(){return s[n[0]+"With"](this===s?i:this,arguments),this},s[n[0]+"With"]=o.fireWith}),i.promise(s),e&&e.call(s,s),s},when:function(e){var t=0,r=d.call(arguments),i=r.length,s=1!==i||e&&n.isFunction(e.promise)?i:0,o=1===s?e:n.Deferred(),u=function(e,t,n){return function(r){t[e]=this,n[e]=arguments.length>1?d.call(arguments):r,n===a?o.notifyWith(t,n):--s||o.resolveWith(t,n)}},a,f,l;if(i>1)for(a=new Array(i),f=new Array(i),l=new Array(i);i>t;t++)r[t]&&n.isFunction(r[t].promise)?r[t].promise().done(u(t,l,r)).fail(o.reject).progress(u(t,f,a)):--s;return s||o.resolveWith(l,r),o.promise()}});var H;n.fn.ready=function(e){return n.ready.promise().done(e),this},n.extend({isReady:!1,readyWait:1,holdReady:function(e){e?n.readyWait++:n.ready(!0)},ready:function(e){(e===!0?--n.readyWait:n.isReady)||(n.isReady=!0,e!==!0&&--n.readyWait>0||(H.resolveWith(l,[n]),n.fn.triggerHandler&&(n(l).triggerHandler("ready"),n(l).off("ready"))))}}),n.ready.promise=function(e){return H||(H=n.Deferred(),"complete"===l.readyState?setTimeout(n.ready):(l.addEventListener("DOMContentLoaded",I,!1),a.addEventListener("load",I,!1))),H.promise(e)},n.ready.promise();var J=n.access=function(e,t,r,i,s,o,u){var a=0,f=e.length,l=null==r;if("object"===n.type(r)){s=!0;for(a in r)n.access(e,t,a,r[a],!0,o,u)}else if(void 0!==i&&(s=!0,n.isFunction(i)||(u=!0),l&&(u?(t.call(e,i),t=null):(l=t,t=function(e,t,r){return l.call(n(e),r)})),t))for(;f>a;a++)t(e[a],r,u?i:i.call(e[a],a,t(e[a],r)));return s?e:l?t.call(e):f?t(e[0],r):o};n.acceptData=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType},K.uid=1,K.accepts=n.acceptData,K.prototype={key:function(e){if(!K.accepts(e))return 0;var t={},r=e[this.expando];if(!r){r=K.uid++;try{t[this.expando]={value:r},Object.defineProperties(e,t)}catch(i){t[this.expando]=r,n.extend(e,t)}}return this.cache[r]||(this.cache[r]={}),r},set:function(e,t,r){var i,s=this.key(e),o=this.cache[s];if("string"==typeof t)o[t]=r;else if(n.isEmptyObject(o))n.extend(this.cache[s],t);else for(i in t)o[i]=t[i];return o},get:function(e,t){var n=this.cache[this.key(e)];return void 0===t?n:n[t]},access:function(e,t,r){var i;return void 0===t||t&&"string"==typeof t&&void 0===r?(i=this.get(e,t),void 0!==i?i:this.get(e,n.camelCase(t))):(this.set(e,t,r),void 0!==r?r:t)},remove:function(e,t){var r,i,s,o=this.key(e),u=this.cache[o];if(void 0===t)this.cache[o]={};else{n.isArray(t)?i=t.concat(t.map(n.camelCase)):(s=n.camelCase(t),t in u?i=[t,s]:(i=s,i=i in u?[i]:i.match(E)||[])),r=i.length;while(r--)delete u[i[r]]}},hasData:function(e){return!n.isEmptyObject(this.cache[e[this.expando]]||{})},discard:function(e){e[this.expando]&&delete this.cache[e[this.expando]]}};var L=new K,M=new K,N=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,O=/([A-Z])/g;n.extend({hasData:function(e){return M.hasData(e)||L.hasData(e)},data:function(e,t,n){return M.access(e,t,n)},removeData:function(e,t){M.remove(e,t)},_data:function(e,t,n){return L.access(e,t,n)},_removeData:function(e,t){L.remove(e,t)}}),n.fn.extend({data:function(e,t){var r,i,s,o=this[0],u=o&&o.attributes;if(void 0===e){if(this.length&&(s=M.get(o),1===o.nodeType&&!L.get(o,"hasDataAttrs"))){r=u.length;while(r--)u[r]&&(i=u[r].name,0===i.indexOf("data-")&&(i=n.camelCase(i.slice(5)),P(o,i,s[i])));L.set(o,"hasDataAttrs",!0)}return s}return"object"==typeof e?this.each(function(){M.set(this,e)}):J(this,function(t){var r,i=n.camelCase(e);if(o&&void 0===t){if(r=M.get(o,e),void 0!==r)return r;if(r=M.get(o,i),void 0!==r)return r;if(r=P(o,i,void 0),void 0!==r)return r}else this.each(function(){var n=M.get(this,i);M.set(this,i,t),-1!==e.indexOf("-")&&void 0!==n&&M.set(this,e,t)})},null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each(function(){M.remove(this,e)})}}),n.extend({queue:function(e,t,r){var i;return e?(t=(t||"fx")+"queue",i=L.get(e,t),r&&(!i||n.isArray(r)?i=L.access(e,t,n.makeArray(r)):i.push(r)),i||[]):void 0},dequeue:function(e,t){t=t||"fx";var r=n.queue(e,t),i=r.length,s=r.shift(),o=n._queueHooks(e,t),u=function(){n.dequeue(e,t)};"inprogress"===s&&(s=r.shift(),i--),s&&("fx"===t&&r.unshift("inprogress"),delete o.stop,s.call(e,u,o)),!i&&o&&o.empty.fire()},_queueHooks:function(e,t){var r=t+"queueHooks";return L.get(e,r)||L.access(e,r,{empty:n.Callbacks("once memory").add(function(){L.remove(e,[t+"queue",r])})})}}),n.fn.extend({queue:function(e,t){var r=2;return"string"!=typeof e&&(t=e,e="fx",r--),arguments.length<r?n.queue(this[0],e):void 0===t?this:this.each(function(){var r=n.queue(this,e,t);n._queueHooks(this,e),"fx"===e&&"inprogress"!==r[0]&&n.dequeue(this,e)})},dequeue:function(e){return this.each(function(){n.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var r,i=1,s=n.Deferred(),o=this,u=this.length,a=function(){--i||s.resolveWith(o,[o])};"string"!=typeof e&&(t=e,e=void 0),e=e||"fx";while(u--)r=L.get(o[u],e+"queueHooks"),r&&r.empty&&(i++,r.empty.add(a));return a(),s.promise(t)}});var Q=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,R=["Top","Right","Bottom","Left"],S=function(e,t){return e=t||e,"none"===n.css(e,"display")||!n.contains(e.ownerDocument,e)},T=/^(?:checkbox|radio)$/i;!function(){var e=l.createDocumentFragment(),t=e.appendChild(l.createElement("div")),n=l.createElement("input");n.setAttribute("type","radio"),n.setAttribute("checked","checked"),n.setAttribute("name","t"),t.appendChild(n),k.checkClone=t.cloneNode(!0).cloneNode(!0).lastChild.checked,t.innerHTML="<textarea>x</textarea>",k.noCloneChecked=!!t.cloneNode(!0).lastChild.defaultValue}();var U="undefined";k.focusinBubbles="onfocusin"in a;var V=/^key/,W=/^(?:mouse|pointer|contextmenu)|click/,X=/^(?:focusinfocus|focusoutblur)$/,Y=/^([^.]*)(?:\.(.+)|)$/;n.event={global:{},add:function(e,t,r,i,s){var o,u,a,f,l,c,h,p,d,v,m,g=L.get(e);if(g){r.handler&&(o=r,r=o.handler,s=o.selector),r.guid||(r.guid=n.guid++),(f=g.events)||(f=g.events={}),(u=g.handle)||(u=g.handle=function(t){return typeof n!==U&&n.event.triggered!==t.type?n.event.dispatch.apply(e,arguments):void 0}),t=(t||"").match(E)||[""],l=t.length;while(l--)a=Y.exec(t[l])||[],d=m=a[1],v=(a[2]||"").split(".").sort(),d&&(h=n.event.special[d]||{},d=(s?h.delegateType:h.bindType)||d,h=n.event.special[d]||{},c=n.extend({type:d,origType:m,data:i,handler:r,guid:r.guid,selector:s,needsContext:s&&n.expr.match.needsContext.test(s),namespace:v.join(".")},o),(p=f[d])||(p=f[d]=[],p.delegateCount=0,h.setup&&h.setup.call(e,i,v,u)!==!1||e.addEventListener&&e.addEventListener(d,u,!1)),h.add&&(h.add.call(e,c),c.handler.guid||(c.handler.guid=r.guid)),s?p.splice(p.delegateCount++,0,c):p.push(c),n.event.global[d]=!0)}},remove:function(e,t,r,i,s){var o,u,a,f,l,c,h,p,d,v,m,g=L.hasData(e)&&L.get(e);if(g&&(f=g.events)){t=(t||"").match(E)||[""],l=t.length;while(l--)if(a=Y.exec(t[l])||[],d=m=a[1],v=(a[2]||"").split(".").sort(),d){h=n.event.special[d]||{},d=(i?h.delegateType:h.bindType)||d,p=f[d]||[],a=a[2]&&new RegExp("(^|\\.)"+v.join("\\.(?:.*\\.|)")+"(\\.|$)"),u=o=p.length;while(o--)c=p[o],!s&&m!==c.origType||r&&r.guid!==c.guid||a&&!a.test(c.namespace)||i&&i!==c.selector&&("**"!==i||!c.selector)||(p.splice(o,1),c.selector&&p.delegateCount--,h.remove&&h.remove.call(e,c));u&&!p.length&&(h.teardown&&h.teardown.call(e,v,g.handle)!==!1||n.removeEvent(e,d,g.handle),delete f[d])}else for(d in f)n.event.remove(e,d+t[l],r,i,!0);n.isEmptyObject(f)&&(delete g.handle,L.remove(e,"events"))}},trigger:function(e,t,r,i){var s,o,u,f,c,h,p,d=[r||l],v=j.call(e,"type")?e.type:e,m=j.call(e,"namespace")?e.namespace.split("."):[];if(o=u=r=r||l,3!==r.nodeType&&8!==r.nodeType&&!X.test(v+n.event.triggered)&&(v.indexOf(".")>=0&&(m=v.split("."),v=m.shift(),m.sort()),c=v.indexOf(":")<0&&"on"+v,e=e[n.expando]?e:new n.Event(v,"object"==typeof e&&e),e.isTrigger=i?2:3,e.namespace=m.join("."),e.namespace_re=e.namespace?new RegExp("(^|\\.)"+m.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=r),t=null==t?[e]:n.makeArray(t,[e]),p=n.event.special[v]||{},i||!p.trigger||p.trigger.apply(r,t)!==!1)){if(!i&&!p.noBubble&&!n.isWindow(r)){for(f=p.delegateType||v,X.test(f+v)||(o=o.parentNode);o;o=o.parentNode)d.push(o),u=o;u===(r.ownerDocument||l)&&d.push(u.defaultView||u.parentWindow||a)}s=0;while((o=d[s++])&&!e.isPropagationStopped())e.type=s>1?f:p.bindType||v,h=(L.get(o,"events")||{})[e.type]&&L.get(o,"handle"),h&&h.apply(o,t),h=c&&o[c],h&&h.apply&&n.acceptData(o)&&(e.result=h.apply(o,t),e.result===!1&&e.preventDefault());return e.type=v,i||e.isDefaultPrevented()||p._default&&p._default.apply(d.pop(),t)!==!1||!n.acceptData(r)||c&&n.isFunction(r[v])&&!n.isWindow(r)&&(u=r[c],u&&(r[c]=null),n.event.triggered=v,r[v](),n.event.triggered=void 0,u&&(r[c]=u)),e.result}},dispatch:function(e){e=n.event.fix(e);var t,r,i,s,o,u=[],a=d.call(arguments),f=(L.get(this,"events")||{})[e.type]||[],l=n.event.special[e.type]||{};if(a[0]=e,e.delegateTarget=this,!l.preDispatch||l.preDispatch.call(this,e)!==!1){u=n.event.handlers.call(this,e,f),t=0;while((s=u[t++])&&!e.isPropagationStopped()){e.currentTarget=s.elem,r=0;while((o=s.handlers[r++])&&!e.isImmediatePropagationStopped())(!e.namespace_re||e.namespace_re.test(o.namespace))&&(e.handleObj=o,e.data=o.data,i=((n.event.special[o.origType]||{}).handle||o.handler).apply(s.elem,a),void 0!==i&&(e.result=i)===!1&&(e.preventDefault(),e.stopPropagation()))}return l.postDispatch&&l.postDispatch.call(this,e),e.result}},handlers:function(e,t){var r,i,s,o,u=[],a=t.delegateCount,f=e.target;if(a&&f.nodeType&&(!e.button||"click"!==e.type))for(;f!==this;f=f.parentNode||this)if(f.disabled!==!0||"click"!==e.type){for(i=[],r=0;a>r;r++)o=t[r],s=o.selector+" ",void 0===i[s]&&(i[s]=o.needsContext?n(s,this).index(f)>=0:n.find(s,this,null,[f]).length),i[s]&&i.push(o);i.length&&u.push({elem:f,handlers:i})}return a<t.length&&u.push({elem:this,handlers:t.slice(a)}),u},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,t){var n,r,i,s=t.button;return null==e.pageX&&null!=t.clientX&&(n=e.target.ownerDocument||l,r=n.documentElement,i=n.body,e.pageX=t.clientX+(r&&r.scrollLeft||i&&i.scrollLeft||0)-(r&&r.clientLeft||i&&i.clientLeft||0),e.pageY=t.clientY+(r&&r.scrollTop||i&&i.scrollTop||0)-(r&&r.clientTop||i&&i.clientTop||0)),e.which||void 0===s||(e.which=1&s?1:2&s?3:4&s?2:0),e}},fix:function(e){if(e[n.expando])return e;var t,r,i,s=e.type,o=e,u=this.fixHooks[s];u||(this.fixHooks[s]=u=W.test(s)?this.mouseHooks:V.test(s)?this.keyHooks:{}),i=u.props?this.props.concat(u.props):this.props,e=new n.Event(o),t=i.length;while(t--)r=i[t],e[r]=o[r];return e.target||(e.target=l),3===e.target.nodeType&&(e.target=e.target.parentNode),u.filter?u.filter(e,o):e},special:{load:{noBubble:!0},focus:{trigger:function(){return this!==_()&&this.focus?(this.focus(),!1):void 0},delegateType:"focusin"},blur:{trigger:function(){return this===_()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return"checkbox"===this.type&&this.click&&n.nodeName(this,"input")?(this.click(),!1):void 0},_default:function(e){return n.nodeName(e.target,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}},simulate:function(e,t,r,i){var s=n.extend(new n.Event,r,{type:e,isSimulated:!0,originalEvent:{}});i?n.event.trigger(s,null,t):n.event.dispatch.call(t,s),s.isDefaultPrevented()&&r.preventDefault()}},n.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n,!1)},n.Event=function(e,t){return this instanceof n.Event?(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&e.returnValue===!1?Z:$):this.type=e,t&&n.extend(this,t),this.timeStamp=e&&e.timeStamp||n.now(),void (this[n.expando]=!0)):new n.Event(e,t)},n.Event.prototype={isDefaultPrevented:$,isPropagationStopped:$,isImmediatePropagationStopped:$,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=Z,e&&e.preventDefault&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=Z,e&&e.stopPropagation&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=Z,e&&e.stopImmediatePropagation&&e.stopImmediatePropagation(),this.stopPropagation()}},n.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,t){n.event.special[e]={delegateType:t,bindType:t,handle:function(e){var r,i=this,s=e.relatedTarget,o=e.handleObj;return(!s||s!==i&&!n.contains(i,s))&&(e.type=o.origType,r=o.handler.apply(this,arguments),e.type=t),r}}}),k.focusinBubbles||n.each({focus:"focusin",blur:"focusout"},function(e,t){var r=function(e){n.event.simulate(t,e.target,n.event.fix(e),!0)};n.event.special[t]={setup:function(){var n=this.ownerDocument||this,i=L.access(n,t);i||n.addEventListener(e,r,!0),L.access(n,t,(i||0)+1)},teardown:function(){var n=this.ownerDocument||this,i=L.access(n,t)-1;i?L.access(n,t,i):(n.removeEventListener(e,r,!0),L.remove(n,t))}}}),n.fn.extend({on:function(e,t,r,i,s){var o,u;if("object"==typeof e){"string"!=typeof t&&(r=r||t,t=void 0);for(u in e)this.on(u,t,r,e[u],s);return this}if(null==r&&null==i?(i=t,r=t=void 0):null==i&&("string"==typeof t?(i=r,r=void 0):(i=r,r=t,t=void 0)),i===!1)i=$;else if(!i)return this;return 1===s&&(o=i,i=function(e){return n().off(e),o.apply(this,arguments)},i.guid=o.guid||(o.guid=n.guid++)),this.each(function(){n.event.add(this,e,i,r,t)})},one:function(e,t,n,r){return this.on(e,t,n,r,1)},off:function(e,t,r){var i,s;if(e&&e.preventDefault&&e.handleObj)return i=e.handleObj,n(e.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if("object"==typeof e){for(s in e)this.off(s,t,e[s]);return this}return(t===!1||"function"==typeof t)&&(r=t,t=void 0),r===!1&&(r=$),this.each(function(){n.event.remove(this,e,r,t)})},trigger:function(e,t){return this.each(function(){n.event.trigger(e,t,this)})},triggerHandler:function(e,t){var r=this[0];return r?n.event.trigger(e,t,r,!0):void 0}});var ab=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,bb=/<([\w:]+)/,cb=/<|&#?\w+;/,db=/<(?:script|style|link)/i,eb=/checked\s*(?:[^=]|=\s*.checked.)/i,fb=/^$|\/(?:java|ecma)script/i,gb=/^true\/(.*)/,hb=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,ib={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};ib.optgroup=ib.option,ib.tbody=ib.tfoot=ib.colgroup=ib.caption=ib.thead,ib.th=ib.td,n.extend({clone:function(e,t,r){var i,s,o,u,a=e.cloneNode(!0),f=n.contains(e.ownerDocument,e);if(!(k.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||n.isXMLDoc(e)))for(u=ob(a),o=ob(e),i=0,s=o.length;s>i;i++)pb(o[i],u[i]);if(t)if(r)for(o=o||ob(e),u=u||ob(a),i=0,s=o.length;s>i;i++)nb(o[i],u[i]);else nb(e,a);return u=ob(a,"script"),u.length>0&&mb(u,!f&&ob(e,"script")),a},buildFragment:function(e,t,r,i){for(var s,o,u,a,f,l,c=t.createDocumentFragment(),h=[],p=0,d=e.length;d>p;p++)if(s=e[p],s||0===s)if("object"===n.type(s))n.merge(h,s.nodeType?[s]:s);else if(cb.test(s)){o=o||c.appendChild(t.createElement("div")),u=(bb.exec(s)||["",""])[1].toLowerCase(),a=ib[u]||ib._default,o.innerHTML=a[1]+s.replace(ab,"<$1></$2>")+a[2],l=a[0];while(l--)o=o.lastChild;n.merge(h,o.childNodes),o=c.firstChild,o.textContent=""}else h.push(t.createTextNode(s));c.textContent="",p=0;while(s=h[p++])if((!i||-1===n.inArray(s,i))&&(f=n.contains(s.ownerDocument,s),o=ob(c.appendChild(s),"script"),f&&mb(o),r)){l=0;while(s=o[l++])fb.test(s.type||"")&&r.push(s)}return c},cleanData:function(e){for(var t,r,i,s,o=n.event.special,u=0;void 0!==(r=e[u]);u++){if(n.acceptData(r)&&(s=r[L.expando],s&&(t=L.cache[s]))){if(t.events)for(i in t.events)o[i]?n.event.remove(r,i):n.removeEvent(r,i,t.handle);L.cache[s]&&delete L.cache[s]}delete M.cache[r[M.expando]]}}}),n.fn.extend({text:function(e){return J(this,function(e){return void 0===e?n.text(this):this.empty().each(function(){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&(this.textContent=e)})},null,e,arguments.length)},append:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=jb(this,e);t.appendChild(e)}})},prepend:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=jb(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},remove:function(e,t){for(var r,i=e?n.filter(e,this):this,s=0;null!=(r=i[s]);s++)t||1!==r.nodeType||n.cleanData(ob(r)),r.parentNode&&(t&&n.contains(r.ownerDocument,r)&&mb(ob(r,"script")),r.parentNode.removeChild(r));return this},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(n.cleanData(ob(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null==e?!1:e,t=null==t?e:t,this.map(function(){return n.clone(this,e,t)})},html:function(e){return J(this,function(e){var t=this[0]||{},r=0,i=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!db.test(e)&&!ib[(bb.exec(e)||["",""])[1].toLowerCase()]){e=e.replace(ab,"<$1></$2>");try{for(;i>r;r++)t=this[r]||{},1===t.nodeType&&(n.cleanData(ob(t,!1)),t.innerHTML=e);t=0}catch(s){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=arguments[0];return this.domManip(arguments,function(t){e=this.parentNode,n.cleanData(ob(this)),e&&e.replaceChild(t,this)}),e&&(e.length||e.nodeType)?this:this.remove()},detach:function(e){return this.remove(e,!0)},domManip:function(t,r){t=e.apply([],t);var i,s,o,u,a,f,l=0,c=this.length,h=this,p=c-1,d=t[0],v=n.isFunction(d);if(v||c>1&&"string"==typeof d&&!k.checkClone&&eb.test(d))return this.each(function(e){var n=h.eq(e);v&&(t[0]=d.call(this,e,n.html())),n.domManip(t,r)});if(c&&(i=n.buildFragment(t,this[0].ownerDocument,!1,this),s=i.firstChild,1===i.childNodes.length&&(i=s),s)){for(o=n.map(ob(i,"script"),kb),u=o.length;c>l;l++)a=i,l!==p&&(a=n.clone(a,!0,!0),u&&n.merge(o,ob(a,"script"))),r.call(this[l],a,l);if(u)for(f=o[o.length-1].ownerDocument,n.map(o,lb),l=0;u>l;l++)a=o[l],fb.test(a.type||"")&&!L.access(a,"globalEval")&&n.contains(f,a)&&(a.src?n._evalUrl&&n._evalUrl(a.src):n.globalEval(a.textContent.replace(hb,"")))}return this}}),n.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){n.fn[e]=function(e){for(var r,i=[],s=n(e),o=s.length-1,u=0;o>=u;u++)r=u===o?this:this.clone(!0),n(s[u])[t](r),f.apply(i,r.get());return this.pushStack(i)}});var qb,rb={},ub=/^margin/,vb=new RegExp("^("+Q+")(?!px)[a-z%]+$","i"),wb=function(e){return e.ownerDocument.defaultView.opener?e.ownerDocument.defaultView.getComputedStyle(e,null):a.getComputedStyle(e,null)};!function(){var e,t,r=l.documentElement,i=l.createElement("div"),s=l.createElement("div");if(s.style){s.style.backgroundClip="content-box",s.cloneNode(!0).style.backgroundClip="",k.clearCloneStyle="content-box"===s.style.backgroundClip,i.style.cssText="border:0;width:0;height:0;top:0;left:-9999px;margin-top:1px;position:absolute",i.appendChild(s);function o(){s.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute",s.innerHTML="",r.appendChild(i);var n=a.getComputedStyle(s,null);e="1%"!==n.top,t="4px"===n.width,r.removeChild(i)}a.getComputedStyle&&n.extend(k,{pixelPosition:function(){return o(),e},boxSizingReliable:function(){return null==t&&o(),t},reliableMarginRight:function(){var e,t=s.appendChild(l.createElement("div"));return t.style.cssText=s.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",t.style.marginRight=t.style.width="0",s.style.width="1px",r.appendChild(i),e=!parseFloat(a.getComputedStyle(t,null).marginRight),r.removeChild(i),s.removeChild(t),e}})}}(),n.swap=function(e,t,n,r){var i,s,o={};for(s in t)o[s]=e.style[s],e.style[s]=t[s];i=n.apply(e,r||[]);for(s in t)e.style[s]=o[s];return i};var zb=/^(none|table(?!-c[ea]).+)/,Ab=new RegExp("^("+Q+")(.*)$","i"),Bb=new RegExp("^([+-])=("+Q+")","i"),Cb={position:"absolute",visibility:"hidden",display:"block"},Db={letterSpacing:"0",fontWeight:"400"},Eb=["Webkit","O","Moz","ms"];n.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=xb(e,"opacity");return""===n?"1":n}}}},cssNumber:{columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":"cssFloat"},style:function(e,t,r,i){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var s,o,u,a=n.camelCase(t),f=e.style;return t=n.cssProps[a]||(n.cssProps[a]=Fb(f,a)),u=n.cssHooks[t]||n.cssHooks[a],void 0===r?u&&"get"in u&&void 0!==(s=u.get(e,!1,i))?s:f[t]:(o=typeof r,"string"===o&&(s=Bb.exec(r))&&(r=(s[1]+1)*s[2]+parseFloat(n.css(e,t)),o="number"),null!=r&&r===r&&("number"!==o||n.cssNumber[a]||(r+="px"),k.clearCloneStyle||""!==r||0!==t.indexOf("background")||(f[t]="inherit"),u&&"set"in u&&void 0===(r=u.set(e,r,i))||(f[t]=r)),void 0)}},css:function(e,t,r,i){var s,o,u,a=n.camelCase(t);return t=n.cssProps[a]||(n.cssProps[a]=Fb(e.style,a)),u=n.cssHooks[t]||n.cssHooks[a],u&&"get"in u&&(s=u.get(e,!0,r)),void 0===s&&(s=xb(e,t,i)),"normal"===s&&t in Db&&(s=Db[t]),""===r||r?(o=parseFloat(s),r===!0||n.isNumeric(o)?o||0:s):s}}),n.each(["height","width"],function(e,t){n.cssHooks[t]={get:function(e,r,i){return r?zb.test(n.css(e,"display"))&&0===e.offsetWidth?n.swap(e,Cb,function(){return Ib(e,t,i)}):Ib(e,t,i):void 0},set:function(e,r,i){var s=i&&wb(e);return Gb(e,r,i?Hb(e,t,i,"border-box"===n.css(e,"boxSizing",!1,s),s):0)}}}),n.cssHooks.marginRight=yb(k.reliableMarginRight,function(e,t){return t?n.swap(e,{display:"inline-block"},xb,[e,"marginRight"]):void 0}),n.each({margin:"",padding:"",border:"Width"},function(e,t){n.cssHooks[e+t]={expand:function(n){for(var r=0,i={},s="string"==typeof n?n.split(" "):[n];4>r;r++)i[e+R[r]+t]=s[r]||s[r-2]||s[0];return i}},ub.test(e)||(n.cssHooks[e+t].set=Gb)}),n.fn.extend({css:function(e,t){return J(this,function(e,t,r){var i,s,o={},u=0;if(n.isArray(t)){for(i=wb(e),s=t.length;s>u;u++)o[t[u]]=n.css(e,t[u],!1,i);return o}return void 0!==r?n.style(e,t,r):n.css(e,t)},e,t,arguments.length>1)},show:function(){return Jb(this,!0)},hide:function(){return Jb(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){S(this)?n(this).show():n(this).hide()})}}),n.Tween=Kb,Kb.prototype={constructor:Kb,init:function(e,t,r,i,s,o){this.elem=e,this.prop=r,this.easing=s||"swing",this.options=t,this.start=this.now=this.cur(),this.end=i,this.unit=o||(n.cssNumber[r]?"":"px")},cur:function(){var e=Kb.propHooks[this.prop];return e&&e.get?e.get(this):Kb.propHooks._default.get(this)},run:function(e){var t,r=Kb.propHooks[this.prop];return this.pos=t=this.options.duration?n.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),r&&r.set?r.set(this):Kb.propHooks._default.set(this),this}},Kb.prototype.init.prototype=Kb.prototype,Kb.propHooks={_default:{get:function(e){var t;return null==e.elem[e.prop]||e.elem.style&&null!=e.elem.style[e.prop]?(t=n.css(e.elem,e.prop,""),t&&"auto"!==t?t:0):e.elem[e.prop]},set:function(e){n.fx.step[e.prop]?n.fx.step[e.prop](e):e.elem.style&&(null!=e.elem.style[n.cssProps[e.prop]]||n.cssHooks[e.prop])?n.style(e.elem,e.prop,e.now+e.unit):e.elem[e.prop]=e.now}}},Kb.propHooks.scrollTop=Kb.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},n.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2}},n.fx=Kb.prototype.init,n.fx.step={};var Lb,Mb,Nb=/^(?:toggle|show|hide)$/,Ob=new RegExp("^(?:([+-])=|)("+Q+")([a-z%]*)$","i"),Pb=/queueHooks$/,Qb=[Vb],Rb={"*":[function(e,t){var r=this.createTween(e,t),i=r.cur(),s=Ob.exec(t),o=s&&s[3]||(n.cssNumber[e]?"":"px"),u=(n.cssNumber[e]||"px"!==o&&+i)&&Ob.exec(n.css(r.elem,e)),a=1,f=20;if(u&&u[3]!==o){o=o||u[3],s=s||[],u=+i||1;do a=a||".5",u/=a,n.style(r.elem,e,u+o);while(a!==(a=r.cur()/i)&&1!==a&&--f)}return s&&(u=r.start=+u||+i||0,r.unit=o,r.end=s[1]?u+(s[1]+1)*s[2]:+s[2]),r}]};n.Animation=n.extend(Xb,{tweener:function(e,t){n.isFunction(e)?(t=e,e=["*"]):e=e.split(" ");for(var r,i=0,s=e.length;s>i;i++)r=e[i],Rb[r]=Rb[r]||[],Rb[r].unshift(t)},prefilter:function(e,t){t?Qb.unshift(e):Qb.push(e)}}),n.speed=function(e,t,r){var i=e&&"object"==typeof e?n.extend({},e):{complete:r||!r&&t||n.isFunction(e)&&e,duration:e,easing:r&&t||t&&!n.isFunction(t)&&t};return i.duration=n.fx.off?0:"number"==typeof i.duration?i.duration:i.duration in n.fx.speeds?n.fx.speeds[i.duration]:n.fx.speeds._default,(null==i.queue||i.queue===!0)&&(i.queue="fx"),i.old=i.complete,i.complete=function(){n.isFunction(i.old)&&i.old.call(this),i.queue&&n.dequeue(this,i.queue)},i},n.fn.extend({fadeTo:function(e,t,n,r){return this.filter(S).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(e,t,r,i){var s=n.isEmptyObject(e),o=n.speed(t,r,i),u=function(){var t=Xb(this,n.extend({},e),o);(s||L.get(this,"finish"))&&t.stop(!0)};return u.finish=u,s||o.queue===!1?this.each(u):this.queue(o.queue,u)},stop:function(e,t,r){var i=function(e){var t=e.stop;delete e.stop,t(r)};return"string"!=typeof e&&(r=t,t=e,e=void 0),t&&e!==!1&&this.queue(e||"fx",[]),this.each(function(){var t=!0,s=null!=e&&e+"queueHooks",o=n.timers,u=L.get(this);if(s)u[s]&&u[s].stop&&i(u[s]);else for(s in u)u[s]&&u[s].stop&&Pb.test(s)&&i(u[s]);for(s=o.length;s--;)o[s].elem!==this||null!=e&&o[s].queue!==e||(o[s].anim.stop(r),t=!1,o.splice(s,1));(t||!r)&&n.dequeue(this,e)})},finish:function(e){return e!==!1&&(e=e||"fx"),this.each(function(){var t,r=L.get(this),i=r[e+"queue"],s=r[e+"queueHooks"],o=n.timers,u=i?i.length:0;for(r.finish=!0,n.queue(this,e,[]),s&&s.stop&&s.stop.call(this,!0),t=o.length;t--;)o[t].elem===this&&o[t].queue===e&&(o[t].anim.stop(!0),o.splice(t,1));for(t=0;u>t;t++)i[t]&&i[t].finish&&i[t].finish.call(this);delete r.finish})}}),n.each(["toggle","show","hide"],function(e,t){var r=n.fn[t];n.fn[t]=function(e,n,i){return null==e||"boolean"==typeof e?r.apply(this,arguments):this.animate(Tb(t,!0),e,n,i)}}),n.each({slideDown:Tb("show"),slideUp:Tb("hide"),slideToggle:Tb("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){n.fn[e]=function(e,n,r){return this.animate(t,e,n,r)}}),n.timers=[],n.fx.tick=function(){var e,t=0,r=n.timers;for(Lb=n.now();t<r.length;t++)e=r[t],e()||r[t]!==e||r.splice(t--,1);r.length||n.fx.stop(),Lb=void 0},n.fx.timer=function(e){n.timers.push(e),e()?n.fx.start():n.timers.pop()},n.fx.interval=13,n.fx.start=function(){Mb||(Mb=setInterval(n.fx.tick,n.fx.interval))},n.fx.stop=function(){clearInterval(Mb),Mb=null},n.fx.speeds={slow:600,fast:200,_default:400},n.fn.delay=function(e,t){return e=n.fx?n.fx.speeds[e]||e:e,t=t||"fx",this.queue(t,function(t,n){var r=setTimeout(t,e);n.stop=function(){clearTimeout(r)}})},function(){var e=l.createElement("input"),t=l.createElement("select"),n=t.appendChild(l.createElement("option"));e.type="checkbox",k.checkOn=""!==e.value,k.optSelected=n.selected,t.disabled=!0,k.optDisabled=!n.disabled,e=l.createElement("input"),e.value="t",e.type="radio",k.radioValue="t"===e.value}();var Yb,Zb,$b=n.expr.attrHandle;n.fn.extend({attr:function(e,t){return J(this,n.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){n.removeAttr(this,e)})}}),n.extend({attr:function(e,t,r){var i,s,o=e.nodeType;if(e&&3!==o&&8!==o&&2!==o)return typeof e.getAttribute===U?n.prop(e,t,r):(1===o&&n.isXMLDoc(e)||(t=t.toLowerCase(),i=n.attrHooks[t]||(n.expr.match.bool.test(t)?Zb:Yb)),void 0===r?i&&"get"in i&&null!==(s=i.get(e,t))?s:(s=n.find.attr(e,t),null==s?void 0:s):null!==r?i&&"set"in i&&void 0!==(s=i.set(e,r,t))?s:(e.setAttribute(t,r+""),r):void n.removeAttr(e,t))},removeAttr:function(e,t){var r,i,s=0,o=t&&t.match(E);if(o&&1===e.nodeType)while(r=o[s++])i=n.propFix[r]||r,n.expr.match.bool.test(r)&&(e[i]=!1),e.removeAttribute(r)},attrHooks:{type:{set:function(e,t){if(!k.radioValue&&"radio"===t&&n.nodeName(e,"input")){var r=e.value;return e.setAttribute("type",t),r&&(e.value=r),t}}}}}),Zb={set:function(e,t,r){return t===!1?n.removeAttr(e,r):e.setAttribute(r,r),r}},n.each(n.expr.match.bool.source.match(/\w+/g),function(e,t){var r=$b[t]||n.find.attr;$b[t]=function(e,t,n){var i,s;return n||(s=$b[t],$b[t]=i,i=null!=r(e,t,n)?t.toLowerCase():null,$b[t]=s),i}});var _b=/^(?:input|select|textarea|button)$/i;n.fn.extend({prop:function(e,t){return J(this,n.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each(function(){delete this[n.propFix[e]||e]})}}),n.extend({propFix:{"for":"htmlFor","class":"className"},prop:function(e,t,r){var i,s,o,u=e.nodeType;if(e&&3!==u&&8!==u&&2!==u)return o=1!==u||!n.isXMLDoc(e),o&&(t=n.propFix[t]||t,s=n.propHooks[t]),void 0!==r?s&&"set"in s&&void 0!==(i=s.set(e,r,t))?i:e[t]=r:s&&"get"in s&&null!==(i=s.get(e,t))?i:e[t]},propHooks:{tabIndex:{get:function(e){return e.hasAttribute("tabindex")||_b.test(e.nodeName)||e.href?e.tabIndex:-1}}}}),k.optSelected||(n.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null}}),n.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){n.propFix[this.toLowerCase()]=this});var ac=/[\t\r\n\f]/g;n.fn.extend({addClass:function(e){var t,r,i,s,o,u,a="string"==typeof e&&e,f=0,l=this.length;if(n.isFunction(e))return this.each(function(t){n(this).addClass(e.call(this,t,this.className))});if(a)for(t=(e||"").match(E)||[];l>f;f++)if(r=this[f],i=1===r.nodeType&&(r.className?(" "+r.className+" ").replace(ac," "):" ")){o=0;while(s=t[o++])i.indexOf(" "+s+" ")<0&&(i+=s+" ");u=n.trim(i),r.className!==u&&(r.className=u)}return this},removeClass:function(e){var t,r,i,s,o,u,a=0===arguments.length||"string"==typeof e&&e,f=0,l=this.length;if(n.isFunction(e))return this.each(function(t){n(this).removeClass(e.call(this,t,this.className))});if(a)for(t=(e||"").match(E)||[];l>f;f++)if(r=this[f],i=1===r.nodeType&&(r.className?(" "+r.className+" ").replace(ac," "):"")){o=0;while(s=t[o++])while(i.indexOf(" "+s+" ")>=0)i=i.replace(" "+s+" "," ");u=e?n.trim(i):"",r.className!==u&&(r.className=u)}return this},toggleClass:function(e,t){var r=typeof e;return"boolean"==typeof t&&"string"===r?t?this.addClass(e):this.removeClass(e):this.each(n.isFunction(e)?function(r){n(this).toggleClass(e.call(this,r,this.className,t),t)}:function(){if("string"===r){var t,i=0,s=n(this),o=e.match(E)||[];while(t=o[i++])s.hasClass(t)?s.removeClass(t):s.addClass(t)}else(r===U||"boolean"===r)&&(this.className&&L.set(this,"__className__",this.className),this.className=this.className||e===!1?"":L.get(this,"__className__")||"")})},hasClass:function(e){for(var t=" "+e+" ",n=0,r=this.length;r>n;n++)if(1===this[n].nodeType&&(" "+this[n].className+" ").replace(ac," ").indexOf(t)>=0)return!0;return!1}});var bc=/\r/g;n.fn.extend({val:function(e){var t,r,i,s=this[0];if(arguments.length)return i=n.isFunction(e),this.each(function(r){var s;1===this.nodeType&&(s=i?e.call(this,r,n(this).val()):e,null==s?s="":"number"==typeof s?s+="":n.isArray(s)&&(s=n.map(s,function(e){return null==e?"":e+""})),t=n.valHooks[this.type]||n.valHooks[this.nodeName.toLowerCase()],t&&"set"in t&&void 0!==t.set(this,s,"value")||(this.value=s))});if(s)return t=n.valHooks[s.type]||n.valHooks[s.nodeName.toLowerCase()],t&&"get"in t&&void 0!==(r=t.get(s,"value"))?r:(r=s.value,"string"==typeof r?r.replace(bc,""):null==r?"":r)}}),n.extend({valHooks:{option:{get:function(e){var t=n.find.attr(e,"value");return null!=t?t:n.trim(n.text(e))}},select:{get:function(e){for(var t,r,i=e.options,s=e.selectedIndex,o="select-one"===e.type||0>s,u=o?null:[],a=o?s+1:i.length,f=0>s?a:o?s:0;a>f;f++)if(r=i[f],!(!r.selected&&f!==s||(k.optDisabled?r.disabled:null!==r.getAttribute("disabled"))||r.parentNode.disabled&&n.nodeName(r.parentNode,"optgroup"))){if(t=n(r).val(),o)return t;u.push(t)}return u},set:function(e,t){var r,i,s=e.options,o=n.makeArray(t),u=s.length;while(u--)i=s[u],(i.selected=n.inArray(i.value,o)>=0)&&(r=!0);return r||(e.selectedIndex=-1),o}}}}),n.each(["radio","checkbox"],function(){n.valHooks[this]={set:function(e,t){return n.isArray(t)?e.checked=n.inArray(n(e).val(),t)>=0:void 0}},k.checkOn||(n.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})}),n.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){n.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}),n.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)},bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)}});var cc=n.now(),dc=/\?/;n.parseJSON=function(e){return JSON.parse(e+"")},n.parseXML=function(e){var t,r;if(!e||"string"!=typeof e)return null;try{r=new DOMParser,t=r.parseFromString(e,"text/xml")}catch(i){t=void 0}return(!t||t.getElementsByTagName("parsererror").length)&&n.error("Invalid XML: "+e),t};var ec=/#.*$/,fc=/([?&])_=[^&]*/,gc=/^(.*?):[ \t]*([^\r\n]*)$/gm,hc=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,ic=/^(?:GET|HEAD)$/,jc=/^\/\//,kc=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,lc={},mc={},nc="*/".concat("*"),oc=a.location.href,pc=kc.exec(oc.toLowerCase())||[];n.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:oc,type:"GET",isLocal:hc.test(pc[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":nc,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":n.parseJSON,"text xml":n.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?sc(sc(e,n.ajaxSettings),t):sc(n.ajaxSettings,e)},ajaxPrefilter:qc(lc),ajaxTransport:qc(mc),ajax:function(e,t){function T(e,t,o,a){var l,g,y,w,E,x=t;2!==b&&(b=2,u&&clearTimeout(u),r=void 0,s=a||"",S.readyState=e>0?4:0,l=e>=200&&300>e||304===e,o&&(w=tc(c,S,o)),w=uc(c,w,S,l),l?(c.ifModified&&(E=S.getResponseHeader("Last-Modified"),E&&(n.lastModified[i]=E),E=S.getResponseHeader("etag"),E&&(n.etag[i]=E)),204===e||"HEAD"===c.type?x="nocontent":304===e?x="notmodified":(x=w.state,g=w.data,y=w.error,l=!y)):(y=x,(e||!x)&&(x="error",0>e&&(e=0))),S.status=e,S.statusText=(t||x)+"",l?d.resolveWith(h,[g,x,S]):d.rejectWith(h,[S,x,y]),S.statusCode(m),m=void 0,f&&p.trigger(l?"ajaxSuccess":"ajaxError",[S,c,l?g:y]),v.fireWith(h,[S,x]),f&&(p.trigger("ajaxComplete",[S,c]),--n.active||n.event.trigger("ajaxStop")))}"object"==typeof e&&(t=e,e=void 0),t=t||{};var r,i,s,o,u,a,f,l,c=n.ajaxSetup({},t),h=c.context||c,p=c.context&&(h.nodeType||h.jquery)?n(h):n.event,d=n.Deferred(),v=n.Callbacks("once memory"),m=c.statusCode||{},g={},y={},b=0,w="canceled",S={readyState:0,getResponseHeader:function(e){var t;if(2===b){if(!o){o={};while(t=gc.exec(s))o[t[1].toLowerCase()]=t[2]}t=o[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return 2===b?s:null},setRequestHeader:function(e,t){var n=e.toLowerCase();return b||(e=y[n]=y[n]||e,g[e]=t),this},overrideMimeType:function(e){return b||(c.mimeType=e),this},statusCode:function(e){var t;if(e)if(2>b)for(t in e)m[t]=[m[t],e[t]];else S.always(e[S.status]);return this},abort:function(e){var t=e||w;return r&&r.abort(t),T(0,t),this}};if(d.promise(S).complete=v.add,S.success=S.done,S.error=S.fail,c.url=((e||c.url||oc)+"").replace(ec,"").replace(jc,pc[1]+"//"),c.type=t.method||t.type||c.method||c.type,c.dataTypes=n.trim(c.dataType||"*").toLowerCase().match(E)||[""],null==c.crossDomain&&(a=kc.exec(c.url.toLowerCase()),c.crossDomain=!(!a||a[1]===pc[1]&&a[2]===pc[2]&&(a[3]||("http:"===a[1]?"80":"443"))===(pc[3]||("http:"===pc[1]?"80":"443")))),c.data&&c.processData&&"string"!=typeof c.data&&(c.data=n.param(c.data,c.traditional)),rc(lc,c,t,S),2===b)return S;f=n.event&&c.global,f&&0===n.active++&&n.event.trigger("ajaxStart"),c.type=c.type.toUpperCase(),c.hasContent=!ic.test(c.type),i=c.url,c.hasContent||(c.data&&(i=c.url+=(dc.test(i)?"&":"?")+c.data,delete c.data),c.cache===!1&&(c.url=fc.test(i)?i.replace(fc,"$1_="+cc++):i+(dc.test(i)?"&":"?")+"_="+cc++)),c.ifModified&&(n.lastModified[i]&&S.setRequestHeader("If-Modified-Since",n.lastModified[i]),n.etag[i]&&S.setRequestHeader("If-None-Match",n.etag[i])),(c.data&&c.hasContent&&c.contentType!==!1||t.contentType)&&S.setRequestHeader("Content-Type",c.contentType),S.setRequestHeader("Accept",c.dataTypes[0]&&c.accepts[c.dataTypes[0]]?c.accepts[c.dataTypes[0]]+("*"!==c.dataTypes[0]?", "+nc+"; q=0.01":""):c.accepts["*"]);for(l in c.headers)S.setRequestHeader(l,c.headers[l]);if(!c.beforeSend||c.beforeSend.call(h,S,c)!==!1&&2!==b){w="abort";for(l in{success:1,error:1,complete:1})S[l](c[l]);if(r=rc(mc,c,t,S)){S.readyState=1,f&&p.trigger("ajaxSend",[S,c]),c.async&&c.timeout>0&&(u=setTimeout(function(){S.abort("timeout")},c.timeout));try{b=1,r.send(g,T)}catch(x){if(!(2>b))throw x;T(-1,x)}}else T(-1,"No Transport");return S}return S.abort()},getJSON:function(e,t,r){return n.get(e,t,r,"json")},getScript:function(e,t){return n.get(e,void 0,t,"script")}}),n.each(["get","post"],function(e,t){n[t]=function(e,r,i,s){return n.isFunction(r)&&(s=s||i,i=r,r=void 0),n.ajax({url:e,type:t,dataType:s,data:r,success:i})}}),n._evalUrl=function(e){return n.ajax({url:e,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})},n.fn.extend({wrapAll:function(e){var t;return n.isFunction(e)?this.each(function(t){n(this).wrapAll(e.call(this,t))}):(this[0]&&(t=n(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){var e=this;while(e.firstElementChild)e=e.firstElementChild;return e}).append(this)),this)},wrapInner:function(e){return this.each(n.isFunction(e)?function(t){n(this).wrapInner(e.call(this,t))}:function(){var t=n(this),r=t.contents();r.length?r.wrapAll(e):t.append(e)})},wrap:function(e){var t=n.isFunction(e);return this.each(function(r){n(this).wrapAll(t?e.call(this,r):e)})},unwrap:function(){return this.parent().each(function(){n.nodeName(this,"body")||n(this).replaceWith(this.childNodes)}).end()}}),n.expr.filters.hidden=function(e){return e.offsetWidth<=0&&e.offsetHeight<=0},n.expr.filters.visible=function(e){return!n.expr.filters.hidden(e)};var vc=/%20/g,wc=/\[\]$/,xc=/\r?\n/g,yc=/^(?:submit|button|image|reset|file)$/i,zc=/^(?:input|select|textarea|keygen)/i;n.param=function(e,t){var r,i=[],s=function(e,t){t=n.isFunction(t)?t():null==t?"":t,i[i.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(void 0===t&&(t=n.ajaxSettings&&n.ajaxSettings.traditional),n.isArray(e)||e.jquery&&!n.isPlainObject(e))n.each(e,function(){s(this.name,this.value)});else for(r in e)Ac(r,e[r],t,s);return i.join("&").replace(vc,"+")},n.fn.extend({serialize:function(){return n.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=n.prop(this,"elements");return e?n.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!n(this).is(":disabled")&&zc.test(this.nodeName)&&!yc.test(e)&&(this.checked||!T.test(e))}).map(function(e,t){var r=n(this).val();return null==r?null:n.isArray(r)?n.map(r,function(e){return{name:t.name,value:e.replace(xc,"\r\n")}}):{name:t.name,value:r.replace(xc,"\r\n")}}).get()}}),n.ajaxSettings.xhr=function(){try{return new XMLHttpRequest}catch(e){}};var Bc=0,Cc={},Dc={0:200,1223:204},Ec=n.ajaxSettings.xhr();a.attachEvent&&a.attachEvent("onunload",function(){for(var e in Cc)Cc[e]()}),k.cors=!!Ec&&"withCredentials"in Ec,k.ajax=Ec=!!Ec,n.ajaxTransport(function(e){var t;return k.cors||Ec&&!e.crossDomain?{send:function(n,r){var i,s=e.xhr(),o=++Bc;if(s.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(i in e.xhrFields)s[i]=e.xhrFields[i];e.mimeType&&s.overrideMimeType&&s.overrideMimeType(e.mimeType),e.crossDomain||n["X-Requested-With"]||(n["X-Requested-With"]="XMLHttpRequest");for(i in n)s.setRequestHeader(i,n[i]);t=function(e){return function(){t&&(delete Cc[o],t=s.onload=s.onerror=null,"abort"===e?s.abort():"error"===e?r(s.status,s.statusText):r(Dc[s.status]||s.status,s.statusText,"string"==typeof s.responseText?{text:s.responseText}:void 0,s.getAllResponseHeaders()))}},s.onload=t(),s.onerror=t("error"),t=Cc[o]=t("abort");try{s.send(e.hasContent&&e.data||null)}catch(u){if(t)throw u}},abort:function(){t&&t()}}:void 0}),n.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(e){return n.globalEval(e),e}}}),n.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),n.ajaxTransport("script",function(e){if(e.crossDomain){var t,r;return{send:function(i,s){t=n("<script>").prop({async:!0,charset:e.scriptCharset,src:e.url}).on("load error",r=function(e){t.remove(),r=null,e&&s("error"===e.type?404:200,e.type)}),l.head.appendChild(t[0])},abort:function(){r&&r()}}}});var Fc=[],Gc=/(=)\?(?=&|$)|\?\?/;n.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Fc.pop()||n.expando+"_"+cc++;return this[e]=!0,e}}),n.ajaxPrefilter("json jsonp",function(e,t,r){var i,s,o,u=e.jsonp!==!1&&(Gc.test(e.url)?"url":"string"==typeof e.data&&!(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&Gc.test(e.data)&&"data");return u||"jsonp"===e.dataTypes[0]?(i=e.jsonpCallback=n.isFunction(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,u?e[u]=e[u].replace(Gc,"$1"+i):e.jsonp!==!1&&(e.url+=(dc.test(e.url)?"&":"?")+e.jsonp+"="+i),e.converters["script json"]=function(){return o||n.error(i+" was not called"),o[0]},e.dataTypes[0]="json",s=a[i],a[i]=function(){o=arguments},r.always(function(){a[i]=s,e[i]&&(e.jsonpCallback=t.jsonpCallback,Fc.push(i)),o&&n.isFunction(s)&&s(o[0]),o=s=void 0}),"script"):void 0}),n.parseHTML=function(e,t,r){if(!e||"string"!=typeof e)return null;"boolean"==typeof t&&(r=t,t=!1),t=t||l;var i=v.exec(e),s=!r&&[];return i?[t.createElement(i[1])]:(i=n.buildFragment([e],t,s),s&&s.length&&n(s).remove(),n.merge([],i.childNodes))};var Hc=n.fn.load;n.fn.load=function(e,t,r){if("string"!=typeof e&&Hc)return Hc.apply(this,arguments);var i,s,o,u=this,a=e.indexOf(" ");return a>=0&&(i=n.trim(e.slice(a)),e=e.slice(0,a)),n.isFunction(t)?(r=t,t=void 0):t&&"object"==typeof t&&(s="POST"),u.length>0&&n.ajax({url:e,type:s,dataType:"html",data:t}).done(function(e){o=arguments,u.html(i?n("<div>").append(n.parseHTML(e)).find(i):e)}).complete(r&&function(e,t){u.each(r,o||[e.responseText,t,e])}),this},n.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){n.fn[t]=function(e){return this.on(t,e)}}),n.expr.filters.animated=function(e){return n.grep(n.timers,function(t){return e===t.elem}).length};var Ic=a.document.documentElement;n.offset={setOffset:function(e,t,r){var i,s,o,u,a,f,l,c=n.css(e,"position"),h=n(e),p={};"static"===c&&(e.style.position="relative"),a=h.offset(),o=n.css(e,"top"),f=n.css(e,"left"),l=("absolute"===c||"fixed"===c)&&(o+f).indexOf("auto")>-1,l?(i=h.position(),u=i.top,s=i.left):(u=parseFloat(o)||0,s=parseFloat(f)||0),n.isFunction(t)&&(t=t.call(e,r,a)),null!=t.top&&(p.top=t.top-a.top+u),null!=t.left&&(p.left=t.left-a.left+s),"using"in t?t.using.call(e,p):h.css(p)}},n.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each(function(t){n.offset.setOffset(this,e,t)});var t,r,i=this[0],s={top:0,left:0},o=i&&i.ownerDocument;if(o)return t=o.documentElement,n.contains(t,i)?(typeof i.getBoundingClientRect!==U&&(s=i.getBoundingClientRect()),r=Jc(o),{top:s.top+r.pageYOffset-t.clientTop,left:s.left+r.pageXOffset-t.clientLeft}):s},position:function(){if(this[0]){var e,t,r=this[0],i={top:0,left:0};return"fixed"===n.css(r,"position")?t=r.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),n.nodeName(e[0],"html")||(i=e.offset()),i.top+=n.css(e[0],"borderTopWidth",!0),i.left+=n.css(e[0],"borderLeftWidth",!0)),{top:t.top-i.top-n.css(r,"marginTop",!0),left:t.left-i.left-n.css(r,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){var e=this.offsetParent||Ic;while(e&&!n.nodeName(e,"html")&&"static"===n.css(e,"position"))e=e.offsetParent;return e||Ic})}}),n.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,t){var r="pageYOffset"===t;n.fn[e]=function(n){return J(this,function(e,n,i){var s=Jc(e);return void 0===i?s?s[t]:e[n]:void (s?s.scrollTo(r?a.pageXOffset:i,r?i:a.pageYOffset):e[n]=i)},e,n,arguments.length,null)}}),n.each(["top","left"],function(e,t){n.cssHooks[t]=yb(k.pixelPosition,function(e,r){return r?(r=xb(e,t),vb.test(r)?n(e).position()[t]+"px":r):void 0})}),n.each({Height:"height",Width:"width"},function(e,t){n.each({padding:"inner"+e,content:t,"":"outer"+e},function(r,i){n.fn[i]=function(i,s){var o=arguments.length&&(r||"boolean"!=typeof i),u=r||(i===!0||s===!0?"margin":"border");return J(this,function(t,r,i){var s;return n.isWindow(t)?t.document.documentElement["client"+e]:9===t.nodeType?(s=t.documentElement,Math.max(t.body["scroll"+e],s["scroll"+e],t.body["offset"+e],s["offset"+e],s["client"+e])):void 0===i?n.css(t,r,u):n.style(t,r,i,u)},t,o?i:void 0,o,null)}})}),n.fn.size=function(){return this.length},n.fn.andSelf=n.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return n});var Kc=a.jQuery,Lc=a.$;return n.noConflict=function(e){return a.$===n&&(a.$=Lc),e&&a.jQuery===n&&(a.jQuery=Kc),n},typeof b===U&&(a.jQuery=a.$=n),n}),function(){var e=this,t=e._,n={},r=Array.prototype,i=Object.prototype,s=Function.prototype,o=r.push,u=r.slice,a=r.concat,f=i.toString,l=i.hasOwnProperty,c=r.forEach,h=r.map,p=r.reduce,d=r.reduceRight,v=r.filter,m=r.every,g=r.some,y=r.indexOf,b=r.lastIndexOf,w=Array.isArray,E=Object.keys,S=s.bind,x=function(e){if(e instanceof x)return e;if(!(this instanceof x))return new x(e);this._wrapped=e};typeof exports!="undefined"?(typeof module!="undefined"&&module.exports&&(exports=module.exports=x),exports._=x):e._=x,x.VERSION="1.6.0";var T=x.each=x.forEach=function(e,t,r){if(e==null)return e;if(c&&e.forEach===c)e.forEach(t,r);else if(e.length===+e.length){for(var i=0,s=e.length;i<s;i++)if(t.call(r,e[i],i,e)===n)return}else{var o=x.keys(e);for(var i=0,s=o.length;i<s;i++)if(t.call(r,e[o[i]],o[i],e)===n)return}return e};x.map=x.collect=function(e,t,n){var r=[];return e==null?r:h&&e.map===h?e.map(t,n):(T(e,function(e,i,s){r.push(t.call(n,e,i,s))}),r)};var N="Reduce of empty array with no initial value";x.reduce=x.foldl=x.inject=function(e,t,n,r){var i=arguments.length>2;e==null&&(e=[]);if(p&&e.reduce===p)return r&&(t=x.bind(t,r)),i?e.reduce(t,n):e.reduce(t);T(e,function(e,s,o){i?n=t.call(r,n,e,s,o):(n=e,i=!0)});if(!i)throw new TypeError(N);return n},x.reduceRight=x.foldr=function(e,t,n,r){var i=arguments.length>2;e==null&&(e=[]);if(d&&e.reduceRight===d)return r&&(t=x.bind(t,r)),i?e.reduceRight(t,n):e.reduceRight(t);var s=e.length;if(s!==+s){var o=x.keys(e);s=o.length}T(e,function(u,a,f){a=o?o[--s]:--s,i?n=t.call(r,n,e[a],a,f):(n=e[a],i=!0)});if(!i)throw new TypeError(N);return n},x.find=x.detect=function(e,t,n){var r;return C(e,function(e,i,s){if(t.call(n,e,i,s))return r=e,!0}),r},x.filter=x.select=function(e,t,n){var r=[];return e==null?r:v&&e.filter===v?e.filter(t,n):(T(e,function(e,i,s){t.call(n,e,i,s)&&r.push(e)}),r)},x.reject=function(e,t,n){return x.filter(e,function(e,r,i){return!t.call(n,e,r,i)},n)},x.every=x.all=function(e,t,r){t||(t=x.identity);var i=!0;return e==null?i:m&&e.every===m?e.every(t,r):(T(e,function(e,s,o){if(!(i=i&&t.call(r,e,s,o)))return n}),!!i)};var C=x.some=x.any=function(e,t,r){t||(t=x.identity);var i=!1;return e==null?i:g&&e.some===g?e.some(t,r):(T(e,function(e,s,o){if(i||(i=t.call(r,e,s,o)))return n}),!!i)};x.contains=x.include=function(e,t){return e==null?!1:y&&e.indexOf===y?e.indexOf(t)!=-1:C(e,function(e){return e===t})},x.invoke=function(e,t){var n=u.call(arguments,2),r=x.isFunction(t);return x.map(e,function(e){return(r?t:e[t]).apply(e,n)})},x.pluck=function(e,t){return x.map(e,x.property(t))},x.where=function(e,t){return x.filter(e,x.matches(t))},x.findWhere=function(e,t){return x.find(e,x.matches(t))},x.max=function(e,t,n){if(!t&&x.isArray(e)&&e[0]===+e[0]&&e.length<65535)return Math.max.apply(Math,e);var r=-Infinity,i=-Infinity;return T(e,function(e,s,o){var u=t?t.call(n,e,s,o):e;u>i&&(r=e,i=u)}),r},x.min=function(e,t,n){if(!t&&x.isArray(e)&&e[0]===+e[0]&&e.length<65535)return Math.min.apply(Math,e);var r=Infinity,i=Infinity;return T(e,function(e,s,o){var u=t?t.call(n,e,s,o):e;u<i&&(r=e,i=u)}),r},x.shuffle=function(e){var t,n=0,r=[];return T(e,function(e){t=x.random(n++),r[n-1]=r[t],r[t]=e}),r},x.sample=function(e,t,n){return t==null||n?(e.length!==+e.length&&(e=x.values(e)),e[x.random(e.length-1)]):x.shuffle(e).slice(0,Math.max(0,t))};var k=function(e){return e==null?x.identity:x.isFunction(e)?e:x.property(e)};x.sortBy=function(e,t,n){return t=k(t),x.pluck(x.map(e,function(e,r,i){return{value:e,index:r,criteria:t.call(n,e,r,i)}}).sort(function(e,t){var n=e.criteria,r=t.criteria;if(n!==r){if(n>r||n===void 0)return 1;if(n<r||r===void 0)return-1}return e.index-t.index}),"value")};var L=function(e){return function(t,n,r){var i={};return n=k(n),T(t,function(s,o){var u=n.call(r,s,o,t);e(i,u,s)}),i}};x.groupBy=L(function(e,t,n){x.has(e,t)?e[t].push(n):e[t]=[n]}),x.indexBy=L(function(e,t,n){e[t]=n}),x.countBy=L(function(e,t){x.has(e,t)?e[t]++:e[t]=1}),x.sortedIndex=function(e,t,n,r){n=k(n);var i=n.call(r,t),s=0,o=e.length;while(s<o){var u=s+o>>>1;n.call(r,e[u])<i?s=u+1:o=u}return s},x.toArray=function(e){return e?x.isArray(e)?u.call(e):e.length===+e.length?x.map(e,x.identity):x.values(e):[]},x.size=function(e){return e==null?0:e.length===+e.length?e.length:x.keys(e).length},x.first=x.head=x.take=function(e,t,n){return e==null?void 0:t==null||n?e[0]:t<0?[]:u.call(e,0,t)},x.initial=function(e,t,n){return u.call(e,0,e.length-(t==null||n?1:t))},x.last=function(e,t,n){return e==null?void 0:t==null||n?e[e.length-1]:u.call(e,Math.max(e.length-t,0))},x.rest=x.tail=x.drop=function(e,t,n){return u.call(e,t==null||n?1:t)},x.compact=function(e){return x.filter(e,x.identity)};var A=function(e,t,n){return t&&x.every(e,x.isArray)?a.apply(n,e):(T(e,function(e){x.isArray(e)||x.isArguments(e)?t?o.apply(n,e):A(e,t,n):n.push(e)}),n)};x.flatten=function(e,t){return A(e,t,[])},x.without=function(e){return x.difference(e,u.call(arguments,1))},x.partition=function(e,t,n){t=k(t);var r=[],i=[];return T(e,function(e){(t.call(n,e)?r:i).push(e)}),[r,i]},x.uniq=x.unique=function(e,t,n,r){x.isFunction(t)&&(r=n,n=t,t=!1);var i=n?x.map(e,n,r):e,s=[],o=[];return T(i,function(n,r){if(t?!r||o[o.length-1]!==n:!x.contains(o,n))o.push(n),s.push(e[r])}),s},x.union=function(){return x.uniq(x.flatten(arguments,!0))},x.intersection=function(e){var t=u.call(arguments,1);return x.filter(x.uniq(e),function(e){return x.every(t,function(t){return x.contains(t,e)})})},x.difference=function(e){var t=a.apply(r,u.call(arguments,1));return x.filter(e,function(e){return!x.contains(t,e)})},x.zip=function(){var e=x.max(x.pluck(arguments,"length").concat(0)),t=new Array(e);for(var n=0;n<e;n++)t[n]=x.pluck(arguments,""+n);return t},x.object=function(e,t){if(e==null)return{};var n={};for(var r=0,i=e.length;r<i;r++)t?n[e[r]]=t[r]:n[e[r][0]]=e[r][1];return n},x.indexOf=function(e,t,n){if(e==null)return-1;var r=0,i=e.length;if(n){if(typeof n!="number")return r=x.sortedIndex(e,t),e[r]===t?r:-1;r=n<0?Math.max(0,i+n):n}if(y&&e.indexOf===y)return e.indexOf(t,n);for(;r<i;r++)if(e[r]===t)return r;return-1},x.lastIndexOf=function(e,t,n){if(e==null)return-1;var r=n!=null;if(b&&e.lastIndexOf===b)return r?e.lastIndexOf(t,n):e.lastIndexOf(t);var i=r?n:e.length;while(i--)if(e[i]===t)return i;return-1},x.range=function(e,t,n){arguments.length<=1&&(t=e||0,e=0),n=arguments[2]||1;var r=Math.max(Math.ceil((t-e)/n),0),i=0,s=new Array(r);while(i<r)s[i++]=e,e+=n;return s};var O=function(){};x.bind=function(e,t){var n,r;if(S&&e.bind===S)return S.apply(e,u.call(arguments,1));if(!x.isFunction(e))throw new TypeError;return n=u.call(arguments,2),r=function(){if(this instanceof r){O.prototype=e.prototype;var i=new O;O.prototype=null;var s=e.apply(i,n.concat(u.call(arguments)));return Object(s)===s?s:i}return e.apply(t,n.concat(u.call(arguments)))}},x.partial=function(e){var t=u.call(arguments,1);return function(){var n=0,r=t.slice();for(var i=0,s=r.length;i<s;i++)r[i]===x&&(r[i]=arguments[n++]);while(n<arguments.length)r.push(arguments[n++]);return e.apply(this,r)}},x.bindAll=function(e){var t=u.call(arguments,1);if(t.length===0)throw new Error("bindAll must be passed function names");return T(t,function(t){e[t]=x.bind(e[t],e)}),e},x.memoize=function(e,t){var n={};return t||(t=x.identity),function(){var r=t.apply(this,arguments);return x.has(n,r)?n[r]:n[r]=e.apply(this,arguments)}},x.delay=function(e,t){var n=u.call(arguments,2);return setTimeout(function(){return e.apply(null,n)},t)},x.defer=function(e){return x.delay.apply(x,[e,1].concat(u.call(arguments,1)))},x.throttle=function(e,t,n){var r,i,s,o=null,u=0;n||(n={});var a=function(){u=n.leading===!1?0:x.now(),o=null,s=e.apply(r,i),r=i=null};return function(){var f=x.now();!u&&n.leading===!1&&(u=f);var l=t-(f-u);return r=this,i=arguments,l<=0?(clearTimeout(o),o=null,u=f,s=e.apply(r,i),r=i=null):!o&&n.trailing!==!1&&(o=setTimeout(a,l)),s}},x.debounce=function(e,t,n){var r,i,s,o,u,a=function(){var f=x.now()-o;f<t?r=setTimeout(a,t-f):(r=null,n||(u=e.apply(s,i),s=i=null))};return function(){s=this,i=arguments,o=x.now();var f=n&&!r;return r||(r=setTimeout(a,t)),f&&(u=e.apply(s,i),s=i=null),u}},x.once=function(e){var t=!1,n;return function(){return t?n:(t=!0,n=e.apply(this,arguments),e=null,n)}},x.wrap=function(e,t){return x.partial(t,e)},x.compose=function(){var e=arguments;return function(){var t=arguments;for(var n=e.length-1;n>=0;n--)t=[e[n].apply(this,t)];return t[0]}},x.after=function(e,t){return function(){if(--e<1)return t.apply(this,arguments)}},x.keys=function(e){if(!x.isObject(e))return[];if(E)return E(e);var t=[];for(var n in e)x.has(e,n)&&t.push(n);return t},x.values=function(e){var t=x.keys(e),n=t.length,r=new Array(n);for(var i=0;i<n;i++)r[i]=e[t[i]];return r},x.pairs=function(e){var t=x.keys(e),n=t.length,r=new Array(n);for(var i=0;i<n;i++)r[i]=[t[i],e[t[i]]];return r},x.invert=function(e){var t={},n=x.keys(e);for(var r=0,i=n.length;r<i;r++)t[e[n[r]]]=n[r];return t},x.functions=x.methods=function(e){var t=[];for(var n in e)x.isFunction(e[n])&&t.push(n);return t.sort()},x.extend=function(e){return T(u.call(arguments,1),function(t){if(t)for(var n in t)e[n]=t[n]}),e},x.pick=function(e){var t={},n=a.apply(r,u.call(arguments,1));return T(n,function(n){n in e&&(t[n]=e[n])}),t},x.omit=function(e){var t={},n=a.apply(r,u.call(arguments,1));for(var i in e)x.contains(n,i)||(t[i]=e[i]);return t},x.defaults=function(e){return T(u.call(arguments,1),function(t){if(t)for(var n in t)e[n]===void 0&&(e[n]=t[n])}),e},x.clone=function(e){return x.isObject(e)?x.isArray(e)?e.slice():x.extend({},e):e},x.tap=function(e,t){return t(e),e};var M=function(e,t,n,r){if(e===t)return e!==0||1/e==1/t;if(e==null||t==null)return e===t;e instanceof x&&(e=e._wrapped),t instanceof x&&(t=t._wrapped);var i=f.call(e);if(i!=f.call(t))return!1;switch(i){case"[object String]":return e==String(t);case"[object Number]":return e!=+e?t!=+t:e==0?1/e==1/t:e==+t;case"[object Date]":case"[object Boolean]":return+e==+t;case"[object RegExp]":return e.source==t.source&&e.global==t.global&&e.multiline==t.multiline&&e.ignoreCase==t.ignoreCase}if(typeof e!="object"||typeof t!="object")return!1;var s=n.length;while(s--)if(n[s]==e)return r[s]==t;var o=e.constructor,u=t.constructor;if(o!==u&&!(x.isFunction(o)&&o instanceof o&&x.isFunction(u)&&u instanceof u)&&"constructor"in e&&"constructor"in t)return!1;n.push(e),r.push(t);var a=0,l=!0;if(i=="[object Array]"){a=e.length,l=a==t.length;if(l)while(a--)if(!(l=M(e[a],t[a],n,r)))break}else{for(var c in e)if(x.has(e,c)){a++;if(!(l=x.has(t,c)&&M(e[c],t[c],n,r)))break}if(l){for(c in t)if(x.has(t,c)&&!(a--))break;l=!a}}return n.pop(),r.pop(),l};x.isEqual=function(e,t){return M(e,t,[],[])},x.isEmpty=function(e){if(e==null)return!0;if(x.isArray(e)||x.isString(e))return e.length===0;for(var t in e)if(x.has(e,t))return!1;return!0},x.isElement=function(e){return!!e&&e.nodeType===1},x.isArray=w||function(e){return f.call(e)=="[object Array]"},x.isObject=function(e){return e===Object(e)},T(["Arguments","Function","String","Number","Date","RegExp"],function(e){x["is"+e]=function(t){return f.call(t)=="[object "+e+"]"}}),x.isArguments(arguments)||(x.isArguments=function(e){return!!e&&!!x.has(e,"callee")}),typeof /./!="function"&&(x.isFunction=function(e){return typeof e=="function"}),x.isFinite=function(e){return isFinite(e)&&!isNaN(parseFloat(e))},x.isNaN=function(e){return x.isNumber(e)&&e!=+e},x.isBoolean=function(e){return e===!0||e===!1||f.call(e)=="[object Boolean]"},x.isNull=function(e){return e===null},x.isUndefined=function(e){return e===void 0},x.has=function(e,t){return l.call(e,t)},x.noConflict=function(){return e._=t,this},x.identity=function(e){return e},x.constant=function(e){return function(){return e}},x.property=function(e){return function(t){return t[e]}},x.matches=function(e){return function(t){if(t===e)return!0;for(var n in e)if(e[n]!==t[n])return!1;return!0}},x.times=function(e,t,n){var r=Array(Math.max(0,e));for(var i=0;i<e;i++)r[i]=t.call(n,i);return r},x.random=function(e,t){return t==null&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))},x.now=Date.now||function(){return(new Date).getTime()};var _={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"}};_.unescape=x.invert(_.escape);var D={escape:new RegExp("["+x.keys(_.escape).join("")+"]","g"),unescape:new RegExp("("+x.keys(_.unescape).join("|")+")","g")};x.each(["escape","unescape"],function(e){x[e]=function(t){return t==null?"":(""+t).replace(D[e],function(t){return _[e][t]})}}),x.result=function(e,t){if(e==null)return void 0;var n=e[t];return x.isFunction(n)?n.call(e):n},x.mixin=function(e){T(x.functions(e),function(t){var n=x[t]=e[t];x.prototype[t]=function(){var e=[this._wrapped];return o.apply(e,arguments),F.call(this,n.apply(x,e))}})};var P=0;x.uniqueId=function(e){var t=++P+"";return e?e+t:t},x.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var H=/(.)^/,B={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},j=/\\|'|\r|\n|\t|\u2028|\u2029/g;x.template=function(e,t,n){var r;n=x.defaults({},n,x.templateSettings);var i=new RegExp([(n.escape||H).source,(n.interpolate||H).source,(n.evaluate||H).source].join("|")+"|$","g"),s=0,o="__p+='";e.replace(i,function(t,n,r,i,u){return o+=e.slice(s,u).replace(j,function(e){return"\\"+B[e]}),n&&(o+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'"),r&&(o+="'+\n((__t=("+r+"))==null?'':__t)+\n'"),i&&(o+="';\n"+i+"\n__p+='"),s=u+t.length,t}),o+="';\n",n.variable||(o="with(obj||{}){\n"+o+"}\n"),o="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+o+"return __p;\n";try{r=new Function(n.variable||"obj","_",o)}catch(u){throw u.source=o,u}if(t)return r(t,x);var a=function(e){return r.call(this,e,x)};return a.source="function("+(n.variable||"obj")+"){\n"+o+"}",a},x.chain=function(e){return x(e).chain()};var F=function(e){return this._chain?x(e).chain():e};x.mixin(x),T(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=r[e];x.prototype[e]=function(){var n=this._wrapped;return t.apply(n,arguments),(e=="shift"||e=="splice")&&n.length===0&&delete n[0],F.call(this,n)}}),T(["concat","join","slice"],function(e){var t=r[e];x.prototype[e]=function(){return F.call(this,t.apply(this._wrapped,arguments))}}),x.extend(x.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}}),typeof define=="function"&&define.amd&&define("underscore",[],function(){return x})}.call(this),function(){var e=this,t=e.Backbone,n;typeof exports!="undefined"?n=exports:n=e.Backbone={},n.VERSION="0.5.3";var r=e._;!r&&typeof require!="undefined"&&(r=require("underscore")._);var i=e.jQuery||e.Zepto;n.noConflict=function(){return e.Backbone=t,this},n.emulateHTTP=!1,n.emulateJSON=!1,n.Events={bind:function(e,t,n){var r=this._callbacks||(this._callbacks={}),i=r[e]||(r[e]=[]);return i.push([t,n]),this},unbind:function(e,t){var n;if(!e)this._callbacks={};else if(n=this._callbacks)if(!t)n[e]=[];else{var r=n[e];if(!r)return this;for(var i=0,s=r.length;i<s;i++)if(r[i]&&t===r[i][0]){r[i]=null;break}}return this},trigger:function(e){var t,n,r,i,s,o=2;if(!(n=this._callbacks))return this;while(o--){r=o?e:"all";if(t=n[r])for(var u=0,a=t.length;u<a;u++)(i=t[u])?(s=o?Array.prototype.slice.call(arguments,1):arguments,i[0].apply(i[1]||this,s)):(t.splice(u,1),u--,a--)}return this}},n.Model=function(e,t){var n;e||(e={});if(n=this.defaults)r.isFunction(n)&&(n=n.call(this)),e=r.extend({},n,e);this.attributes={},this._escapedAttributes={},this.cid=r.uniqueId("c"),this.set(e,{silent:!0}),this._changed=!1,this._previousAttributes=r.clone(this.attributes),t&&t.collection&&(this.collection=t.collection),this.initialize(e,t)},r.extend(n.Model.prototype,n.Events,{_previousAttributes:null,_changed:!1,idAttribute:"id",initialize:function(){},toJSON:function(){return r.clone(this.attributes)},get:function(e){return this.attributes[e]},escape:function(e){var t;if(t=this._escapedAttributes[e])return t;var n=this.attributes[e];return this._escapedAttributes[e]=S(n==null?"":""+n)},has:function(e){return this.attributes[e]!=null},set:function(e,t){t||(t={});if(!e)return this;e.attributes&&(e=e.attributes);var n=this.attributes,i=this._escapedAttributes;if(!t.silent&&this.validate&&!this._performValidation(e,t))return!1;this.idAttribute in e&&(this.id=e[this.idAttribute]);var s=this._changing;this._changing=!0;for(var o in e){var u=e[o];r.isEqual(n[o],u)||(n[o]=u,delete i[o],this._changed=!0,t.silent||this.trigger("change:"+o,this,u,t))}return!s&&!t.silent&&this._changed&&this.change(t),this._changing=!1,this},unset:function(e,t){if(e in this.attributes){t||(t={});var n=this.attributes[e],r={};return r[e]=void 0,!t.silent&&this.validate&&!this._performValidation(r,t)?!1:(delete this.attributes[e],delete this._escapedAttributes[e],e==this.idAttribute&&delete this.id,this._changed=!0,t.silent||(this.trigger("change:"+e,this,void 0,t),this.change(t)),this)}return this},clear:function(e){e||(e={});var t,n=this.attributes,r={};for(t in n)r[t]=void 0;if(!e.silent&&this.validate&&!this._performValidation(r,e))return!1;this.attributes={},this._escapedAttributes={},this._changed=!0;if(!e.silent){for(t in n)this.trigger("change:"+t,this,void 0,e);this.change(e)}return this},fetch:function(e){e||(e={});var t=this,r=e.success;return e.success=function(n,i,s){if(!t.set(t.parse(n,s),e))return!1;r&&r(t,n)},e.error=E(e.error,t,e),(this.sync||n.sync).call(this,"read",this,e)},save:function(e,t){t||(t={});if(e&&!this.set(e,t))return!1;var r=this,i=t.success;t.success=function(e,n,s){if(!r.set(r.parse(e,s),t))return!1;i&&i(r,e,s)},t.error=E(t.error,r,t);var s=this.isNew()?"create":"update";return(this.sync||n.sync).call(this,s,this,t)},destroy:function(e){e||(e={});if(this.isNew())return this.trigger("destroy",this,this.collection,e);var t=this,r=e.success;return e.success=function(n){t.trigger("destroy",t,t.collection,e),r&&r(t,n)},e.error=E(e.error,t,e),(this.sync||n.sync).call(this,"delete",this,e)},url:function(){var e=b(this.collection)||this.urlRoot||w();return this.isNew()?e:e+(e.charAt(e.length-1)=="/"?"":"/")+encodeURIComponent(this.id)},parse:function(e,t){return e},clone:function(){return new this.constructor(this)},isNew:function(){return this.id==null},change:function(e){this.trigger("change",this,e),this._previousAttributes=r.clone(this.attributes),this._changed=!1},hasChanged:function(e){return e?this._previousAttributes[e]!=this.attributes[e]:this._changed},changedAttributes:function(e){e||(e=this.attributes);var t=this._previousAttributes,n=!1;for(var i in e)r.isEqual(t[i],e[i])||(n=n||{},n[i]=e[i]);return n},previous:function(e){return!e||!this._previousAttributes?null:this._previousAttributes[e]},previousAttributes:function(){return r.clone(this._previousAttributes)},_performValidation:function(e,t){var n=this.validate(e);return n?(t.error?t.error(this,n,t):this.trigger("error",this,n,t),!1):!0}}),n.Collection=function(e,t){t||(t={}),t.comparator&&(this.comparator=t.comparator),r.bindAll(this,"_onModelEvent","_removeReference"),this._reset(),e&&this.reset(e,{silent:!0}),this.initialize.apply(this,arguments)},r.extend(n.Collection.prototype,n.Events,{model:n.Model,initialize:function(){},toJSON:function(){return this.map(function(e){return e.toJSON()})},add:function(e,t){if(r.isArray(e))for(var n=0,i=e.length;n<i;n++)this._add(e[n],t);else this._add(e,t);return this},remove:function(e,t){if(r.isArray(e))for(var n=0,i=e.length;n<i;n++)this._remove(e[n],t);else this._remove(e,t);return this},get:function(e){return e==null?null:this._byId[e.id!=null?e.id:e]},getByCid:function(e){return e&&this._byCid[e.cid||e]},at:function(e){return this.models[e]},sort:function(e){e||(e={});if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return this.models=this.sortBy(this.comparator),e.silent||this.trigger("reset",this,e),this},pluck:function(e){return r.map(this.models,function(t){return t.get(e)})},reset:function(e,t){return e||(e=[]),t||(t={}),this.each(this._removeReference),this._reset(),this.add(e,{silent:!0}),t.silent||this.trigger("reset",this,t),this},fetch:function(e){e||(e={});var t=this,r=e.success;return e.success=function(n,i,s){t[e.add?"add":"reset"](t.parse(n,s),e),r&&r(t,n)},e.error=E(e.error,t,e),(this.sync||n.sync).call(this,"read",this,e)},create:function(e,t){var n=this;t||(t={}),e=this._prepareModel(e,t);if(!e)return!1;var r=t.success;return t.success=function(e,i,s){n.add(e,t),r&&r(e,i,s)},e.save(null,t),e},parse:function(e,t){return e},chain:function(){return r(this.models).chain()},_reset:function(e){this.length=0,this.models=[],this._byId={},this._byCid={}},_prepareModel:function(e,t){if(e instanceof n.Model)e.collection||(e.collection=this);else{var r=e;e=new this.model(r,{collection:this}),e.validate&&!e._performValidation(r,t)&&(e=!1)}return e},_add:function(e,t){t||(t={}),e=this._prepareModel(e,t);if(!e)return!1;var n=this.getByCid(e);if(n)throw new Error(["Can't add the same model to a set twice",n.id]);this._byId[e.id]=e,this._byCid[e.cid]=e;var r=t.at!=null?t.at:this.comparator?this.sortedIndex(e,this.comparator):this.length;return this.models.splice(r,0,e),e.bind("all",this._onModelEvent),this.length++,t.silent||e.trigger("add",e,this,t),e},_remove:function(e,t){return t||(t={}),e=this.getByCid(e)||this.get(e),e?(delete this._byId[e.id],delete this._byCid[e.cid],this.models.splice(this.indexOf(e),1),this.length--,t.silent||e.trigger("remove",e,this,t),this._removeReference(e),e):null},_removeReference:function(e){this==e.collection&&delete e.collection,e.unbind("all",this._onModelEvent)},_onModelEvent:function(e,t,n,r){if((e=="add"||e=="remove")&&n!=this)return;e=="destroy"&&this._remove(t,r),t&&e==="change:"+t.idAttribute&&(delete this._byId[t.previous(t.idAttribute)],this._byId[t.id]=t),this.trigger.apply(this,arguments)}});var s=["forEach","each","map","reduce","reduceRight","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","sortBy","sortedIndex","toArray","size","first","rest","last","without","indexOf","lastIndexOf","isEmpty","groupBy"];r.each(s,function(e){n.Collection.prototype[e]=function(){return r[e].apply(r,[this.models].concat(r.toArray(arguments)))}}),n.Router=function(e){e||(e={}),e.routes&&(this.routes=e.routes),this._bindRoutes(),this.initialize.apply(this,arguments)};var o=/:([\w\d]+)/g,u=/\*([\w\d]+)/g,a=/[-[\]{}()+?.,\\^$|#\s]/g;r.extend(n.Router.prototype,n.Events,{initialize:function(){},route:function(e,t,i){n.history||(n.history=new n.History),r.isRegExp(e)||(e=this._routeToRegExp(e)),n.history.route(e,r.bind(function(n){var r=this._extractParameters(e,n);i.apply(this,r),this.trigger.apply(this,["route:"+t].concat(r))},this))},navigate:function(e,t){n.history.navigate(e,t)},_bindRoutes:function(){if(!this.routes)return;var e=[];for(var t in this.routes)e.unshift([t,this.routes[t]]);for(var n=0,r=e.length;n<r;n++)this.route(e[n][0],e[n][1],this[e[n][1]])},_routeToRegExp:function(e){return e=e.replace(a,"\\$&").replace(o,"([^/]*)").replace(u,"(.*?)"),new RegExp("^"+e+"$")},_extractParameters:function(e,t){return e.exec(t).slice(1)}}),n.History=function(){this.handlers=[],r.bindAll(this,"checkUrl")};var f=/^#*/,l=/msie [\w.]+/,c=!1;r.extend(n.History.prototype,{interval:50,getFragment:function(e,t){if(e==null)if(this._hasPushState||t){e=window.location.pathname;var n=window.location.search;n&&(e+=n),e.indexOf(this.options.root)==0&&(e=e.substr(this.options.root.length))}else e=window.location.hash;return decodeURIComponent(e.replace(f,""))},start:function(e){if(c)throw new Error("Backbone.history has already been started");this.options=r.extend({},{root:"/"},this.options,e),this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&window.history&&window.history.pushState);var t=this.getFragment(),n=document.documentMode,s=l.exec(navigator.userAgent.toLowerCase())&&(!n||n<=7);s&&(this.iframe=i('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow,this.navigate(t)),this._hasPushState?i(window).bind("popstate",this.checkUrl):"onhashchange"in window&&!s?i(window).bind("hashchange",this.checkUrl):setInterval(this.checkUrl,this.interval),this.fragment=t,c=!0;var o=window.location,u=o.pathname==this.options.root;if(this._wantsPushState&&!this._hasPushState&&!u)return this.fragment=this.getFragment(null,!0),window.location.replace(this.options.root+"#"+this.fragment),!0;this._wantsPushState&&this._hasPushState&&u&&o.hash&&(this.fragment=o.hash.replace(f,""),window.history.replaceState({},document.title,o.protocol+"//"+o.host+this.options.root+this.fragment));if(!this.options.silent)return this.loadUrl()},route:function(e,t){this.handlers.unshift({route:e,callback:t})},checkUrl:function(e){var t=this.getFragment();t==this.fragment&&this.iframe&&(t=this.getFragment(this.iframe.location.hash));if(t==this.fragment||t==decodeURIComponent(this.fragment))return!1;this.iframe&&this.navigate(t),this.loadUrl()||this.loadUrl(window.location.hash)},loadUrl:function(e){var t=this.fragment=this.getFragment(e),n=r.any(this.handlers,function(e){if(e.route.test(t))return e.callback(t),!0});return n},navigate:function(e,t){var n=(e||"").replace(f,"");if(this.fragment==n||this.fragment==decodeURIComponent(n))return;if(this._hasPushState){var r=window.location;n.indexOf(this.options.root)!=0&&(n=this.options.root+n),this.fragment=n,window.history.pushState({},document.title,r.protocol+"//"+r.host+n)}else window.location.hash=this.fragment=n,this.iframe&&n!=this.getFragment(this.iframe.location.hash)&&(this.iframe.document.open().close(),this.iframe.location.hash=n);t&&this.loadUrl(e)}}),n.View=function(e){this.cid=r.uniqueId("view"),this._configure(e||{}),this._ensureElement(),this.delegateEvents(),this.initialize.apply(this,arguments)};var h=function(e){return i(e,this.el)},p=/^(\S+)\s*(.*)$/,d=["model","collection","el","id","attributes","className","tagName"];r.extend(n.View.prototype,n.Events,{tagName:"div",$:h,initialize:function(){},render:function(){return this},remove:function(){return i(this.el).remove(),this},make:function(e,t,n){var r=document.createElement(e);return t&&i(r).attr(t),n&&i(r).html(n),r},delegateEvents:function(e){if(!e&&!(e=this.events))return;r.isFunction(e)&&(e=e.call(this)),i(this.el).unbind(".delegateEvents"+this.cid);for(var t in e){var n=this[e[t]];if(!n)throw new Error('Event "'+e[t]+'" does not exist');var s=t.match(p),o=s[1],u=s[2];n=r.bind(n,this),o+=".delegateEvents"+this.cid,u===""?i(this.el).bind(o,n):i(this.el).delegate(u,o,n)}},_configure:function(e){this.options&&(e=r.extend({},this.options,e));for(var t=0,n=d.length;t<n;t++){var i=d[t];e[i]&&(this[i]=e[i])}this.options=e},_ensureElement:function(){if(!this.el){var e=this.attributes||{};this.id&&(e.id=this.id),this.className&&(e["class"]=this.className),this.el=this.make(this.tagName,e)}else r.isString(this.el)&&(this.el=i(this.el).get(0))}});var v=function(e,t){var n=y(this,e,t);return n.extend=this.extend,n};n.Model.extend=n.Collection.extend=n.Router.extend=n.View.extend=v;var m={create:"POST",update:"PUT","delete":"DELETE",read:"GET"};n.sync=function(e,t,s){var o=m[e],u=r.extend({type:o,dataType:"json"},s);return u.url||(u.url=b(t)||w()),!u.data&&t&&(e=="create"||e=="update")&&(u.contentType="application/json",u.data=JSON.stringify(t.toJSON())),n.emulateJSON&&(u.contentType="application/x-www-form-urlencoded",u.data=u.data?{model:u.data}:{}),n.emulateHTTP&&(o==="PUT"||o==="DELETE")&&(n.emulateJSON&&(u.data._method=o),u.type="POST",u.beforeSend=function(e){e.setRequestHeader("X-HTTP-Method-Override",o)}),u.type!=="GET"&&!n.emulateJSON&&(u.processData=!1),i.ajax(u)};var g=function(){},y=function(e,t,n){var i;return t&&t.hasOwnProperty("constructor")?i=t.constructor:i=function(){return e.apply(this,arguments)},r.extend(i,e),g.prototype=e.prototype,i.prototype=new g,t&&r.extend(i.prototype,t),n&&r.extend(i,n),i.prototype.constructor=i,i.__super__=e.prototype,i},b=function(e){return!e||!e.url?null:r.isFunction(e.url)?e.url():e.url},w=function(){throw new Error('A "url" property or function must be specified')},E=function(e,t,n){return function(r){e?e(t,r,n):t.trigger("error",t,r,n)}},S=function(e){return e.replace(/&(?!\w+;|#\d+;|#x[\da-f]+;)/gi,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2F;")}}.call(this),define("backbone",["jquery","underscore"],function(e){return function(){var t,n;return t||e.Backbone}}(this)),function(){var e=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],t=/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,n=/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,r=typeof location!="undefined"&&location.href,i=r&&location.protocol&&location.protocol.replace(/\:/,""),s=r&&location.hostname,o=r&&(location.port||void 0),u=[];define("text",[],function(){var a,f,l;return typeof window!="undefined"&&window.navigator&&window.document?f=function(e,t){var n=a.createXhr();n.open("GET",e,!0),n.onreadystatechange=function(){n.readyState===4&&t(n.responseText)},n.send(null)}:typeof process!="undefined"&&process.versions&&process.versions.node?(l=require.nodeRequire("fs"),f=function(e,t){t(l.readFileSync(e,"utf8"))}):typeof Packages!="undefined"&&(f=function(e,t){var n=new java.io.File(e),r=java.lang.System.getProperty("line.separator"),n=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(n),"utf-8")),i,s,o="";try{i=new java.lang.StringBuffer,(s=n.readLine())&&s.length()&&s.charAt(0)===65279&&(s=s.substring(1));for(i.append(s);(s=n.readLine())!==null;)i.append(r),i.append(s);o=String(i.toString())}finally{n.close()}t(o)}),a={version:"1.0.0",strip:function(e){if(e){var e=e.replace(t,""),r=e.match(n);r&&(e=r[1])}else e="";return e},jsEscape:function(e){return e.replace(/(['\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r")},createXhr:function(){var t,n,r;if(typeof XMLHttpRequest!="undefined")return new XMLHttpRequest;for(n=0;n<3;n++){r=e[n];try{t=new ActiveXObject(r)}catch(i){}if(t){e=[r];break}}if(!t)throw Error("createXhr(): XMLHttpRequest not available");return t},get:f,parseName:function(e){var t=!1,n=e.indexOf("."),r=e.substring(0,n),e=e.substring(n+1,e.length),n=e.indexOf("!");return n!==-1&&(t=e.substring(n+1,e.length),t=t==="strip",e=e.substring(0,n)),{moduleName:r,ext:e,strip:t}},xdRegExp:/^((\w+)\:)?\/\/([^\/\\]+)/,useXhr:function(e,t,n,r){var i=a.xdRegExp.exec(e),s;return i?(e=i[2],i=i[3],i=i.split(":"),s=i[1],i=i[0],(!e||e===t)&&(!i||i===n)&&(!s&&!i||s===r)):!0},finishLoad:function(e,t,n,r,i){n=t?a.strip(n):n,i.isBuild&&i.inlineText&&(u[e]=n),r(n)},load:function(e,t,n,u){var f=a.parseName(e),l=f.moduleName+"."+f.ext,c=t.toUrl(l),h=u&&u.text&&u.text.useXhr||a.useXhr;!r||h(c,i,s,o)?a.get(c,function(t){a.finishLoad(e,f.strip,t,n,u)}):t([l],function(e){a.finishLoad(f.moduleName+"."+f.ext,f.strip,e,n,u)})},write:function(e,t,n){if(t in u){var r=a.jsEscape(u[t]);n.asModule(e+"!"+t,"define(function () { return '"+r+"';});\n")}},writeFile:function(e,t,n,r,i){var t=a.parseName(t),s=t.moduleName+"."+t.ext,o=n.toUrl(t.moduleName+"."+t.ext)+".js";a.load(s,n,function(){var t=function(e){return r(o,e)};t.asModule=function(e,t){return r.asModule(e,o,t)},a.write(e,s,t,i)},i)}}})}(),define("text!template/login.html",[],function(){return'\n<div class="login_container">\n	<form id="login">\n		<h1 class="login_heading"><%= messages("login.sign") %> <span></h1>\n		<div class="form-group">\n			<label for="login_username"><%= messages("email") %></label>\n			<input type="text" class="form-control input-lg" value="" id="loginEmail">\n		</div>\n		<div class="form-group">\n			<label for="login_password"><%= messages("password") %></label>\n			<input type="password" class="form-control input-lg" value="" id="loginPassword">\n		</div>\n		<div class="submit_section">\n			<button class="btn btn-lg btn-success btn-block"><%= messages("login") %></button>\n		</div>\n		<span class="help-block"><a id="forgot" data-toggle="modal" data-target="#forgot-dialog"><%= messages("forgot_password") %>?</a></span>\n		<div class="form-group" id="login-messages"> </div>\n		\n	</form>\n</div>\n\n<div class="modal fade" id="forgot-dialog" tabindex="-1" role="dialog" aria-labelledby="" aria-hidden="true">\n  <div class="modal-dialog">\n    <div class="modal-content">\n      <form id="forgotForm">\n      <div class="modal-header">\n        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>\n        <h4 class="modal-title"><%= messages("forgot_password") %></h4>\n      </div>\n      <div class="modal-body">\n      	<div class="row">\n      	<div class="form-group">\n			<p><%= messages("login.forgot_dialog") %></p>\n		</div>\n		</div>\n		<div class="row">\n		<div class="col-lg-12">\n			<label><%= messages("email") %></label>\n			<input type="text" id="email">\n		</div>\n		</div>\n      </div>\n      <div class="modal-footer">\n        <button type="button" class="btn btn-default" data-dismiss="modal"><%= messages("cancel") %></button>\n        <button type="button" class="btn btn-primary">OK</button>\n      </div>\n      </form>\n    </div>\n  </div>\n</div>\n\n\n\n\n\n'}),define("text!template/locale.html",[],function(){return'<a href="#" class="dropdown-toggle" data-toggle="dropdown">\n	<i class="fa fa-language"></i> <span ><%= messages("language") %> <i class="fa fa-caret-down"></i></span>\n</a>\n<ul class="dropdown-menu dropdown-menu-right">\n    <li><a onclick="Heiduc.changeLanguageCall(\'zh_CN\')">中文(简体)</a></li>\n    <li><a onclick="Heiduc.changeLanguageCall(\'zh_TW\')">中文(繁體)</a></li>\n	<li><a onclick="Heiduc.changeLanguageCall(\'en\')">English</a></li>\n    <li><a onclick="Heiduc.changeLanguageCall(\'de\')">Deutsch</a></li>\n    <li><a onclick="Heiduc.changeLanguageCall(\'es\')">Español</a></li>\n    <li><a onclick="Heiduc.changeLanguageCall(\'sv\')">Swedish</a></li>\n    <li><a onclick="Heiduc.changeLanguageCall(\'ru\')">Русский</a></li>\n    <li><a onclick="Heiduc.changeLanguageCall(\'cs\')">Česky</a></li>\n    <li><a onclick="Heiduc.changeLanguageCall(\'tr\')">Türkçe</a></li>\n    <li><a onclick="Heiduc.changeLanguageCall(\'pt_BR\')">Brazilian Portuguese</a></li>\n    <li><a onclick="Heiduc.changeLanguageCall(\'ja\')">日本語</a></li>\n</ul>'}),define("text!template/login-topbar.html",[],function(){return'<!-- HEADER -->\n<nav class="header-navbar">\n    <div class="navbar-header clearfix">\n	<a class="navbar-toggle collapsed" data-toggle="collapse" data-target="#mini-navbar-collapse">\n	    <span class="sr-only">Toggle navigation</span>\n	    <i class="fa fa-plus"></i>\n	</a>\n	\n	<a class="logo pull-left" href="#">\n	    <img src="/static/assets/img/logo.png" width="110" alt="Heiduc Logo">\n	</a>\n	\n    </div>\n  \n    <div class="collapse navbar-collapse" id="mini-navbar-collapse">\n	\n	<ul class="nav navbar-nav navbar-right">\n		<li>\n			<%= locale %>\n		</li>\n	</ul>\n    </div><!-- navbar-collapse -->\n</nav>\n<!-- HEADER -->\n\n\n	\n'}),define("view/LoginView",["text!template/login.html","text!template/locale.html","text!template/login-topbar.html"],function(e,t,n){function r(e){e.preventDefault();var t=$("#email").val();return t?($("#loading").show(),Heiduc.jsonrpc.loginFrontService.forgotPassword(function(t){$("#loading").hide(),t.result=="success"?Heiduc.info(messages("login.password_letter_success")):Heiduc.error(e.message),$("#forgot-dialog").dialog("close")},t.toLowerCase()),!1):(Heiduc.error(messages("email_is_empty")),!1)}return Backbone.View.extend({el:$("#content"),events:{"click #forgot":"forgot_click","submit form#login":"login_submit"},css:"/static/css/login.css",forgot_click:function(){this.$("#email").val("")},login_submit:function(e){e.preventDefault();if(Heiduc.app.loggedIn)return Heiduc.app.trigger("login"),!1;var t=this.$("#loginEmail").val(),n=this.$("#loginPassword").val();return t==""?Heiduc.errorMessage("#login-messages",messages("email_is_empty")):Heiduc.jsonrpc.loginFrontService.login(function(e,t){if(Heiduc.serviceFailed(t))return!1;if(e.result=="success"){if(e.data=="siteUser")return Heiduc.error(messages("permission_denied")),!1;Heiduc.infoMessage("#login-messages",messages("success_logging_in")),Heiduc.app.loggedIn=!0,Heiduc.app.trigger("login")}else Heiduc.errorMessage("#login-messages",e.message)},t,n),!1},render:function(){Heiduc.addCSSFile(this.css),this.el.html($.jqote(e,{messages:messages})),$("#forgotForm").submit(r),$("#forgotCancelButton").click(function(){$("#forgot-dialog").dialog("close")});var i=_.template(t,{messages:messages});return $("#topbar").html(_.template(n,{messages:messages,locale:i})),this},remove:function(){this.el.html(""),Heiduc.removeCSSFile(this.css)}})}),define("text!template/pages.html",[],function(){return'\n<div class="row">\n	<div class="col-lg-12">\n		<div class="panel panel-default">\n			<div class="panel-body">\n				<div class="row">\n					<div class="col-md-12">\n						<ul class="nav nav-tabs" id="tabs_a">\n							<li class="active"><a data-toggle="tab" href="#tab-1"><%= messages("pages") %></a></li>\n							<li><a href="#structures"><%= messages("structures") %></a></li>\n						</ul>\n						<div class="tab-content" id="tabs_content_a">\n							<div id="tab-1" class="tab-pane fade in active">\n								<div id="pageSearch"></div>\n						        <div style="float:left">\n						          <div id="showTitleDiv">\n						            <a id="showTitle"><%= messages(\'show_names\') %></a>\n						            <a id="invertOrder"><%= messages(\'invert_order\') %></a>\n						          </div>\n						          <ul id="pages-tree"><img src="/static/images/ajax-loader.gif" /></ul>\n						        </div>\n								\n							</div>\n						</div>\n					</div>\n				</div>\n			</div>\n		</div>\n	</div>\n</div>\n\n<div class="modal fade" id="page-dialog" tabindex="-1" role="dialog" aria-labelledby="" aria-hidden="true">\n  <div class="modal-dialog">\n    <div class="modal-content">\n      <div class="modal-header">\n        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>\n        <h4 class="modal-title"><%= messages("pages.new_page") %></h4>\n      </div>\n      <div class="modal-body">\n      	<form id="pageForm">\n		    <div class="form-row">\n		        <label><%= messages("pages.page_title") %></label>\n		        <input id="title"/>\n		    </div>\n		    <div class="form-row">\n		        <label><%= messages("pages.page_url") %></label>\n		        <span id="parentURL"></span> <input id="url"/>\n		    </div>\n		    <div id="pageMessages"></div>\n		    <div class="modal-footer">\n		        <button id="cancelDlgButton" type="button" class="btn btn-default" data-dismiss="modal"><%= messages("cancel") %></button>\n		        <button type="submit" class="btn btn-primary"><%= messages("save") %></button>\n		    </div>\n		  </form>\n      </div>	\n    </div>\n  </div>\n</div>\n\n\n\n'}),function(e){e.extend(e.fn,{swapClass:function(e,t){var n=this.filter("."+e);return this.filter("."+t).removeClass(t).addClass(e),n.removeClass(e).addClass(t),this},replaceClass:function(e,t){return this.filter("."+e).removeClass(e).addClass(t).end()},hoverClass:function(t){return t=t||"hover",this.hover(function(){e(this).addClass(t)},function(){e(this).removeClass(t)})},heightToggle:function(e,t){e?this.animate({height:"toggle"},e,t):this.each(function(){jQuery(this)[jQuery(this).is(":hidden")?"show":"hide"](),t&&t.apply(this,arguments)})},heightHide:function(e,t){e?this.animate({height:"hide"},e,t):(this.hide(),t&&this.each(t))},prepareBranches:function(e){return e.prerendered||(this.filter(":last-child:not(ul)").addClass(t.last),this.filter((e.collapsed?"":"."+t.closed)+":not(."+t.open+")").find(">ul").hide()),this.filter(":has(>ul)")},applyClasses:function(n,r){this.filter(":has(>ul):not(:has(>a))").find(">span").unbind("click.treeview").bind("click.treeview",function(t){this==t.target&&r.apply(e(this).next())}).add(e("a",this)).hoverClass();if(!n.prerendered){this.filter(":has(>ul:hidden)").addClass(t.expandable).replaceClass(t.last,t.lastExpandable),this.not(":has(>ul:hidden)").addClass(t.collapsable).replaceClass(t.last,t.lastCollapsable);var i=this.find("div."+t.hitarea);i.length||(i=this.prepend('<div class="'+t.hitarea+'"/>').find("div."+t.hitarea)),i.removeClass().addClass(t.hitarea).each(function(){var t="";e.each(e(this).parent().attr("class").split(" "),function(){t+=this+"-hitarea "}),e(this).addClass(t)})}this.find("div."+t.hitarea).click(r)},treeview:function(n){function i(n,r){function i(r){return function(){return s.apply(e("div."+t.hitarea,n).filter(function(){return r?e(this).parent("."+r).length:!0})),!1}}e("a:eq(0)",r).click(i(t.collapsable)),e("a:eq(1)",r).click(i(t.expandable)),e("a:eq(2)",r).click(i())}function s(){e(this).parent().find(">.hitarea").swapClass(t.collapsableHitarea,t.expandableHitarea).swapClass(t.lastCollapsableHitarea,t.lastExpandableHitarea).end().swapClass(t.collapsable,t.expandable).swapClass(t.lastCollapsable,t.lastExpandable).find(">ul").heightToggle(n.animated,n.toggle),n.unique&&e(this).parent().siblings().find(">.hitarea").replaceClass(t.collapsableHitarea,t.expandableHitarea).replaceClass(t.lastCollapsableHitarea,t.lastExpandableHitarea).end().replaceClass(t.collapsable,t.expandable).replaceClass(t.lastCollapsable,t.lastExpandable).find(">ul").heightHide(n.animated,n.toggle)}function o(){function t(e){return e?1:0}var r=[];a.each(function(t,n){r[t]=e(n).is(":has(>ul:visible)")?1:0}),e.cookie(n.cookieId,r.join(""),n.cookieOptions)}function u(){var t=e.cookie(n.cookieId);if(t){var r=t.split("");a.each(function(t,n){e(n).find(">ul")[parseInt(r[t])?"show":"hide"]()})}}n=e.extend({cookieId:"treeview"},n);if(n.toggle){var r=n.toggle;n.toggle=function(){return r.apply(e(this).parent()[0],arguments)}}this.data("toggler",s),this.addClass("treeview");var a=this.find("li").prepareBranches(n);switch(n.persist){case"cookie":var f=n.toggle;n.toggle=function(){o(),f&&f.apply(this,arguments)},u();break;case"location":var l=this.find("a").filter(function(){return this.href.toLowerCase()==location.href.toLowerCase()});if(l.length){var c=l.addClass("selected").parents("ul, li").add(l.next()).show();n.prerendered&&c.filter("li").swapClass(t.collapsable,t.expandable).swapClass(t.lastCollapsable,t.lastExpandable).find(">.hitarea").swapClass(t.collapsableHitarea,t.expandableHitarea).swapClass(t.lastCollapsableHitarea,t.lastExpandableHitarea)}}return a.applyClasses(n,s),n.control&&(i(this,n.control),e(n.control).show()),this}}),e.treeview={};var t=e.treeview.classes={open:"open",closed:"closed",expandable:"expandable",expandableHitarea:"expandable-hitarea",lastExpandableHitarea:"lastExpandable-hitarea",collapsable:"collapsable",collapsableHitarea:"collapsable-hitarea",lastCollapsableHitarea:"lastCollapsable-hitarea",lastCollapsable:"lastCollapsable",lastExpandable:"lastExpandable",last:"last",hitarea:"hitarea"}}(jQuery),define("jquery.treeview",function(){}),Heiduc.PageSearchComponent=function(div){function onSearch(){$(div+" #pageSearchResult").html(""),$(div+" #progress").html('<img src="/static/images/ajax-loader.gif" />');var e={};e.query=$(div+" input[name=query]").val(),e.published=$(div+" #publishedSearch:checked").size()>0,e.unpublished=$(div+" #unpublishedSearch:checked").size()>0,e.fromDate=$(div+" input[name=from]").val(),e.toDate=$(div+" input[name=to]").val(),Heiduc.sendChannelCommand("pageSearch",e)}function onEnhancedSearch(){$(div+" #enhancedDiv").slideToggle();var e=messages("enhanced");$(div+" #enhancedSearch").text()==messages("enhanced")&&(e=messages("simple")),$(div+" #enhancedSearch").text(e)}function onChannelOpened(){$(div+" #search").toggle()}function onChannelMessage(message){var m=eval(message.responseBody);if(m.end){$(div+" #progress").html("");return}var h='<div><a href="/cms/page/content.vm?id='+m.id+'">'+m.title+"</a> "+messages("version")+": "+m.version+"<br>"+m.content;$(div+" #pageSearchResult").append(h)}function onChannelError(e){Heiduc.error("WebSocket "+messages("error"))}function onChannelClose(){}var h=messages("pages.search_pages")+' : <input name="query" type="text" /> '+'<input id="search" type="button" value="'+messages("search")+'"/> '+'<input id="clear" type="button" value="'+messages("clear")+'"/> '+'<span id="progress"></span> '+'<a id="enhancedSearch" href="#">'+messages("enhanced")+"</a>"+'<div id="enhancedDiv">'+' <div class="form-row">'+'  <input id="publishedSearch" type="checkbox" checked="checked"/>'+'   <label for="publishedSearch">'+messages("published")+"</label>"+'  <input id="unpublishedSearch" type="checkbox" checked="checked" />'+'   <label for="unpublishedSearch">'+messages("unpublished")+"</label><br/>"+" </div>"+' <div class="form-row">'+messages("change_date")+' <input class="datepicker" type="input" name="from" size="10"/> '+messages("to")+' <input class="datepicker" type="input" name="to" size="10"/>'+" </div>"+"</div>"+'<div id="pageSearchResult"></div>';return $(div).html(h),$(div+" #search").click(onSearch),$(div+" #clear").click(function(){$(div+" #pageSearchResult").html(""),$(div+" input[name=query]").val("")}),$(div+" #enhancedSearch").click(onEnhancedSearch),$(div+" #search").hide(),Heiduc.initChannel(onChannelOpened,onChannelMessage,onChannelError,onChannelClose),$(div+" input[name=query]").keypress(function(e){var t=e.keyCode?e.keyCode:e.which;if(t==13||t==10)onSearch(),e.preventDefault()}),this},define("view/pages/PageSearchComponent",function(){}),define("view/PagesView",["text!template/pages.html","jquery.treeview","view/pages/PageSearchComponent"],function(e){function u(){f(),c(),o=Heiduc.PageSearchComponent("#pageSearch")}function a(){return r&&r.friendlyURL=="/"}function f(){Heiduc.jsonrpc.pageService.getTree(function(e){n=e;if(e==null){Heiduc.error(messages("content_not_found"));return}s&&b(e),$("#pages-tree").html(l(e)),$("#pages-tree").treeview({animated:"fast",collapsed:!0,unique:!0,persist:"cookie",cookieId:"pageTree"}),$(".content-link").each(function(){$(this).mouseover(function(e){$(".page_edit").hide(),$(e.target).siblings(".page_edit").show()})}),$("#pages-tree li").each(function(){$(this).hover(function(e){$(".page_edit").hide(),$("> .page_edit",e.target).show()},function(e){})})})}function l(e){var t=encodeURIComponent(e.entity.friendlyURL),n=i?e.entity.title:e.entity.pageFriendlyURL;n||(n="/");var r=e.entity.hasPublishedVersion?"published":"unpublished",s=messages(r),o=' <img src="/static/images/'+r+'.png" title="'+s+'" width="16px" />';e.entity.hasPublishedVersion||(o=' <a onclick="Heiduc.app.pagesView.onPagePublish('+e.entity.id+')">'+'<img src="/static/images/'+r+'.png" title="'+s+'" width="16px" /></a>');var u="<li> "+o+' <a href="#page/content/'+e.entity.id+'" title="'+messages("page.edit_content")+'" class="content-link">'+n+"</a> "+'<span class="page_edit" style="display:none">'+'<a title="'+messages("add_child")+'" onclick="Heiduc.app.pagesView.onPageAdd(\''+e.entity.friendlyURL+'\')"><img src="/static/images/add.png"/></a> '+'<a title="'+messages("remove")+'" onclick="Heiduc.app.pagesView.onPageRemove(\''+e.entity.friendlyURL+"')\">"+'<img src="/static/images/02_x.png" /></a> '+'<a href="#page/'+e.entity.id+'" title="'+messages("page.edit_properties")+'">'+'<img src="/static/images/pencil.png" /></a> '+'<a onclick="Heiduc.app.pagesView.onChangeTitle('+e.entity.id+')" title="'+messages("page.edit_url_title")+'">'+'<img src="/static/images/globe.png" /></a>'+"</span>";return e.children.list.length>0&&(u+="<ul>",$.each(e.children.list,function(e,t){u+=l(t)}),u+="</ul>"),u+"</li>"}function c(){Heiduc.app.user.admin||$("#structuresTab").hide()}function h(e){if(e.title=="")return messages("title_is_empty");if(e.title.indexOf(",")!=-1)return messages("pages.coma_not_allowed");if(e.url==""&&(!r||r.friendlyURL!="/"))return messages("pages.url_is_empty");if(e.url.indexOf("/")!=-1)return messages("pages.slash_not_allowed")}function p(){var e={id:r==null?"":String(r.id),title:$("#title").val(),url:$("#url").val(),friendlyUrl:a()?"/":t+"/"+$("#url").val()},n=h(e);n?d(n):Heiduc.jsonrpc.pageService.savePage(function(e){e.result=="success"?(Heiduc.info(messages("pages.success_created")),$("#page-dialog").modal("hide"),u()):d(e.message)},Heiduc.javaMap(e))}function d(e){Heiduc.errorMessage("#pageMessages",e)}function v(e){return m(n,e)}function m(e,t){if(e.entity.id==t)return e;var n=null;return e.children.list.length>0&&$.each(e.children.list,function(e,r){var i=m(r,t);i!=null&&(n=i)}),n}function g(){i?$("#showTitle").html('<a href="#" onclick="Heiduc.app.pagesView.onShowTitle(false)">'+messages("show_names")+"</a>"):$("#showTitle").html('<a href="#" onclick="Heiduc.app.pagesView.onShowTitle(true)">'+messages("show_titles")+"</a>")}function y(){s?$("#invertOrder").html('<a href="#" onclick="Heiduc.app.pagesView.onInvertOrder(false)">'+messages("restore_order")+"</a>"):$("#invertOrder").html('<a href="#" onclick="Heiduc.app.pagesView.onInvertOrder(true)">'+messages("invert_order")+"</a>")}function b(e){e.children.list.reverse(),e.hasChildren&&$.each(e.children.list,function(e,t){b(t)})}var t=null,n=null,r=null,i=$.cookie("pages.showTitle")!="names",s=$.cookie("pages.invertOrder")=="true",o=null;return Backbone.View.extend({css:["/static/css/jquery.treeview.css","/static/css/pages.css"],el:$("#content"),events:{},initialize:function(){},render:function(){Heiduc.addCSSFiles(this.css),this.el.html(_.template(e,{messages:messages})),Heiduc.initJSONRpc(u),$("#pageForm").submit(function(){return p(),!1}),$("#title").change(this.onTitleChange),g(),y()},remove:function(){this.el.html(""),Heiduc.removeCSSFiles(this.css)},onPageRemove:function(e){if(e=="/")return;confirm(messages("are_you_sure"))&&Heiduc.jsonrpc.pageService.remove(function(e){Heiduc.showServiceMessages(e),u()},e)},onPageAdd:function(e){$("#ui-dialog-title-page-dialog").text(messages("pages.new_page")),t=e=="/"?"":e,$("#page-dialog").modal({show:!0}),$("#parentURL").html(t+"/"),$("#title").val(""),$("#url").val(""),$("#url").removeAttr("disabled"),$("#title").focus(),r=null},onTitleChange:function(){var e=$("#url").val(),t=$("#title").val();e==""&&!a()&&$("#url").val(Heiduc.urlFromTitle(t))},onInvertOrder:function(e){s=e,y(),s?$.cookie("pages.invertOrder","true",{path:"/",expires:10}):$.cookie("pages.invertOrder","false",{path:"/",expires:10}),u()},onPagePublish:function(e){confirm(messages("are_you_sure"))&&Heiduc.jsonrpc.pageService.approve(function(e){Heiduc.showServiceMessages(e),u()},e)},onShowTitle:function(e){i=e,g(),i?$.cookie("pages.showTitle","titles",{path:"/",expires:10}):$.cookie("pages.showTitle","names",{path:"/",expires:10}),u()},onChangeTitle:function(e){var n=v(e);r=n.entity,$("#ui-dialog-title-page-dialog").text(messages("pages.change_page")),t=r.parentUrl=="/"?"":r.parentUrl,$("#page-dialog").modal({show:!0}),$("#parentURL").html(t+"/"),$("#title").val(r.title),$("#url").val(r.pageFriendlyURL),$("#url").attr("disabled",a()),$("#title").focus()}})}),define("text!template/index.html",[],function(){return'<div class="row">\n		<div class="col-md-12">\n			<div class="panel panel-default">\n				<div class="panel-body">\n			        <img src="/static/images/pages.png" />\n			        <a href="#pages">\n			            <%= messages("index.content_pages") %>\n			        </a>\n			        <p><%= messages("index.content_pages.description") %></p>\n			    </div>\n		    </div>\n		</div>\n</div>\n<% if (user.admin) { %>\n<div class="row">\n		<div class="col-md-12">\n			<div class="panel panel-default">\n				<div class="panel-body">\n			        <img src="/static/images/templates.png" />\n			        <a href="#templates">\n			            <%= messages("index.design_templates") %>\n			        </a>\n			        <p><%= messages("index.design_templates.description") %></p>\n			    </div>\n		    </div>\n		</div>\n</div>\n<% } %> \n<div class="row">\n		<div class="col-md-12">\n			<div class="panel panel-default">\n				<div class="panel-body">\n			        <img src="/static/images/folders.png" />\n			        <a href="#folders">\n			            <%= messages("index.file_resources_storage") %>\n			        </a>\n			        <p><%= messages("index.file_resources_storage.description") %></p>\n			    </div>\n		    </div>\n		</div>\n</div>\n<% if (user.admin) { %>\n<div class="row">\n		<div class="col-md-12">\n			<div class="panel panel-default">\n				<div class="panel-body">\n			        <img src="/static/images/config.png" />\n			        <a href="#config">\n			            <%= messages("index.site_configuration") %>\n			        </a>\n			        <p><%= messages("index.site_configuration.description") %></p>\n			    </div>\n		    </div>\n		</div>\n</div>\n<div class="row">\n		<div class="col-md-12">\n			<div class="panel panel-default">\n				<div class="panel-body">\n			        <img src="/static/images/plugins.png" />\n			        <a href="#plugins"><%= messages("index.plugins") %></a>\n			        <p><%= messages("index.plugins.description") %></p>\n			    </div>\n		    </div>\n		</div>\n</div>\n<% } %> \n'}),define("view/IndexView",["text!template/index.html"],function(e){return console.log("Loading IndexView.js"),Backbone.View.extend({el:$("#content"),render:function(){this.el.html(_.template(e,{user:Heiduc.app.user,messages:messages}))},remove:function(){this.el.html("")}})}),define("text!template/structures.html",[],function(){return'<div class="row">\n	<div class="col-lg-12">\n		<div class="panel panel-default">\n			<div class="panel-body">\n				<div class="row">\n					<div class="col-md-9">\n						<ul class="nav nav-tabs" id="tabs_a">\n							<li><a href="#pages"><%= messages("pages") %></a></li>\n							<li data-toggle="tab" class="active"><a href="#structures"><%= messages("structures") %></a></li>\n						</ul>\n						<div class="tab-content" id="tabs_content_a">\n							<div id="home_a" class="tab-pane fade in active">\n								<div class="form-group">\n									<div id="structures"><img src="/static/images/ajax-loader.gif" /></div>\n								</div>\n								\n						        <div class="form-sep">\n						            <input id="addButton" class="btn" type="button" value="<%= messages("add") %>"/>\n						            <input id="deleteButton" class="btn" type="button" value="<%= messages("delete") %>"/>\n								</div>\n								\n							</div>\n						</div>\n					</div>\n				</div>\n			</div>\n		</div>\n	</div>\n</div>\n\n'}),define("view/StructuresView",["text!template/structures.html"],function(e){function t(){Heiduc.jsonrpc.structureService.select(function(e){var t='<table class="table table-striped"><tr><th></th><th>'+messages("title")+"</th></tr>";$.each(e.list,function(e,n){t+='<tr><td><input type="checkbox" value="'+n.id+'" /></td><td><a href="#structure/'+n.id+'">'+n.title+"</a></td></tr>"}),$("#structures").html(t+"</table>"),$("#structures tr:even").addClass("even")})}function n(){location.href="#structure"}function r(){var e=new Array;$("#structures input:checked").each(function(){e.push(this.value)});if(e.length==0){Heiduc.info(messages("nothing_selected"));return}confirm(messages("are_you_sure"))&&Heiduc.jsonrpc.structureService.remove(function(e){Heiduc.showServiceMessages(e),t()},Heiduc.javaList(e))}return console.log("Loading StructuresView.js"),Backbone.View.extend({el:$("#content"),render:function(){this.el.html(_.template(e,{messages:messages})),t(),$("#addButton").click(n),$("#deleteButton").click(r)},remove:function(){this.el.html("")}})}),define("text!template/structure.html",[],function(){return'\n\n\n<div class="row">\n	<div class="col-lg-12">\n		<div class="panel panel-default">\n			<div class="panel-body">\n				<div class="row">\n					<div class="col-md-12">\n						<ul class="nav nav-tabs">\n							<li class="active"><a data-toggle="tab" href="#tab-1"><%= messages("structure") %></a></li>\n						    <li><a id="_structureXML" data-toggle="tab" href="#tab-2"><%= messages("structure.as_xml") %></a></li>\n						    <li><a data-toggle="tab" href="#tab-3"><%= messages("structure.templates") %></a></li>\n						</ul>\n						<div class="tab-content" id="tabs_content_a">\n							<div id="tab-1" class="tab-pane fade in active">\n								<div class="form-group">\n									<div class="row">\n										<div class="col-lg-9">\n											<label><%= messages("title") %></label>\n											<input type="text" id="title" class="form-control">\n										</div>\n									</div>\n									<div class="row">\n										<div class="col-lg-9">\n											<label><%= messages("fields") %></label>\n											<div id="fields"></div>\n										</div>\n									</div>\n									<div class="row">\n										<div class="col-lg-3">\n											<label><%= messages("structure.field_title") %></label>\n											<input type="text" id="fieldTitle" class="form-control">\n										</div>\n										<div class="col-lg-3">\n											<label><%= messages("structure.tag_name") %></label>\n											<input type="text" id="fieldName" class="form-control">\n										</div>\n										<div class="col-lg-3">\n											<label>Type</label>\n											<select id="fieldType" class="form-control">\n									            <option value="TEXT"><%= messages("text") %></option>\n									            <option value="TEXTAREA"><%= messages("text_area") %></option>\n									            <option value="RESOURCE"><%= messages("resource_link") %></option>\n									            <option value="DATE"><%= messages("date") %></option>\n									        </select>\n										</div>\n										<div class="col-lg-3">\n											<label>Action</label>\n											<a id="addField"> <%= messages("add_field") %></a>\n										</div>\n									</div>\n								</div>\n								<div class="form-sep">\n									<input id="saveContinueButton" class="btn" type="button" value="<%= messages("save_continue")%>" />\n							        <input id="saveButton" class="btn" type="button" value="<%= messages("save")%>" />\n							        <input id="cancelButton" class="btn" type="button" value="<%= messages("cancel")%>" />\n								</div>\n							</div>\n							<div id="tab-2" class="tab-pane fade">\n								<div class="form-group">\n									<div class="row">\n									<div class="col-md-9">\n										<label class="checkbox-inline">\n											<input type="checkbox" id="autosave"> <%= messages("autosave")%>\n										</label>\n									</div>\n									</div>\n									<div class="row">\n									<div class="col-md-9">\n										<textarea id="xmlContent" rows="20" cols="80"></textarea>\n									</div>\n									</div>\n								</div>\n								<div class="form-sep">\n									<div class="row">\n									<div class="col-md-9">\n									<input id="saveContinueXMLButton" class="btn" type="button" value="<%= messages("save_continue")%>" />\n							        <input id="saveXMLButton" class="btn" type="button" value="<%= messages("save")%>" />\n							        <input id="cancelXMLButton" class="btn" type="button" value="<%= messages("cancel")%>" />\n							        </div>\n									</div>\n								</div>\n							</div>\n							<div id="tab-3" class="tab-pane fade">\n								<div class="form-group">\n									<div class="row">\n									<div class="col-md-9">\n										<div id="templates"><img src="/static/images/ajax-loader.gif" /></div>\n									</div>\n									</div>\n								</div>\n								<div class="form-sep">\n									<div class="row">\n									<div class="col-md-9">\n									<input id="addTemplateButton" class="btn" type="button" value="<%= messages("add")%>"/>\n        							<input id="deleteTemplateButton" class="btn" type="button" value="<%= messages("delete")%>"/>\n        							</div>\n									</div>\n								</div>\n							</div>\n						</div>\n					</div>\n				</div>\n			</div>\n		</div>\n	</div>\n</div>\n\n\n\n\n'}),window.CodeMirror=function(){function e(r,i){function hn(e){if(s.onDragEvent&&s.onDragEvent(mn,Y(e)))return;tt(e)}function vn(e){return e>=0&&e<Pt.size}function gn(e){return V(Pt,e)}function yn(e,t){Gt=!0;var n=t-e.height;for(var r=e;r;r=r.parent)r.height+=n}function bn(e,t){return e.styles||e.highlight(Dt,e.stateAfter=fi($(e)),s.tabSize),e.getContent(s.tabSize,t,s.lineWrapping)}function wn(e){var t={line:0,ch:0};Fn(t,{line:Pt.size-1,ch:gn(Pt.size-1).text.length},At(e),t,t),Vt=!0}function En(e){var t=[];return Pt.iter(0,Pt.size,function(e){t.push(e.text)}),t.join(e||"\n")}function Sn(e){Math.abs(O.scrollTop-Rt)>1&&(Rt=ct.scrollTop=O.scrollTop,ar([]))}function xn(e){s.fixedGutter&&et.style.left!=ct.scrollLeft+"px"&&(et.style.left=ct.scrollLeft+"px"),Math.abs(ct.scrollTop-Rt)>1&&(Rt=ct.scrollTop,O.scrollTop!=Rt&&(O.scrollTop=Rt),ar([])),s.onScroll&&s.onScroll(mn)}function Tn(e){function u(t){b&&(ct.draggable=!1),Ut=!1,l(),c(),Math.abs(e.clientX-t.clientX)+Math.abs(e.clientY-t.clientY)<10&&(Z(t),gr(n.line,n.ch,!0),nr())}function m(e){if(i=="single"){dr(br(n),e);return}h=br(h),p=br(p);if(i=="double"){var t=Tr(e);bt(e,h)?dr(t.from,p):dr(h,t.to)}else i=="triple"&&(bt(e,h)?dr(p,br({line:e.line,ch:0})):dr(h,br({line:e.line+1,ch:0})))}function g(e){var t=ni(e,!0);if(t&&!yt(t,a)){Bt||Bn(),a=t,m(t),Vt=!1;var n=ur();if(t.line>=n.to||t.line<n.from)f=setTimeout(vi(function(){g(e)}),150)}}function y(e){clearTimeout(f);var t=ni(e);t&&m(t),Z(e),nr(),Vt=!0,w(),l()}pr(it(e,"shiftKey"));for(var t=nt(e);t!=dt;t=t.parentNode)if(t.parentNode==lt&&t!=ft)return;for(var t=nt(e);t!=dt;t=t.parentNode)if(t.parentNode==G)return s.onGutterClick&&s.onGutterClick(mn,Ct(G.childNodes,t)+en,e),Z(e);var n=ni(e);switch(rt(e)){case 3:d&&ii(e);return;case 2:n&&gr(n.line,n.ch,!0),setTimeout(nr,20),Z(e);return}if(!n){nt(e)==ct&&Z(e);return}Bt||Bn();var r=+(new Date),i="single";if(qt&&qt.time>r-400&&yt(qt.pos,n))i="triple",Z(e),setTimeout(nr,20),Nr(n.line);else if(It&&It.time>r-400&&yt(It.pos,n)){i="double",qt={time:r,pos:n},Z(e);var o=Tr(n);dr(o.from,o.to)}else It={time:r,pos:n};var a=n,f;if(s.dragDrop&&at&&!s.readOnly&&!yt(jt.from,jt.to)&&!bt(n,jt.from)&&!bt(jt.to,n)&&i=="single"){b&&(ct.draggable=!0);var l=st(document,"mouseup",vi(u),!0),c=st(ct,"drop",vi(u),!0);Ut=!0,ct.dragDrop&&ct.dragDrop();return}Z(e),i=="single"&&gr(n.line,n.ch,!0);var h=jt.from,p=jt.to,w=st(document,"mousemove",vi(function(e){clearTimeout(f),Z(e),!v&&!rt(e)?y(e):g(e)}),!0),l=st(document,"mouseup",vi(y),!0)}function Nn(e){for(var t=nt(e);t!=dt;t=t.parentNode)if(t.parentNode==G)return Z(e);Z(e)}function Cn(e){if(s.onDragEvent&&s.onDragEvent(mn,Y(e)))return;Z(e);var t=ni(e,!0),n=e.dataTransfer.files;if(!t||s.readOnly)return;if(n&&n.length&&window.FileReader&&window.File){var r=n.length,i=Array(r),o=0,u=function(e,n){var s=new FileReader;s.onload=function(){i[n]=s.result,++o==r&&(t=br(t),vi(function(){var e=Vn(i.join(""),t,t);dr(t,e)})())},s.readAsText(e)};for(var a=0;a<r;++a)u(n[a],a)}else{if(Ut&&!bt(t,jt.from)&&!bt(jt.to,t))return;try{var i=e.dataTransfer.getData("Text");i&&mi(function(){var e=jt.from,n=jt.to;dr(t,t),Ut&&Vn("",e,n),$n(i),nr()})}catch(e){}}}function kn(e){var t=Qn();e.dataTransfer.setData("Text",t),e.dataTransfer.setDragImage&&e.dataTransfer.setDragImage(Et("img"),0,0)}function Ln(e,t){if(typeof e=="string"){e=f[e];if(!e)return!1}var n=Ft;try{s.readOnly&&(Wt=!0),t&&(Ft=null),e(mn)}catch(r){if(r!=ut)throw r;return!1}finally{Ft=n,Wt=!1}return!0}function On(e){function u(){o=!0}var t=c(s.keyMap),n=t.auto;clearTimeout(An),n&&!p(e)&&(An=setTimeout(function(){c(s.keyMap)==t&&(s.keyMap=n.call?n.call(null,mn):n)},50));var r=Mt[it(e,"keyCode")],i=!1;if(r==null||e.altGraphKey)return!1;it(e,"altKey")&&(r="Alt-"+r),it(e,k?"metaKey":"ctrlKey")&&(r="Ctrl-"+r),it(e,k?"ctrlKey":"metaKey")&&(r="Cmd-"+r);var o=!1;return it(e,"shiftKey")?i=h("Shift-"+r,s.extraKeys,s.keyMap,function(e){return Ln(e,!0)},u)||h(r,s.extraKeys,s.keyMap,function(e){if(typeof e=="string"&&/^go[A-Z]/.test(e))return Ln(e)},u):i=h(r,s.extraKeys,s.keyMap,Ln,u),o&&(i=!1),i&&(Z(e),si(),g&&(e.oldKeyCode=e.keyCode,e.keyCode=0)),i}function Mn(e,t){var n=h("'"+t+"'",s.extraKeys,s.keyMap,function(e){return Ln(e,!0)});return n&&(Z(e),si()),n}function Dn(e){Bt||Bn(),v&&e.keyCode==27&&(e.returnValue=!1),an&&er()&&(an=!1);if(s.onKeyEvent&&s.onKeyEvent(mn,Y(e)))return;var t=it(e,"keyCode");pr(t==16||it(e,"shiftKey"));var r=On(e);S&&(_n=r?t:null,!r&&t==88&&it(e,n?"metaKey":"ctrlKey")&&$n(""))}function Pn(e){an&&er();if(s.onKeyEvent&&s.onKeyEvent(mn,Y(e)))return;var t=it(e,"keyCode"),n=it(e,"charCode");if(S&&t==_n){_n=null,Z(e);return}if((S&&(!e.which||e.which<10)||T)&&On(e))return;var r=String.fromCharCode(n==null?t:n);s.electricChars&&Dt.electricChars&&s.smartIndent&&!s.readOnly&&Dt.electricChars.indexOf(r)>-1&&setTimeout(vi(function(){kr(jt.to.line,"smart")}),75);if(Mn(e,r))return;Yn()}function Hn(e){if(s.onKeyEvent&&s.onKeyEvent(mn,Y(e)))return;it(e,"keyCode")==16&&(Ft=null)}function Bn(){if(s.readOnly=="nocursor")return;Bt||(s.onFocus&&s.onFocus(mn),Bt=!0,ct.className.search(/\bCodeMirror-focused\b/)==-1&&(ct.className+=" CodeMirror-focused")),Gn(),si()}function jn(){Bt&&(s.onBlur&&s.onBlur(mn),Bt=!1,rn&&vi(function(){rn&&(rn(),rn=null)})(),ct.className=ct.className.replace(" CodeMirror-focused","")),clearInterval(_t),setTimeout(function(){Bt||(Ft=null)},150)}function Fn(e,t,n,r,i){if(Wt)return;var o=[];Pt.iter(e.line,t.line+1,function(e){o.push(I(e.text,e.markedSpans))});if(ln){ln.addChange(e.line,n.length,o);while(ln.done.length>s.undoDepth)ln.done.shift()}var u=B(F(o[0]),F(mt(o)),e.ch,t.ch,n);Un(e,t,u,r,i)}function In(e,t){if(!e.length)return;var n=e.pop(),r=[];for(var i=n.length-1;i>=0;i-=1){var s=n[i],o=[],u=s.start+s.added;Pt.iter(s.start,u,function(e){o.push(I(e.text,e.markedSpans))}),r.push({start:s.start,added:s.old.length,old:o});var a={line:s.start+s.old.length-1,ch:Nt(j(mt(o)),j(mt(s.old)))};Un({line:s.start,ch:0},{line:u-1,ch:gn(u-1).text.length},s.old,a,a)}Vt=!0,t.push(r)}function qn(){In(ln.done,ln.undone)}function Rn(){In(ln.undone,ln.done)}function Un(e,t,n,r,i){function w(e){return e<=Math.min(t.line,t.line+g)?e:e+g}if(Wt)return;var o=!1,u=sn.text.length;s.lineWrapping||Pt.iter(e.line,t.line+1,function(e){if(!e.hidden&&e.text.length==u)return o=!0,!0});if(e.line!=t.line||n.length>1)Gt=!0;var a=t.line-e.line,f=gn(e.line),l=gn(t.line),c=mt(n);if(e.ch==0&&t.ch==0&&j(c)==""){var h=[],p=null;for(var d=0,v=n.length-1;d<v;++d)h.push(new z(j(n[d]),F(n[d])));l.update(l.text,F(c)),a&&Pt.remove(e.line,a,Yt),h.length&&Pt.insert(e.line,h)}else if(f==l)if(n.length==1)f.update(f.text.slice(0,e.ch)+j(n[0])+f.text.slice(t.ch),F(n[0]));else{for(var h=[],d=1,v=n.length-1;d<v;++d)h.push(new z(j(n[d]),F(n[d])));h.push(new z(j(c)+f.text.slice(t.ch),F(c))),f.update(f.text.slice(0,e.ch)+j(n[0]),F(n[0])),Pt.insert(e.line+1,h)}else if(n.length==1)f.update(f.text.slice(0,e.ch)+j(n[0])+l.text.slice(t.ch),F(n[0])),Pt.remove(e.line+1,a,Yt);else{var h=[];f.update(f.text.slice(0,e.ch)+j(n[0]),F(n[0])),l.update(j(c)+l.text.slice(t.ch),F(c));for(var d=1,v=n.length-1;d<v;++d)h.push(new z(j(n[d]),F(n[d])));a>1&&Pt.remove(e.line+1,a-1,Yt),Pt.insert(e.line+1,h)}if(s.lineWrapping){var m=Math.max(5,ct.clientWidth/Zr()-3);Pt.iter(e.line,e.line+n.length,function(e){if(e.hidden)return;var t=Math.ceil(e.text.length/m)||1;t!=e.height&&yn(e,t)})}else Pt.iter(e.line,e.line+n.length,function(e){var t=e.text;!e.hidden&&t.length>u&&(sn=e,u=t.length,un=!0,o=!1)}),o&&(on=!0);Ht=Math.min(Ht,e.line),ci(400);var g=n.length-a-1;Jt.push({from:e.line,to:t.line+1,diff:g});if(s.onChange){for(var d=0;d<n.length;++d)typeof n[d]!="string"&&(n[d]=n[d].text);var y={from:e,to:t,text:n};if(Kt){for(var b=Kt;b.next;b=b.next);b.next=y}else Kt=y}vr(br(r),br(i),w(jt.from.line),w(jt.to.line))}function zn(){var e=Pt.height*Qr()+2*ei();return e*.99>ct.offsetHeight?e:!1}function Wn(e){var t=zn();O.style.display=t?"block":"none",t?(C.style.height=lt.style.minHeight=t+"px",O.style.height=ct.clientHeight+"px",e!=null&&(O.scrollTop=ct.scrollTop=e,b&&setTimeout(function(){if(O.scrollTop!=e)return;O.scrollTop=e+(e?-1:1),O.scrollTop=e},0))):lt.style.minHeight="",ft.style.top=Zt*Qr()+"px"}function Xn(){sn=gn(0),un=!0;var e=sn.text.length;Pt.iter(1,Pt.size,function(t){var n=t.text;!t.hidden&&n.length>e&&(e=n.length,sn=t)}),on=!1}function Vn(e,t,n){function r(r){if(bt(r,t))return r;if(!bt(n,r))return i;var s=r.line+e.length-(n.line-t.line)-1,o=r.ch;return r.line==n.line&&(o+=mt(e).length-(n.ch-(n.line==t.line?t.ch:0))),{line:s,ch:o}}t=br(t),n?n=br(n):n=t,e=At(e);var i;return Jn(e,t,n,function(e){return i=e,{from:r(jt.from),to:r(jt.to)}}),i}function $n(e,t){Jn(At(e),jt.from,jt.to,function(e){return t=="end"?{from:e,to:e}:t=="start"?{from:jt.from,to:jt.from}:{from:jt.from,to:e}})}function Jn(e,t,n,r){var i=e.length==1?e[0].length+t.ch:mt(e).length,s=r({line:t.line+e.length-1,ch:i});Fn(t,n,e,s.from,s.to)}function Kn(e,t,n){var r=e.line,i=t.line;if(r==i)return gn(r).text.slice(e.ch,t.ch);var s=[gn(r).text.slice(e.ch)];return Pt.iter(r+1,i,function(e){s.push(e.text)}),s.push(gn(i).text.slice(0,t.ch)),s.join(n||"\n")}function Qn(e){return Kn(jt.from,jt.to,e)}function Gn(){if(an)return;Tt.set(s.pollInterval,function(){er(),Bt&&Gn()})}function Yn(){function t(){var n=er();!n&&!e?(e=!0,Tt.set(60,t)):(an=!1,Gn())}var e=!1;an=!0,Tt.set(20,t)}function er(){if(!Bt||Ot(E)||s.readOnly)return!1;var e=E.value;if(e==Zn)return!1;di||hi(),Ft=null;var t=0,n=Math.min(Zn.length,e.length);while(t<n&&Zn[t]==e[t])++t;return t<Zn.length?jt.from={line:jt.from.line,ch:jt.from.ch-(Zn.length-t)}:zt&&yt(jt.from,jt.to)&&!Xt&&(jt.to={line:jt.to.line,ch:Math.min(gn(jt.to.line).text.length,jt.to.ch+(e.length-t))}),$n(e.slice(t),"end"),e.length>1e3?E.value=Zn="":Zn=e,di||pi(),Xt=!1,!0}function tr(e){yt(jt.from,jt.to)?e&&(Zn=E.value=""):(Zn="",E.value=Qn(),Bt&&gt(E))}function nr(){s.readOnly!="nocursor"&&(g||document.activeElement!=E)&&E.focus()}function rr(){var e=ir();sr(e.x,e.y,e.x,e.yBot);if(!Bt)return;var t=lt.getBoundingClientRect(),n=null;e.y+t.top<0?n=!0:e.y+t.top+Qr()>(window.innerHeight||document.documentElement.clientHeight)&&(n=!1);if(n!=null){var r=H.style.display=="none";r&&(H.style.display="",H.style.left=e.x+"px",H.style.top=e.y-Zt+"px"),H.scrollIntoView(n),r&&(H.style.display="none")}}function ir(){var e=Wr(jt.inverted?jt.from:jt.to),t=s.lineWrapping?Math.min(e.x,U.offsetWidth):e.x;return{x:t,y:e.y,yBot:e.yBot}}function sr(e,t,n,r){var i=or(e,t,n,r);i.scrollLeft!=null&&(ct.scrollLeft=i.scrollLeft),i.scrollTop!=null&&(O.scrollTop=ct.scrollTop=i.scrollTop)}function or(e,t,n,r){var i=ti(),o=ei();t+=o,r+=o,e+=i,n+=i;var u=ct.clientHeight,a=O.scrollTop,f={},l=zn()||Infinity,c=t<o+10,h=r+o>l-10;t<a?f.scrollTop=c?0:Math.max(0,t):r>a+u&&(f.scrollTop=(h?l:r)-u);var p=ct.clientWidth,d=ct.scrollLeft,v=s.fixedGutter?et.clientWidth:0,m=e<v+i+10;return e<d+v||m?(m&&(e=0),f.scrollLeft=Math.max(0,e-10-v)):n>p+d-3&&(f.scrollLeft=n+10-p),f}function ur(e){var t=Qr(),n=(e!=null?e:O.scrollTop)-ei(),r=Math.max(0,Math.floor(n/t)),i=Math.ceil((n+ct.clientHeight)/t);return{from:J(Pt,r),to:J(Pt,i)}}function ar(e,t,n){function d(){var e=M.firstChild,t=!1;return Pt.iter(en,tn,function(n){if(!e)return;if(!n.hidden){var r=Math.round(e.offsetHeight/c)||1;n.height!=r&&(yn(n,r),Gt=t=!0)}e=e.nextSibling}),t}if(!ct.clientWidth){en=tn=Zt=0;return}var r=ur(n);if(e!==!0&&e.length==0&&r.from>en&&r.to<tn){Wn(n);return}var i=Math.max(r.from-100,0),o=Math.min(Pt.size,r.to+100);en<i&&i-en<20&&(i=en),tn>o&&tn-o<20&&(o=Math.min(Pt.size,tn));var u=e===!0?[]:fr([{from:en,to:tn,domStart:0}],e),a=0;for(var f=0;f<u.length;++f){var l=u[f];l.from<i&&(l.domStart+=i-l.from,l.from=i),l.to>o&&(l.to=o),l.from>=l.to?u.splice(f--,1):a+=l.to-l.from}if(a==o-i&&i==en&&o==tn){Wn(n);return}u.sort(function(e,t){return e.domStart-t.domStart});var c=Qr(),h=et.style.display;M.style.display="none",lr(i,o,u),M.style.display=et.style.display="";var p=i!=en||o!=tn||nn!=ct.clientHeight+c;p&&(nn=ct.clientHeight+c),(i!=en||o!=tn&&s.onViewportChange)&&setTimeout(function(){s.onViewportChange&&s.onViewportChange(mn,i,o)}),en=i,tn=o,Zt=K(Pt,i),ci(100);if(M.childNodes.length!=tn-en)throw new Error("BAD PATCH! "+JSON.stringify(u)+" size="+(tn-en)+" nodes="+M.childNodes.length);return s.lineWrapping&&d(),et.style.display=h,(p||Gt)&&cr()&&s.lineWrapping&&d()&&cr(),Wn(n),hr(),!t&&s.onUpdate&&s.onUpdate(mn),!0}function fr(e,t){for(var n=0,r=t.length||0;n<r;++n){var i=t[n],s=[],o=i.diff||0;for(var u=0,a=e.length;u<a;++u){var f=e[u];i.to<=f.from&&i.diff?s.push({from:f.from+o,to:f.to+o,domStart:f.domStart}):i.to<=f.from||i.from>=f.to?s.push(f):(i.from>f.from&&s.push({from:f.from,to:i.from,domStart:f.domStart}),i.to<f.to&&s.push({from:i.to+o,to:f.to+o,domStart:f.domStart+(i.to-f.from)}))}e=s}return e}function lr(e,t,n){function r(e){var t=e.nextSibling;return e.parentNode.removeChild(e),t}if(!n.length)St(M);else{var i=0,s=M.firstChild,o;for(var u=0;u<n.length;++u){var a=n[u];while(a.domStart>i)s=r(s),i++;for(var f=0,l=a.to-a.from;f<l;++f)s=s.nextSibling,i++}while(s)s=r(s)}var c=n.shift(),s=M.firstChild,f=e;Pt.iter(e,t,function(e){c&&c.to==f&&(c=n.shift());if(!c||c.from>f){if(e.hidden)var t=Et("pre");else{var t=bn(e);e.className&&(t.className=e.className);if(e.bgClassName){var r=Et("pre"," ",e.bgClassName,"position: absolute; left: 0; right: 0; top: 0; bottom: 0; z-index: -2");t=Et("div",[r,t],null,"position: relative")}}M.insertBefore(t,s)}else s=s.nextSibling;++f})}function cr(){if(!s.gutter&&!s.lineNumbers)return;var e=ft.offsetHeight,t=ct.clientHeight;et.style.height=(e-t<2?t:e)+"px";var n=document.createDocumentFragment(),r=en,i;Pt.iter(en,Math.max(tn,en+1),function(e){if(e.hidden)n.appendChild(Et("pre"));else{var t=e.gutterMarker,o=s.lineNumbers?s.lineNumberFormatter(r+s.firstLineNumber):null;t&&t.text?o=t.text.replace("%N%",o!=null?o:""):o==null&&(o=" ");var u=n.appendChild(Et("pre",null,t&&t.style));u.innerHTML=o;for(var a=1;a<e.height;++a)u.appendChild(Et("br")),u.appendChild(document.createTextNode(" "));t||(i=r)}++r}),et.style.display="none",xt(G,n);if(i!=null&&s.lineNumbers){var o=G.childNodes[i-en],u=String(Pt.size).length,a=pt(o.firstChild),f="";while(a.length+f.length<u)f+=" ";f&&o.insertBefore(document.createTextNode(f),o.firstChild)}et.style.display="";var l=Math.abs((parseInt(U.style.marginLeft)||0)-et.offsetWidth)>2;return U.style.marginLeft=et.offsetWidth+"px",Gt=!1,l}function hr(){var e=yt(jt.from,jt.to),t=Wr(jt.from,!0),n=e?t:Wr(jt.to,!0),r=jt.inverted?t:n,i=Qr(),o=ht(dt),u=ht(M);x.style.top=Math.max(0,Math.min(ct.offsetHeight,r.y+u.top-o.top))+"px",x.style.left=Math.max(0,Math.min(ct.offsetWidth,r.x+u.left-o.left))+"px",e||s.showCursorWhenSelecting?(H.style.top=r.y+"px",H.style.left=(s.lineWrapping?Math.min(r.x,U.offsetWidth):r.x)+"px",H.style.display=""):H.style.display="none";if(!e){var a=t.y==n.y,f=document.createDocumentFragment(),l=U.clientWidth||U.offsetWidth,c=U.clientHeight||U.offsetHeight,h=function(e,t,n,r){var i=y?"width: "+(n?l-n-e:l)+"px":"right: "+(n-1)+"px";f.appendChild(Et("div",null,"CodeMirror-selected","position: absolute; left: "+e+"px; top: "+t+"px; "+i+"; height: "+r+"px"))};if(jt.from.ch&&t.y>=0){var p=a?l-n.x:0;h(t.x,t.y,p,i)}var d=Math.max(0,t.y+(jt.from.ch?i:0)),v=Math.min(n.y,c)-d;v>.2*i&&h(0,d,0,v),(!a||!jt.from.ch)&&n.y<c-.5*i&&h(0,n.y,l-n.x,i),xt(P,f),P.style.display=""}else P.style.display="none"}function pr(e){e?Ft=Ft||(jt.inverted?jt.to:jt.from):Ft=null}function dr(e,t){var n=Ft&&br(Ft);n&&(bt(n,e)?e=n:bt(t,n)&&(t=n)),vr(e,t),$t=!0}function vr(e,t,n,r){fn=null,n==null&&(n=jt.from.line,r=jt.to.line);if(yt(jt.from,e)&&yt(jt.to,t))return;if(bt(t,e)){var i=t;t=e,e=i}if(e.line!=n){var o=mr(e,n,jt.from.ch);o?e=o:Rr(e.line,!1)}t.line!=r&&(t=mr(t,r,jt.to.ch)),yt(e,t)?jt.inverted=!1:yt(e,jt.to)?jt.inverted=!1:yt(t,jt.from)&&(jt.inverted=!0);if(s.autoClearEmptyLines&&yt(jt.from,jt.to)){var u=jt.inverted?e:t;if(u.line!=jt.from.line&&jt.from.line<Pt.size){var a=gn(jt.from.line);/^\s+$/.test(a.text)&&setTimeout(vi(function(){if(a.parent&&/^\s+$/.test(a.text)){var e=$(a);Vn("",{line:e,ch:0},{line:e,ch:a.text.length})}},10))}}jt.from=e,jt.to=t,Qt=!0}function mr(e,t,n){function r(t){var r=e.line+t,i=t==1?Pt.size:-1;while(r!=i){var o=gn(r);if(!o.hidden){var u=e.ch;if(s||u>n||u>o.text.length)u=o.text.length;return{line:r,ch:u}}r+=t}}var i=gn(e.line),s=e.ch==i.text.length&&e.ch!=n;return i.hidden?e.line>=t?r(1)||r(-1):r(-1)||r(1):e}function gr(e,t,n){var r=br({line:e,ch:t||0});(n?dr:vr)(r,r)}function yr(e){return Math.max(0,Math.min(e,Pt.size-1))}function br(e){if(e.line<0)return{line:0,ch:0};if(e.line>=Pt.size)return{line:Pt.size-1,ch:gn(Pt.size-1).text.length};var t=e.ch,n=gn(e.line).text.length;return t==null||t>n?{line:e.line,ch:n}:t<0?{line:e.line,ch:0}:e}function wr(e,t){function o(){for(var t=r+e,n=e<0?-1:Pt.size;t!=n;t+=e){var i=gn(t);if(!i.hidden)return r=t,s=i,!0}}function u(t){if(i==(e<0?0:s.text.length)){if(!!t||!o())return!1;i=e<0?s.text.length:0}else i+=e;return!0}var n=jt.inverted?jt.from:jt.to,r=n.line,i=n.ch,s=gn(r);if(t=="char")u();else if(t=="column")u(!0);else if(t=="word"){var a=!1;for(;;){if(e<0&&!u())break;if(Lt(s.text.charAt(i)))a=!0;else if(a){e<0&&(e=1,u());break}if(e>0&&!u())break}}return{line:r,ch:i}}function Er(e,t){var n=e<0?jt.from:jt.to;if(Ft||yt(jt.from,jt.to))n=wr(e,t);gr(n.line,n.ch,!0)}function Sr(e,t){yt(jt.from,jt.to)?e<0?Vn("",wr(e,t),jt.to):Vn("",jt.from,wr(e,t)):Vn("",jt.from,jt.to),$t=!0}function xr(e,t){var n=0,r=Wr(jt.inverted?jt.from:jt.to,!0);fn!=null&&(r.x=fn);if(t=="page")var i=Math.min(ct.clientHeight,window.innerHeight||document.documentElement.clientHeight),s=Xr(r.x,r.y+i*e);else if(t=="line")var o=Qr(),s=Xr(r.x,r.y+.5*o+e*o);t=="page"&&(O.scrollTop+=Wr(s,!0).y-r.y),gr(s.line,s.ch,!0),fn=r.x}function Tr(e){var t=gn(e.line).text,n=e.ch,r=e.ch;if(t){e.after===!1||r==t.length?--n:++r;var i=t.charAt(n),s=Lt(i)?Lt:/\s/.test(i)?function(e){return/\s/.test(e)}:function(e){return!/\s/.test(e)&&Lt(e)};while(n>0&&s(t.charAt(n-1)))--n;while(r<t.length&&s(t.charAt(r)))++r}return{from:{line:e.line,ch:n},to:{line:e.line,ch:r}}}function Nr(e){dr({line:e,ch:0},br({line:e+1,ch:0}))}function Cr(e){if(yt(jt.from,jt.to))return kr(jt.from.line,e);var t=jt.to.line-(jt.to.ch?0:1);for(var n=jt.from.line;n<=t;++n)kr(n,e)}function kr(e,t){t||(t="add");if(t=="smart")if(!Dt.indent)t="prev";else var n=fi(e);var r=gn(e),i=r.indentation(s.tabSize),o=r.text.match(/^\s*/)[0],u;t=="smart"&&(u=Dt.indent(n,r.text.slice(o.length),r.text),u==ut&&(t="prev")),t=="prev"?e?u=gn(e-1).indentation(s.tabSize):u=0:t=="add"?u=i+s.indentUnit:t=="subtract"&&(u=i-s.indentUnit),u=Math.max(0,u);var a=u-i,f="",l=0;if(s.indentWithTabs)for(var c=Math.floor(u/s.tabSize);c;--c)l+=s.tabSize,f+="	";l<u&&(f+=vt(u-l)),f!=o&&Vn(f,{line:e,ch:0},{line:e,ch:o.length}),r.stateAfter=null}function Lr(){Dt=e.getMode(s,s.mode),Pt.iter(0,Pt.size,function(e){e.stateAfter=null}),Ht=0,ci(100)}function Ar(){var e=s.gutter||s.lineNumbers;et.style.display=e?"":"none",e?Gt=!0:M.parentNode.style.marginLeft=0}function Or(e,t){if(s.lineWrapping){dt.className+=" CodeMirror-wrap";var n=ct.clientWidth/Zr()-3;Pt.iter(0,Pt.size,function(e){if(e.hidden)return;var t=Math.ceil(e.text.length/n)||1;t!=1&&yn(e,t)}),U.style.minWidth=q.style.left=""}else dt.className=dt.className.replace(" CodeMirror-wrap",""),Xn(),Pt.iter(0,Pt.size,function(e){e.height!=1&&!e.hidden&&yn(e,1)});Jt.push({from:0,to:Pt.size})}function Mr(){ct.className=ct.className.replace(/\s*cm-s-\S+/g,"")+s.theme.replace(/(^|\s)\s*/g," cm-s-")}function _r(){var e=l[s.keyMap].style;dt.className=dt.className.replace(/\s*cm-keymap-\S+/g,"")+(e?" cm-keymap-"+e:"")}function Dr(e,t){this.lines=[],this.type=e,t&&(this.style=t)}function Pr(e,t,n,r){e=br(e),t=br(t);var i=new Dr("range",n);if(r)for(var s in r)r.hasOwnProperty(s)&&(i[s]=r[s]);var o=e.line;return Pt.iter(o,t.line+1,function(n){var r={from:o==e.line?e.ch:null,to:o==t.line?t.ch:null,marker:i};n.markedSpans=(n.markedSpans||[]).concat([r]),i.lines.push(n),++o}),Jt.push({from:e.line,to:t.line+1}),i}function Hr(e){e=br(e);var t=new Dr("bookmark"),n=gn(e.line);ln.addChange(e.line,1,[I(n.text,n.markedSpans)],!0);var r={from:e.ch,to:e.ch,marker:t};return n.markedSpans=(n.markedSpans||[]).concat([r]),t.lines.push(n),t}function Br(e){e=br(e);var t=[],n=gn(e.line).markedSpans;if(n)for(var r=0;r<n.length;++r){var i=n[r];(i.from==null||i.from<=e.ch)&&(i.to==null||i.to>=e.ch)&&t.push(i.marker)}return t}function jr(e,t,n){return typeof e=="number"&&(e=gn(yr(e))),e.gutterMarker={text:t,style:n},Gt=!0,e}function Fr(e){typeof e=="number"&&(e=gn(yr(e))),e.gutterMarker=null,Gt=!0}function Ir(e,t){var n=e,r=e;return typeof e=="number"?r=gn(yr(e)):n=$(e),n==null?null:t(r,n)?(Jt.push({from:n,to:n+1}),r):null}function qr(e,t,n){return Ir(e,function(e){if(e.className!=t||e.bgClassName!=n)return e.className=t,e.bgClassName=n,!0})}function Rr(e,t){return Ir(e,function(e,n){if(e.hidden!=t){e.hidden=t,s.lineWrapping||(t&&e.text.length==sn.text.length?on=!0:!t&&e.text.length>sn.text.length&&(sn=e,on=!1)),yn(e,t?0:1);var r=jt.from.line,i=jt.to.line;if(t&&(r==n||i==n)){var o=r==n?mr({line:r,ch:0},r,0):jt.from,u=i==n?mr({line:i,ch:0},i,0):jt.to;if(!u)return;vr(o,u)}return Gt=!0}})}function Ur(e){if(typeof e=="number"){if(!vn(e))return null;var t=e;e=gn(e);if(!e)return null}else{var t=$(e);if(t==null)return null}var n=e.gutterMarker;return{line:t,handle:e,text:e.text,markerText:n&&n.text,markerClass:n&&n.style,lineClass:e.className,bgClass:e.bgClassName}}function zr(e,t){if(t==0)return{top:0,left:0};var n=bn(e,t);xt(R,n);var r=n.anchor,i=r.offsetTop,s=r.offsetLeft;if(v&&i==0&&s==0){var o=Et("span","x");r.parentNode.insertBefore(o,r.nextSibling),i=o.offsetTop}return{top:i,left:s}}function Wr(e,t){var n,r=Qr(),i=r*(K(Pt,e.line)-(t?Zt:0));if(e.ch==0)n=0;else{var o=zr(gn(e.line),e.ch);n=o.left,s.lineWrapping&&(i+=Math.max(0,o.top))}return{x:n,y:i,yBot:i+r}}function Xr(e,t){function h(e){var t=zr(u,e);if(f){var r=Math.round(t.top/n);return c=r!=l,Math.max(0,t.left+(r-l)*ct.clientWidth)}return t.left}var n=Qr(),r=Zr(),i=Zt+Math.floor(t/n);if(i<0)return{line:0,ch:0};var o=J(Pt,i);if(o>=Pt.size)return{line:Pt.size-1,ch:gn(Pt.size-1).text.length};var u=gn(o),a=u.text,f=s.lineWrapping,l=f?i-K(Pt,o):0;if(e<=0&&l==0)return{line:o,ch:0};var c=!1,p=0,d=0,v=a.length,m,g=Math.min(v,Math.ceil((e+l*ct.clientWidth*.9)/r));for(;;){var y=h(g);if(!(y<=e&&g<v)){m=y,v=g;break}g=Math.min(v,Math.ceil(g*1.2))}if(e>m)return{line:o,ch:v};g=Math.floor(v*.8),y=h(g),y<e&&(p=g,d=y);for(;;){if(v-p<=1){var b=e-d<m-e;return{line:o,ch:b?p:v,after:b}}var w=Math.ceil((p+v)/2),E=h(w);E>e?(v=w,m=E,c&&(m+=1e3)):(p=w,d=E)}}function Vr(e){var t=Wr(e,!0),n=ht(U);return{x:n.left+t.x,y:n.top+t.y,yBot:n.top+t.yBot}}function Qr(){if(Kr==null){Kr=Et("pre");for(var e=0;e<49;++e)Kr.appendChild(document.createTextNode("x")),Kr.appendChild(Et("br"));Kr.appendChild(document.createTextNode("x"))}var t=M.clientHeight;return t==Jr?$r:(Jr=t,xt(R,Kr.cloneNode(!0)),$r=R.firstChild.offsetHeight/50||1,St(R),$r)}function Zr(){if(ct.clientWidth==Yr)return Gr;Yr=ct.clientWidth;var e=Et("span","x"),t=Et("pre",[e]);return xt(R,t),Gr=e.offsetWidth||10}function ei(){return U.offsetTop}function ti(){return U.offsetLeft}function ni(e,t){var n=ht(ct,!0),r,i;try{r=e.clientX,i=e.clientY}catch(e){return null}if(!t&&(r-n.left>ct.clientWidth||i-n.top>ct.clientHeight))return null;var s=ht(U,!0);return Xr(r-s.left,i-s.top)}function ii(e){function i(){x.style.position="relative",E.style.cssText=r,g&&(O.scrollTop=n),Gn();if(E.selectionStart!=null){clearTimeout(ri);var e=E.value=" "+(yt(jt.from,jt.to)?"":E.value),t=0;Zn=" ",E.selectionStart=1,E.selectionEnd=e.length,ri=setTimeout(function i(){Zn==" "&&E.selectionStart==0?vi(f.selectAll)(mn):t++<10?ri=setTimeout(i,500):tr()},200)}}var t=ni(e),n=O.scrollTop;if(!t||S)return;(yt(jt.from,jt.to)||bt(t,jt.from)||!bt(t,jt.to))&&vi(gr)(t.line,t.ch);var r=E.style.cssText;x.style.position="absolute",E.style.cssText="position: fixed; width: 30px; height: 30px; top: "+(e.clientY-5)+"px; left: "+(e.clientX-5)+"px; z-index: 1000; background: white; "+"border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);",nr(),tr(!0),yt(jt.from,jt.to)&&(E.value=Zn=" ");if(d){tt(e);var s=st(window,"mouseup",function(){s(),setTimeout(i,20)},!0)}else setTimeout(i,50)}function si(){clearInterval(_t);var e=!0;H.style.visibility="",_t=setInterval(function(){H.style.visibility=(e=!e)?"":"hidden"},s.cursorBlinkRate)}function ui(e){function v(e,t,n){if(!e.text)return;var r=e.styles,i=o?0:e.text.length-1,s;for(var a=o?0:r.length-2,f=o?r.length:-2;a!=f;a+=2*u){var l=r[a];if(r[a+1]!=h){i+=u*l.length;continue}for(var c=o?0:l.length-1,v=o?l.length:-1;c!=v;c+=u,i+=u)if(i>=t&&i<n&&d.test(s=l.charAt(c))){var m=oi[s];if(m.charAt(1)==">"==o)p.push(s);else{if(p.pop()!=m.charAt(0))return{pos:i,match:!1};if(!p.length)return{pos:i,match:!0}}}}}var t=jt.inverted?jt.from:jt.to,n=gn(t.line),r=t.ch-1,i=r>=0&&oi[n.text.charAt(r)]||oi[n.text.charAt(++r)];if(!i)return;var s=i.charAt(0),o=i.charAt(1)==">",u=o?1:-1,a=n.styles;for(var f=r+1,l=0,c=a.length;l<c;l+=2)if((f-=a[l].length)<=0){var h=a[l+1];break}var p=[n.text.charAt(r)],d=/[(){}[\]]/;for(var l=t.line,c=o?Math.min(l+100,Pt.size):Math.max(-1,l-100);l!=c;l+=u){var n=gn(l),m=l==t.line,g=v(n,m&&o?r+1:0,m&&!o?r:n.text.length);if(g)break}g||(g={pos:null,match:!1});var h=g.match?"CodeMirror-matchingbracket":"CodeMirror-nonmatchingbracket",y=Pr({line:t.line,ch:r},{line:t.line,ch:r+1},h),b=g.pos!=null&&Pr({line:l,ch:g.pos},{line:l,ch:g.pos+1},h),w=vi(function(){y.clear(),b&&b.clear()});e?setTimeout(w,800):rn=w}function ai(e){var t,n;for(var r=e,i=e-40;r>i;--r){if(r==0)return 0;var o=gn(r-1);if(o.stateAfter)return r;var u=o.indentation(s.tabSize);if(n==null||t>u)n=r-1,t=u}return n}function fi(e){var t=ai(e),n=t&&gn(t-1).stateAfter;return n?n=L(Dt,n):n=A(Dt),Pt.iter(t,e,function(r){r.process(Dt,n,s.tabSize),r.stateAfter=t==e-1||t%5==0?L(Dt,n):null}),n}function li(){if(Ht>=tn)return;var e=+(new Date)+s.workTime,t=L(Dt,fi(Ht)),n=Ht;Pt.iter(Ht,tn,function(n){Ht>=en?(n.highlight(Dt,t,s.tabSize),n.stateAfter=L(Dt,t)):(n.process(Dt,t,s.tabSize),n.stateAfter=Ht%5==0?L(Dt,t):null),++Ht;if(+(new Date)>e)return ci(s.workDelay),!0}),tn>n&&Ht>=en&&vi(function(){Jt.push({from:n,to:Ht})})()}function ci(e){Ht<tn&&kt.set(e,li)}function hi(){Vt=$t=Kt=null,Jt=[],Qt=!1,Yt=[]}function pi(){on&&Xn();if(un&&!s.lineWrapping){var e=q.offsetWidth,t=zr(sn,sn.text.length).left;m||(q.style.left=t+"px",U.style.minWidth=t+e+"px"),un=!1}var n,r;if(Qt){var i=ir();n=or(i.x,i.y,i.x,i.yBot)}if(Jt.length||n&&n.scrollTop!=null)r=ar(Jt,!0,n&&n.scrollTop);r||(Qt&&hr(),Gt&&cr()),n&&rr(),Qt&&si(),Bt&&(Vt===!0||Vt!==!1&&Qt)&&tr($t),Qt&&s.matchBrackets&&setTimeout(vi(function(){rn&&(rn(),rn=null),yt(jt.from,jt.to)&&ui(!1)}),20);var o=Qt,u=Yt;Kt&&s.onChange&&mn&&s.onChange(mn,Kt),o&&s.onCursorActivity&&s.onCursorActivity(mn);for(var a=0;a<u.length;++a)u[a](mn);r&&s.onUpdate&&s.onUpdate(mn)}function vi(e){return function(){di++||hi();try{var t=e.apply(this,arguments)}finally{--di||pi()}return t}}function mi(e){ln.startCompound();try{return e()}finally{ln.endCompound()}}var s={},a=e.defaults;for(var w in a)a.hasOwnProperty(w)&&(s[w]=(i&&i.hasOwnProperty(w)?i:a)[w]);var E=Et("textarea",null,null,"position: absolute; padding: 0; width: 1px; height: 1em");E.setAttribute("wrap","off"),E.setAttribute("autocorrect","off"),E.setAttribute("autocapitalize","off");var x=Et("div",[E],null,"overflow: hidden; position: relative; width: 3px; height: 0px;"),C=Et("div",null,"CodeMirror-scrollbar-inner"),O=Et("div",[C],"CodeMirror-scrollbar"),M=Et("div"),P=Et("div",null,null,"position: relative; z-index: -1"),H=Et("pre"," ","CodeMirror-cursor"),q=Et("pre"," ","CodeMirror-cursor","visibility: hidden"),R=Et("div",null,null,"position: absolute; width: 100%; height: 0px; overflow: hidden; visibility: hidden;"),U=Et("div",[R,H,q,P,M],null,"position: relative; z-index: 0"),G=Et("div",null,"CodeMirror-gutter-text"),et=Et("div",[G],"CodeMirror-gutter"),ft=Et("div",[et,Et("div",[U],"CodeMirror-lines")],null,"position: relative"),lt=Et("div",[ft],null,"position: relative"),ct=Et("div",[lt],"CodeMirror-scroll");ct.setAttribute("tabIndex","-1");var dt=Et("div",[x,O,ct],"CodeMirror"+(s.lineWrapping?" CodeMirror-wrap":""));r.appendChild?r.appendChild(dt):r(dt),Mr(),_r(),t&&(E.style.width="0px"),b||(ct.draggable=!0),U.style.outline="none",s.tabindex!=null&&(E.tabIndex=s.tabindex),s.autofocus&&nr(),!s.gutter&&!s.lineNumbers&&(et.style.display="none"),T&&(x.style.height="1px",x.style.position="absolute"),N?(O.style.zIndex=-2,O.style.visibility="hidden"):m&&(O.style.minWidth="18px");var Tt=new ot,kt=new ot,_t,Dt,Pt=new X([new W([new z("")])]),Ht=0,Bt;Lr();var jt={from:{line:0,ch:0},to:{line:0,ch:0},inverted:!1},Ft,It,qt,Rt=0,Ut,zt=!1,Wt=!1,Xt=!1,Vt,$t,Jt,Kt,Qt,Gt,Yt,Zt=0,en=0,tn=0,nn=0,rn,sn=gn(0),on=!1,un=!0,an=!1,fn=null;vi(function(){wn(s.value||""),Vt=!1})();var ln=new Q;st(ct,"mousedown",vi(Tn)),st(ct,"dblclick",vi(Nn)),st(U,"selectstart",Z),d||st(ct,"contextmenu",ii),st(ct,"scroll",xn),st(O,"scroll",Sn),st(O,"mousedown",function(){Bt&&setTimeout(nr,0)});var cn=st(window,"resize",function(){dt.parentNode?ar(!0):cn()},!0);st(E,"keyup",vi(Hn)),st(E,"input",Yn),st(E,"keydown",vi(Dn)),st(E,"keypress",vi(Pn)),st(E,"focus",Bn),st(E,"blur",jn),s.dragDrop&&(st(ct,"dragstart",kn),st(ct,"dragenter",hn),st(ct,"dragover",hn),st(ct,"drop",vi(Cn))),st(ct,"paste",function(){nr(),Yn()}),st(E,"paste",function(){Xt=!0,Yn()}),st(E,"cut",vi(function(){s.readOnly||$n("")})),T&&st(lt,"mouseup",function(){document.activeElement==E&&E.blur(),nr()});var pn;try{pn=document.activeElement==E}catch(dn){}pn||s.autofocus?setTimeout(Bn,20):jn();var mn=dt.CodeMirror={getValue:En,setValue:vi(wn),getSelection:Qn,replaceSelection:vi($n),focus:function(){window.focus(),nr(),Bn(),Yn()},setOption:function(e,t){var n=s[e];s[e]=t,e=="mode"||e=="indentUnit"?Lr():e=="readOnly"&&t=="nocursor"?(jn(),E.blur()):e=="readOnly"&&!t?tr(!0):e=="theme"?Mr():e=="lineWrapping"&&n!=t?vi(Or)():e=="tabSize"?ar(!0):e=="keyMap"?_r():e=="tabindex"?E.tabIndex=t:e=="showCursorWhenSelecting"&&hr();if(e=="lineNumbers"||e=="gutter"||e=="firstLineNumber"||e=="theme"||e=="lineNumberFormatter")Ar(),ar(!0)},getOption:function(e){return s[e]},getMode:function(){return Dt},undo:vi(qn),redo:vi(Rn),indentLine:vi(function(e,t){typeof t!="string"&&(t==null?t=s.smartIndent?"smart":"prev":t=t?"add":"subtract"),vn(e)&&kr(e,t)}),indentSelection:vi(Cr),historySize:function(){return{undo:ln.done.length,redo:ln.undone.length}},clearHistory:function(){ln=new Q},setHistory:function(e){ln=new Q,ln.done=e.done,ln.undone=e.undone},getHistory:function(){function e(e){for(var t=0,n=[],r;t<e.length;++t){n.push(r=[]);for(var i=0,s=e[t];i<s.length;++i){var o=[],u=s[i];r.push({start:u.start,added:u.added,old:o});for(var a=0;a<u.old.length;++a)o.push(j(u.old[a]))}}return n}return{done:e(ln.done),undone:e(ln.undone)}},matchBrackets:vi(function(){ui(!0)}),getTokenAt:vi(function(e){return e=br(e),gn(e.line).getTokenAt(Dt,fi(e.line),s.tabSize,e.ch)}),getStateAfter:function(e){return e=yr(e==null?Pt.size-1:e),fi(e+1)},cursorCoords:function(e,t){return e==null&&(e=jt.inverted),this.charCoords(e?jt.from:jt.to,t)},charCoords:function(e,t){return e=br(e),t=="local"?Wr(e,!1):t=="div"?Wr(e,!0):Vr(e)},coordsChar:function(e){var t=ht(U);return Xr(e.x-t.left,e.y-t.top)},defaultTextHeight:function(){return Qr()},markText:vi(Pr),setBookmark:Hr,findMarksAt:Br,setMarker:vi(jr),clearMarker:vi(Fr),setLineClass:vi(qr),hideLine:vi(function(e){return Rr(e,!0)}),showLine:vi(function(e){return Rr(e,!1)}),onDeleteLine:function(e,t){if(typeof e=="number"){if(!vn(e))return null;e=gn(e)}return(e.handlers||(e.handlers=[])).push(t),e},lineInfo:Ur,getViewport:function(){return{from:en,to:tn}},addWidget:function(e,t,n,r,i){e=Wr(br(e));var s=e.yBot,o=e.x;t.style.position="absolute",lt.appendChild(t);if(r=="over")s=e.y;else if(r=="near"){var u=Math.max(ct.offsetHeight,Pt.height*Qr()),a=Math.max(lt.clientWidth,U.clientWidth)-ti();e.yBot+t.offsetHeight>u&&e.y>t.offsetHeight&&(s=e.y-t.offsetHeight),o+t.offsetWidth>a&&(o=a-t.offsetWidth)}t.style.top=s+ei()+"px",t.style.left=t.style.right="",i=="right"?(o=lt.clientWidth-t.offsetWidth,t.style.right="0px"):(i=="left"?o=0:i=="middle"&&(o=(lt.clientWidth-t.offsetWidth)/2),t.style.left=o+ti()+"px"),n&&sr(o,s,o+t.offsetWidth,s+t.offsetHeight)},lineCount:function(){return Pt.size},clipPos:br,getCursor:function(e){if(e==null||e=="head")e=jt.inverted;return e=="anchor"&&(e=!jt.inverted),e=="end"&&(e=!1),wt(e?jt.from:jt.to)},somethingSelected:function(){return!yt(jt.from,jt.to)},setCursor:vi(function(e,t,n){t==null&&typeof e.line=="number"?gr(e.line,e.ch,n):gr(e,t,n)}),setSelection:vi(function(e,t,n){(n?dr:vr)(br(e),br(t||e))}),getLine:function(e){if(vn(e))return gn(e).text},getLineHandle:function(e){if(vn(e))return gn(e)},setLine:vi(function(e,t){vn(e)&&Vn(t,{line:e,ch:0},{line:e,ch:gn(e).text.length})}),removeLine:vi(function(e){vn(e)&&Vn("",{line:e,ch:0},br({line:e+1,ch:0}))}),replaceRange:vi(Vn),getRange:function(e,t,n){return Kn(br(e),br(t),n)},triggerOnKeyDown:vi(Dn),execCommand:function(e){return f[e](mn)},moveH:vi(Er),deleteH:vi(Sr),moveV:vi(xr),toggleOverwrite:function(){zt?(zt=!1,H.className=H.className.replace(" CodeMirror-overwrite","")):(zt=!0,H.className+=" CodeMirror-overwrite")},posFromIndex:function(e){var t=0,n;return Pt.iter(0,Pt.size,function(r){var i=r.text.length+1;if(i>e)return n=e,!0;e-=i,++t}),br({line:t,ch:n})},indexFromPos:function(e){if(e.line<0||e.ch<0)return 0;var t=e.ch;return Pt.iter(0,e.line,function(e){t+=e.text.length+1}),t},scrollTo:function(e,t){e!=null&&(ct.scrollLeft=e),t!=null&&(O.scrollTop=ct.scrollTop=t),ar([])},getScrollInfo:function(){return{x:ct.scrollLeft,y:O.scrollTop,height:O.scrollHeight,width:ct.scrollWidth}},scrollIntoView:function(e){var t=Wr(e?br(e):jt.inverted?jt.from:jt.to);sr(t.x,t.y,t.x,t.yBot)},setSize:function(e,t){function n(e){return e=String(e),/^\d+$/.test(e)?e+"px":e}e!=null&&(dt.style.width=n(e)),t!=null&&(ct.style.height=n(t)),mn.refresh()},operation:function(e){return vi(e)()},compoundChange:function(e){return mi(e)},refresh:function(){ar(!0,null,Rt),O.scrollHeight>Rt&&(O.scrollTop=Rt)},getInputField:function(){return E},getWrapperElement:function(){return dt},getScrollerElement:function(){return ct},getGutterElement:function(){return et}},An,_n=null,Zn="";Dr.prototype.clear=vi(function(){var e,t;for(var n=0;n<this.lines.length;++n){var r=this.lines[n],i=_(r.markedSpans,this);i.from!=null&&(e=$(r)),i.to!=null&&(t=$(r)),r.markedSpans=D(r.markedSpans,i)}e!=null&&Jt.push({from:e,to:t+1}),this.lines.length=0,this.explicitlyCleared=!0}),Dr.prototype.find=function(){var e,t;for(var n=0;n<this.lines.length;++n){var r=this.lines[n],i=_(r.markedSpans,this);if(i.from!=null||i.to!=null){var s=$(r);i.from!=null&&(e={line:s,ch:i.from}),i.to!=null&&(t={line:s,ch:i.to})}}return this.type=="bookmark"?e:e&&{from:e,to:t}};var $r,Jr,Kr,Gr,Yr=0,ri,oi={"(":")>",")":"(<","[":"]>","]":"[<","{":"}>","}":"{<"},di=0;for(var gi in o)o.propertyIsEnumerable(gi)&&!mn.propertyIsEnumerable(gi)&&(mn[gi]=o[gi]);for(var yi=0;yi<u.length;++yi)u[yi](mn);return mn}function c(e){return typeof e=="string"?l[e]:e}function h(e,t,n,r,i){function s(t){t=c(t);var n=t[e];if(n===!1)return i&&i(),!0;if(n!=null&&r(n))return!0;if(t.nofallthrough)return i&&i(),!0;var o=t.fallthrough;if(o==null)return!1;if(Object.prototype.toString.call(o)!="[object Array]")return s(o);for(var u=0,a=o.length;u<a;++u)if(s(o[u]))return!0;return!1}return t&&s(t)?!0:s(n)}function p(e){var t=Mt[it(e,"keyCode")];return t=="Ctrl"||t=="Alt"||t=="Shift"||t=="Mod"}function L(e,t){if(t===!0)return t;if(e.copyState)return e.copyState(t);var n={};for(var r in t){var i=t[r];i instanceof Array&&(i=i.concat([])),n[r]=i}return n}function A(e,t,n){return e.startState?e.startState(t,n):!0}function O(e,t){this.pos=this.start=0,this.string=e,this.tabSize=t||8}function M(e,t,n){this.from=e,this.to=t,this.marker=n}function _(e,t){if(e)for(var n=0;n<e.length;++n){var r=e[n];if(r.marker==t)return r}}function D(e,t){var n;for(var r=0;r<e.length;++r)e[r]!=t&&(n||(n=[])).push(e[r]);return n}function P(e,t,n){if(e)for(var r=0,i;r<e.length;++r){var s=e[r],o=s.marker,u=s.from==null||(o.inclusiveLeft?s.from<=t:s.from<t);if(u||o.type=="bookmark"&&s.from==t&&s.from!=n){var a=s.to==null||(o.inclusiveRight?s.to>=t:s.to>t);(i||(i=[])).push({from:s.from,to:a?null:s.to,marker:o})}}return i}function H(e,t){if(e)for(var n=0,r;n<e.length;++n){var i=e[n],s=i.marker,o=i.to==null||(s.inclusiveRight?i.to>=t:i.to>t);if(o||s.type=="bookmark"&&i.from==t){var u=i.from==null||(s.inclusiveLeft?i.from<=t:i.from<t);(r||(r=[])).push({from:u?null:i.from-t,to:i.to==null?null:i.to-t,marker:s})}}return r}function B(e,t,n,r,i){if(!e&&!t)return i;var s=P(e,n),o=H(t,r),u=i.length==1,a=mt(i).length+(u?n:0);if(s)for(var f=0;f<s.length;++f){var l=s[f];if(l.to==null){var c=_(o,l.marker);c?u&&(l.to=c.to==null?null:c.to+a):l.to=n}}if(o)for(var f=0;f<o.length;++f){var l=o[f];l.to!=null&&(l.to+=a);if(l.from==null){var c=_(s,l.marker);c||(l.from=a,u&&(s||(s=[])).push(l))}else l.from+=a,u&&(s||(s=[])).push(l)}var h=[I(i[0],s)];if(!u){var p=i.length-2,d;if(p>0&&s)for(var f=0;f<s.length;++f)s[f].to==null&&(d||(d=[])).push({from:null,to:null,marker:s[f].marker});for(var f=0;f<p;++f)h.push(I(i[f+1],d));h.push(I(mt(i),o))}return h}function j(e){return typeof e=="string"?e:e.text}function F(e){if(typeof e=="string")return null;var t=e.markedSpans,n=null;for(var r=0;r<t.length;++r)t[r].marker.explicitlyCleared?n||(n=t.slice(0,r)):n&&n.push(t[r]);return n?n.length?n:null:t}function I(e,t){return t?{text:e,markedSpans:t}:e}function q(e){var t=e.markedSpans;if(!t)return;for(var n=0;n<t.length;++n){var r=t[n].marker.lines,i=Ct(r,e);r.splice(i,1)}e.markedSpans=null}function R(e,t){if(!t)return;for(var n=0;n<t.length;++n)var r=t[n].marker.lines.push(e);e.markedSpans=t}function z(e,t){this.text=e,this.height=1,R(this,t)}function W(e){this.lines=e,this.parent=null;for(var t=0,n=e.length,r=0;t<n;++t)e[t].parent=this,r+=e[t].height;this.height=r}function X(e){this.children=e;var t=0,n=0;for(var r=0,i=e.length;r<i;++r){var s=e[r];t+=s.chunkSize(),n+=s.height,s.parent=this}this.size=t,this.height=n,this.parent=null}function V(e,t){while(!e.lines)for(var n=0;;++n){var r=e.children[n],i=r.chunkSize();if(t<i){e=r;break}t-=i}return e.lines[t]}function $(e){if(e.parent==null)return null;var t=e.parent,n=Ct(t.lines,e);for(var r=t.parent;r;t=r,r=r.parent)for(var i=0;;++i){if(r.children[i]==t)break;n+=r.children[i].chunkSize()}return n}function J(e,t){var n=0;e:do{for(var r=0,i=e.children.length;r<i;++r){var s=e.children[r],o=s.height;if(t<o){e=s;continue e}t-=o,n+=s.chunkSize()}return n}while(!e.lines);for(var r=0,i=e.lines.length;r<i;++r){var u=e.lines[r],a=u.height;if(t<a)break;t-=a}return n+r}function K(e,t){var n=0;e:do{for(var r=0,i=e.children.length;r<i;++r){var s=e.children[r],o=s.chunkSize();if(t<o){e=s;continue e}t-=o,n+=s.height}return n}while(!e.lines);for(var r=0;r<t;++r)n+=e.lines[r].height;return n}function Q(){this.time=0,this.done=[],this.undone=[],this.compound=0,this.closed=!1}function G(){tt(this)}function Y(e){return e.stop||(e.stop=G),e}function Z(e){e.preventDefault?e.preventDefault():e.returnValue=!1}function et(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0}function tt(e){Z(e),et(e)}function nt(e){return e.target||e.srcElement}function rt(e){var t=e.which;return t==null&&(e.button&1?t=1:e.button&2?t=3:e.button&4&&(t=2)),n&&e.ctrlKey&&t==1&&(t=3),t}function it(e,t){var n=e.override&&e.override.hasOwnProperty(t);return n?e.override[t]:e[t]}function st(e,t,n,r){if(typeof e.addEventListener=="function"){e.addEventListener(t,n,!1);if(r)return function(){e.removeEventListener(t,n,!1)}}else{var i=function(e){n(e||window.event)};e.attachEvent("on"+t,i);if(r)return function(){e.detachEvent("on"+t,i)}}}function ot(){this.id=null}function ct(e,t,n){t==null&&(t=e.search(/[^\s\u00a0]/),t==-1&&(t=e.length));for(var r=0,i=0;r<t;++r)e.charAt(r)=="	"?i+=n-i%n:++i;return i}function ht(e,t){try{var n=e.getBoundingClientRect();n={top:n.top,left:n.left}}catch(r){n={top:0,left:0}}if(!t)if(window.pageYOffset==null){var i=document.documentElement||document.body.parentNode;i.scrollTop==null&&(i=document.body),n.top+=i.scrollTop,n.left+=i.scrollLeft}else n.top+=window.pageYOffset,n.left+=window.pageXOffset;return n}function pt(e){return e.textContent||e.innerText||e.nodeValue||""}function vt(e){while(dt.length<=e)dt.push(mt(dt)+" ");return dt[e]}function mt(e){return e[e.length-1]}function gt(e){t?(e.selectionStart=0,e.selectionEnd=e.value.length):e.select()}function yt(e,t){return e.line==t.line&&e.ch==t.ch}function bt(e,t){return e.line<t.line||e.line==t.line&&e.ch<t.ch}function wt(e){return{line:e.line,ch:e.ch}}function Et(e,t,n,r){var i=document.createElement(e);n&&(i.className=n),r&&(i.style.cssText=r);if(typeof t=="string")Tt(i,t);else if(t)for(var s=0;s<t.length;++s)i.appendChild(t[s]);return i}function St(e){return e.innerHTML="",e}function xt(e,t){St(e).appendChild(t)}function Tt(e,t){g?(e.innerHTML="",e.appendChild(document.createTextNode(t))):e.textContent=t}function Nt(e,t){if(!t)return 0;if(!e)return t.length;for(var n=e.length,r=t.length;n>=0&&r>=0;--n,--r)if(e.charAt(n)!=t.charAt(r))break;return r+1}function Ct(e,t){if(e.indexOf)return e.indexOf(t);for(var n=0,r=e.length;n<r;++n)if(e[n]==t)return n;return-1}function Lt(e){return/\w/.test(e)||e>""&&(e.toUpperCase()!=e.toLowerCase()||kt.test(e))}e.defaults={value:"",mode:null,theme:"default",indentUnit:2,indentWithTabs:!1,smartIndent:!0,tabSize:4,keyMap:"default",extraKeys:null,electricChars:!0,autoClearEmptyLines:!1,onKeyEvent:null,onDragEvent:null,lineWrapping:!1,lineNumbers:!1,gutter:!1,fixedGutter:!1,firstLineNumber:1,showCursorWhenSelecting:!1,readOnly:!1,dragDrop:!0,onChange:null,onCursorActivity:null,onViewportChange:null,onGutterClick:null,onUpdate:null,onFocus:null,onBlur:null,onScroll:null,matchBrackets:!1,cursorBlinkRate:530,workTime:100,workDelay:200,pollInterval:100,undoDepth:40,tabindex:null,autofocus:null,lineNumberFormatter:function(e){return e}};var t=/AppleWebKit/.test(navigator.userAgent)&&/Mobile\/\w+/.test(navigator.userAgent),n=t||/Mac/.test(navigator.platform),r=/Win/.test(navigator.platform),i=e.modes={},s=e.mimeModes={};e.defineMode=function(t,n){!e.defaults.mode&&t!="null"&&(e.defaults.mode=t);if(arguments.length>2){n.dependencies=[];for(var r=2;r<arguments.length;++r)n.dependencies.push(arguments[r])}i[t]=n},e.defineMIME=function(e,t){s[e]=t},e.resolveMode=function(t){if(typeof t=="string"&&s.hasOwnProperty(t))t=s[t];else if(typeof t=="string"&&/^[\w\-]+\/[\w\-]+\+xml$/.test(t))return e.resolveMode("application/xml");return typeof t=="string"?{name:t}:t||{name:"null"}},e.getMode=function(t,n){var n=e.resolveMode(n),r=i[n.name];if(!r)return e.getMode(t,"text/plain");var s=r(t,n);if(a.hasOwnProperty(n.name)){var o=a[n.name];for(var u in o){if(!o.hasOwnProperty(u))continue;s.hasOwnProperty(u)&&(s["_"+u]=s[u]),s[u]=o[u]}}return s.name=n.name,s},e.listModes=function(){var e=[];for(var t in i)i.propertyIsEnumerable(t)&&e.push(t);return e},e.listMIMEs=function(){var e=[];for(var t in s)s.propertyIsEnumerable(t)&&e.push({mime:t,mode:s[t]});return e};var o=e.extensions={};e.defineExtension=function(e,t){o[e]=t};var u=[];e.defineInitHook=function(e){u.push(e)};var a=e.modeExtensions={};e.extendMode=function(e,t){var n=a.hasOwnProperty(e)?a[e]:a[e]={};for(var r in t)t.hasOwnProperty(r)&&(n[r]=t[r])};var f=e.commands={selectAll:function(e){e.setSelection({line:0,ch:0},{line:e.lineCount()-1})},killLine:function(e){var t=e.getCursor(!0),n=e.getCursor(!1),r=!yt(t,n);!r&&e.getLine(t.line).length==t.ch?e.replaceRange("",t,{line:t.line+1,ch:0}):e.replaceRange("",t,r?n:{line:t.line})},deleteLine:function(e){var t=e.getCursor().line;e.replaceRange("",{line:t,ch:0},{line:t})},undo:function(e){e.undo()},redo:function(e){e.redo()},goDocStart:function(e){e.setCursor(0,0,!0)},goDocEnd:function(e){e.setSelection({line:e.lineCount()-1},null,!0)},goLineStart:function(e){e.setCursor(e.getCursor().line,0,!0)},goLineStartSmart:function(e){var t=e.getCursor(),n=e.getLine(t.line),r=Math.max(0,n.search(/\S/));e.setCursor(t.line,t.ch<=r&&t.ch?0:r,!0)},goLineEnd:function(e){e.setSelection({line:e.getCursor().line},null,!0)},goLineUp:function(e){e.moveV(-1,"line")},goLineDown:function(e){e.moveV(1,"line")},goPageUp:function(e){e.moveV(-1,"page")},goPageDown:function(e){e.moveV(1,"page")},goCharLeft:function(e){e.moveH(-1,"char")},goCharRight:function(e){e.moveH(1,"char")},goColumnLeft:function(e){e.moveH(-1,"column")},goColumnRight:function(e){e.moveH(1,"column")},goWordLeft:function(e){e.moveH(-1,"word")},goWordRight:function(e){e.moveH(1,"word")},delCharLeft:function(e){e.deleteH(-1,"char")},delCharRight:function(e){e.deleteH(1,"char")},delWordLeft:function(e){e.deleteH(-1,"word")},delWordRight:function(e){e.deleteH(1,"word")},indentAuto:function(e){e.indentSelection("smart")},indentMore:function(e){e.indentSelection("add")},indentLess:function(e){e.indentSelection("subtract")},insertTab:function(e){e.replaceSelection("	","end")},defaultTab:function(e){e.somethingSelected()?e.indentSelection("add"):e.replaceSelection("	","end")},transposeChars:function(e){var t=e.getCursor(),n=e.getLine(t.line);t.ch>0&&t.ch<n.length-1&&e.replaceRange(n.charAt(t.ch)+n.charAt(t.ch-1),{line:t.line,ch:t.ch-1},{line:t.line,ch:t.ch+1})},newlineAndIndent:function(e){e.replaceSelection("\n","end"),e.indentLine(e.getCursor().line)},toggleOverwrite:function(e){e.toggleOverwrite()}},l=e.keyMap={};l.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharRight",Backspace:"delCharLeft",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite"},l.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Alt-Up":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Down":"goDocEnd","Ctrl-Left":"goWordLeft","Ctrl-Right":"goWordRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delWordLeft","Ctrl-Delete":"delWordRight","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore",fallthrough:"basic"},l.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goWordLeft","Alt-Right":"goWordRight","Cmd-Left":"goLineStart","Cmd-Right":"goLineEnd","Alt-Backspace":"delWordLeft","Ctrl-Alt-Backspace":"delWordRight","Alt-Delete":"delWordRight","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore",fallthrough:["basic","emacsy"]},l["default"]=n?l.macDefault:l.pcDefault,l.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Alt-F":"goWordRight","Alt-B":"goWordLeft","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharRight","Ctrl-H":"delCharLeft","Alt-D":"delWordRight","Alt-Backspace":"delWordLeft","Ctrl-K":"killLine","Ctrl-T":"transposeChars"},e.isModifierKey=p,e.fromTextArea=function(t,n){function s(){t.value=f.getValue()}n||(n={}),n.value=t.value,!n.tabindex&&t.tabindex&&(n.tabindex=t.tabindex);if(n.autofocus==null){var r=document.body;try{r=document.activeElement}catch(i){}n.autofocus=r==t||t.getAttribute("autofocus")!=null&&r==document.body}if(t.form){var o=st(t.form,"submit",s,!0),u=t.form,a=u.submit;t.form.submit=function l(){s(),u.submit=a,u.submit(),u.submit=l}}t.style.display="none";var f=e(function(e){t.parentNode.insertBefore(e,t.nextSibling)},n);return f.save=s,f.getTextArea=function(){return t},f.toTextArea=function(){s(),t.parentNode.removeChild(f.getWrapperElement()),t.style.display="",t.form&&(o(),typeof t.form.submit=="function"&&(t.form.submit=a))},f};var d=/gecko\/\d/i.test(navigator.userAgent),v=/MSIE \d/.test(navigator.userAgent),m=/MSIE [1-7]\b/.test(navigator.userAgent),g=/MSIE [1-8]\b/.test(navigator.userAgent),y=v&&document.documentMode==5,b=/WebKit\//.test(navigator.userAgent),w=b&&/Qt\/\d+\.\d+/.test(navigator.userAgent),E=/Chrome\//.test(navigator.userAgent),S=/Opera\//.test(navigator.userAgent),x=/Apple Computer/.test(navigator.vendor),T=/KHTML\//.test(navigator.userAgent),N=/Mac OS X 10\D([7-9]|\d\d)\D/.test(navigator.userAgent),C=S&&navigator.userAgent.match(/Version\/(\d*\.\d*)/);C&&(C=Number(C[1]));var k=n&&(w||S&&(C==null||C<12.11));e.copyState=L,e.startState=A,e.innerMode=function(e,t){while(e.innerMode){var n=e.innerMode(t);t=n.state,e=n.mode}return n||{mode:e,state:t}},O.prototype={eol:function(){return this.pos>=this.string.length},sol:function(){return this.pos==0},peek:function(){return this.string.charAt(this.pos)||undefined},next:function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},eat:function(e){var t=this.string.charAt(this.pos);if(typeof e=="string")var n=t==e;else var n=t&&(e.test?e.test(t):e(t));if(n)return++this.pos,t},eatWhile:function(e){var t=this.pos;while(this.eat(e));return this.pos>t},eatSpace:function(){var e=this.pos;while(/[\s\u00a0]/.test(this.string.charAt(this.pos)))++this.pos;return this.pos>e},skipToEnd:function(){this.pos=this.string.length},skipTo:function(e){var t=this.string.indexOf(e,this.pos);if(t>-1)return this.pos=t,!0},backUp:function(e){this.pos-=e},column:function(){return ct(this.string,this.start,this.tabSize)},indentation:function(){return ct(this.string,null,this.tabSize)},match:function(e,t,n){if(typeof e!="string"){var i=this.string.slice(this.pos).match(e);return i&&i.index>0?null:(i&&t!==!1&&(this.pos+=i[0].length),i)}var r=function(e){return n?e.toLowerCase():e};if(r(this.string).indexOf(r(e),this.pos)==this.pos)return t!==!1&&(this.pos+=e.length),!0},current:function(){return this.string.slice(this.start,this.pos)}},e.StringStream=O;var U=" ";d||v&&!m?U="​":S&&(U=""),z.prototype={update:function(e,t){this.text=e,this.stateAfter=this.styles=null,q(this),R(this,t)},highlight:function(e,t,n){var r=new O(this.text,n),i=this.styles||(this.styles=[]),s=i.length=0;this.text==""&&e.blankLine&&e.blankLine(t);while(!r.eol()){var o=e.token(r,t),u=r.current();r.start=r.pos,s&&i[s-1]==o?i[s-2]+=u:u&&(i[s++]=u,i[s++]=o);if(r.pos>5e3){i[s++]=this.text.slice(r.pos),i[s++]=null;break}}},process:function(e,t,n){var r=new O(this.text,n);this.text==""&&e.blankLine&&e.blankLine(t);while(!r.eol()&&r.pos<=5e3)e.token(r,t),r.start=r.pos},getTokenAt:function(e,t,n,r){var i=this.text,s=new O(i,n);while(s.pos<r&&!s.eol()){s.start=s.pos;var o=e.token(s,t)}return{start:s.start,end:s.pos,string:s.current(),className:o||null,state:t}},indentation:function(e){return ct(this.text,null,e)},getContent:function(e,t,n){function u(t,n,o){if(!n)return;r&&v&&n.charAt(0)==" "&&(n=" "+n.slice(1)),r=!1;if(!s.test(n)){i+=n.length;var u=document.createTextNode(n)}else{var u=document.createDocumentFragment(),a=0;for(;;){s.lastIndex=a;var f=s.exec(n),l=f?f.index-a:n.length-a;l&&(u.appendChild(document.createTextNode(n.slice(a,a+l))),i+=l);if(!f)break;a+=l+1;if(f[0]=="	"){var c=e-i%e;u.appendChild(Et("span",vt(c),"cm-tab")),i+=c}else{var h=Et("span","•","cm-invalidchar");h.title="\\u"+f[0].charCodeAt(0).toString(16),u.appendChild(h),i+=1}}}o?t.appendChild(Et("span",[u],o)):t.appendChild(u)}function g(e){return e?"cm-"+e.replace(/ +/g," cm-"):null}var r=!0,i=0,s=/[\t\u0000-\u0019\u200b\u2028\u2029\uFEFF]/g,o=Et("pre"),a=u;if(t!=null){var f=0,l=o.anchor=Et("span");a=function(e,r,i){var s=r.length;if(t>=f&&t<f+s){var o=t-f;if(o){u(e,r.slice(0,o),i);if(n){var c=r.slice(o-1,o+1);lt.test(c)?e.appendChild(Et("wbr")):!m&&/\w\w/.test(c)&&e.appendChild(document.createTextNode("‍"))}}e.appendChild(l),u(l,S?r.slice(o,o+1):r.slice(o),i),S&&u(e,r.slice(o+1),i),t--,f+=s}else f+=s,u(e,r,i),f==t&&f==d?(Tt(l,U),e.appendChild(l)):f>t+10&&/\s/.test(r)&&(a=function(){})}}var c=this.styles,h=this.text,p=this.markedSpans,d=h.length;if(!h&&t==null)a(o," ");else if(!p||!p.length)for(var y=0,b=0;b<d;y+=2){var w=c[y],E=c[y+1],x=w.length;b+x>d&&(w=w.slice(0,d-b)),b+=x,a(o,w,g(E))}else{p.sort(function(e,t){return e.from-t.from});var T=0,y=0,N="",E,C=0,k=p[0].from||0,L=[],A=0,O=function(){var e;while(A<p.length&&((e=p[A]).from==T||e.from==null))e.marker.type=="range"&&L.push(e),++A;k=A<p.length?p[A].from:Infinity;for(var t=0;t<L.length;++t){var n=L[t].to;n==null&&(n=Infinity),n==T?L.splice(t--,1):k=Math.min(n,k)}},M=0;while(T<d){k==T&&O();var _=Math.min(d,k);for(;;){if(N){var D=T+N.length,P=E;for(var H=0;H<L.length;++H){var B=L[H];P=(P?P+" ":"")+B.marker.style,B.marker.endStyle&&B.to===Math.min(D,_)&&(P+=" "+B.marker.endStyle),B.marker.startStyle&&B.from===T&&(P+=" "+B.marker.startStyle)}a(o,D>_?N.slice(0,_-T):N,P);if(D>=_){N=N.slice(_-T),T=_;break}T=D}N=c[y++],E=g(c[y++])}}}return o},cleanUp:function(){this.parent=null,q(this)}},W.prototype={chunkSize:function(){return this.lines.length},remove:function(e,t,n){for(var r=e,i=e+t;r<i;++r){var s=this.lines[r];this.height-=s.height,s.cleanUp();if(s.handlers)for(var o=0;o<s.handlers.length;++o)n.push(s.handlers[o])}this.lines.splice(e,t)},collapse:function(e){e.splice.apply(e,[e.length,0].concat(this.lines))},insertHeight:function(e,t,n){this.height+=n,this.lines=this.lines.slice(0,e).concat(t).concat(this.lines.slice(e));for(var r=0,i=t.length;r<i;++r)t[r].parent=this},iterN:function(e,t,n){for(var r=e+t;e<r;++e)if(n(this.lines[e]))return!0}},X.prototype={chunkSize:function(){return this.size},remove:function(e,t,n){this.size-=t;for(var r=0;r<this.children.length;++r){var i=this.children[r],s=i.chunkSize();if(e<s){var o=Math.min(t,s-e),u=i.height;i.remove(e,o,n),this.height-=u-i.height,s==o&&(this.children.splice(r--,1),i.parent=null);if((t-=o)==0)break;e=0}else e-=s}if(this.size-t<25){var a=[];this.collapse(a),this.children=[new W(a)],this.children[0].parent=this}},collapse:function(e){for(var t=0,n=this.children.length;t<n;++t)this.children[t].collapse(e)},insert:function(e,t){var n=0;for(var r=0,i=t.length;r<i;++r)n+=t[r].height;this.insertHeight(e,t,n)},insertHeight:function(e,t,n){this.size+=t.length,this.height+=n;for(var r=0,i=this.children.length;r<i;++r){var s=this.children[r],o=s.chunkSize();if(e<=o){s.insertHeight(e,t,n);if(s.lines&&s.lines.length>50){while(s.lines.length>50){var u=s.lines.splice(s.lines.length-25,25),a=new W(u);s.height-=a.height,this.children.splice(r+1,0,a),a.parent=this}this.maybeSpill()}break}e-=o}},maybeSpill:function(){if(this.children.length<=10)return;var e=this;do{var t=e.children.splice(e.children.length-5,5),n=new X(t);if(!e.parent){var r=new X(e.children);r.parent=e,e.children=[r,n],e=r}else{e.size-=n.size,e.height-=n.height;var i=Ct(e.parent.children,e);e.parent.children.splice(i+1,0,n)}n.parent=e.parent}while(e.children.length>10);e.parent.maybeSpill()},iter:function(e,t,n){this.iterN(e,t-e,n)},iterN:function(e,t,n){for(var r=0,i=this.children.length;r<i;++r){var s=this.children[r],o=s.chunkSize();if(e<o){var u=Math.min(t,o-e);if(s.iterN(e,u,n))return!0;if((t-=u)==0)break;e=0}else e-=o}}},Q.prototype={addChange:function(e,t,n){this.undone.length=0;var r=+(new Date),i=mt(this.done),s=i&&mt(i),o=r-this.time;if(i&&!this.closed&&this.compound)i.push({start:e,added:t,old:n});else if(o>400||!s||this.closed||s.start>e+n.length||s.start+s.added<e)this.done.push([{start:e,added:t,old:n}]),this.closed=!1;else{var u=Math.max(0,s.start-e),a=Math.max(0,e+n.length-(s.start+s.added));for(var f=u;f>0;--f)s.old.unshift(n[f-1]);for(var f=a;f>0;--f)s.old.push(n[n.length-f]);u&&(s.start=e),s.added+=t-(n.length-u-a)}this.time=r},startCompound:function(){this.compound++||(this.closed=!0)},endCompound:function(){--this.compound||(this.closed=!0)}},e.e_stop=tt,e.e_preventDefault=Z,e.e_stopPropagation=et,e.connect=st,ot.prototype={set:function(e,t){clearTimeout(this.id),this.id=setTimeout(t,e)}};var ut=e.Pass={toString:function(){return"CodeMirror.Pass"}},at=function(){if(g)return!1;var e=Et("div");return"draggable"in e||"dragDrop"in e}(),ft=function(){var e=Et("textarea");return e.value="foo\nbar",e.value.indexOf("\r")>-1?"\r\n":"\n"}(),lt=/^$/;d?lt=/$'/:x?lt=/\-[^ \-?]|\?[^ !'\"\),.\-\/:;\?\]\}]/:E&&(lt=/\-[^ \-\.?]|\?[^ \-\.?\]\}:;!'\"\),\/]|[\.!\"#&%\)*+,:;=>\]|\}~][\(\{\[<]|\$'/);var dt=[""],kt=/[\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc]/,At="\n\nb".split(/\n/).length!=3?function(e){var t=0,n=[],r=e.length;while(t<=r){var i=e.indexOf("\n",t);i==-1&&(i=e.length);var s=e.slice(t,e.charAt(i-1)=="\r"?i-1:i),o=s.indexOf("\r");o!=-1?(n.push(s.slice(0,o)),t+=o+1):(n.push(s),t=i+1)}return n}:function(e){return e.split(/\r\n?|\n/)};e.splitLines=At;var Ot=window.getSelection?function(e){try{return e.selectionStart!=e.selectionEnd}catch(t){return!1}}:function(e){try{var t=e.ownerDocument.selection.createRange()}catch(n){}return!t||t.parentElement()!=e?!1:t.compareEndPoints("StartToEnd",t)!=0};e.defineMode("null",function(){return{token:function(e){e.skipToEnd()}}}),e.defineMIME("text/plain","null");var Mt={3:"Enter",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",91:"Mod",92:"Mod",93:"Mod",109:"-",107:"=",127:"Delete",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",63276:"PageUp",63277:"PageDown",63275:"End",63273:"Home",63234:"Left",63232:"Up",63235:"Right",63233:"Down",63302:"Insert",63272:"Delete"};return e.keyNames=Mt,function(){for(var e=0;e<10;e++)Mt[e+48]=String(e);for(var e=65;e<=90;e++)Mt[e]=String.fromCharCode(e);for(var e=1;e<=12;e++)Mt[e+111]=Mt[e+63235]="F"+e}(),e.version="2.38 +",e}(),define("cm",function(){}),CodeMirror.defineMode("css",function(e){function a(e){var t={};for(var n=0;n<e.length;++n)t[e[n]]=!0;return t}function f(e,t){return n=t,e}function l(e,t){var r=e.next();if(r=="@")return e.eatWhile(/[\w\\\-]/),f("def",e.current());if(r=="/"&&e.eat("*"))return t.tokenize=c,c(e,t);if(r=="<"&&e.eat("!"))return t.tokenize=h,h(e,t);if(r=="=")f(null,"compare");else{if(!(r!="~"&&r!="|"||!e.eat("=")))return f(null,"compare");if(r=='"'||r=="'")return t.tokenize=p(r),t.tokenize(e,t);if(r=="#")return e.eatWhile(/[\w\\\-]/),f("atom","hash");if(r=="!")return e.match(/^\s*\w*/),f("keyword","important");if(/\d/.test(r))return e.eatWhile(/[\w.%]/),f("number","unit");if(r!=="-")return/[,+>*\/]/.test(r)?f(null,"select-op"):r=="."&&e.match(/^-?[_a-z][_a-z0-9-]*/i)?f("qualifier",n):r==":"?f("operator",r):/[;{}\[\]\(\)]/.test(r)?f(null,r):r=="u"&&e.match("rl(")?(e.backUp(1),t.tokenize=d,f("property","variable")):(e.eatWhile(/[\w\\\-]/),f("property","variable"));if(/\d/.test(e.peek()))return e.eatWhile(/[\w.%]/),f("number","unit");if(e.match(/^[^-]+-/))return f("meta",n)}}function c(e,t){var n=!1,r;while((r=e.next())!=null){if(n&&r=="/"){t.tokenize=l;break}n=r=="*"}return f("comment","comment")}function h(e,t){var n=0,r;while((r=e.next())!=null){if(n>=2&&r==">"){t.tokenize=l;break}n=r=="-"?n+1:0}return f("comment","comment")}function p(e,t){return function(n,r){var i=!1,s;while((s=n.next())!=null){if(s==e&&!i)break;i=!i&&s=="\\"}return i||(t&&n.backUp(1),r.tokenize=l),f("string","string")}}function d(e,t){return e.next(),e.match(/\s*[\"\']/,!1)?t.tokenize=l:t.tokenize=p(")",!0),f(null,"(")}var t=e.indentUnit,n,r=a(["all","aural","braille","handheld","print","projection","screen","tty","tv","embossed"]),i=a(["width","min-width","max-width","height","min-height","max-height","device-width","min-device-width","max-device-width","device-height","min-device-height","max-device-height","aspect-ratio","min-aspect-ratio","max-aspect-ratio","device-aspect-ratio","min-device-aspect-ratio","max-device-aspect-ratio","color","min-color","max-color","color-index","min-color-index","max-color-index","monochrome","min-monochrome","max-monochrome","resolution","min-resolution","max-resolution","scan","grid"]),s=a(["align-content","align-items","align-self","alignment-adjust","alignment-baseline","anchor-point","animation","animation-delay","animation-direction","animation-duration","animation-iteration-count","animation-name","animation-play-state","animation-timing-function","appearance","azimuth","backface-visibility","background","background-attachment","background-clip","background-color","background-image","background-origin","background-position","background-repeat","background-size","baseline-shift","binding","bleed","bookmark-label","bookmark-level","bookmark-state","bookmark-target","border","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-image","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-right-color","border-right-style","border-right-width","border-spacing","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","bottom","box-decoration-break","box-shadow","box-sizing","break-after","break-before","break-inside","caption-side","clear","clip","color","color-profile","column-count","column-fill","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","columns","content","counter-increment","counter-reset","crop","cue","cue-after","cue-before","cursor","direction","display","dominant-baseline","drop-initial-after-adjust","drop-initial-after-align","drop-initial-before-adjust","drop-initial-before-align","drop-initial-size","drop-initial-value","elevation","empty-cells","fit","fit-position","flex","flex-basis","flex-direction","flex-flow","flex-grow","flex-shrink","flex-wrap","float","float-offset","font","font-feature-settings","font-family","font-kerning","font-language-override","font-size","font-size-adjust","font-stretch","font-style","font-synthesis","font-variant","font-variant-alternates","font-variant-caps","font-variant-east-asian","font-variant-ligatures","font-variant-numeric","font-variant-position","font-weight","grid-cell","grid-column","grid-column-align","grid-column-sizing","grid-column-span","grid-columns","grid-flow","grid-row","grid-row-align","grid-row-sizing","grid-row-span","grid-rows","grid-template","hanging-punctuation","height","hyphens","icon","image-orientation","image-rendering","image-resolution","inline-box-align","justify-content","left","letter-spacing","line-break","line-height","line-stacking","line-stacking-ruby","line-stacking-shift","line-stacking-strategy","list-style","list-style-image","list-style-position","list-style-type","margin","margin-bottom","margin-left","margin-right","margin-top","marker-offset","marks","marquee-direction","marquee-loop","marquee-play-count","marquee-speed","marquee-style","max-height","max-width","min-height","min-width","move-to","nav-down","nav-index","nav-left","nav-right","nav-up","opacity","order","orphans","outline","outline-color","outline-offset","outline-style","outline-width","overflow","overflow-style","overflow-wrap","overflow-x","overflow-y","padding","padding-bottom","padding-left","padding-right","padding-top","page","page-break-after","page-break-before","page-break-inside","page-policy","pause","pause-after","pause-before","perspective","perspective-origin","pitch","pitch-range","play-during","position","presentation-level","punctuation-trim","quotes","rendering-intent","resize","rest","rest-after","rest-before","richness","right","rotation","rotation-point","ruby-align","ruby-overhang","ruby-position","ruby-span","size","speak","speak-as","speak-header","speak-numeral","speak-punctuation","speech-rate","stress","string-set","tab-size","table-layout","target","target-name","target-new","target-position","text-align","text-align-last","text-decoration","text-decoration-color","text-decoration-line","text-decoration-skip","text-decoration-style","text-emphasis","text-emphasis-color","text-emphasis-position","text-emphasis-style","text-height","text-indent","text-justify","text-outline","text-shadow","text-space-collapse","text-transform","text-underline-position","text-wrap","top","transform","transform-origin","transform-style","transition","transition-delay","transition-duration","transition-property","transition-timing-function","unicode-bidi","vertical-align","visibility","voice-balance","voice-duration","voice-family","voice-pitch","voice-range","voice-rate","voice-stress","voice-volume","volume","white-space","widows","width","word-break","word-spacing","word-wrap","z-index"]),o=a(["black","silver","gray","white","maroon","red","purple","fuchsia","green","lime","olive","yellow","navy","blue","teal","aqua"]),u=a(["above","absolute","activeborder","activecaption","afar","after-white-space","ahead","alias","all","all-scroll","alternate","always","amharic","amharic-abegede","antialiased","appworkspace","arabic-indic","armenian","asterisks","auto","avoid","background","backwards","baseline","below","bidi-override","binary","bengali","blink","block","block-axis","bold","bolder","border","border-box","both","bottom","break-all","break-word","button","button-bevel","buttonface","buttonhighlight","buttonshadow","buttontext","cambodian","capitalize","caps-lock-indicator","caption","captiontext","caret","cell","center","checkbox","circle","cjk-earthly-branch","cjk-heavenly-stem","cjk-ideographic","clear","clip","close-quote","col-resize","collapse","compact","condensed","contain","content","content-box","context-menu","continuous","copy","cover","crop","cross","crosshair","currentcolor","cursive","dashed","decimal","decimal-leading-zero","default","default-button","destination-atop","destination-in","destination-out","destination-over","devanagari","disc","discard","document","dot-dash","dot-dot-dash","dotted","double","down","e-resize","ease","ease-in","ease-in-out","ease-out","element","ellipsis","embed","end","ethiopic","ethiopic-abegede","ethiopic-abegede-am-et","ethiopic-abegede-gez","ethiopic-abegede-ti-er","ethiopic-abegede-ti-et","ethiopic-halehame-aa-er","ethiopic-halehame-aa-et","ethiopic-halehame-am-et","ethiopic-halehame-gez","ethiopic-halehame-om-et","ethiopic-halehame-sid-et","ethiopic-halehame-so-et","ethiopic-halehame-ti-er","ethiopic-halehame-ti-et","ethiopic-halehame-tig","ew-resize","expanded","extra-condensed","extra-expanded","fantasy","fast","fill","fixed","flat","footnotes","forwards","from","geometricPrecision","georgian","graytext","groove","gujarati","gurmukhi","hand","hangul","hangul-consonant","hebrew","help","hidden","hide","higher","highlight","highlighttext","hiragana","hiragana-iroha","horizontal","hsl","hsla","icon","ignore","inactiveborder","inactivecaption","inactivecaptiontext","infinite","infobackground","infotext","inherit","initial","inline","inline-axis","inline-block","inline-table","inset","inside","intrinsic","invert","italic","justify","kannada","katakana","katakana-iroha","khmer","landscape","lao","large","larger","left","level","lighter","line-through","linear","lines","list-item","listbox","listitem","local","logical","loud","lower","lower-alpha","lower-armenian","lower-greek","lower-hexadecimal","lower-latin","lower-norwegian","lower-roman","lowercase","ltr","malayalam","match","media-controls-background","media-current-time-display","media-fullscreen-button","media-mute-button","media-play-button","media-return-to-realtime-button","media-rewind-button","media-seek-back-button","media-seek-forward-button","media-slider","media-sliderthumb","media-time-remaining-display","media-volume-slider","media-volume-slider-container","media-volume-sliderthumb","medium","menu","menulist","menulist-button","menulist-text","menulist-textfield","menutext","message-box","middle","min-intrinsic","mix","mongolian","monospace","move","multiple","myanmar","n-resize","narrower","navy","ne-resize","nesw-resize","no-close-quote","no-drop","no-open-quote","no-repeat","none","normal","not-allowed","nowrap","ns-resize","nw-resize","nwse-resize","oblique","octal","open-quote","optimizeLegibility","optimizeSpeed","oriya","oromo","outset","outside","overlay","overline","padding","padding-box","painted","paused","persian","plus-darker","plus-lighter","pointer","portrait","pre","pre-line","pre-wrap","preserve-3d","progress","push-button","radio","read-only","read-write","read-write-plaintext-only","relative","repeat","repeat-x","repeat-y","reset","reverse","rgb","rgba","ridge","right","round","row-resize","rtl","run-in","running","s-resize","sans-serif","scroll","scrollbar","se-resize","searchfield","searchfield-cancel-button","searchfield-decoration","searchfield-results-button","searchfield-results-decoration","semi-condensed","semi-expanded","separate","serif","show","sidama","single","skip-white-space","slide","slider-horizontal","slider-vertical","sliderthumb-horizontal","sliderthumb-vertical","slow","small","small-caps","small-caption","smaller","solid","somali","source-atop","source-in","source-out","source-over","space","square","square-button","start","static","status-bar","stretch","stroke","sub","subpixel-antialiased","super","sw-resize","table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row","table-row-group","telugu","text","text-bottom","text-top","textarea","textfield","thai","thick","thin","threeddarkshadow","threedface","threedhighlight","threedlightshadow","threedshadow","tibetan","tigre","tigrinya-er","tigrinya-er-abegede","tigrinya-et","tigrinya-et-abegede","to","top","transparent","ultra-condensed","ultra-expanded","underline","up","upper-alpha","upper-armenian","upper-greek","upper-hexadecimal","upper-latin","upper-norwegian","upper-roman","uppercase","urdu","url","vertical","vertical-text","visible","visibleFill","visiblePainted","visibleStroke","visual","w-resize","wait","wave","white","wider","window","windowframe","windowtext","x-large","x-small","xor","xx-large","xx-small","yellow"]);return{startState:function(e){return{tokenize:l,baseIndent:e||0,stack:[]}},token:function(e,t){if(t.tokenize==l&&e.eatSpace())return null;var a=t.tokenize(e,t),f=t.stack[t.stack.length-1];return a=="property"?f=="propertyValue"?u[e.current()]?a="string-2":o[e.current()]?a="keyword":a="variable-2":f=="rule"?s[e.current()]||(a+=" error"):!f||f=="@media{"?a="tag":f=="@media"?r[e.current()]?a="attribute":/^(only|not)$/i.test(e.current())?a="keyword":e.current().toLowerCase()=="and"?a="error":i[e.current()]?a="error":a="attribute error":f=="@mediaType"?r[e.current()]?a="attribute":e.current().toLowerCase()=="and"?a="operator":/^(only|not)$/i.test(e.current())?a="error":i[e.current()]?a="error":a="error":f=="@mediaType("?s[e.current()]||(r[e.current()]?a="error":e.current().toLowerCase()=="and"?a="operator":/^(only|not)$/i.test(e.current())?a="error":a+=" error"):a="error":a=="atom"?!f||f=="@media{"?a="builtin":f=="propertyValue"?/^#([0-9a-fA-f]{3}|[0-9a-fA-f]{6})$/.test(e.current())||(a+=" error"):a="error":f=="@media"&&n=="{"&&(a="error"),n=="{"?f=="@media"||f=="@mediaType"?(t.stack.pop(),t.stack[t.stack.length-1]="@media{"):t.stack.push("rule"):n=="}"?(t.stack.pop(),f=="propertyValue"&&t.stack.pop()):n=="@media"?t.stack.push("@media"):f=="@media"&&/\b(keyword|attribute)\b/.test(a)?t.stack.push("@mediaType"):f=="@mediaType"&&e.current()==","?t.stack.pop():f=="@mediaType"&&n=="("?t.stack.push("@mediaType("):f=="@mediaType("&&n==")"?t.stack.pop():f=="rule"&&n==":"?t.stack.push("propertyValue"):f=="propertyValue"&&n==";"&&t.stack.pop(),a},indent:function(e,n){var r=e.stack.length;return/^\}/.test(n)&&(r-=e.stack[e.stack.length-1]=="propertyValue"?2:1),e.baseIndent+r*t},electricChars:"}"}}),CodeMirror.defineMIME("text/css","css"),define("cm-css",function(){}),CodeMirror.defineMode("javascript",function(e,t){function u(e,t,n){return t.tokenize=n,n(e,t)}function a(e,t){var n=!1,r;while((r=e.next())!=null){if(r==t&&!n)return!1;n=!n&&r=="\\"}return n}function c(e,t,n){return f=e,l=n,t}function h(e,t){var n=e.next();if(n=='"'||n=="'")return u(e,t,p(n));if(/[\[\]{}\(\),;\:\.]/.test(n))return c(n);if(n=="0"&&e.eat(/x/i))return e.eatWhile(/[\da-f]/i),c("number","number");if(/\d/.test(n)||n=="-"&&e.eat(/\d/))return e.match(/^\d*(?:\.\d*)?(?:[eE][+\-]?\d+)?/),c("number","number");if(n=="/")return e.eat("*")?u(e,t,d):e.eat("/")?(e.skipToEnd(),c("comment","comment")):t.lastType=="operator"||t.lastType=="keyword c"||/^[\[{}\(,;:]$/.test(t.lastType)?(a(e,"/"),e.eatWhile(/[gimy]/),c("regexp","string-2")):(e.eatWhile(o),c("operator",null,e.current()));if(n=="#")return e.skipToEnd(),c("error","error");if(o.test(n))return e.eatWhile(o),c("operator",null,e.current());e.eatWhile(/[\w\$_]/);var r=e.current(),i=s.propertyIsEnumerable(r)&&s[r];return i&&t.lastType!="."?c(i.type,i.style,r):c("variable","variable",r)}function p(e){return function(t,n){return a(t,e)||(n.tokenize=h),c("string","string")}}function d(e,t){var n=!1,r;while(r=e.next()){if(r=="/"&&n){t.tokenize=h;break}n=r=="*"}return c("comment","comment")}function m(e,t,n,r,i,s){this.indented=e,this.column=t,this.type=n,this.prev=i,this.info=s,r!=null&&(this.align=r)}function g(e,t){for(var n=e.localVars;n;n=n.next)if(n.name==t)return!0}function y(e,t,n,i,s){var o=e.cc;b.state=e,b.stream=s,b.marked=null,b.cc=o,e.lexical.hasOwnProperty("align")||(e.lexical.align=!0);for(;;){var u=o.length?o.pop():r?O:A;if(u(n,i)){while(o.length&&o[o.length-1].lex)o.pop()();return b.marked?b.marked:n=="variable"&&g(e,i)?"variable-2":t}}}function w(){for(var e=arguments.length-1;e>=0;e--)b.cc.push(arguments[e])}function E(){return w.apply(null,arguments),!0}function S(e){function t(t){for(var n=t;n;n=n.next)if(n.name==e)return!0;return!1}var n=b.state;if(n.context){b.marked="def";if(t(n.localVars))return;n.localVars={name:e,next:n.localVars}}else{if(t(n.globalVars))return;n.globalVars={name:e,next:n.globalVars}}}function T(){b.state.context={prev:b.state.context,vars:b.state.localVars},b.state.localVars=x}function N(){b.state.localVars=b.state.context.vars,b.state.context=b.state.context.prev}function C(e,t){var n=function(){var n=b.state;n.lexical=new m(n.indented,b.stream.column(),e,null,n.lexical,t)};return n.lex=!0,n}function k(){var e=b.state;e.lexical.prev&&(e.lexical.type==")"&&(e.indented=e.lexical.indented),e.lexical=e.lexical.prev)}function L(e){return function(n){return n==e?E():e==";"?w():E(arguments.callee)}}function A(e){return e=="var"?E(C("vardef"),q,L(";"),k):e=="keyword a"?E(C("form"),O,A,k):e=="keyword b"?E(C("form"),A,k):e=="{"?E(C("}"),j,k):e==";"?E():e=="function"?E(V):e=="for"?E(C("form"),L("("),C(")"),U,L(")"),k,A,k):e=="variable"?E(C("stat"),D):e=="switch"?E(C("form"),O,C("}","switch"),L("{"),j,k,k):e=="case"?E(O,L(":")):e=="default"?E(L(":")):e=="catch"?E(C("form"),T,L("("),$,L(")"),A,k,N):w(C("stat"),O,L(";"),k)}function O(e){return v.hasOwnProperty(e)?E(_):e=="function"?E(V):e=="keyword c"?E(M):e=="("?E(C(")"),M,L(")"),k,_):e=="operator"?E(O):e=="["?E(C("]"),B(O,"]"),k,_):e=="{"?E(C("}"),B(H,"}"),k,_):E()}function M(e){return e.match(/[;\}\)\],]/)?w():w(O)}function _(e,t){if(e=="operator"&&/\+\+|--/.test(t))return E(_);if(e=="operator"&&t=="?")return E(O,L(":"),O);if(e==";")return;if(e=="(")return E(C(")"),B(O,")"),k,_);if(e==".")return E(P,_);if(e=="[")return E(C("]"),O,L("]"),k,_)}function D(e){return e==":"?E(k,A):w(_,L(";"),k)}function P(e){if(e=="variable")return b.marked="property",E()}function H(e){e=="variable"&&(b.marked="property");if(v.hasOwnProperty(e))return E(L(":"),O)}function B(e,t){function n(r){return r==","?E(e,n):r==t?E():E(L(t))}return function(i){return i==t?E():w(e,n)}}function j(e){return e=="}"?E():w(A,j)}function F(e){return e==":"?E(I):w()}function I(e){return e=="variable"?(b.marked="variable-3",E()):w()}function q(e,t){return e=="variable"?(S(t),i?E(F,R):E(R)):w()}function R(e,t){if(t=="=")return E(O,R);if(e==",")return E(q)}function U(e){return e=="var"?E(q,L(";"),W):e==";"?E(W):e=="variable"?E(z):E(W)}function z(e,t){return t=="in"?E(O):E(_,W)}function W(e,t){return e==";"?E(X):t=="in"?E(O):E(O,L(";"),X)}function X(e){e!=")"&&E(O)}function V(e,t){if(e=="variable")return S(t),E(V);if(e=="(")return E(C(")"),T,B($,")"),k,A,N)}function $(e,t){if(e=="variable")return S(t),i?E(F):E()}var n=e.indentUnit,r=t.json,i=t.typescript,s=function(){function e(e){return{type:e,style:"keyword"}}var t=e("keyword a"),n=e("keyword b"),r=e("keyword c"),s=e("operator"),o={type:"atom",style:"atom"},u={"if":t,"while":t,"with":t,"else":n,"do":n,"try":n,"finally":n,"return":r,"break":r,"continue":r,"new":r,"delete":r,"throw":r,"var":e("var"),"const":e("var"),let:e("var"),"function":e("function"),"catch":e("catch"),"for":e("for"),"switch":e("switch"),"case":e("case"),"default":e("default"),"in":s,"typeof":s,"instanceof":s,"true":o,"false":o,"null":o,"undefined":o,NaN:o,Infinity:o};if(i){var a={type:"variable",style:"variable-3"},f={"interface":e("interface"),"class":e("class"),"extends":e("extends"),constructor:e("constructor"),"public":e("public"),"private":e("private"),"protected":e("protected"),"static":e("static"),"super":e("super"),string:a,number:a,bool:a,any:a};for(var l in f)u[l]=f[l]}return u}(),o=/[+\-*&%=<>!?|]/,f,l,v={atom:!0,number:!0,variable:!0,string:!0,regexp:!0},b={state:null,column:null,marked:null,cc:null},x={name:"this",next:{name:"arguments"}};return k.lex=!0,{startState:function(e){return{tokenize:h,lastType:null,cc:[],lexical:new m((e||0)-n,0,"block",!1),localVars:t.localVars,globalVars:t.globalVars,context:t.localVars&&{vars:t.localVars},indented:0}},token:function(e,t){e.sol()&&(t.lexical.hasOwnProperty("align")||(t.lexical.align=!1),t.indented=e.indentation());if(e.eatSpace())return null;var n=t.tokenize(e,t);return f=="comment"?n:(t.lastType=f,y(t,n,f,l,e))},indent:function(e,t){if(e.tokenize==d)return CodeMirror.Pass;if(e.tokenize!=h)return 0;var r=t&&t.charAt(0),i=e.lexical;i.type=="stat"&&r=="}"&&(i=i.prev);var s=i.type,o=r==s;return s=="vardef"?i.indented+(e.lastType=="operator"||e.lastType==","?4:0):s=="form"&&r=="{"?i.indented:s=="form"?i.indented+n:s=="stat"?i.indented+(e.lastType=="operator"||e.lastType==","?n:0):i.info=="switch"&&!o?i.indented+(/^(?:case|default)\b/.test(t)?n:2*n):i.align?i.column+(o?0:1):i.indented+(o?0:n)},electricChars:":{}",jsonMode:r}}),CodeMirror.defineMIME("text/javascript","javascript"),CodeMirror.defineMIME("text/ecmascript","javascript"),CodeMirror.defineMIME("application/javascript","javascript"),CodeMirror.defineMIME("application/ecmascript","javascript"),CodeMirror.defineMIME("application/json",{name:"javascript",json:!0}),CodeMirror.defineMIME("text/typescript",{name:"javascript",typescript:!0}),CodeMirror.defineMIME("application/typescript",{name:"javascript",typescript:!0}),define("cm-js",function(){}),CodeMirror.defineMode("xml",function(e,t){function u(e,t){function n(n){return t.tokenize=n,n(e,t)}var r=e.next();if(r=="<"){if(e.eat("!"))return e.eat("[")?e.match("CDATA[")?n(l("atom","]]>")):null:e.match("--")?n(l("comment","-->")):e.match("DOCTYPE",!0,!0)?(e.eatWhile(/[\w\._\-]/),n(c(1))):null;if(e.eat("?"))return e.eatWhile(/[\w\._\-]/),t.tokenize=l("meta","?>"),"meta";var i=e.eat("/");s="";var u;while(u=e.eat(/[^\s\u00a0=<>\"\'\/?]/))s+=u;return s?(o=i?"closeTag":"openTag",t.tokenize=a,"tag"):"error"}if(r=="&"){var f;return e.eat("#")?e.eat("x")?f=e.eatWhile(/[a-fA-F\d]/)&&e.eat(";"):f=e.eatWhile(/[\d]/)&&e.eat(";"):f=e.eatWhile(/[\w\.\-:]/)&&e.eat(";"),f?"atom":"error"}return e.eatWhile(/[^&<]/),null}function a(e,t){var n=e.next();return n==">"||n=="/"&&e.eat(">")?(t.tokenize=u,o=n==">"?"endTag":"selfcloseTag","tag"):n=="="?(o="equals",null):/[\'\"]/.test(n)?(t.tokenize=f(n),t.tokenize(e,t)):(e.eatWhile(/[^\s\u00a0=<>\"\']/),"word")}function f(e){return function(t,n){while(!t.eol())if(t.next()==e){n.tokenize=a;break}return"string"}}function l(e,t){return function(n,r){while(!n.eol()){if(n.match(t)){r.tokenize=u;break}n.next()}return e}}function c(e){return function(t,n){var r;while((r=t.next())!=null){if(r=="<")return n.tokenize=c(e+1),n.tokenize(t,n);if(r==">"){if(e==1){n.tokenize=u;break}return n.tokenize=c(e-1),n.tokenize(t,n)}}return"meta"}}function d(){for(var e=arguments.length-1;e>=0;e--)h.cc.push(arguments[e])}function v(){return d.apply(null,arguments),!0}function m(e,t){var n=r.doNotIndent.hasOwnProperty(e)||h.context&&h.context.noIndent;h.context={prev:h.context,tagName:e,indent:h.indented,startOfLine:t,noIndent:n}}function g(){h.context&&(h.context=h.context.prev)}function y(e){if(e=="openTag")return h.tagName=s,v(S,b(h.startOfLine));if(e=="closeTag"){var t=!1;return h.context?h.context.tagName!=s&&(r.implicitlyClosed.hasOwnProperty(h.context.tagName.toLowerCase())&&g(),t=!h.context||h.context.tagName!=s):t=!0,t&&(p="error"),v(w(t))}return v()}function b(e){return function(t){return t=="selfcloseTag"||t=="endTag"&&r.autoSelfClosers.hasOwnProperty(h.tagName.toLowerCase())?(E(h.tagName.toLowerCase()),v()):t=="endTag"?(E(h.tagName.toLowerCase()),m(h.tagName,e),v()):v()}}function w(e){return function(t){return e&&(p="error"),t=="endTag"?(g(),v()):(p="error",v(arguments.callee))}}function E(e){var t;for(;;){if(!h.context)return;t=h.context.tagName.toLowerCase();if(!r.contextGrabbers.hasOwnProperty(t)||!r.contextGrabbers[t].hasOwnProperty(e))return;g()}}function S(e){return e=="word"?(p="attribute",v(x,S)):e=="endTag"||e=="selfcloseTag"?d():(p="error",v(S))}function x(e){return e=="equals"?v(T,S):(r.allowMissing?e=="word"&&(p="attribute"):p="error",e=="endTag"||e=="selfcloseTag"?d():v())}function T(e){return e=="string"?v(N):e=="word"&&r.allowUnquoted?(p="string",v()):(p="error",e=="endTag"||e=="selfCloseTag"?d():v())}function N(e){return e=="string"?v(N):d()}var n=e.indentUnit,r=t.htmlMode?{autoSelfClosers:{area:!0,base:!0,br:!0,col:!0,command:!0,embed:!0,frame:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0},implicitlyClosed:{dd:!0,li:!0,optgroup:!0,option:!0,p:!0,rp:!0,rt:!0,tbody:!0,td:!0,tfoot:!0,th:!0,tr:!0},contextGrabbers:{dd:{dd:!0,dt:!0},dt:{dd:!0,dt:!0},li:{li:!0},option:{option:!0,optgroup:!0},optgroup:{optgroup:!0},p:{address:!0,article:!0,aside:!0,blockquote:!0,dir:!0,div:!0,dl:!0,fieldset:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,menu:!0,nav:!0,ol:!0,p:!0,pre:!0,section:!0,table:!0,ul:!0},rp:{rp:!0,rt:!0},rt:{rp:!0,rt:!0},tbody:{tbody:!0,tfoot:!0},td:{td:!0,th:!0},tfoot:{tbody:!0},th:{td:!0,th:!0},thead:{tbody:!0,tfoot:!0},tr:{tr:!0}},doNotIndent:{pre:!0},allowUnquoted:!0,allowMissing:!0}:{autoSelfClosers:{},implicitlyClosed:{},contextGrabbers:{},doNotIndent:{},allowUnquoted:!1,allowMissing:!1},i=t.alignCDATA,s,o,h,p;return{startState:function(){return{tokenize:u,cc:[],indented:0,startOfLine:!0,tagName:null,context:null}},token:function(e,t){e.sol()&&(t.startOfLine=!0,t.indented=e.indentation());if(e.eatSpace())return null;p=o=s=null;var n=t.tokenize(e,t);t.type=o;if((n||o)&&n!="comment"){h=t;for(;;){var r=t.cc.pop()||y;if(r(o||n))break}}return t.startOfLine=!1,p||n},indent:function(e,t,r){var s=e.context;if(e.tokenize!=a&&e.tokenize!=u||s&&s.noIndent)return r?r.match(/^(\s*)/)[0].length:0;if(i&&/<!\[CDATA\[/.test(t))return 0;s&&/^<\//.test(t)&&(s=s.prev);while(s&&!s.startOfLine)s=s.prev;return s?s.indent+n:0},electricChars:"/",configuration:t.htmlMode?"html":"xml"}}),CodeMirror.defineMIME("text/xml","xml"),CodeMirror.defineMIME("application/xml","xml"),CodeMirror.mimeModes.hasOwnProperty("text/html")||CodeMirror.defineMIME("text/html",{name:"xml",htmlMode:!0}),define("cm-xml",function(){}),CodeMirror.defineMode("htmlmixed",function(e){function i(e,i){var s=t.token(e,i.htmlState);return/(?:^|\s)tag(?:\s|$)/.test(s)&&e.current()==">"&&i.htmlState.context&&(/^script$/i.test(i.htmlState.context.tagName)?(i.token=o,i.localState=n.startState(t.indent(i.htmlState,""))):/^style$/i.test(i.htmlState.context.tagName)&&(i.token=u,i.localState=r.startState(t.indent(i.htmlState,"")))),s}function s(e,t,n){var r=e.current(),i=r.search(t),s;if(i>-1)e.backUp(r.length-i);else if(s=r.match(/<\/?$/))e.backUp(r.length),e.match(t,!1)||e.match(r[0]);return n}function o(e,t){return e.match(/^<\/\s*script\s*>/i,!1)?(t.token=i,t.localState=null,i(e,t)):s(e,/<\/\s*script\s*>/,n.token(e,t.localState))}function u(e,t){return e.match(/^<\/\s*style\s*>/i,!1)?(t.token=i,t.localState=null,i(e,t)):s(e,/<\/\s*style\s*>/,r.token(e,t.localState))}var t=CodeMirror.getMode(e,{name:"xml",htmlMode:!0}),n=CodeMirror.getMode(e,"javascript"),r=CodeMirror.getMode(e,"css");return{startState:function(){var e=t.startState();return{token:i,localState:null,mode:"html",htmlState:e}},copyState:function(e){if(e.localState)var i=CodeMirror.copyState(e.token==u?r:n,e.localState);return{token:e.token,localState:i,mode:e.mode,htmlState:CodeMirror.copyState(t,e.htmlState)}},token:function(e,t){return t.token(e,t)},indent:function(e,s){return e.token==i||/^\s*<\//.test(s)?t.indent(e.htmlState,s):e.token==o?n.indent(e.localState,s):r.indent(e.localState,s)},electricChars:"/{}:",innerMode:function(e){var s=e.token==i?t:e.token==o?n:r;return{state:e.localState||e.htmlState,mode:s}}}},"xml","javascript","css"),CodeMirror.defineMIME("text/html","htmlmixed"),define("cm-html",function(){}),define("view/StructureView",["text!template/structure.html","cm","cm-css","cm-js","cm-xml","cm-html"],function(e){function a(){m(),E(),M()}function f(){b(!0)}function l(){b(!1)}function c(){t!="null"&&i==""&&(i=setInterval(p,Heiduc.AUTOSAVE_TIMEOUT*1e3))}function h(){i!=""&&(clearInterval(i),i="")}function p(){b(!0)}function d(){return $("#autosave:checked").length>0}function v(){d()?c():h()}function m(){r=t!="",r||(n=null,g()),Heiduc.jsonrpc.structureService.getById(function(e){n=e,g()},t)}function g(){n!=null?($("#title").val(n.title),$("#xmlContent").val(n.content)):($("#title").val(""),$("#xmlContent").val("")),u=CodeMirror.fromTextArea(document.getElementById("xmlContent"),{lineNumbers:!0,lineWrapping:!0,theme:"eclipse",mode:"xml"}),u.focus(),$(u.getScrollerElement()).css("height",.6*$(window).height()+"px").css("border","1px solid silver"),u.refresh()}function y(){location.href="#structures"}function b(e){u.save();var n=Heiduc.javaMap({id:t,title:$("#title").val(),content:$("#xmlContent").val()});Heiduc.jsonrpc.structureService.save(function(n){n.result=="success"?(Heiduc.info(messages("structure.success_save")),e?r||(t=n.message,m(),M()):location.href="#structures"):Heiduc.showServiceMessages(n)},n)}function w(){var e=$("#fieldName").val(),t=$("#fieldTitle").val();e==""&&$("#fieldName").val(Heiduc.nameFromTitle(t))}function E(){r&&Heiduc.jsonrpc.structureService.getFields(function(e){s=e.list,x()},t)}function S(e){return e=="TEXT"?messages("text"):e=="TEXTAREA"?messages("text_area"):e=="RESOURCE"?messages("resource_link"):e=="DATE"?messages("date"):"Unknown"}function x(){var e='<table class="table"><tr><th>'+messages("title")+"</th><th>"+messages("structure.tag_name")+"</th><th>"+messages("type")+"</th><th></th></tr>";$.each(s,function(t,n){e+="<tr><td>"+n.title+"</td>"+"<td>"+n.name+"</td>"+"<td>"+S(n.type)+"</td>"+'<td><a href="#" onclick="Heiduc.app.structureView.onFieldRemove('+t+')"><img src="/static/images/02_x.png"/></a> '+'<a href="#" onclick="Heiduc.app.structureView.onFieldUp('+t+')"><img src="/static/images/02_up.png"/></a> '+'<a href="#" onclick="Heiduc.app.structureView.onFieldDown('+t+')"><img src="/static/images/02_down.png"/></a> '+"</td></tr>"}),$("#fields").html(e+"</table>"),$("#fields tr:even").addClass("even")}function T(e){var t=!0;return e.name==""?(Heiduc.error(messages("structure.field_tag_name_empty")),t=!1):$(s,function(n,r){r.name==e.name&&(Heiduc.error(messages("structure.field_exists")),t=!1)}),Heiduc.isValidIdentifier(e.name)||(Heiduc.error(messages("structure.field_tag_name")+" "+e.name+" "+messages("structure.must_valid_identifier")),t=!1),e.title==""&&(Heiduc.error(messages("structure.field_title_empty")),t=!1),t}function N(){$("#fieldTitle").focus();var e={title:Heiduc.strip($("#fieldTitle").val()),name:Heiduc.strip($("#fieldName").val()),type:$("#fieldType").val()};T(e)&&(s.push(e),x(),$("#fieldTitle").val("").focus(),$("#fieldName").val(""),Heiduc.info(messages("structure.field_success_add")))}function C(e,t){var n=s[e];s[e]=s[t],s[t]=n}function k(){var e="<structure>\n";return $.each(s,function(t,n){e+="  <field>\n    <title>"+n.title+"</title>\n"+"    <name>"+n.name+"</name>\n"+"    <type>"+n.type+"</type>\n  </field>\n"}),e+"</structure>"}function L(){O(!1)}function A(){O(!0)}function O(e){u.setValue(k()),b(e)}function M(){r&&Heiduc.jsonrpc.structureTemplateService.selectByStructure(function(e){o=e.list,D()},t)}function D(){var e='<table class="table"><tr><th></th><th>'+messages("title")+"</th>"+"<th>"+messages("name")+"</th>"+"<th>"+messages("type")+"</th></tr>";$.each(o,function(t,n){e+='<tr><td><input type="checkbox" value="'+n.id+'"></td>'+'<td><a href="#structureTemplate/'+n.id+'">'+n.title+"</a></td>"+"<td>"+n.name+"</td>"+"<td>"+P(n.typeString)+"</td></tr>"}),$("#templates").html(e+"</table>"),$("#templates tr:even").addClass("even")}function P(e){return e=="VELOCITY"?"Velocity":e=="XSLT"?"XSLT":"Undefined"}function H(){location.href="#addStructureTemplate/"+t}function B(){var e=new Array;$("#templates input:checked").each(function(){e.push(this.value)});if(e.length==0){Heiduc.info(messages("nothing_selected"));return}confirm(messages("are_you_sure"))&&Heiduc.jsonrpc.structureTemplateService.remove(function(e){Heiduc.showServiceMessages(e),M()},Heiduc.javaList(e))}function j(e){e.target.id==="_structureXML"?(d()&&c(),u&&(u.focus(),$(u.getScrollerElement()).css("height",.6*$(window).height()+"px").css("border","1px solid silver"),u.refresh())):h()}console.log("Loading StructureView.js");var t="",n="",r=!1,i="",s=[],o=[],u=null;return Backbone.View.extend({css:["/static/js/codemirror/codemirror.css","/static/js/codemirror/eclipse.css"],el:$("#content"),render:function(){Heiduc.addCSSFiles(this.css),this.el.html(_.template(e,{messages:messages})),a(),$('a[data-toggle="tab"]').on("shown.bs.tab",j),$("#autosave").change(v),$("#saveContinueXMLButton").click(f),$("#saveXMLButton").click(l),$("#cancelXMLButton").click(y),$("#saveContinueButton").click(A),$("#saveButton").click(L),$("#cancelButton").click(y),$("#addField").click(N),$("#addTemplateButton").click(H),$("#deleteTemplateButton").click(B),$("#fieldTitle").change(w)},setId:function(e){t=e,r=t!="",r||(n="",s=[],o=[])},remove:function(){this.el.html(""),Heiduc.removeCSSFiles(this.css)},onFieldUp:function(e){if(e==0)return;C(e,e-1),x()},onFieldDown:function(e){if(e+1>=s.length)return;C(e,e+1),x()},onFieldRemove:function(e){confirm(messages("are_you_sure"))&&(s.splice(e,1),x())}})}),define("text!template/structureTemplate.html",[],function(){return'\n<div class="row">\n	<div class="col-lg-12">\n		<div class="panel panel-default">\n			<div class="panel-body">\n				<div class="row">\n					<div class="col-md-12">\n						<ul class="nav nav-tabs" id="tabs_a">\n							<li class="active"><a data-toggle="tab" href="#home_a"><%= messages("structureTemplate.title") %></a></li>\n						</ul>\n						<div class="tab-content" id="tabs_content_a">\n							<div id="home_a" class="tab-pane fade in active">\n								<div class="form-row">\n        <label><%= messages("title") %></label>\n        <input id="title" type="text" />\n    </div>\n    <div class="form-row">\n        <label><%= messages("name") %></label>\n        <input id="name" type="text" />\n    </div>\n    <div class="form-row">\n        <label><%= messages("structureTemplate.content") %></label>\n        <input id="autosave" type="checkbox" /> <label for="autosave"><%= messages("autosave") %></label>\n    </div>    \n    <div class="form-row">\n        <textarea id="vcontent" rows="20" cols="80"></textarea>\n    </div>\n    <div class="form-row">\n        <label><%= messages("structureTemplate.head_content") %></label>\n    </div>    \n    <div class="form-row">\n        <textarea id="headContent" rows="8" cols="80"></textarea>\n    </div>\n    <div class="form-sep">\n        <input id="saveContinueButton" class="btn btn-primary" type="button" value="<%= messages("save_continue") %>" />\n        <input id="saveButton" type="button" class="btn btn-default" value="<%= messages("save") %>" />\n        <input id="cancelButton" type="button" class="btn btn-default" value="<%= messages("cancel") %>" />\n    </div>\n								\n							</div>\n						</div>\n					</div>\n				</div>\n			</div>\n		</div>\n	</div>\n</div>\n'}),define("view/StructureTemplateView",["text!template/structureTemplate.html","cm","cm-css","cm-js","cm-xml","cm-html"],function(e){function a(){if(i)return;var e=$("#name").val(),t=$("#title").val();e==""&&$("#name").val(Heiduc.urlFromTitle(t))}function f(){b(!0)}function l(){b(!1)}function c(){t!="null"&&s==""&&(s=setInterval(p,Heiduc.AUTOSAVE_TIMEOUT*1e3))}function h(){s!=""&&(clearInterval(s),s="")}function p(){b(!0)}function d(){$("#autosave:checked").length>0?c():h()}function v(){i=t!="",i?Heiduc.jsonrpc.structureTemplateService.getById(function(e){r=e,i&&(n=r.structureId),m()},t):(r=null,m())}function m(){r!=null?($("#name").val(r.name),$("#title").val(r.title),$("#vcontent").val(r.content),$("#headContent").val(r.headContent)):($("#name").val(""),$("#title").val(""),$("#vcontent").val(""),$("#headContent").val("")),o?o.refresh():o=g("vcontent"),u?u.refresh():u=g("headContent")}function g(e){var t=CodeMirror.fromTextArea(document.getElementById(e),{lineNumbers:!0,theme:"eclipse",mode:"htmlmixed"});return $(t.getScrollerElement()).css("height",.6*$(window).height()+"px").css("border","1px solid silver"),t}function y(){location.href="#structure/"+n}function b(e){o&&o.save(),u&&u.save();var r=Heiduc.javaMap({id:t,name:Heiduc.strip($("#name").val()),title:Heiduc.strip($("#title").val()),type:"VELOCITY",structureId:String(n),content:$("#vcontent").val(),headContent:$("#headContent").val()});Heiduc.jsonrpc.structureTemplateService.save(function(n){n.result=="success"?(Heiduc.info(messages("structureTemplate.success_save")),e?i||(t=n.message,v()):y()):Heiduc.showServiceMessages(n)},r)}console.log("Loading StructureTemplateView.js");var t="",n="",r="",i=t!="",s="",o=null,u=null;return Backbone.View.extend({css:["/static/js/codemirror/codemirror.css","/static/js/codemirror/eclipse.css"],el:$("#content"),render:function(){Heiduc.addCSSFiles(this.css),o=null,u=null,this.el.html(_.template(e,{messages:messages})),v(),$("#autosave").change(d),$("#saveContinueButton").click(f),$("#saveButton").click(l),$("#cancelButton").click(y),$("#title").change(a)},remove:function(){this.el.html(""),Heiduc.removeCSSFiles(this.css)},create:function(e){t="",n=e,r="",i=t!=""},edit:function(e){t=e,n="",r="",i=t!=""}})}),define("text!template/templates.html",[],function(){return'<div class="row">\n	<div class="col-lg-12">\n		<div class="panel panel-default">\n			<div class="panel-body">\n				<div class="row">\n					<div class="col-md-12">\n						<ul class="nav nav-tabs" id="tabs_a">\n							<li class="active"><a data-toggle="tab" href="#tab-1"><%= messages("templates") %></a></li>\n						</ul>\n						<div class="tab-content" id="tabs_content_a">\n							<div id="home-1" class="tab-pane fade in active">\n								<div id="templates"><img src="/static/images/ajax-loader.gif" /></div>\n								\n						        <div class="form-sep">\n						            <input id="addButton" class="btn" type="button" value="<%= messages("add")%>" />\n							        <input id="deleteButton" class="btn" type="button" value="<%= messages("delete")%>" />\n							        <input id="exportButton" class="btn" type="button" value="<%= messages("export")%>" />\n							        <input id="importButton" class="btn" type="button" value="<%= messages("import")%>" />\n								</div>\n								\n							</div>\n							\n						</div>\n					</div>\n				</div>\n			</div>\n		</div>\n	</div>\n</div>\n\n<div class="modal fade" id="import-dialog" tabindex="-1" role="dialog" aria-labelledby="" aria-hidden="true">\n  <div class="modal-dialog">\n    <div class="modal-content">\n      <div class="modal-header">\n        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>\n        <h4 class="modal-title"><%= messages("templates.import_themes")%></h4>\n      </div>\n      <div class="modal-body">\n      	<form id="upload" action="/cms/upload" method="post" enctype="multipart/form-data">\n		    <%= messages("file_upload")%>:\n		    <input type="hidden" name="fileType" value="import" />\n		    <input type="file" name="uploadFile" />\n		    <div class="modal-footer">\n		        <input type="submit" class="btn btn-primary" value="<%= messages("send")%>" />\n		        <input data-dismiss="modal" class="btn btn-default" type="button" value="<%= messages("cancel")%>" />\n		    </div>    \n		</form>\n      </div>	\n    </div>\n  </div>\n</div>\n\n\n<div class="modal fade" id="afterUpload-dialog" tabindex="-1" role="dialog" aria-labelledby="" aria-hidden="true">\n  <div class="modal-dialog">\n    <div class="modal-content">\n      <div class="modal-header">\n        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>\n        <h4 class="modal-title"><%= messages("status_window")%></h4>\n      </div>\n      <div class="modal-body">\n      	<p class="message"></p>\n	    <div class="buttons-dlg">\n	        <input id="okButton" type="button" value="OK" />\n	    </div>\n	    <div class="modal-footer">\n	        <button type="button" class="btn btn-default" data-dismiss="modal"><%= messages("cancel") %></button>\n	        <button type="submit" class="btn btn-primary"><%= messages("save") %></button>\n	    </div>\n      </div>	\n    </div>\n  </div>\n</div>\n\n<div class="modal fade" id="export-dialog" tabindex="-1" role="dialog" aria-labelledby="" aria-hidden="true">\n  <div class="modal-dialog">\n    <div class="modal-content">\n      <div class="modal-header">\n        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>\n        <h4 class="modal-title"><%= messages("export_window")%></h4>\n      </div>\n      <div class="modal-body">\n      	<form id="exportForm">\n		    <p><%= messages("templates.export_info")%></p>\n		    <div id="exportInfo" class="form-row"></div>    \n		    <div id="timer" class="form-row"></div>\n		    <div class="modal-footer">\n		        <input data-dismiss="modal" class="btn btn-default" type="button" value="<%= messages("cancel")%>" />\n		    </div>\n		</form>\n      </div>	\n    </div>\n  </div>\n</div>\n\n<div class="modal fade" id="structures-dialog" tabindex="-1" role="dialog" aria-labelledby="" aria-hidden="true">\n  <div class="modal-dialog">\n    <div class="modal-content">\n      <div class="modal-header">\n        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>\n        <h4 class="modal-title"><%= messages("export_structures")%></h4>\n      </div>\n      <div class="modal-body">\n      	<form id="structuresForm">\n		    <p><%= messages("templates.structures_info")%></p>\n		    <div id="structures"></div>    \n		    <div class="modal-footer">\n		        <input type="submit" class="btn btn-primary" value="<%= messages("export")%>" />\n		        <input data-dismiss="modal" class="btn btn-default" type="button" value="<%= messages("cancel")%>" />\n		    </div>\n		</form>\n      </div>	\n    </div>\n  </div>\n</div>\n\n\n'}),function(e){function t(){if(!e.fn.ajaxSubmit.debug)return;var t="[jquery.form] "+Array.prototype.join.call(arguments,"");window.console&&window.console.log?window.console.log(t):window.opera&&window.opera.postError&&window.opera.postError(t)}e.fn.ajaxSubmit=function(n){function S(t){var r=new FormData;for(var i=0;i<t.length;i++){if(t[i].type=="file")continue;r.append(t[i].name,t[i].value)}o.find("input:file:enabled").each(function(){var t=e(this).attr("name"),n=this.files;if(t)for(var i=0;i<n.length;i++)r.append(t,n[i])});if(n.extraData)for(var s in n.extraData)r.append(s,n.extraData[s]);n.data=null;var u=e.extend(!0,{},e.ajaxSettings,n,{contentType:!1,processData:!1,cache:!1,type:"POST"});u.data=null;var a=u.beforeSend;u.beforeSend=function(e,t){t.data=r,e.upload&&(e.upload.onprogress=function(e){t.progress(e.position,e.total)}),a&&a.call(t,e,n)},e.ajax(u)}function x(i){function S(e){var t=e.contentWindow?e.contentWindow.document:e.contentDocument?e.contentDocument:e.document;return t}function N(){function u(){try{var e=S(p).readyState;t("state = "+e),e.toLowerCase()=="uninitialized"&&setTimeout(u,50)}catch(n){t("Server abort: ",n," (",n.name,")"),O(E),y&&clearTimeout(y),y=undefined}}var n=o.attr("target"),i=o.attr("action");s.setAttribute("target",c),r||s.setAttribute("method","POST"),i!=f.url&&s.setAttribute("action",f.url),!f.skipEncodingOverride&&(!r||/post/i.test(r))&&o.attr({encoding:"multipart/form-data",enctype:"multipart/form-data"}),f.timeout&&(y=setTimeout(function(){g=!0,O(w)},f.timeout));var a=[];try{if(f.extraData)for(var l in f.extraData)a.push(e('<input type="hidden" name="'+l+'">').attr("value",f.extraData[l]).appendTo(s)[0]);f.iframeTarget||(h.appendTo("body"),p.attachEvent?p.attachEvent("onload",O):p.addEventListener("load",O,!1)),setTimeout(u,15),s.submit()}finally{s.setAttribute("action",i),n?s.setAttribute("target",n):o.removeAttr("target"),e(a).remove()}}function O(n){if(d.aborted||A)return;try{k=S(p)}catch(r){t("cannot access response document: ",r),n=E}if(n===w&&d){d.abort("timeout");return}if(n==E&&d){d.abort("server abort");return}if(!k||k.location.href==f.iframeSrc)if(!g)return;p.detachEvent?p.detachEvent("onload",O):p.removeEventListener("load",O,!1);var i="success",s;try{if(g)throw"timeout";var o=f.dataType=="xml"||k.XMLDocument||e.isXMLDoc(k);t("isXml="+o);if(!o&&window.opera&&(k.body==null||k.body.innerHTML=="")&&--L){t("requeing onLoad callback, DOM not available"),setTimeout(O,250);return}var u=k.body?k.body:k.documentElement;d.responseText=u?u.innerHTML:null,d.responseXML=k.XMLDocument?k.XMLDocument:k,o&&(f.dataType="xml"),d.getResponseHeader=function(e){var t={"content-type":f.dataType};return t[e]},u&&(d.status=Number(u.getAttribute("status"))||d.status,d.statusText=u.getAttribute("statusText")||d.statusText);var a=(f.dataType||"").toLowerCase(),c=/(json|script|text)/.test(a);if(c||f.textarea){var v=k.getElementsByTagName("textarea")[0];if(v)d.responseText=v.value,d.status=Number(v.getAttribute("status"))||d.status,d.statusText=v.getAttribute("statusText")||d.statusText;else if(c){var m=k.getElementsByTagName("pre")[0],b=k.getElementsByTagName("body")[0];m?d.responseText=m.textContent?m.textContent:m.innerText:b&&(d.responseText=b.textContent?b.textContent:b.innerText)}}else a=="xml"&&!d.responseXML&&d.responseText!=null&&(d.responseXML=M(d.responseText));try{C=D(d,a,f)}catch(n){i="parsererror",d.error=s=n||i}}catch(n){t("error caught: ",n),i="error",d.error=s=n||i}d.aborted&&(t("upload aborted"),i=null),d.status&&(i=d.status>=200&&d.status<300||d.status===304?"success":"error"),i==="success"?(f.success&&f.success.call(f.context,C,"success",d),l&&e.event.trigger("ajaxSuccess",[d,f])):i&&(s==undefined&&(s=d.statusText),f.error&&f.error.call(f.context,d,i,s),l&&e.event.trigger("ajaxError",[d,f,s])),l&&e.event.trigger("ajaxComplete",[d,f]),l&&!--e.active&&e.event.trigger("ajaxStop"),f.complete&&f.complete.call(f.context,d,i),A=!0,f.timeout&&clearTimeout(y),setTimeout(function(){f.iframeTarget||h.remove(),d.responseXML=null},100)}var s=o[0],u,a,f,l,c,h,p,d,v,m,g,y,b=!!e.fn.prop;if(i)if(b)for(a=0;a<i.length;a++)u=e(s[i[a].name]),u.prop("disabled",!1);else for(a=0;a<i.length;a++)u=e(s[i[a].name]),u.removeAttr("disabled");if(e(":input[name=submit],:input[id=submit]",s).length){alert('Error: Form elements must not have name or id of "submit".');return}f=e.extend(!0,{},e.ajaxSettings,n),f.context=f.context||f,c="jqFormIO"+(new Date).getTime(),f.iframeTarget?(h=e(f.iframeTarget),m=h.attr("name"),m==null?h.attr("name",c):c=m):(h=e('<iframe name="'+c+'" src="'+f.iframeSrc+'" />'),h.css({position:"absolute",top:"-1000px",left:"-1000px"})),p=h[0],d={aborted:0,responseText:null,responseXML:null,status:0,statusText:"n/a",getAllResponseHeaders:function(){},getResponseHeader:function(){},setRequestHeader:function(){},abort:function(n){var r=n==="timeout"?"timeout":"aborted";t("aborting upload... "+r),this.aborted=1,h.attr("src",f.iframeSrc),d.error=r,f.error&&f.error.call(f.context,d,r,n),l&&e.event.trigger("ajaxError",[d,f,r]),f.complete&&f.complete.call(f.context,d,r)}},l=f.global,l&&!(e.active++)&&e.event.trigger("ajaxStart"),l&&e.event.trigger("ajaxSend",[d,f]);if(f.beforeSend&&f.beforeSend.call(f.context,d,f)===!1){f.global&&e.active--;return}if(d.aborted)return;v=s.clk,v&&(m=v.name,m&&!v.disabled&&(f.extraData=f.extraData||{},f.extraData[m]=v.value,v.type=="image"&&(f.extraData[m+".x"]=s.clk_x,f.extraData[m+".y"]=s.clk_y)));var w=1,E=2,x=e("meta[name=csrf-token]").attr("content"),T=e("meta[name=csrf-param]").attr("content");T&&x&&(f.extraData=f.extraData||{},f.extraData[T]=x),f.forceSync?N():setTimeout(N,10);var C,k,L=50,A,M=e.parseXML||function(e,t){return window.ActiveXObject?(t=new ActiveXObject("Microsoft.XMLDOM"),t.async="false",t.loadXML(e)):t=(new DOMParser).parseFromString(e,"text/xml"),t&&t.documentElement&&t.documentElement.nodeName!="parsererror"?t:null},_=e.parseJSON||function(e){return window.eval("("+e+")")},D=function(t,n,r){var i=t.getResponseHeader("content-type")||"",s=n==="xml"||!n&&i.indexOf("xml")>=0,o=s?t.responseXML:t.responseText;return s&&o.documentElement.nodeName==="parsererror"&&e.error&&e.error("parsererror"),r&&r.dataFilter&&(o=r.dataFilter(o,n)),typeof o=="string"&&(n==="json"||!n&&i.indexOf("json")>=0?o=_(o):(n==="script"||!n&&i.indexOf("javascript")>=0)&&e.globalEval(o)),o}}if(!this.length)return t("ajaxSubmit: skipping submit process - no element selected"),this;var r,i,s,o=this;typeof n=="function"&&(n={success:n}),r=this.attr("method"),i=this.attr("action"),s=typeof i=="string"?e.trim(i):"",s=s||window.location.href||"",s&&(s=(s.match(/^([^#]+)/)||[])[1]),n=e.extend(!0,{url:s,success:e.ajaxSettings.success,type:r||"GET",iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank"},n);var u={};this.trigger("form-pre-serialize",[this,n,u]);if(u.veto)return t("ajaxSubmit: submit vetoed via form-pre-serialize trigger"),this;if(n.beforeSerialize&&n.beforeSerialize(this,n)===!1)return t("ajaxSubmit: submit aborted via beforeSerialize callback"),this;var a=n.traditional;a===undefined&&(a=e.ajaxSettings.traditional);var f,l,c,h=this.formToArray(n.semantic);n.data&&(n.extraData=n.data,f=e.param(n.data,a));if(n.beforeSubmit&&n.beforeSubmit(h,this,n)===!1)return t("ajaxSubmit: submit aborted via beforeSubmit callback"),this;this.trigger("form-submit-validate",[h,this,n,u]);if(u.veto)return t("ajaxSubmit: submit vetoed via form-submit-validate trigger"),this;var p=e.param(h,a);f&&(p=p?p+"&"+f:f),n.type.toUpperCase()=="GET"?(n.url+=(n.url.indexOf("?")>=0?"&":"?")+p,n.data=null):n.data=p;var d=[];n.resetForm&&d.push(function(){o.resetForm()}),n.clearForm&&d.push(function(){o.clearForm(n.includeHidden)});if(!n.dataType&&n.target){var v=n.success||function(){};d.push(function(t){var r=n.replaceTarget?"replaceWith":"html";e(n.target)[r](t).each(v,arguments)})}else n.success&&d.push(n.success);n.success=function(e,t,r){var i=n.context||n;for(var s=0,u=d.length;s<u;s++)d[s].apply(i,[e,t,r||o,o])};var m=e("input:file:enabled[value]",this),g=m.length>0,y="multipart/form-data",b=o.attr("enctype")==y||o.attr("encoding")==y,w=!!(g&&m.get(0).files&&window.FormData);t("fileAPI :"+w);var E=(g||b)&&!w;return n.iframe!==!1&&(n.iframe||E)?n.closeKeepAlive?e.get(n.closeKeepAlive,function(){x(h)}):x(h):(g||b)&&w?(n.progress=n.progress||e.noop,S(h)):e.ajax(n),this.trigger("form-submit-notify",[this,n]),this},e.fn.ajaxForm=function(n){if(this.length===0){var r={s:this.selector,c:this.context};return!e.isReady&&r.s?(t("DOM not ready, queuing ajaxForm"),e(function(){e(r.s,r.c).ajaxForm(n)}),this):(t("terminating; zero elements found by selector"+(e.isReady?"":" (DOM not ready)")),this)}return this.ajaxFormUnbind().bind("submit.form-plugin",function(t){t.isDefaultPrevented()||(t.preventDefault(),e(this).ajaxSubmit(n))}).bind("click.form-plugin",function(t){var n=t.target,r=e(n);if(!r.is(":submit,input:image")){var i=r.closest(":submit");if(i.length==0)return;n=i[0]}var s=this;s.clk=n;if(n.type=="image")if(t.offsetX!=undefined)s.clk_x=t.offsetX,s.clk_y=t.offsetY;else if(typeof e.fn.offset=="function"){var o=r.offset();s.clk_x=t.pageX-o.left,s.clk_y=t.pageY-o.top}else s.clk_x=t.pageX-n.offsetLeft,s.clk_y=t.pageY-n.offsetTop;setTimeout(function(){s.clk=s.clk_x=s.clk_y=null},100)})},e.fn.ajaxFormUnbind=function(){return this.unbind("submit.form-plugin click.form-plugin")},e.fn.formToArray=function(t){var n=[];if(this.length===0)return n;var r=this[0],i=t?r.getElementsByTagName("*"):r.elements;if(!i)return n;var s,o,u,a,f,l,c;for(s=0,l=i.length;s<l;s++){f=i[s],u=f.name;if(!u)continue;if(t&&r.clk&&f.type=="image"){!f.disabled&&r.clk==f&&(n.push({name:u,value:e(f).val(),type:f.type}),n.push({name:u+".x",value:r.clk_x},{name:u+".y",value:r.clk_y}));continue}a=e.fieldValue(f,!0);if(a&&a.constructor==Array)for(o=0,c=a.length;o<c;o++)n.push({name:u,value:a[o]});else a!==null&&typeof a!="undefined"&&n.push({name:u,value:a,type:f.type})}if(!t&&r.clk){var h=e(r.clk),p=h[0];u=p.name,u&&!p.disabled&&p.type=="image"&&(n.push({name:u,value:h.val()}),n.push({name:u+".x",value:r.clk_x},{name:u+".y",value:r.clk_y}))}return n},e.fn.formSerialize=function(t){return e.param(this.formToArray(t))},e.fn.fieldSerialize=function(t){var n=[];return this.each(function(){var r=this.name;if(!r)return;var i=e.fieldValue(this,t);if(i&&i.constructor==Array)for(var s=0,o=i.length;s<o;s++)n.push({name:r,value:i[s]});else i!==null&&typeof i!="undefined"&&n.push({name:this.name,value:i})}),e.param(n)},e.fn.fieldValue=function(t){for(var n=[],r=0,i=this.length;r<i;r++){var s=this[r],o=e.fieldValue(s,t);if(o===null||typeof o=="undefined"||o.constructor==Array&&!o.length)continue;o.constructor==Array?e.merge(n,o):n.push(o)}return n},e.fieldValue=function(t,n){var r=t.name,i=t.type,s=t.tagName.toLowerCase();n===undefined&&(n=!0);if(n&&(!r||t.disabled||i=="reset"||i=="button"||(i=="checkbox"||i=="radio")&&!t.checked||(i=="submit"||i=="image")&&t.form&&t.form.clk!=t||s=="select"&&t.selectedIndex==-1))return null;if(s=="select"){var o=t.selectedIndex;if(o<0)return null;var u=[],a=t.options,f=i=="select-one",l=f?o+1:a.length;for(var c=f?o:0;c<l;c++){var h=a[c];if(h.selected){var p=h.value;p||(p=h.attributes&&h.attributes.value&&!h.attributes.value.specified?h.text:h.value);if(f)return p;u.push(p)}}return u}return e(t).val()},e.fn.clearForm=function(t){return this.each(function(){e("input,select,textarea",this).clearFields(t)})},e.fn.clearFields=e.fn.clearInputs=function(e){var t=/^(?:color|date|datetime|email|month|number|password|range|search|tel|text|time|url|week)$/i;return this.each(function(){var n=this.type,r=this.tagName.toLowerCase();t.test(n)||r=="textarea"||e&&/hidden/.test(n)?this.value="":n=="checkbox"||n=="radio"?this.checked=!1:r=="select"&&(this.selectedIndex=-1)})},e.fn.resetForm=function(){return this.each(function(){(typeof this.reset=="function"||typeof this.reset=="object"&&!this.reset.nodeType)&&this.reset()})},e.fn.enable=function(e){return e===undefined&&(e=!0),this.each(function(){this.disabled=!e})},e.fn.selected=function(t){return t===undefined&&(t=!0),this.each(function(){var n=this.type;if(n=="checkbox"||n=="radio")this.checked=t;else if(this.tagName.toLowerCase()=="option"){var r=e(this).parent("select");t&&r[0]&&r[0].type=="select-one"&&r.find("option").selected(!1),this.selected=t}})},e.fn.ajaxSubmit.debug=!1}(jQuery),define("jquery.form",function(){}),define("view/TemplatesView",["text!template/templates.html","jquery.form"],function(e){function s(){l(),c()}function o(e){var t=e.split("::"),n=t[1],r=t[2];n=="success"?r=messages("templates.success_import"):r=messages("error")+". "+r,$("#afterUpload-dialog .message").text(r),$("#afterUpload-dialog").modal({show:!0})}function u(){$("#import-dialog").modal({show:!0})}function a(){}function f(){s()}function l(){Heiduc.jsonrpc.templateService.getTemplates(function(e){var t='<table class="table table-striped"><tr><th></th><th>'+messages("title")+"</th></tr>";$.each(e.list,function(e,n){t+='<tr><td><input type="checkbox" value="'+n.id+'" /></td><td><a href="#template/'+n.id+'">'+n.title+"</a></td></tr>"}),$("#templates").html(t+"</table>"),$("#templates tr:even").addClass("even")})}function c(){Heiduc.jsonrpc.structureService.select(function(e){var t='<table class="table"><tr><th></th><th>'+messages("title")+"</th></tr>";$.each(e.list,function(e,n){t+='<tr><td><input type="checkbox" value="'+n.id+'" /></td><td>'+n.title+"</td></tr>"}),$("#structures").html(t+"</table>"),$("#structures tr:even").addClass("even")})}function h(){location.href="#template"}function p(){var e=new Array;$("#templates input:checked").each(function(){e.push(this.value)});if(e.length==0){Heiduc.info(messages("nothing_selected"));return}confirm(messages("are_you_sure"))&&Heiduc.jsonrpc.templateService.deleteTemplates(function(e){Heiduc.showServiceMessages(e),l()},Heiduc.javaList(e))}function d(){$("#structures input:checked").each(function(){this.checked=!1}),$("#structures-dialog").modal({show:!0})}function v(){r=0,g();var e=[],s=[];$("#templates input:checked").each(function(){e.push(this.value)});if(e.length==0){Heiduc.info(messages("nothing_selected"));return}$("#structures input:checked").each(function(){s.push(this.value)}),$("#export-dialog").modal({show:!0}),Heiduc.jsonrpc.configService.startExportThemeTask(function(e){e.result=="success"?($("#templates input:checked").each(function(){this.checked=!1}),i=e.message,Heiduc.infoMessage("#exportInfo",messages("creating_export_file")),t=setInterval(m,1e4),n=setInterval(g,1e3)):Heiduc.showServiceMessages(e)},Heiduc.javaList(e),Heiduc.javaList(s))}function m(){Heiduc.jsonrpc.configService.isExportTaskFinished(function(e){e&&(clearInterval(t),clearInterval(n),$("#export-dialog").dialog("close"),$("#exportDialogButton").attr("disabled",!1),location.href="/file/tmp/"+i)},"theme")}function g(){$("#timer").html(r++ +" "+messages("sec")+".")}function y(){clearInterval(t),clearInterval(n)}console.log("Loading TemplatesView.js");var t=null,n=null,r=0,i=null;return Backbone.View.extend({el:$("#content"),render:function(){this.el.html(_.template(e,{messages:messages})),$("#upload").ajaxForm(o),s(),$("#addButton").click(h),$("#deleteButton").click(p),$("#exportButton").click(d),$("#exportCancelButton").click(y),$("#importButton").click(u),$("#importCancelButton").click(a),$("#okButton").click(f),$("#structuresForm").submit(function(){return v(),!1}),$("#structuresCancelButton").click(function(){})},remove:function(){this.el.html("")}})}),define("text!template/template.html",[],function(){return'<div class="row">\n	<div class="col-lg-12">\n		<div class="panel panel-default">\n			<div class="panel-body">\n				<div class="row">\n					<div class="col-md-12">\n						<ul class="nav nav-tabs" id="tabs_a">\n							<li class="active"><a data-toggle="tab" href="#"><%= messages("template") %></a></li>\n							<li><a id="resources" href="#"><%= messages("resources") %></a></li>\n						</ul>\n						<div class="tab-content" id="tabs_content_a">\n							<div id="tab-1" class="tab-pane fade in active">\n								<form id="templateForm">\n								<div class="form-group">\n									<div class="row">\n										<div class="col-lg-6">\n											<label><%= messages("title") %></label>\n							        		<input id="title" class="form-control" type="text" />\n										</div>\n										\n									</div>\n								</div>\n								<div class="form-group">\n									<div class="row">\n										<div class="col-lg-6">\n											<label><%= messages("url_name") %></label>\n							        		<input id="url" class="form-control" type="text" />\n										</div>\n										\n									</div>\n								</div>\n							    <div class="form-group">\n									<div class="row">\n										<div class="col-lg-6">\n											<label></label>\n											<label class="checkbox-inline">\n											<input id="autosave" type="checkbox" id="enableCkeditor" value=""> <%= messages("autosave") %>\n											</label>\n										</div>\n									</div>\n								</div>\n							    <div class="form-row">\n							        <textarea id="tcontent" class="form-control" cols="80" rows="20"></textarea>\n							    </div>\n							    \n							    <div class="form-sep">\n							    	<input id="saveContinueButton" class="btn btn-primary" type="button" value="<%= messages("save_continue") %>" />\n							        <input id="saveButton" class="btn btn-default" type="submit" value="<%= messages("save") %>" />\n							        <input id="cancelButton" class="btn btn-default" type="button" value="<%= messages("cancel") %>" />\n							    </div>\n							</form>\n								\n							</div>\n						</div>\n					</div>\n				</div>\n			</div>\n		</div>\n	</div>\n</div>\n\n'}),define("view/TemplateView",["text!template/template.html","jquery.treeview","cm","cm-css","cm-js","cm-xml","cm-html"],function(e){function o(){p()}function u(){m(!0)}function a(){m(!1)}function f(){t!="null"&&i==""&&(i=setInterval(c,Heiduc.AUTOSAVE_TIMEOUT*1e3))}function l(){i!=""&&(clearInterval(i),i="")}function c(){s&&s.save();var e=$("#tcontent").val();Heiduc.jsonrpc.templateService.updateContent(function(e){if(e.result=="success"){var t=new Date;Heiduc.info(e.message+" "+t)}else Heiduc.error(e.message)},t,e)}function h(){$("#autosave:checked").length>0?f():l()}function p(){r=t!="",r||(n=null),Heiduc.jsonrpc.templateService.getTemplate(function(e){n=e,d()},t)}function d(){n!=null?($("#title").val(n.title),$("#url").val(n.url),$("#tcontent").val(n.content)):($("#title").val(""),$("#url").val(""),$("#tcontent").val("")),s=CodeMirror.fromTextArea(document.getElementById("tcontent"),{lineNumbers:!0,theme:"eclipse",mode:"htmlmixed"}),s.focus(),$(s.getScrollerElement()).css("height",.6*$(window).height()+"px").css("border","1px solid silver"),s.refresh()}function v(){location.href="#templates"}function m(e){s&&s.save();var n=Heiduc.javaMap({id:t,title:$("#title").val(),url:$("#url").val(),content:$("#tcontent").val()});Heiduc.jsonrpc.templateService.saveTemplate(function(n){n.result=="success"?(Heiduc.info(messages("template.success_save")),e?r||(t=n.message,p()):location.href="#templates"):Heiduc.showServiceMessages(n)},n)}function g(){$.cookie("folderReturnPath","#template/"+n.id,{path:"/",expires:10}),Heiduc.jsonrpc.folderService.createFolderByPath(function(e){location.href="#folder/"+e.id},"/theme/"+n.url)}console.log("Loading TemplateView.js");var t="",n="",r=t!="",i="",s=null;return Backbone.View.extend({css:["/static/js/codemirror/codemirror.css","/static/js/codemirror/eclipse.css","/static/css/jquery.treeview.css"],el:$("#content"),render:function(){Heiduc.addCSSFiles(this.css),this.el.html(_.template(e,{messages:messages})),o(),$("#autosave").change(h),$("#saveContinueButton").click(u),$("#templateForm").submit(function(){return a(),!1}),$("#cancelButton").click(v),$("#resources").click(g)},remove:function(){this.el.html(""),Heiduc.removeCSSFiles(this.css)},create:function(){t="",n="",r=t!=""},edit:function(e){t=e,n="",r=t!=""}})}),define("text!template/page/page.html",[],function(){return'\n<div class="row">\n	<div class="col-lg-9">\n		<div class="panel panel-default">\n			<div class="panel-heading">\n				<a href="#pages"><%= messages("content") %>:</a>\n				<a id="rootPage">/</a> \n        		<span id="crumbs"></span>\n			</div>\n			<div class="panel-body">\n				<div class="row">\n					<div class="col-md-12">\n						<ul class="nav nav-tabs" id="tabs_a">\n							<li><a href="#page/<%= id %>"><%= messages("page") %></a></li>\n							<li><a href="#page/content/<%= id %>"><%= messages("content") %></a></li>\n							<li><a href="#page/children/<%= id %>"><%= messages("page.children_pages") %></a></li>\n							<li><a href="#page/comments/<%= id %>"><%= messages("comments") %></a></li>\n							<li><a href="#page/security/<%= id %>"><%= messages("security") %></a></li>\n							<li><a href="#page/resources/<%= id %>"><%= messages("resources") %></a></li>\n							<li><a href="#page/attributes/<%= id %>"><%= messages("attributes") %></a></li>\n						</ul>\n						<div class="tab-content" id="tabs_content_a">\n							<div id="tab-1" class="tab-pane fade in active">\n								\n							</div>\n						</div>\n					</div>\n				</div>\n			</div>\n		</div>\n	</div>\n	<div class="col-lg-3">\n		<div class="panel panel-default">\n			<div class="panel-heading">History</div>\n			<div class="panel-body">\n				<div id="versions">\n			    <div class="vertical-buttons-panel"> </div>      \n			    <a id="addVersionLink" class="button ui-state-default ui-corner-all" \n			        href="#">\n			        <span class="ui-icon ui-icon-plus"></span> <%= messages("add_version") %>\n			    </a>\n			    <div id="auditData">\n			        <div><%= messages("page.state") %>: <span id="pageState"> </span></div>\n			        <div><%= messages("page.user_created") %>: <span id="pageCreateUser"> </span></div>\n			        <div><%= messages("creation_date") %>: <span id="pageCreateDate"> </span></div>\n			        <div><%= messages("page.user_modified") %>: <span id="pageModUser"> </span></div>\n			        <div><%= messages("modify_date") %>: <span id="pageModDate"> </span></div>\n			    </div>\n			</div>\n			</div>\n		</div>\n	</div>\n</div>\n\n\n<div class="modal fade" id="version-dialog" tabindex="-1" role="dialog" aria-labelledby="" aria-hidden="true">\n  <div class="modal-dialog">\n    <div class="modal-content">\n      <div class="modal-header">\n        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>\n        <h4 class="modal-title"><%= messages("page.version_title") %></h4>\n      </div>\n      <div class="modal-body">\n      	<form id="versionForm">\n		    <div class="form-row">\n		        <label><%= messages("page.version_title") %></label>\n		        <input id="version-title" type="text" />        \n		    </div>\n		    <div class="modal-footer">\n		        <input id="versionSaveButton" class="btn btn-primary" type="submit" \n		            value="<%= messages("send") %>" />\n		        <input class="btn btn-default" data-dismiss="modal" id="versionCancelButton" type="button" \n		            value="<%= messages("cancel") %>" />\n		    </div>\n		</form>\n      </div>	\n    </div>\n  </div>\n</div>\n'}),define("view/page/context",[],function(){return{pageRequest:null,page:null,pages:{},pageId:"",pageParentUrl:"",editMode:!0,currentLanguage:"",isDefault:!1,loadData:function(){alert("Load data was not initialized!")}}}),define("text!template/page/content.html",[],function(){return'<form id="pageForm">\n	<div class="form-group">\n		<label class="checkbox-inline">\n			<input type="checkbox" id="autosave"> <%= messages("autosave") %>\n		</label>\n	</div>\n	<div class="form-group">\n		<div class="row">\n			<div class="col-lg-6">\n				<label><%= messages("page.friendly_url") %></label>\n				<div id="friendlyUrlDiv" class="input-group">\n					<span class="input-group-addon" id="parentFriendlyUrl"><%= messages("page.friendly_url") %></span>\n					<input class="form-control"  id="friendlyUrl" type="text">\n					<span class="input-group-addon" id="friendlyUrlSpan"></span>\n				</div>\n			</div>\n			<div class="col-lg-6">\n				 <label><%= messages("page.select_language") %></label> \n        		<select id="language" class="form-control"></select>\n			</div>\n		</div>\n	</div>\n	<div class="form-group">\n		<div class="row">\n			<div class="col-lg-12">\n				<label><%= messages("title") %></label>\n				<input type="text" id="titleLocal" class="form-control">\n			</div>\n		</div>\n	</div>\n	<div class="form-group" id="editorButtons">\n		 <a id="ckedit" href="#" ></a>\n	</div>\n	<div class="form-group" id="page-content">\n	</div>\n	<div class="form-sep">\n		<label class="checkbox-inline" id="approveOnContentSaveDiv">\n			<input type="checkbox" id="approveOnContentSave" value=""> <%= messages("page.approve_save") %>\n		</label>\n		<div class="form-sep">\n		<input id="saveContinueContentButton" type="button" class="btn" value="<%= messages("save_continue") %>"/>\n		<input id="saveContentButton" type="submit" class="btn btn-primary" value="<%= messages("save") %>"/>\n		<input id="contentPreviewButton" type="button" class="btn" value="<%= messages("preview") %>"/>\n		<input id="approveButton" type="button" class="btn" value="<%= messages("approve") %>"/>\n		<input id="restoreButton" type="button" class="btn" value="<%= messages("restore") %>"/>\n		<input id="resetCacheButton" type="button" class="btn" value="<%= messages("page.reset_cache") %>"/>\n		<input id="contentCancelButton" type="button" class="btn" value="<%= messages("cancel") %>"/>\n		</div>\n	</div>\n</form>\n\n<div class="modal fade" id="restore-dialog" tabindex="-1" role="dialog" aria-labelledby="" aria-hidden="true">\n  <div class="modal-dialog">\n    <div class="modal-content">\n      <div class="modal-header">\n        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>\n        <h4 class="modal-title"><%= messages("page.restore_content") %></h4>\n      </div>\n      <div class="modal-body">\n      	<form id="restoreForm">\n		    <div class="form-row">\n		        <input name="page" type="radio" value="home" checked="checked"/> \n		            <%= messages("home_page") %> <br/>        \n		        <input name="page" type="radio" value="login" /> \n		            <%= messages("login_page") %> <br/>        \n		        <input name="page" type="radio" value="search" /> \n		            <%= messages("search_page") %>         \n		    </div>\n		    <div class="modal-footer">\n		        <input id="restoreSaveButton" class="btn btn-primary" type="submit" value="OK" />\n		    	<button id="cancelDlgButton" type="button" class="btn btn-default" data-dismiss="modal"><%= messages("cancel") %></button>\n		    </div>\n		</form>\n      </div>	\n    </div>\n  </div>\n</div>\n\n<div class="modal fade" id="file-upload" tabindex="-1" role="dialog" aria-labelledby="" aria-hidden="true">\n  <div class="modal-dialog">\n    <div class="modal-content">\n      <div class="modal-header">\n        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>\n        <h4 class="modal-title"><%= messages("folder.upload_file") %></h4>\n      </div>\n      <div class="modal-body">\n      	<form id="upload" action="/cms/upload" method="post" enctype="multipart/form-data">\n	        <%= messages("file_upload") %>:\n	        <input type="hidden" name="fileType" value="resource" />\n	        <input type="hidden" name="folderId" />\n	        <input type="file" name="uploadFile" multiple="true" />\n	        <div class="buttons-dlg">\n	            <input type="submit" value="<%= messages("send") %>" />\n	            <input id="fileUploadCancelButton" type="button" \n	                value="<%= messages("cancel") %>" />\n	        </div>\n	        <div class="modal-footer">\n	        	<input type="submit" class="btn btn-primary" value="<%= messages("send") %>" />\n	            <input id="fileUploadCancelButton" class="btn btn-primary" type="button" value="<%= messages("cancel") %>" />\n		    </div>\n    	</form>\n      </div>	\n    </div>\n  </div>\n</div>\n\n\n\n	'}),define("view/page/version",["view/page/context"],function(e){function n(){$("#addVersionLink").click(o),$("#versionCancelButton").click(a),$("#versionForm").submit(function(){return u(),!1})}function r(){Heiduc.jsonrpc.pageService.getPageRequest(function(t){e.pageRequest=t,e.page=e.pageRequest.page,i()},e.pageId,e.pageParentUrl)}function i(){var n=e.pageRequest.versions;t=[],e.pages={},$.each(n.list,function(n,r){e.pages[String(r.version)]=r,t.push(String(r.version))}),t.sort();var r="";$.each(t,function(n,i){var s=e.pages[i];r+="<div>",e.pageId!=s.id?r+='<a class="select btn btn-default btn-sm"               title="'+s.versionTitle+'"               data-version="'+i+'">Version '+i+"</a>":r+='<a class="select btn btn-default btn-sm" title="'+s.versionTitle+'" data-version="'+i+'"                ><span class="ui-icon ui-icon-triangle-1-e"></span>                Version '+i+"</a>",t.length>1&&(r+='<img class="delete button" src="/static/images/delete-16.png" data-version="'+i+'"/></div>')}),$("#versions .vertical-buttons-panel").html(r),$("#versions a.select").click(function(){f($(this).attr("data-version"))}),$("#versions img.delete").click(function(){s($(this).attr("data-version"))})}function s(n){if(confirm(messages("are_you_sure"))){var i=e.pages[n];Heiduc.jsonrpc.pageService.deletePageVersion(function(i){if(n==String(e.page.version))if(t.length==1)location.href="#pages";else{var s=t[0];t.indexOf(n)==0?s=t[1]:s=t[t.indexOf(n)-1],e.pageId=e.pages[s].id,e.loadData()}else r()},i.id)}}function o(){$("#version-dialog").modal({show:!0}),$("#version-title").val("")}function u(){Heiduc.jsonrpc.pageService.addVersion(function(t){t.result=="success"?(e.pageId=t.message,e.loadData(),Heiduc.info(messages("page.version_success_add"))):Heiduc.showServiceMessages(t),$("#version-dialog").modal({show:!1})},e.page.friendlyURL,$("#version-title").val())}function a(){}function f(t){var n=e.pages[t];e.pageId=n.id,e.loadData()}function l(){$("#pageState").html(e.page.stateString=="EDIT"?messages("edit"):messages("approved")),$("#pageCreateDate").html(e.page.createDateTimeString),$("#pageModDate").html(e.page.modDateTimeString),$("#pageCreateUser").html(e.page.createUserEmail),$("#pageModUser").html(e.page.modUserEmail)}var t=[];return{initVersionDialog:n,loadVersions:i,showAuditInfo:l}}),define("view/page/breadcrumbs",["view/page/context"],function(e){function t(){var t=e.pageParentUrl;t=e.pageRequest.page.friendlyURL;var r="",i=t.substr(1).split("/");if(i.length>0){var s="";$.each(i,function(t,n){s+="/"+n,i.length-1==t&&e.editMode?r+=" "+i[i.length-1]:r+=' <a data-url="'+s+'">'+n+"</a> /"})}$("#crumbs").html(r),$("#crumbs a").click(function(){var e=$(this).attr("data-url");e&&n(e)}),$("#rootPage").click(function(){n("/")})}function n(e){Heiduc.jsonrpc.pageService.getPageByUrl(function(e){location.href="#page/content/"+e.id},e)}return{breadcrumbsShow:t}}),define("view/page/ContentView",["text!template/page/content.html","view/page/context","view/page/version","view/page/breadcrumbs","jquery.form","cm","cm-css","cm-js","cm-xml","cm-html"],function(e,t,n,r){function p(){t.loadData=d,t.editMode=t.pageId!="",Heiduc.initJSONRpc(d),$("a.button").hover(function(){$(this).addClass("ui-state-hover")},function(){$(this).removeClass("ui-state-hover")}),n.initVersionDialog(),$("#autosave").change(C),$("#language").change(A),$("#saveContinueContentButton").click(function(){b(!0)}),$("#pageForm").submit(function(){return b(!1),!1}),$("#contentPreviewButton").click(k),$("#approveButton").click(M),$("#restoreButton").click(q),$("#contentCancelButton").click(L),$("ul.nav-tabs li:nth-child(2)").addClass("active"),$("#restoreForm").submit(function(){return R(),!1}),$("#resetCacheButton").click(W),$("#upload").ajaxForm({beforeSubmit:Q,success:K}),$("#fileUploadCancelButton").click(J)}function d(){Heiduc.jsonrpc.pageService.getPageRequest(function(e){t.pageRequest=e,t.page=t.pageRequest.page,h=!t.pageRequest.config.enableCkeditor||t.pageRequest.page.wikiProcessing||!t.page.enableCkeditor;var n=t.pageRequest.page.wikiProcessing?' <a href="http://en.wikipedia.org/wiki/Help:Wiki_markup" target="blank">Wiki syntax</a>':"";h?$("#ckedit").text(messages("page.edit_ckeditor")).click(z):$("#ckedit").text(messages("page.edit_textarea")).click(U),$("#editorButtons").append(n),g(),m(),r.breadcrumbsShow()},t.pageId,t.pageParentUrl)}function v(){Heiduc.jsonrpc.pageService.getPageRequest(function(e){t.pageRequest=e,t.page=t.pageRequest.page,t.editMode=t.pageId!=null,m()},t.pageId,t.pageParentUrl)}function m(){t.pageId=t.page.id==null?"":String(t.page.id),t.pageParentUrl=t.page.parentUrl,n.loadVersions(),j(),y(),D(),O()}function g(){var e=t.pageRequest.languages;o={};var n="";$.each(e.list,function(e,t){o[t.code]=t,n+='<option value="'+t.code+'" '+">"+t.title+"</option>"}),$("#language").html(n)}function y(){var e=t.pageParentUrl=="/"?"":"/";t.page.parentUrl==""||t.page.parentUrl==null?($("#friendlyUrl").hide(),$("#friendlyUrl").val(""),$("#parentFriendlyUrl").html("/")):($("#friendlyUrl").show(),$("#friendlyUrl").val(t.page.pageFriendlyURL),$("#parentFriendlyUrl").html(t.page.parentFriendlyURL+e)),t.pageRequest.children.list.length>0&&($("#parentFriendlyUrl").hide(),$("#friendlyUrl").hide(),$("#friendlyUrlSpan").html(t.page.friendlyURL)),$("#pageState").html(t.page.stateString=="EDIT"?messages("edit"):messages("approved")),$("#pageCreateDate").html(t.page.createDateTimeString),$("#pageModDate").html(t.page.modDateTimeString),$("#pageCreateUser").html(t.page.createUserEmail),$("#pageModUser").html(t.page.modUserEmail),t.page.id!=null?($(".pageTab").show(),$(".childrenTab").show(),$(".commentsTab").show(),$(".securityTab").show(),$("#pagePreview").show(),$("#versions").show()):($(".pageTab").hide(),$(".childrenTab").hide(),$(".commentsTab").hide(),$(".securityTab").hide(),$("#pagePreview").hide(),$("#versions").hide()),P(),X()}function b(e){var n=Heiduc.javaMap({id:t.pageId,friendlyUrl:$("#parentFriendlyUrl").text()+$("#friendlyUrl").val(),titles:I(),content:x(),approve:String($("#approveOnPageSave:checked, #approveOnContentSave:checked").size()>0),languageCode:t.currentLanguage});Heiduc.jsonrpc.pageService.savePage(function(t){t.result=="success"?(Heiduc.info(messages("page.success_save")),e?v():location.href="#pages"):Heiduc.showServiceMessages(t)},n)}function w(){t.editMode&&f==""&&(f=setInterval(E,Heiduc.AUTOSAVE_TIMEOUT*1e3))}function E(){b(!0)}function S(){f!=""&&(clearInterval(f),f="")}function x(){if(!t.editMode)return"";if(t.page.simple)return h?(u.save(),$("#pcontent").val()):u.getData();if(t.page.structured){var e='<?xml version="1.0" encoding="utf-8"?>\n<content>\n';return $.each(t.pageRequest.structureFields.list,function(t,n){if(n.type=="TEXT"||n.type=="DATE"||n.type=="RESOURCE")e+="<"+n.name+"><![CDATA["+$("#field"+n.name).val()+"]]></"+n.name+">\n";if(n.type=="TEXTAREA"){var r="";h?(l[n.name].save(),r=$("#field"+n.name).val()):r=l[n.name].getData(),e+="<"+n.name+"><![CDATA["+r.replace("]]>","]]]")+"]]></"+n.name+">\n"}}),e+"</content>"}}function T(e){e=typeof e=="undefined"?"":e,t.page.simple&&(h?u.setValue(e):u.setData(e));if(t.page.structured){var n=$.xmlDOM(e,function(t){e&&Heiduc.error(messages("page.parsing_error")+" "+t)});$.each(t.pageRequest.structureFields.list,function(e,t){(t.type=="TEXT"||t.type=="DATE"||t.type=="RESOURCE")&&$(n).find(t.name).each(function(){$("#field"+t.name).val($(this).text())}),t.type=="TEXTAREA"&&$(n).find(t.name).each(function(){h?l[t.name].setValue($(this).text()):l[t.name].setData($(this).text())})})}}function N(){return i[t.currentLanguage]!=x()}function C(){$("#autosave:checked").length>0?w():S()}function k(){var e=t.page.friendlyURL+"?language="+t.currentLanguage+"&version="+t.page.version;window.open(e,"preview")}function L(){location.href="#pages"}function A(){!N()||confirm(messages("are_you_sure_changes_lost"))?(t.currentLanguage=$("#language").val(),i[t.currentLanguage]==undefined&&(i[t.currentLanguage]=""),T(i[t.currentLanguage]),$("#titleLocal").val(F())):$("#language").val(t.currentLanguage)}function O(){if(t.pageRequest.contents!=null){var e=t.pageRequest.contents;i={},$.each(e.list,function(e,t){i[t.languageCode]=t.content}),t.currentLanguage||(o[Heiduc.ENGLISH_CODE]!=undefined?t.currentLanguage=Heiduc.ENGLISH_CODE:t.currentLanguage=e.list[0].languageCode),$("#language").val(t.currentLanguage),T(i[t.currentLanguage]),$("#titleLocal").val(Heiduc.unescapeHtml(F()))}else T("")}function M(){Heiduc.jsonrpc.pageService.approve(function(e){Heiduc.showServiceMessages(e),d()},t.pageId)}function D(){var e=t.pageRequest.pagePermission;e.publishGranted?($("#approveButton").show(),$("#approveOnPageSaveDiv").show(),$("#approveOnContentSaveDiv").show()):($("#approveButton").hide(),$("#approveOnPageSaveDiv").hide(),$("#approveOnContentSaveDiv").hide()),e.changeGranted?($("#pageSaveButton").show(),$("#saveContinueContentButton").show(),$("#saveContentButton").show()):($("#pageSaveButton").hide(),$("#saveContinueContentButton").hide(),$("#saveContentButton").hide()),e.admin&&t.editMode?$(".securityTab").show():$(".securityTab").hide(),X()}function P(){$.each(CKEDITOR.instances,function(e,t){CKEDITOR.remove(t)}),t.page.simple&&($("#page-content").html('<textarea id="pcontent" rows="20" cols="80"></textarea>'),h?(u=CodeMirror.fromTextArea(document.getElementById("pcontent"),{lineNumbers:!0,lineWrapping:!0,theme:"eclipse",mode:"htmlmixed"}),u.focus(),$(u.getScrollerElement()).css("height",.6*$(window).height()+"px").css("border","1px solid silver")):u=CKEDITOR.replace("pcontent",{height:350,width:"auto",filebrowserUploadUrl:"/cms/upload",filebrowserBrowseUrl:"fileBrowser.html",toolbar:"Heiduc"}));if(t.page.structured){var e="";$.each(t.pageRequest.structureFields.list,function(t,n){e+='<div><div class="label">'+n.title+":</div>",n.type=="TEXT"&&(e+='<input id="field'+n.name+'" size="80"/>'),n.type=="TEXTAREA"&&(e+='<textarea cols="80" rows="20" id="field'+n.name+'"></textarea>'),n.type=="DATE"&&(e+='<input id="field'+n.name+'" class="datepicker" size="8" />'),n.type=="RESOURCE"&&(e+='<input id="field'+n.name+'" size="80"/> '+'<a class="browse" data-name="field'+n.name+'">'+messages("browse")+"</a>"+' <a class="upload" data-name="field'+n.name+'">'+messages("upload")+"</a>"),e+="</div>"}),$("#page-content").html(e),$("#page-content .browse").click(function(){H($(this).attr("data-name")),c=$(this).attr("data-name"),window.open("fileBrowser.html?mode=page")}),$("#page-content .upload").click(function(){V($(this).attr("data-name"))}),$(".datepicker").datepicker({dateFormat:"dd.mm.yy"}),l={},$.each(t.pageRequest.structureFields.list,function(e,t){if(t.type=="TEXTAREA"&&!l[t.name])if(h){var n=document.getElementById("field"+t.name);l[t.name]=CodeMirror.fromTextArea(n,{lineNumbers:!0,lineWrapping:!0,theme:"eclipse",mode:"htmlmixed"}),$(l[t.name].getScrollerElement()).css("border","1px solid silver")}else l[t.name]=CKEDITOR.replace("field"+t.name,{height:150,width:"auto",filebrowserUploadUrl:"/cms/upload",filebrowserBrowseUrl:"fileBrowser.html",toolbar:"Heiduc"})})}}function H(e){c=e,$.cookie("fileBrowserPath","/page"+t.page.friendlyURL,{path:"/",expires:10}),window.open("fileBrowser.html?mode=page")}function B(e){$("#"+c).val(e)}function j(){s=t.page.titles.map}function F(){return s[t.currentLanguage]==undefined?"":s[t.currentLanguage]}function I(){if(!t.editMode)return"{"+Heiduc.ENGLISH_CODE+':"'+Heiduc.escapeHtml($("#title").val())+'"}';s[t.currentLanguage]=$("#titleLocal").val();var e="{",n=0;return $.each(s,function(t,r){var i=n++==0?"":",";e+=i+t+':"'+Heiduc.escapeHtml(r)+'"'}),e+"}"}function q(){$("#restore-dialog").modal({show:!0})}function R(){var e=$("input[name=page]:checked").val();Heiduc.jsonrpc.pageService.restore(function(e){Heiduc.showServiceMessages(e),e.result=="success"&&($("#restore-dialog").modal("hide"),d())},t.pageId,e,t.currentLanguage)}function U(){h=!0,$("#ckedit").text(messages("page.edit_ckeditor")).click(z),P(),T(i[t.currentLanguage])}function z(){h=!1,$("#ckedit").text(messages("page.edit_textarea")).click(U),P(),T(i[t.currentLanguage])}function W(){t.editMode&&Heiduc.jsonrpc.pageService.resetCache(function(e){Heiduc.showServiceMessages(e)},t.page.friendlyURL)}function X(){t.page.friendlyURL.endsWith("/_default")&&(t.isDefault=!0,$(".securityTab, .commentsTab, .childrenTab, #approveOnContentSaveDiv, #contentPreviewButton, #versions, #resetCacheButton, #restoreButton, #approveButton, #friendlyUrlDiv").hide())}function V(e){c=e,$("#file-upload input[name=folderId]").val(t.pageRequest.folderId),$("#file-upload").modal({show:!0})}function J(){}function K(e){var t=e.split("::"),n=t[1],r=t[2];n=="success"?Heiduc.info(messages("folder.file_success_upload")):Heiduc.error(messages("folder.error_during_upload")+" "+r),$("#file-upload").modal({show:!1})}function Q(e,n,r){var i=Heiduc.getFileName($("#file-upload input[name=uploadFile]").val()),s="/file/page"+t.page.friendlyURL+"/"+i;$("#"+c).val(s)}console.log("Loading ContentView.js");var i=null,s=null,o=null,u=null,a="",f="",l=null,c="",h=!1;return Backbone.View.extend({el:$("#tab-1"),tmpl:_.template(e),render:function(){this.el=$("#tab-1"),this.el.html(this.tmpl({messages:messages})),p()},remove:function(){this.el.html("")},setResource:function(e){B(e)}})}),define("text!template/page/index.html",[],function(){return'<form id="pageForm">\n	<div id="titleDiv" class="form-group">\n		<div class="row">\n			<div class="col-lg-12">\n				<label><%= messages("title") %></label>\n				<input type="text" id="title" class="form-control">\n			</div>\n		</div>\n	</div>\n	<div class="form-group">\n		<div class="row">\n			<div class="col-lg-6">\n				<label><%= messages("page.friendly_url") %></label>\n				<div class="input-group">\n					<span class="input-group-addon" id="parentFriendlyUrl"><%= messages("page.friendly_url") %></span>\n					<input class="form-control"  id="friendlyUrl" type="text">\n					<span class="input-group-addon" id="friendlyUrlSpan"></span>\n				</div>\n			</div>\n			<div class="col-lg-6">\n				<label><%= messages("template") %></label>\n				<select id="templates" class="form-control"></select>\n			</div>\n		</div>\n	</div>\n	<div class="form-group">\n		<div class="row">\n			<div class="col-lg-12">\n				<label class="checkbox-inline">\n					<input id="restful" type="checkbox" /><%= messages("restful") %>\n				</label>\n			</div>\n		</div>\n	</div>\n	<div class="form-group">\n		<div class="row">\n			<div class="col-lg-12">\n				<label><%= messages("page.publication_date") %></label>\n				<div class="form-inline">\n					<input class="form-control datepicker" id="publishDate" type="text">\n					<input class="form-control"  id="publishTime" type="text">\n					-\n					<input class="form-control datepicker" id="endPublishDate" type="text">\n					<input class="form-control" id="endPublishTime" type="text">\n				</div>\n			</div>\n		</div>\n	</div>\n	<div class="form-group">\n		<div class="row">\n			<div class="col-lg-12">\n				<label></label>\n				<label class="checkbox-inline">\n					<input type="checkbox" id="commentsEnabled"> <%= messages("enable_comments") %>\n				</label>\n				<label class="checkbox-inline">\n					<input type="checkbox" id="searchable" value=""> <%= messages("page.include_search") %>\n				</label>\n				<label class="checkbox-inline">\n					<input type="checkbox" id="velocityProcessing" value=""> <%= messages("page.velocity_processing") %>\n				</label>\n				<label class="checkbox-inline">\n					<input type="checkbox" id="wikiProcessing" value=""> <%= messages("page.wiki_processing") %>\n				</label>\n				<label class="checkbox-inline">\n					<input type="checkbox" id="phpProcessing" value=""> <%= messages("page.php_processing") %>\n				</label>\n				<label class="checkbox-inline">\n					<input type="checkbox" id="enableCkeditor" value=""> <%= messages("config.enable_ckeditor") %>\n				</label>\n				<label class="checkbox-inline">\n					<input type="checkbox" id="skipPostProcessing" value=""> <%= messages("page.skip_postprocessing") %>\n				</label>\n				\n			</div>\n		</div>\n	</div>\n	<div class="form-group">\n		<div class="row">\n			<div class="col-lg-12">\n				<label class="checkbox-inline">\n					<input id="cached" type="checkbox" /><%= messages("page.cache_enabled") %>\n				</label>\n			</div>\n		</div>\n	</div>\n	<div id="dependenciesDiv" class="form-group">\n		<div class="row">\n			<div class="col-lg-12">\n				<label><%= messages("cache_dependencies") %></label>\n				<input class="form-control" id="dependencies" type="text">\n			</div>\n		</div>\n	</div>\n	<div class="form-group">\n		<div class="row">\n			<div class="col-lg-6">\n				<label><%= messages("tags") %></label>\n				<div class="input-group">\n					<a id="addTag" href="#"><%= messages("add_tag") %></a>\n			    	<span id="tags"></span>\n				</div>\n			</div>\n			\n			<div class="col-lg-6">\n				<label><%= messages("page.type") %></label>\n				<select id="pageType" class="form-control">\n			        <option value="SIMPLE"><%= messages("simple") %></option>\n			        <option value="STRUCTURED"><%= messages("structured") %></option>\n			    </select>\n			</div>\n		</div>\n	</div>\n	<div id="structuredControls" class="form-group">\n		<div class="row">\n			<div class="col-lg-6">\n				<label><%= messages("structure") %></label>\n				<select id="structure" class="form-control"></select>\n			</div>\n			\n			<div class="col-lg-6">\n				<label><%= messages("page.structure_template") %></label>\n    			<select id="structureTemplate" class="form-control"></select>\n			</div>\n		</div>\n	</div>\n	<div class="form-group">\n		 <a id="metadata" href="#" ><%= messages("page.metadata") %></a>\n		 <div id="meta" class="row" style="display:none;">\n			<div class="col-lg-12">\n				<label><%= messages("page.meta_keywords") %></label>\n    			<textarea id="keywords" class="form-control"></textarea>\n			</div>\n			\n			<div class="col-lg-12">\n			    <label><%= messages("page.meta_description") %></label>\n			    <textarea id="description" class="form-control"></textarea>\n			</div>\n			<div class="col-lg-12">\n			    <label><%= messages("page.head_content") %></label>\n			    <textarea id="headHtml" class="form-control"></textarea>\n			</div>\n			<div class="col-lg-12">\n			    <label><%= messages("content_type") %></label>\n			    <input id="contentType" type="text"  class="form-control" />\n			</div>\n		</div>\n		 \n	</div>\n	<div class="form-sep">\n		<label class="checkbox-inline">\n			<input type="checkbox" id="approveOnPageSave" value=""> <%= messages("page.approve_save") %>\n		</label>\n		<div class="form-sep">\n		<input id="pageSaveButton" type="submit" class="btn btn-primary" value="<%= messages("save") %>"/>\n		<button id="pagePreview" class="btn"><%= messages("preview") %></button>\n		<button id="pageCancelButton" class="btn"><%= messages("cancel") %></button>\n		</div>\n	</div>\n</form>									\n\n						\n<div class="modal fade" id="tag-dialog" tabindex="-1" role="dialog" aria-labelledby="" aria-hidden="true">\n  <div class="modal-dialog">\n    <div class="modal-content">\n      <div class="modal-header">\n        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>\n        <h4 class="modal-title"><%= messages("select_tag") %></h4>\n      </div>\n      <div class="modal-body">\n      	<ul id="tagTree"></ul>\n      </div>	\n    </div>\n  </div>\n</div>\n\n\n'}),define("view/page/IndexView",["text!template/page/index.html","view/page/context","view/page/version","view/page/breadcrumbs","jquery.treeview"],function(e,t,n,r){function s(){t.loadData=o,t.editMode=t.pageId!="",$(".datepicker").datepicker({todayHighlight:!0}),Heiduc.initJSONRpc(o),$("a.button").hover(function(){$(this).addClass("ui-state-hover")},function(){$(this).removeClass("ui-state-hover")}),n.initVersionDialog(),$("#title").change(v),$("#pageType").change(m),$("#structure").change(S),$("#pageForm").submit(function(){return d(),!1}),$("#pagePreview").click(g),$("#pageCancelButton").click(y),$("#approveButton").click(b),$("ul.nav-tabs li:nth-child(1)").addClass("active"),$("#metadata").click(function(){$("#meta").toggle()}),$("#addTag").click(C),$("#cached").click(function(){$("#dependenciesDiv").toggle()})}function o(){Heiduc.jsonrpc.pageService.getPageRequest(function(e){t.pageRequest=e,t.page=t.pageRequest.page,l(),E(),f(),r.breadcrumbsShow()},t.pageId,t.pageParentUrl)}function u(){t.page!=null&&t.page.friendlyURL.endsWith("/_default")&&(t.isDefault=!0,$(".securityTab, .commentsTab, .childrenTab, #approveOnPageSaveDiv, #pagePreview, #versions, #tagsDiv").hide(),$("#title, #friendlyUrl").attr("disabled",!0))}function a(){Heiduc.jsonrpc.pageService.getPageRequest(function(e){t.pageRequest=e,t.page=t.pageRequest.page,t.editMode=t.pageId!=null,f()},t.pageId,t.pageParentUrl)}function f(){t.editMode?(t.pageId=String(t.page.id),t.pageParentUrl=t.page.parentUrl,n.loadVersions(),T(),N(),M()):t.pages[1]=t.page,c(),w()}function l(){var e=t.pageRequest.templates,n="";$.each(e.list,function(e,t){n+='<option value="'+t.id+'">'+t.title+"</option>"}),$("#templates").html(n),t.page.id!=null?$("#templates").val(t.page.template):$("#templates").val($.cookie("page_template"))}function c(){var e=t.pageParentUrl=="/"?"":"/";$("#title").val(t.page.title),$("#titleDiv").hide(),t.page.parentUrl==""||t.page.parentUrl==null?($("#friendlyUrl").hide(),$("#friendlyUrl").val(""),$("#parentFriendlyUrl").html("/")):($("#friendlyUrl").show(),$("#friendlyUrl").val(t.page.pageFriendlyURL),$("#parentFriendlyUrl").html(t.page.parentFriendlyURL+e)),t.pageRequest.children.list.length>0&&($("#parentFriendlyUrl").hide(),$("#friendlyUrl").hide(),$("#friendlyUrlSpan").html(t.page.friendlyURL)),$("#pageType").val(t.page.pageTypeString),$("#publishDate").val(t.page.publishDateString),$("#publishTime").val(t.page.publishTimeString),$("#endPublishDate").val(t.page.endPublishDateString),$("#endPublishTime").val(t.page.endPublishTimeString),$("#commentsEnabled").each(function(){this.checked=t.page.commentsEnabled}),$("#searchable").each(function(){this.checked=t.page.searchable}),$("#velocityProcessing").each(function(){this.checked=t.page.velocityProcessing}),$("#wikiProcessing").each(function(){this.checked=t.page.wikiProcessing}),$("#phpProcessing").each(function(){this.checked=t.page.PHPProcessing}),$("#enableCkeditor").each(function(){this.checked=t.page.enableCkeditor}),$("#skipPostProcessing").each(function(){this.checked=t.page.skipPostProcessing}),$("#cached").each(function(){this.checked=t.page.cached}),$("#restful").each(function(){this.checked=t.page.restful}),$("#templates").val(t.page.template),$("#pageState").html(t.page.stateString=="EDIT"?messages("edit"):messages("approved")),$("#pageCreateDate").html(t.page.createDateTimeString),$("#pageModDate").html(t.page.modDateTimeString),$("#pageCreateUser").html(t.page.createUserEmail),$("#pageModUser").html(t.page.modUserEmail),$("#keywords").val(t.page.keywords),$("#description").val(t.page.description),$("#headHtml").val(t.page.headHtml),$("#dependencies").val(t.pageRequest.dependencies),$("#contentType").val(t.page.contentType),t.page.cached?$("#dependenciesDiv").show():$("#dependenciesDiv").hide(),t.page.id!=null?($(".contentTab").show(),$(".childrenTab").show(),$(".commentsTab").show(),$(".securityTab").show(),$("#pagePreview").show(),$("#versions").show(),$("#tagsDiv").show()):($(".contentTab").hide(),$(".childrenTab").hide(),$(".commentsTab").hide(),$(".securityTab").hide(),$("#pagePreview").hide(),$("#versions").hide(),$("#tagsDiv").hide()),u(),m()}function h(){return Heiduc.strip($("#publishDate").val())+" "+Heiduc.strip($("#publishTime").val())+":00"}function p(){return $("#endPublishDate").val()?Heiduc.strip($("#endPublishDate").val())+" "+Heiduc.strip($("#endPublishTime").val())+":00":""}function d(){var e=Heiduc.javaMap({id:t.pageId,titles:x(),friendlyUrl:$("#parentFriendlyUrl").text()+$("#friendlyUrl").val(),publishDate:h(),endPublishDate:p(),commentsEnabled:String($("#commentsEnabled:checked").size()>0),searchable:String($("#searchable:checked").size()>0),velocityProcessing:String($("#velocityProcessing:checked").size()>0),wikiProcessing:String($("#wikiProcessing:checked").size()>0),phpProcessing:String($("#phpProcessing:checked").size()>0),enableCkeditor:String($("#enableCkeditor:checked").size()>0),skipPostProcessing:String($("#skipPostProcessing:checked").size()>0),cached:String($("#cached:checked").size()>0),restful:String($("#restful:checked").size()>0),template:$("#templates option:selected").val(),approve:String($("#approveOnPageSave:checked, #approveOnContentSave:checked").size()>0),pageType:$("#pageType").val(),structureId:$("#structure").val(),structureTemplateId:$("#structureTemplate").val(),keywords:$("#keywords").val(),description:$("#description").val(),dependencies:$("#dependencies").val(),contentType:$("#contentType").val(),headHtml:$("#headHtml").val()});$.cookie("page_template",e.map.template,{path:"/",expires:10}),Heiduc.jsonrpc.pageService.savePage(function(e){e.result=="success"?(t.editMode&&(location.href="#pages"),t.pageId=e.message,Heiduc.info(messages("page.success_save")),location.href="#page/content/"+t.pageId):Heiduc.showServiceMessages(e)},e)}function v(){if(t.editMode)return;var e=$("#friendlyUrl").val(),n=$("#title").val();e==""&&$("#friendlyUrl").val(Heiduc.urlFromTitle(n))}function m(){$("#pageType").val()=="SIMPLE"&&$("#structuredControls").hide(),$("#pageType").val()=="STRUCTURED"&&($("#structuredControls").show(),t.page!=null&&$("#structure").val(t.page.structureId),S())}function g(){var e=t.page.friendlyURL+"?language="+t.currentLanguage+"&version="+t.page.version;window.open(e,"preview")}function y(){location.href="#pages"}function b(){Heiduc.jsonrpc.pageService.approve(function(e){Heiduc.showServiceMessages(e),a()},t.pageId)}function w(){var e=t.pageRequest.pagePermission;e.publishGranted?($("#approveButton").show(),$("#approveOnPageSaveDiv").show()):($("#approveButton").hide(),$("#approveOnPageSaveDiv").hide()),e.changeGranted?$("#pageSaveButton").show():$("#pageSaveButton").hide(),e.admin&&t.editMode?$(".securityTab").show():$(".securityTab").hide(),u()}function E(){var e="";$.each(t.pageRequest.structures.list,function(t,n){var r=t==0?'selected="selected"':"";e+="<option "+r+' value="'+n.id+'">'+n.title+"</option>"}),$("#structure").html(e)}function S(){var e=$("#structure").val(),n="";Heiduc.jsonrpc.structureTemplateService.selectByStructure(function(e){var n="";$.each(e.list,function(e,t){var r=e==0?'selected="selected"':"";n+="<option "+r+' value="'+t.id+'">'+t.title+"</option>"}),$("#structureTemplate").html(n),t.page!=null&&$("#structureTemplate").val(t.page.structureTemplateId)},e)}function x(){if(!t.editMode)return'{en:"'+$("#title").val()+'"}'}function T(){var e=t.pageRequest.languages;languages={};var n="";$.each(e.list,function(e,t){languages[t.code]=t})}function N(){if(t.editMode){var e=t.pageRequest.contents,n={};t.pageRequest.pagePermission.allLanguages?n=languages:$.each(t.pageRequest.pagePermission.languagesList.list,function(e,t){n[t]=languages[t]}),n[Heiduc.ENGLISH_CODE]!=undefined?t.currentLanguage=Heiduc.ENGLISH_CODE:t.currentLanguage=e.list[0].languageCode}}function C(){Heiduc.jsonrpc.tagService.getTree(function(e){$("#tagTree").html(k(e.list)),$("#tagTree li > a").click(function(){var e=$(this).attr("data-id");e&&A(e)}),$("#tagTree").treeview({animated:"fast",collapsed:!0,unique:!0,persist:"cookie",cookieId:"tagTree"}),$("#tag-dialog").modal({show:!0})})}function k(e){var t="";return $.each(e,function(e,n){t+=L(n)}),t}function L(e){var t='<li><a data-id="'+e.entity.id+'">'+e.entity.name+"</a>";return e.children.list.length>0&&(t+="<ul>",$.each(e.children.list,function(e,n){t+=L(n)}),t+="</ul>"),t+"</li>"}function A(e){Heiduc.jsonrpc.tagService.addTag(function(e){Heiduc.showServiceMessages(e),$("#tag-dialog").modal({show:!1}),O()},t.page.friendlyURL,e)}function O(){Heiduc.jsonrpc.pageService.getPageTags(function(e){t.pageRequest.tags=e,M()},t.page.friendlyURL)}function M(){var e="";$.each(t.pageRequest.tags.list,function(t,n){e+='<span class="tag">'+n.name+' <a data-id="'+n.id+'"><img src="/static/images/02_x.png"/></a></span>'}),$("#tags").html(e),$("#tags .tag > a").click(function(){var e=$(this).attr("data-id");e&&D(e)})}function D(e){Heiduc.jsonrpc.tagService.removeTag(function(e){Heiduc.showServiceMessages(e),O()},t.page.friendlyURL,e)}console.log("Loading IndexView.js");var i=null;return Backbone.View.extend({css:"/static/css/jquery.treeview.css",el:$("#tab-1"),tmpl:_.template(e),render:function(){Heiduc.addCSSFile(this.css),this.el=$("#tab-1"),this.el.html(this.tmpl({messages:messages})),s()},remove:function(){this.el.html(""),Heiduc.removeCSSFile(this.css)}})}),define("text!template/page/children.html",[],function(){return'\n\n<div id="children"> </div>\n<div class="form-sep">\n    <input class="btn btn-primary" id="addChildButton" type="button" value="<%= messages("add_child_page") %>" />\n    <input class="btn btn-default" id="deleteChildButton" type="button" value="<%= messages("delete_pages") %>" />\n    <input class="btn btn-default" id="defaultSettingsButton" type="button" value="<%= messages("default_settings") %>" />\n</div>    \n\n\n<div class="modal fade" id="page-dialog" tabindex="-1" role="dialog" aria-labelledby="" aria-hidden="true">\n  <div class="modal-dialog">\n    <div class="modal-content">\n      <div class="modal-header">\n        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>\n        <h4 class="modal-title"><%= messages("pages.new_page") %></h4>\n      </div>\n      <div class="modal-body">\n      	<form id="pageForm">\n      		<div class="form-group">\n				<div class="row">\n					<div class="col-lg-12">\n		        		<label><%= messages("pages.page_title") %></label>\n		        		<input id="title" type="text" />\n					</div>\n				</div>\n			</div>\n			<div class="form-group">\n				<div class="row">\n					<div class="col-lg-12">\n		        		<label><%= messages("pages.page_url") %></label>\n		        		<span id="parentURL"></span>\n		        		<input id="url" type="text"/>\n					</div>\n				</div>\n			</div>\n		    <div id="pageMessages"></div>\n		    \n		    <div class="modal-footer">\n		        <button id="cancelDlgButton" type="button" class="btn btn-default" data-dismiss="modal"><%= messages("cancel") %></button>\n		        <button type="submit" class="btn btn-primary"><%= messages("save") %></button>\n		    </div>\n		  </form>\n      </div>	\n    </div>\n  </div>\n</div>\n'}),define("view/page/ChildrenView",["text!template/page/children.html","view/page/context","view/page/version","view/page/breadcrumbs"],function(e,t,n,r){function o(){t.loadData=u,Heiduc.initJSONRpc(u),$("a.button").hover(function(){$(this).addClass("ui-state-hover")},function(){$(this).removeClass("ui-state-hover")}),n.initVersionDialog(),$("#addChildButton").click(h),$("#deleteChildButton").click(p),$("#defaultSettingsButton").click(y),$("ul.nav-tabs li:nth-child(3)").addClass("active"),$("#cancelDlgButton").click(b),$("#pageForm").submit(function(){return S(),!1}),$("#title").change(w)}function u(){Heiduc.jsonrpc.pageService.getPageRequest(function(e){t.pageRequest=e,t.page=t.pageRequest.page,f(),r.breadcrumbsShow()},t.pageId,t.pageParentUrl)}function a(){Heiduc.jsonrpc.pageService.getPageRequest(function(e){t.pageRequest=e,t.page=t.pageRequest.page,t.editMode=t.pageId!=null,f()},t.pageId,t.pageParentUrl)}function f(){t.editMode?(pageId=String(t.page.id),pageParentUrl=t.page.parentUrl,c(),n.loadVersions(),n.showAuditInfo()):pages[1]=t.page,d()}function l(){Heiduc.jsonrpc.pageService.getChildren(function(e){t.pageRequest.children=e,c()},t.page.friendlyURL)}function c(){s=t.pageRequest.children.list;var e='<table class="table table-striped"><tr><th></th><th>'+messages("title")+"</th><th>"+messages("page.friendly_url")+"</th><th></th></tr>";$.each(s,function(t,n){e+='<tr><td><input type="checkbox" value="'+n.id+'"/></td><td><a href="#page/content/'+n.id+'">'+n.title+"</a></td><td>"+n.friendlyURL+'</td>			<td><a class="pageup" data-n="'+t+'"><img src="/static/images/02_up.png"/></a>	        <a class="pagedown" data-n="'+t+'"><img src="/static/images/02_down.png"/></a>	        </td></tr>'}),$("#children").html(e+"</table>"),$("#children tr:even").addClass("even"),$("a.pageup").click(function(){v(Number($(this).attr("data-n")))}),$("a.pagedown").click(function(){m(Number($(this).attr("data-n")))})}function h(){$("#ui-dialog-title-page-dialog").text(messages("pages.new_page")),i=t.page.friendlyURL=="/"?"":t.page.friendlyURL,$("#page-dialog").modal({show:!0}),$("#parentURL").html(i+"/"),$("#title").val(""),$("#url").val(""),$("#title").focus()}function p(){var e=[];$("#children input:checked").each(function(){e.push(this.value)});if(e.length==0){Heiduc.info(messages("nothing_selected"));return}confirm(messages("are_you_sure"))&&Heiduc.jsonrpc.pageService.deletePages(function(e){Heiduc.showServiceMessages(e),l()},Heiduc.javaList(e))}function d(){var e=t.pageRequest.pagePermission;e.changeGranted?($("#addChildButton").show(),$("#deleteChildButton").show()):($("#addChildButton").hide(),$("#deleteChildButton").hide()),e.admin&&t.editMode?$(".securityTab").show():$(".securityTab").hide()}function v(e){e-1>=0&&(Heiduc.jsonrpc.pageService.moveUp(function(e){},s[e].id),s[e].sortIndex--,s[e-1].sortIndex++,g(e,e-1),l())}function m(e){e+1<s.length&&(Heiduc.jsonrpc.pageService.moveDown(function(e){},s[e].id),s[e+1].sortIndex--,s[e].sortIndex++,g(e,e+1),l())}function g(e,t){var n=s[t];s[t]=s[e],s[e]=n}function y(){Heiduc.jsonrpc.pageService.getPageDefaultSettings(function(e){location.href="#page/"+e.id},t.page.friendlyURL)}function b(){}function w(){var e=$("#url").val(),t=$("#title").val();e==""&&$("#url").val(Heiduc.urlFromTitle(t))}function E(e){if(e.title=="")return messages("title_is_empty");if(e.title.indexOf(",")!=-1)return messages("pages.coma_not_allowed");if(e.url=="")return messages("pages.url_is_empty");if(e.url.indexOf("/")!=-1)return messages("pages.slash_not_allowed")}function S(){var e={id:"",title:$("#title").val(),url:$("#url").val(),friendlyUrl:i+"/"+$("#url").val()},t=E(e);t?x(t):Heiduc.jsonrpc.pageService.savePage(function(e){e.result=="success"?(Heiduc.info(messages("pages.success_created")),location.href="#page/content/"+e.message):x(e.message)},Heiduc.javaMap(e))}function x(e){Heiduc.errorMessage("#pageMessages",e)}console.log("Loading ChildrenView.js");var i=null,s=null;return Backbone.View.extend({el:$("#tab-1"),tmpl:_.template(e),render:function(){this.el=$("#tab-1"),this.el.html(this.tmpl({messages:messages})),o()},remove:function(){this.el.html(""),Heiduc.removeCSSFile(this.css)}})}),define("text!template/page/comments.html",[],function(){return'\n<div id="comments"> </div>\n<div class="form-sep">\n    <input class="btn btn-primary" id="enableCommentsButton" type="button" \n        value="<%= messages("enable_comments") %>" />\n    <input class="btn btn-default" id="disableCommentsButton" type="button" \n        value="<%= messages("disable_comments") %>" />\n    <input class="btn btn-default" id="deleteCommentsButton" type="button" \n        value="<%= messages("delete_comments") %>" />\n</div>    \n'}),define("view/page/CommentsView",["text!template/page/comments.html","view/page/context","view/page/version","view/page/breadcrumbs"],function(e,t,n,r){function i(){t.loadData=s,t.editMode=t.pageId!="",Heiduc.initJSONRpc(s),$("a.button").hover(function(){$(this).addClass("ui-state-hover")},function(){$(this).removeClass("ui-state-hover")}),n.initVersionDialog(),$("#enableCommentsButton").click(f),$("#disableCommentsButton").click(l),$("#deleteCommentsButton").click(c),$("ul.nav-tabs li:nth-child(4)").addClass("active")}function s(){Heiduc.jsonrpc.pageService.getPageRequest(function(e){t.pageRequest=e,t.page=t.pageRequest.page,u(),r.breadcrumbsShow()},t.pageId,t.pageParentUrl)}function o(){Heiduc.jsonrpc.pageService.getPageRequest(function(e){t.pageRequest=e,t.page=t.pageRequest.page,t.editMode=t.pageId!=null,u()},t.pageId,t.pageParentUrl)}function u(){t.editMode?(t.pageId=String(t.page.id),t.pageParentUrl=t.page.parentUrl,n.loadVersions(),a(),n.showAuditInfo()):t.pages[1]=t.page,h()}function a(){var e=t.pageRequest.comments,n='<table class="table table-striped"><tr><th></th><th>'+messages("state")+"</th><th>"+messages("name")+"</th><th>"+messages("content")+"</th></tr>";$.each(e.list,function(e,t){var r=t.disabled?messages("disabled"):messages("enabled");n+='<tr><td><input type="checkbox" value="'+t.id+'"/></td><td>'+r+"</a></td><td>"+t.name+"</td><td>"+t.content+"</td></tr>"}),$("#comments").html(n+"</table>"),$("#comments tr:even").addClass("even")}function f(){var e=[];$("#comments input:checked").each(function(){e.push(this.value)});if(e.length==0){Heiduc.info(messages("nothing_selected"));return}Heiduc.jsonrpc.commentService.enableComments(function(e){Heiduc.showServiceMessages(e),s()},Heiduc.javaList(e))}function l(){var e=[];$("#comments input:checked").each(function(){e.push(this.value)});if(e.length==0){Heiduc.info(messages("nothing_selected"));return}Heiduc.jsonrpc.commentService.disableComments(function(e){Heiduc.showServiceMessages(e),s()},Heiduc.javaList(e))}function c(){var e=[];$("#comments input:checked").each(function(){e.push(this.value)});if(e.length==0){Heiduc.info(messages("nothing_selected"));return}confirm(messages("are_you_sure"))&&Heiduc.jsonrpc.commentService.deleteComments(function(e){Heiduc.showServiceMessages(e),s()},Heiduc.javaList(e))}function h(){var e=t.pageRequest.pagePermission;e.changeGranted?($("#enableCommentsButton").show(),$("#disableCommentsButton").show(),$("#deleteCommentsButton").show()):($("#enableCommentsButton").hide(),$("#disableCommentsButton").hide(),$("#deleteCommentsButton").hide()),e.admin&&t.editMode?$(".securityTab").show():$(".securityTab").hide()}return console.log("Loading CommentsView.js"),Backbone.View.extend({el:$("#tab-1"),tmpl:_.template(e),render:function(){this.el=$("#tab-1"),this.el.html(this.tmpl({messages:messages})),i()},remove:function(){this.el.html("")}})}),define("text!template/page/security.html",[],function(){return'  \n<div id="permissions"> </div>\n<div class="form-sep">\n    <input class="btn btn-primary" id="addPermissionButton" type="button" \n        value="<%= messages("add_permission") %>" />\n    <input class="btn btn-default" id="deletePermissionButton" type="button" \n        value="<%= messages("delete_permission") %>" />\n</div>    \n\n<div class="modal fade" id="permission-dialog" tabindex="-1" role="dialog" aria-labelledby="" aria-hidden="true">\n  <div class="modal-dialog">\n    <div class="modal-content">\n      <div class="modal-header">\n        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>\n        <h4 class="modal-title"><%= messages("permission_details") %></h4>\n      </div>\n      <div class="modal-body">\n      	<form id="permissionForm">\n		    <div class="form-row">\n		        <label><%= messages("group") %></label>\n		        <select id="groupSelect"></select>\n		        <span id="groupName"></span>        \n		    </div>\n		    <div id="permissionList" class="form-row">\n		        <fieldset>\n		            <legend><%= messages("permission") %></legend>\n		            <input type="radio" name="permission" value="DENIED"/> <%= messages("denied") %> <br />\n		            <input type="radio" name="permission" value="READ" /> <%= messages("read") %> <br />\n		            <input type="radio" name="permission" value="WRITE" /> <%= messages("read_write") %> <br />\n		            <input type="radio" name="permission" value="PUBLISH" /> <%= messages("read_write_publish") %> <br />\n		            <input type="radio" name="permission" value="ADMIN" /> <%= messages("read_write_publish_grant") %> <br />\n		        </fieldset>        \n		    </div>\n		    <div class="form-row">\n		        <label><%= messages("page.all_languages") %></label>\n		        <input id="allLanguages" type="checkbox" checked="checked" />\n		    </div>    \n		    <div id ="permLanguages" class="form-row" style="display:none"> </div>\n		    <div class="modal-footer">\n		        <input class="btn btn-primary" id="permissionSaveButton" type="submit" \n		            value="<%= messages("save") %>" />\n		        <input class="btn btn-default" data-dismiss="modal" id="permissionCancelButton" type="button" \n		            value="<%= messages("cancel") %>" />\n		    </div>\n		  </form>\n      </div>	\n    </div>\n  </div>\n</div>\n\n'}),define("view/page/SecurityView",["text!template/page/security.html","view/page/context","view/page/version","view/page/breadcrumbs"],function(e,t,n,r){function a(){t.loadData=f,t.editMode=t.pageId!="",Heiduc.initJSONRpc(f),$("a.button").hover(function(){$(this).addClass("ui-state-hover")},function(){$(this).removeClass("ui-state-hover")}),n.initVersionDialog(),$("#addPermissionButton").click(E),$("#deletePermissionButton").click(S),$("#permissionForm").submit(function(){return w(),!1}),$("#permissionCancelButton").click(x),$("#allLanguages").change(T),$("ul.nav-tabs li:nth-child(5)").addClass("active")}function f(){Heiduc.jsonrpc.pageService.getPageRequest(function(e){t.pageRequest=e,t.page=t.pageRequest.page,h(),c(),r.breadcrumbsShow()},t.pageId,t.pageParentUrl)}function l(){Heiduc.jsonrpc.pageService.getPageRequest(function(e){t.pageRequest=e,t.page=t.pageRequest.page,t.editMode=t.pageId!=null,c()},t.pageId,t.pageParentUrl)}function c(){t.editMode?(t.pageId=String(t.page.id),t.pageParentUrl=t.page.parentUrl,n.loadVersions(),v(),m()):t.pages[1]=t.page,N()}function h(){var e=t.pageRequest.languages;u={};var n="";$.each(e.list,function(e,t){u[t.code]=t}),g()}function p(e){if(e=="DENIED")return messages("denied");if(e=="READ")return messages("read");if(e=="WRITE")return messages("read_write");if(e=="PUBLISH")return messages("read_write_publish");if(e=="ADMIN")return messages("read_write_publish_grant")}function d(){Heiduc.jsonrpc.contentPermissionService.selectByUrl(function(e){t.pageRequest.permissions=e,v()},t.page.friendlyURL)}function v(){var e=t.pageRequest.permissions;s=Heiduc.idMap(e.list);var n='<table class="table table-striped"><tr><th></th><th>'+messages("group")+"</th><th>"+messages("permission")+"</th><th>"+messages("languages")+"</th></tr>";$.each(s,function(e,t){var r="",i=t.group.name;t.inherited||(r='<input type="checkbox" value="'+t.id+'">',i='<a data-id="'+t.id+'"> '+t.group.name+"</a>");var s=t.allLanguages?messages("page.all_languages"):t.languages;n+="<tr><td>"+r+"</td><td>"+i+"</td><td>"+p(t.permission)+"</td><td>"+s+"</td></tr>"}),$("#permissions").html(n+"</table>"),$("#permissions tr:even").addClass("even"),$("#permissions a").click(function(){var e=$(this).attr("data-id");e&&y(e)})}function m(){var e=t.pageRequest.groups;o=Heiduc.idMap(e.list);var n="";$.each(o,function(e,t){n+='<option value="'+t.id+'">'+t.name+"</option>"}),$("#groupSelect").html(n)}function g(){var e="<fieldset><legend>"+messages("languages")+"</legend>";$.each(u,function(t,n){e+='<input type="checkbox" value="'+n.code+'" /> '+n.title+"<br />"}),$("#permLanguages").html(e+"</fieldset>")}function y(e){i=s[e],b(),$("#permission-dialog").modal({show:!0})}function b(){$("#permission-dialog input[type=radio]").removeAttr("checked"),$("#allLanguages").attr("checked","checked"),$("#permLanguages").hide();if(i==null)$("#permission-dialog input[value=READ]").attr("checked","checked"),$("#groupSelect").show(),$("#groupName").hide();else{$("#permissionList input[value="+i.permission+"]").attr("checked","checked"),$("#groupSelect").hide(),$("#groupName").show(),$("#groupName").text(i.group.name);if(!i.allLanguages){$("#allLanguages").removeAttr("checked"),$("#permLanguages").show();var e=i.languages.split(",");$("#permLanguages input").removeAttr("checked"),$.each(e,function(e,t){$("#permLanguages input[value="+t+"]").attr("checked","checked")})}}}function w(){var e="";$("#permLanguages input:checked").each(function(){e+=(e==""?"":",")+this.value});var n={url:t.page.friendlyURL,groupId:i==null?$("#groupSelect").val():String(i.group.id),permission:$("#permissionList input:checked")[0].value,languages:$("#allLanguages")[0].checked?"":e};Heiduc.jsonrpc.contentPermissionService.save(function(e){Heiduc.showServiceMessages(e),e.result=="success"&&d()},Heiduc.javaMap(n))}function E(){i=null,b(),$("#permission-dialog").modal({show:!0})}function S(){var e=[];$("#permissions input:checked").each(function(){e.push(this.value)});if(e.length==0){Heiduc.info(messages("nothing_selected"));return}confirm(messages("are_you_sure"))&&Heiduc.jsonrpc.contentPermissionService.remove(function(e){Heiduc.showServiceMessages(e),d()},Heiduc.javaList(e))}function x(){}function T(){this.checked?$("#permLanguages").hide():$("#permLanguages").show()}function N(){var e=t.pageRequest.pagePermission;e.admin&&t.editMode?$(".securityTab").show():$(".securityTab").hide()}console.log("Loading SecurityView.js");var i=null,s=null,o=null,u={};return Backbone.View.extend({el:$("#tab-1"),tmpl:_.template(e),render:function(){this.el=$("#tab-1"),this.el.html(this.tmpl({messages:messages})),a()},remove:function(){this.el.html("")}})}),define("text!template/page/attributes.html",[],function(){return'\n<div id="attributes"> </div>\n<div class="form-sep">\n    <input class="btn btn-primary" id="addButton" type="button" \n        value="<%= messages("add_attribute") %>" />\n    <input class="btn btn-default" id="deleteButton" type="button" \n        value="<%= messages("delete_attribute") %>" />\n</div>    \n\n<div class="modal fade" id="attribute-dialog" tabindex="-1" role="dialog" aria-labelledby="" aria-hidden="true">\n  <div class="modal-dialog">\n    <div class="modal-content">\n      <div class="modal-header">\n        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>\n        <h4 class="modal-title"><%= messages("attribute") %></h4>\n      </div>\n      <div class="modal-body">\n      	  <form id="attributeForm">\n		    <div class="form-row">\n		        <label><%= messages("name") %></label>\n		        <input id="name" type="text"/>\n		    </div>\n		    <div class="form-row">\n		        <label><%= messages("title") %></label>\n		        <input id="title" type="text"/>\n		    </div>\n		    <div class="form-row">\n		        <label><%= messages("default_value") %></label>\n		        <input id="defaultValue" type="text"/>\n		    </div>\n		    <div class="form-row">\n		        <label><%= messages("inherited") %></label>\n		        <input type="checkbox" id="inherited" />\n		    </div>\n		    <div class="modal-footer">\n		        <input class="btn btn-primary" id="saveButton" type="submit" value="<%= messages("save") %>" />\n		        <input class="btn btn-default" data-dismiss="modal" id="cancelButton" type="button" value="<%= messages("cancel") %>" />\n		    </div>\n		  </form>\n      </div>	\n    </div>\n  </div>\n</div>\n\n<div class="modal fade" id="attrValue-dialog" tabindex="-1" role="dialog" aria-labelledby="" aria-hidden="true">\n  <div class="modal-dialog">\n    <div class="modal-content">\n      <div class="modal-header">\n        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>\n        <h4 class="modal-title"><%= messages("attribute") %></h4>\n      </div>\n      <div class="modal-body">\n      	<form id="attrValueForm">\n		    <div class="form-row">\n		        <label><%= messages("name") %></label>\n		        <span id="attrName" />\n		    </div>\n		    <div class="form-row">\n		        <label><%= messages("language") %></label>\n		        <select id="language"/>\n		    </div>\n		    <div class="form-row">\n		        <label><%= messages("value") %></label>\n		        <input id="value" type="text"/>\n		    </div>\n		    <div id="applyChildren" class="form-row">\n		        <label><%= messages("page.apply_children") %></label>\n		        <input type="checkbox" id="attrInherited" />\n		    </div>\n		    <div class="modal-footer">\n		        <input class="btn btn-primary" id="saveValueButton" type="submit" value="<%= messages("save") %>" />\n		        <input class="btn btn-default" data-dismiss="modal" id="cancelValueButton" type="button" value="<%= messages("cancel") %>" />\n		    </div>\n		  </form>\n      </div>	\n    </div>\n  </div>\n</div>'}),define("view/page/AttributesView",["text!template/page/attributes.html","view/page/context","view/page/version","view/page/breadcrumbs"],function(attributesHtml,ctx,version,breadcrumbs){function postRender(){ctx.loadData=loadData,ctx.editMode=ctx.pageId!="",Heiduc.initJSONRpc(loadData),$("a.button").hover(function(){$(this).addClass("ui-state-hover")},function(){$(this).removeClass("ui-state-hover")}),version.initVersionDialog(),$("#addButton").click(onAdd),$("#cancelButton").click(function(){}),$("#cancelValueButton").click(function(){}),$("#attributeForm").submit(function(){return onSave(),!1}),$("#attrValueForm").submit(function(){return onSaveValue(),!1}),$("#deleteButton").click(onDelete),$("#language").change(onLanguageChange),$("ul.nav-tabs li:nth-child(7)").addClass("active")}function loadData(){Heiduc.jsonrpc.pageService.getPageRequest(function(e){ctx.pageRequest=e,ctx.page=ctx.pageRequest.page,loadPage(),breadcrumbs.breadcrumbsShow()},ctx.pageId,ctx.pageParentUrl)}function callLoadPage(){Heiduc.jsonrpc.pageService.getPageRequest(function(e){ctx.pageRequest=e,ctx.page=ctx.pageRequest.page,ctx.editMode=ctx.pageId!=null,loadPage()},ctx.pageId,ctx.pageParentUrl)}function loadPage(){ctx.editMode?(ctx.pageId=String(ctx.page.id),ctx.pageParentUrl=ctx.page.parentUrl,version.loadVersions(),loadLanguages(),version.showAuditInfo(),attrValues=ctx.page.attributes?eval("("+ctx.page.attributes+")"):{},loadAttributes()):ctx.pages[1]=ctx.page,loadPagePermission()}function loadLanguages(){var e=ctx.pageRequest.languages;languages={};var t="";$.each(e.list,function(e,n){languages[n.code]=n,t+='<option value="'+n.code+'" '+">"+n.title+"</option>"}),$("#language").html(t),$("#language").val(Heiduc.ENGLISH_CODE)}function loadPagePermission(){var e=ctx.pageRequest.pagePermission;e.changeGranted?($("#enableCommentsButton").show(),$("#disableCommentsButton").show(),$("#deleteCommentsButton").show()):($("#enableCommentsButton").hide(),$("#disableCommentsButton").hide(),$("#deleteCommentsButton").hide()),e.admin&&ctx.editMode?$(".securityTab").show():$(".securityTab").hide()}function loadAttributes(){Heiduc.jsonrpc.pageAttributeService.getByPage(function(e){attributes=e.list,showAttributes()},ctx.page.friendlyURL)}function showAttributes(){var e='<table class="table table-striped"><tr><th></th><th>'+messages("name")+"</th><th>"+messages("value")+"</th><th>"+messages("inherited")+"</th></tr>";$.each(attributes,function(t,n){attributesMap[n.name]=n;var r=n.inherited?messages("inherited"):"";e+='<tr><td><input type="checkbox" value="'+n.id+'"/></td><td><a data-name="'+n.name+'">'+n.name+"</a></td><td>"+getAttributeValue(n.name,Heiduc.ENGLISH_CODE)+"</td><td>"+r+"</td></tr>"}),$("#attributes").html(e+"</table>"),$("#attributes tr:even").addClass("even"),$("#attributes a").click(function(){var e=$(this).attr("data-name");e&&onEditValue(e)})}function onAdd(){$("#name").val(""),$("#title").val(""),$("#defaultValue").val(""),$("#inherited").each(function(){this.checked=!1}),$("#attribute-dialog").modal({show:!0})}function onDelete(){var e=[];$("#attributes input:checked").each(function(){e.push(this.value)});if(e.length==0){Heiduc.info(messages("nothing_selected"));return}confirm(messages("are_you_sure"))&&Heiduc.jsonrpc.pageAttributeService.remove(function(e){Heiduc.showServiceMessages(e),loadData()},Heiduc.javaList(e),ctx.page.id)}function onSave(){var e={id:attrDef==null?"":String(attrDef.id),url:ctx.page.friendlyURL,name:$("#name").val(),title:$("#title").val(),inherited:String($("#inherited:checked").size()>0),defaultValue:$("#defaultValue").val()};Heiduc.jsonrpc.pageAttributeService.save(function(t){t.result=="success"?(Heiduc.info(messages("page.success_save")),loadData(),e.inherited=$("#inherited:checked").size()>0,attributesMap[e.name]=e,e.inherited&&e.defaultValue?loadData():onEditValue(e.name)):Heiduc.showServiceMessages(t)},Heiduc.javaMap(e))}function getAttributeValue(e,t){return attrValues[e]&&attrValues[e][t]?attrValues[e][t]:""}function onEditValue(e){$("#attrValue-dialog").modal({show:!0}),$("#attrName").html(e),$("#attrInherited").each(function(){this.checked=!1}),attributesMap[e].inherited?$("#applyChildren").show():$("#applyChildren").hide();var t=getAttributeValue(e,$("#language").val());!t&&attributesMap[e].defaultValue&&confirm(messages("page.use_default_value"))&&(t=attributesMap[e].defaultValue),$("#value").val(t),$("#language").val(Heiduc.ENGLISH_CODE)}function checkPageAttrValue(e,t){attrValues[e]==undefined&&(attrValues[e]={}),attrValues[e][t]==undefined&&(attrValues[e][t]="")}function setPageAttrValue(e,t,n){checkPageAttrValue(e,t),attrValues[e][t]=n}function getPageAttrValue(e,t){return checkPageAttrValue(e,t),attrValues[e][t]}function onLanguageChange(){var e=$("#attrName").text(),t=$("#language").val(),n=getPageAttrValue(e,t);!n&&attributesMap[e].defaultValue&&confirm(messages("page.use_default_value"))&&(n=attributesMap[e].defaultValue),$("#value").val(n)}function onSaveValue(){var e=$("#attrName").text(),t=$("#language").val(),n=$("#value").val();setPageAttrValue(e,t,n),Heiduc.jsonrpc.pageService.saveAttribute(function(e){e.result=="success"?(Heiduc.info(messages("success")),loadData()):Heiduc.showServiceMessages(e)},ctx.page.id,e,n,t,$("#attrInherited:checked").size()>0)}console.log("Loading AttributesView.js");var attrDef=null,attributes=null,attributesMap={},attrValues={},languages=null;return Backbone.View.extend({el:$("#tab-1"),tmpl:_.template(attributesHtml),render:function(){this.el=$("#tab-1"),this.el.html(this.tmpl({messages:messages})),postRender()},remove:function(){this.el.html("")}})}),define("view/page/PageRouter",["view/page/context","view/page/ContentView","view/page/IndexView","view/page/ChildrenView","view/page/CommentsView","view/page/SecurityView","view/page/AttributesView"],function(e,t,n,r,i,s,o){return console.log("Loading PageRouter.js"),Backbone.Router.extend({pageView:null,currentView:null,contentView:new t,indexView:new n,childrenView:new r,commentsView:new i,securityView:new s,attributesView:new o,initialize:function(e){this.pageView=e.view},show:function(e){Heiduc.app.currentView!=this.pageView&&Heiduc.app.show(this.pageView),this.currentView&&(this.currentView.remove(),this.currentView=null),$("ul.nav-tabs li").removeClass("active"),e.render(),this.currentView=e},routes:{"page/children/:id":"children","page/comments/:id":"comments","page/security/:id":"security","page/attributes/:id":"attributes","page/resources/:id":"resources"},showCmd:function(t){t=="editContent"&&this.editContent(e.pageId),t=="editPage"&&this.editPage(e.pageId)},editContent:function(t){e.pageId=t,this.show(this.contentView)},editPage:function(t){e.pageId=t,this.show(this.indexView)},children:function(t){e.pageId=t,this.show(this.childrenView)},comments:function(t){e.pageId=t,this.show(this.commentsView)},security:function(t){e.pageId=t,this.show(this.securityView)},attributes:function(t){e.pageId=t,this.show(this.attributesView)},resources:function(t){Heiduc.jsonrpc.pageService.getPageRequest(function(n){e.pageRequest=n,e.pageId=t,e.page=e.pageRequest.page,Heiduc.jsonrpc.folderService.createFolderByPath(function(t){jQuery.cookie("folderReturnPath","#page/content/"+e.pageId,{path:"/",expires:10}),location.href="#folder/"+t.id},"/page"+e.page.friendlyURL)},t,"")}})}),define("view/page/PageView",["text!template/page/page.html","view/page/PageRouter","view/page/context"],function(e,t,n){return console.log("Loading PageView.js"),Backbone.View.extend({css:["/static/js/codemirror/codemirror.css","/static/js/codemirror/eclipse.css","/static/css/page.css"],el:$("#content"),tmpl:_.template(e),viewCmd:null,router:null,initialize:function(){this.router=new t({view:this})},render:function(){Heiduc.addCSSFiles(this.css),this.el.html(this.tmpl({messages:messages,id:n.pageId})),this.router.showCmd(this.viewCmd)},remove:function(){this.router.currentView&&this.router.currentView.remove(),this.el.html(""),Heiduc.removeCSSFiles(this.css)},editContent:function(e){n.pageId=e,this.viewCmd="editContent"},editPage:function(e){n.pageId=e,this.viewCmd="editPage"},setResource:function(e){this.router.contentView.setResource(e)}})}),define("text!template/profile.html",[],function(){return'<div class="row">\n	<div class="col-lg-12">\n		<div class="panel panel-default">\n			<div class="panel-heading"><%= messages("profile.title") %></div>\n			<div class="panel-body">\n				<div class="row">\n					<div class="form-group">\n						<label><%= messages("profile.username") %></label>\n						<input type="text" name="name" id="name" class="form-control"/>\n					</div>\n					<div class="form-group">\n						<label><%= messages("profile.user_email") %></label>\n						<input disabled="disabled" type="text" name="email" id="email" class="form-control">\n					</div>\n					<div class="form-group">\n						<label><%= messages("password") %></label>\n						<input type="password" name="password1" id="password1" class="form-control">\n					</div>\n					<div class="form-group">\n						<label><%= messages("profile.retype_password") %></label>\n						<input type="password" name="password2" id="password1" class="form-control">\n					</div>\n					<div class="form-group">\n						<label><%= messages("profile.timezone") %></label>\n						<select id="timezone" class="form-control"></select>\n					</div>\n					<div class="form-sep">\n						<input class="btn btn-primary" id="saveButton" type="button" value="<%= messages("save") %>" />\n					</div>\n				</div>\n			</div>\n		</div>\n	</div>\n</div>\n\n'}),define("view/ProfileView",["text!template/profile.html"],function(e){function r(){Heiduc.initJSONRpc(i),$("#saveButton").click(u)}function i(){Heiduc.jsonrpc.userService.getTimezones(function(e){n=e.list,a(),s()})}function s(){Heiduc.jsonrpc.userService.getLoggedIn(function(e){t=e,$("#name").val(t.name),$("#email").val(t.email),$("#password1").val(""),$("#password2").val(""),$("#timezone").val(t.timezone)})}function o(){var e=$("#password1").val(),t=$("#password2").val();return e||t?e==t?!0:!1:!0}function u(){var e="";if(!o()){Heiduc.error(messages("profile.password_dont_match"));return}e=$("#password1").val();var n={id:String(t.id),name:$("#name").val(),timezone:$("#timezone").val(),password:e};Heiduc.jsonrpc.userService.save(function(e){Heiduc.showServiceMessages(e)},Heiduc.javaMap(n))}function a(){var e="";$.each(n,function(t,n){e+='<option value="'+n+'">'+n+"</option>"}),$("#timezone").html(e)}console.log("Loading ProfileView.js");var t=null,n=null;return Backbone.View.extend({el:$("#content"),render:function(){this.el.html(_.template(e,{messages:messages})),r()},remove:function(){this.el.html("")}})}),define("text!template/plugins/index.html",[],function(){return'\n<div class="row">\n		<div class="col-md-12">\n			<div class="panel panel-default">\n				<div class="panel-body">\n			        <img src="/static/images/config.png" />\n			        <a href="#plugins/config"><%= messages("plugins.config") %></a>\n			        <p><%= messages("plugins.config_info") %></p>\n			    </div>\n		    </div>\n		</div>\n</div>\n<div class="row">\n		<div class="col-md-12">\n			<div class="panel panel-default">\n				<div class="panel-body">\n			        <img src="/static/images/form.png" />\n			        <a href="#plugins/forms"><%= messages("forms") %></a>\n			        <p><%= messages("plugins.forms_info") %></p>\n			    </div>\n		    </div>\n		</div>\n</div>\n<div class="row">\n		<div class="col-md-12">\n			<div class="panel panel-default">\n				<div class="panel-body">\n			        <img src="/static/images/seo_urls.png" />\n			        <a href="#plugins/seo-urls"><%= messages("plugins.seo_urls") %></a>\n			        <p><%= messages("plugins.seo_urls_info") %></p>\n			    </div>\n		    </div>\n		</div>\n</div>\n\n\n'}),define("view/plugins/PluginsView",["text!template/plugins/index.html"],function(e){return console.log("Loading PluginsView.js"),Backbone.View.extend({el:$("#content"),render:function(){this.el.html(_.template(e,{messages:messages}))},remove:function(){this.el.html("")}})}),define("text!template/plugins/plugin.html",[],function(){return'\n<div class="row">\n	<div class="col-lg-12">\n		<div class="panel panel-default">\n			<div class="panel-body">\n				<div class="row">\n					<div class="col-md-12">\n						<ul class="nav nav-tabs" id="tabs_a">\n							<li class="active"><a data-toggle="tab" id="plugin-title" href="#tab-1"><%= messages("plugin") %></a></li>\n						</ul>\n						<div class="tab-content" id="tabs_content_a">\n							<div id="tab-1" class="tab-pane fade in active">\n								<div class="row">\n		                            <div class="col-lg-6">\n		                            	<div id="properties"></div>\n									    <div class="form-sep">\n									        <input id="saveButton"class="btn btn-primary" type="button" value="<%= messages("save") %>" />\n									        <input id="cancelButton" class="btn btn-default" type="button" value="<%= messages("cancel") %>" />\n									    </div>\n		                            </div>\n	                            </div>\n								\n							</div>\n						</div>\n					</div>\n				</div>\n			</div>\n		</div>\n	</div>\n</div>\n\n\n\n'}),define("view/plugins/PluginView",["text!template/plugins/plugin.html"],function(e){function r(){Heiduc.initJSONRpc(i),$("#cancelButton").click(u),$("#saveButton").click(h)}function i(){s(),o()}function s(){Heiduc.jsonrpc.pluginService.getById(function(e){t=e,$("#plugin-title").text(t.name+" "+messages("plugin.config")),f()},pluginId)}function o(){Heiduc.jsonrpc.pluginService.getProperties(function(e){n=e.list,f()},pluginId)}function u(){location.href="#plugins"}function a(e){return e==null?"":e}function f(){if(t==null||n==null)return;var e="",r=l();$.each(n,function(t,n){var i=a(r[n.name.toLowerCase()]?r[n.name.toLowerCase()]:n.defaultValue),s=Heiduc.message(n.title);if(n.type=="String"||n.type=="Integer")e+='<div class="form-group"><label>'+s+"</label>"+'<input class="form-control" id="property-'+n.name+'" value="'+Heiduc.escapeHtml(i)+'"/></div>';n.type=="Date"&&(e+='<div class="form-group"><label>'+s+"</label>"+'<input class="form-control" id="property-'+n.name+'"/></div>'),n.type=="Boolean"&&(e+='<div class="form-group"><label>'+s+"</label>"+'<input class="form-control" type="checkbox" id="property-'+n.name+'"/></div>'),n.type=="Text"&&(e+='<div class="form-group"><label>'+s+"</label>"+'<textarea id="property-'+n.name+'"  class="form-control">'+i+"</textarea></div>")}),$("#properties").html(e),$.each(n,function(e,t){var n="#property-"+t.name,i=r[t.name.toLowerCase()]?r[t.name.toLowerCase()]:"";t.type=="Date"&&(i&&$(n).val(i),$(n).datepicker({dateFormat:"dd.mm.yy"}));if(t.type=="Boolean"){var s=i=="true";$(n).each(function(){this.checked=s})}})}function l(){var e={};if(t.configData!=""){var n=$.xmlDOM(t.configData,function(e){Heiduc.error(messages("plugin.parsing_error")+" "+e)});$(n).find("plugin-config").children().each(function(){e[this.tagName.toLowerCase()]=$(this).text()})}return e}function c(e){$.each(n,function(t,n){var r=e[n.name];if(n.type=="Integer"&&parseInt(r)==NaN)return messages("plugin.integer_expected")+" "+n.name})}function h(){var e={},t="<plugin-config>\n";$.each(n,function(n,r){var i="#property-"+r.name;if(r.type=="String"||r.type=="Integer"||r.type=="Date"||r.type=="Text")e[r.name]=$(i).val(),t+="<"+r.name+">"+Heiduc.escapeHtml(e[r.name])+"</"+r.name+">\n";r.type=="Boolean"&&(e[r.name]=String($(i+":checked").size()>0),t+="<"+r.name+">"+e[r.name]+"</"+r.name+">\n")}),t+="</plugin-config>\n";var r=c(e);r?Heiduc.error(r):Heiduc.jsonrpc.pluginService.savePluginConfig(function(e){Heiduc.showServiceMessages(e)},Number(pluginId),t)}console.log("Loading PluginView.js");var t=null,n=null;return Backbone.View.extend({el:$("#content"),render:function(){this.el.html(_.template(e,{messages:messages})),r()},remove:function(){this.el.html("")},setPluginId:function(e){pluginId=e}})}),define("text!template/plugins/config.html",[],function(){return'\n<div class="row">\n	<div class="col-lg-12">\n		<div class="panel panel-default">\n			<div class="panel-body">\n				<div class="row">\n					<div class="col-md-12">\n						<ul class="nav nav-tabs" id="tabs_a">\n							<li class="active"><a data-toggle="tab" href="#tab-1"><%= messages("plugins") %></a></li>\n						</ul>\n						<div class="tab-content" id="tabs_content_a">\n							<div id="tab-1" class="tab-pane fade in active">\n								<div id="plugins"></div>\n							    <div class="form-sep">\n							        <input class="btn btn-primary" id="installButton" type="button" value="<%= messages("install_update") %>" />\n							    </div>\n								\n							</div>\n						</div>\n					</div>\n				</div>\n			</div>\n		</div>\n	</div>\n</div>\n\n\n<div class="modal fade" id="import-dialog" tabindex="-1" role="dialog" aria-labelledby="" aria-hidden="true">\n  <div class="modal-dialog">\n    <div class="modal-content">\n      <div class="modal-header">\n        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>\n        <h4 class="modal-title"><%= messages("install") %></h4>\n      </div>\n      <div class="modal-body">\n      	<form id="upload" action="/cms/upload" method="post" enctype="multipart/form-data">\n		    <%= messages("file_upload") %>:\n		    <input type="hidden" name="fileType" value="plugin" />\n		    <input type="file" name="uploadFile" />\n		    <div class="modal-footer">\n		        <input type="submit" class="btn btn-default" value="<%= messages("send") %>" />\n		        <input id="importCancelButton" class="btn btn-default" data-dismiss="modal" type="button" value="<%= messages("cancel") %>" />\n		    </div>    \n		</form>\n      </div>	\n    </div>\n  </div>\n</div>\n\n<div class="modal fade" id="afterUpload-dialog" tabindex="-1" role="dialog" aria-labelledby="" aria-hidden="true">\n  <div class="modal-dialog">\n    <div class="modal-content">\n      <div class="modal-header">\n        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>\n        <h4 class="modal-title"><%= messages("status_window") %></h4>\n      </div>\n      <div class="modal-body">\n		    <p class="message"></p>\n		    <div class="modal-footer">\n		        <input class="btn btn-default" id="okButton" type="submit" value="OK" />\n		    </div>\n      </div>	\n    </div>\n  </div>\n</div>\n\n\n\n'}),define("view/plugins/ConfigView",["text!template/plugins/config.html","jquery.form"],function(e){function n(){Heiduc.initJSONRpc(r),$("#upload").ajaxForm(a),$("#installButton").click(o),$("#importCancelButton").click(u),$("#okButton").click(f)}function r(){i()}function i(){Heiduc.jsonrpc.pluginService.select(function(e){t=e.list,s()})}function s(){var e='<table class="table table-striped"><th>'+messages("title")+"</th>	       <th>"+messages("name")+"</th><th>"+messages("version")+"</th><th>"+messages("description")+"</th><th>"+messages("website")+"</th><th>"+messages("state")+"</th><th></th></tr>";$.each(t,function(t,n){var r="#plugin/"+n.id;n.configURL&&(r="#addons/"+n.name);var i=n.disabled?messages("disabled"):messages("enabled"),s=n.disabled?Heiduc.message(n.title):'<a href="'+r+'">'+Heiduc.message(n.title)+"</a>";e+="<tr><td>"+s+"</td>"+"<td>"+n.name+"</td>"+"<td>"+n.version+"</td>"+"<td>"+Heiduc.message(n.description)+"</td>"+"<td>"+n.website+"</td>"+"<td>"+i+"</td>"+'<td><a title="Uninstall" class="removeLink" data-index="'+t+'">'+'<img src="/static/images/02_x.png"/></a></td></tr>'}),$("#plugins").html(e+"</table>"),$("#plugins tr:even").addClass("even"),$("#plugins .removeLink").click(function(){l(Number($(this).attr("data-index")))})}function o(){$("#import-dialog").modal({show:!0})}function u(){$("#import-dialog").modal("hide")}function a(e){var t=e.split("::"),n=t[1],r=t[2];n=="success"?r=messages("plugins.success_install"):r=messages("error")+". "+r,$("#import-dialog").modal("hide"),$("#afterUpload-dialog .message").text(r),$("#afterUpload-dialog").modal("show")}function f(){location.reload()}function l(e){confirm(messages("are_you_sure"))&&Heiduc.jsonrpc.pluginService.remove(function(n){Heiduc.showServiceMessages(n),n.result=="success"&&(t.splice(e,1),s())},t[e].id)}console.log("Loading ConfigView.js");var t="";return Backbone.View.extend({el:$("#content"),render:function(){this.el.html(_.template(e,{messages:messages})),n()},remove:function(){this.el.html("")}})}),define("text!template/plugins/forms.html",[],function(){return'\n<div class="row">\n	<div class="col-lg-12">\n		<div class="panel panel-default">\n			<div class="panel-body">\n				<div class="row">\n					<div class="col-md-12">\n						<ul class="nav nav-tabs" id="tabs_a">\n							<li class="active"><a data-toggle="tab" href="#tab-1"><%= messages("forms") %></a></li>\n							<li><a id="_config" data-toggle="tab" href="#tab-2"><%= messages("config") %></a></li>\n						</ul>\n						<div class="tab-content" id="tabs_content_a">\n							<div id="tab-1" class="tab-pane fade in active">\n								<div id="forms"> </div>\n							    <div class="form-sep">\n							        <input class="btn btn-primary" id="addButton" type="button" value="<%= messages("add") %>" />\n							        <input class="btn btn-default" id="deleteButton" type="button" value="<%= messages("delete") %>" />\n							    </div>\n								\n							</div>\n							<div id="tab-2" class="tab-pane fade">\n								<div class="form-row">\n								    <label><%= messages("forms.form_template") %></label>\n								    <div>\n								        <a id="restoreFormTemplateLink" ><%= messages("restore_default") %></a>\n								    </div>\n								    <div>\n								        <textarea id="formTemplate" rows="20" cols="80"></textarea>\n								    </div>\n								</div>\n								<div class="form-row">\n								    <label><%= messages("forms.letter_template") %></label>\n								    <div>\n								        <a id="restoreFormLetterLink" ><%= messages("restore_default") %></a>\n								    </div>\n								    <div>\n								        <textarea id="letterTemplate" rows="20" cols="80"></textarea>\n								    </div>\n								</div>\n								<div class="buttons">\n								    <input id="saveButton" type="button" value="<%= messages("save") %>" />\n								</div>\n								\n							</div>\n						</div>\n					</div>\n				</div>\n			</div>\n		</div>\n	</div>\n</div>\n\n\n\n\n'}),define("view/plugins/FormsView",["text!template/plugins/forms.html","cm-css","cm-js","cm-xml","cm-html"],function(e){function i(){$('a[data-toggle="tab"]').on("shown.bs.tab",s),Heiduc.initJSONRpc(o),$("#addButton").click(a),$("#deleteButton").click(f),$("#restoreFormTemplateLink").click(h),$("#restoreFormLetterLink").click(p),$("#saveButton").click(c)}function s(e){e.target.id==="_config"&&(n.refresh(),r.refresh())}function o(){u(),l()}function u(){Heiduc.jsonrpc.formService.select(function(e){var t='<table class="table table-striped"><tr><th></th><th>'+messages("title")+"</th><th>"+messages("name")+"</th><th>"+messages("email")+"</th></tr>";$.each(e.list,function(e,n){t+='<tr><td><input type="checkbox" value="'+n.id+'"/></td><td><a href="#plugins/form/'+n.id+'">'+n.title+"</a></td><td>"+n.name+"</td><td>"+n.email+"</td></tr>"}),$("#forms").html(t+"</table>"),$("#forms tr:even").addClass("even")})}function a(){location.href="#plugins/form"}function f(){var e=[];$("#forms input:checked").each(function(){e.push(this.value)});if(e.length==0){Heiduc.info(messages("nothing_selected"));return}confirm(messages("are_you_sure"))&&Heiduc.jsonrpc.formService.deleteForm(function(e){Heiduc.showServiceMessages(e),u()},Heiduc.javaList(e))}function l(){Heiduc.jsonrpc.formService.getFormConfig(function(e){t=e,$("#formTemplate").val(e.formTemplate),$("#letterTemplate").val(e.letterTemplate),n=CodeMirror.fromTextArea(document.getElementById("formTemplate"),{lineNumbers:!0,theme:"eclipse",mode:"htmlmixed"}),$(n.getScrollerElement()).css("border","1px solid silver"),r=CodeMirror.fromTextArea(document.getElementById("letterTemplate"),{lineNumbers:!0,theme:"eclipse",mode:"htmlmixed"}),$(r.getScrollerElement()).css("border","1px solid silver")})}function c(){n.save(),r.save();var e=Heiduc.javaMap({formTemplate:$("#formTemplate").val(),letterTemplate:$("#letterTemplate").val()});Heiduc.jsonrpc.formService.saveFormConfig(function(e){Heiduc.showServiceMessages(e)},e)}function h(){Heiduc.jsonrpc.formService.restoreFormTemplate(function(e){Heiduc.showServiceMessages(e),$(".CodeMirror").remove(),l()})}function p(){Heiduc.jsonrpc.formService.restoreFormLetter(function(e){Heiduc.showServiceMessages(e),$(".CodeMirror").remove(),l()})}console.log("Loading FormsView.js");var t="",n=null,r=null;return Backbone.View.extend({css:["/static/js/codemirror/codemirror.css","/static/js/codemirror/eclipse.css"],el:$("#content"),render:function(){Heiduc.addCSSFiles(this.css),this.el.html(_.template(e,{messages:messages})),i()},remove:function(){this.el.html(""),Heiduc.removeCSSFiles(this.css)}})}),define("text!template/plugins/form.html",[],function(){return'<div class="row">\n	<div class="col-lg-12">\n		<div class="panel panel-default">\n			<div class="panel-body">\n				<div class="row">\n					<div class="col-md-12">\n						<ul class="nav nav-tabs" id="tabs_a">\n							<li class="active"><a data-toggle="tab" href="#tab-1"><%= messages("form") %></a></li>\n							<li><a data-toggle="tab" href="#tab-2"><%= messages("fields") %></a></li>\n							<li><a data-toggle="tab" href="#tab-3"><%= messages("saved_data") %></a></li>\n						</ul>\n						<div class="tab-content" id="tabs_content_a">\n							<div id="tab-1" class="tab-pane fade in active">\n								<form id="form">\n								<div class="form-row">\n								    <label><%= messages("title") %></label>\n								    <input id="title" type="text" />\n								</div>\n								<div class="form-row">\n								    <label><%= messages("form.unique_name") %></label>\n								    <input id="name" type="text" />\n								</div>\n								<div class="form-row">\n								    <label><%= messages("form.email") %></label>\n								    <input id="email" type="text" />\n								</div>\n								<div class="form-row">\n								    <label><%= messages("letter_subject") %></label>\n								    <input id="letterSubject" type="text" />\n								</div>\n								<div class="form-row">\n								    <label><%= messages("form.send_title") %></label>\n								    <input id="sendButtonTitle" type="text"/>\n								</div>\n								<div class="form-row">\n								    <label><%= messages("form.reset_title") %></label>\n								    <input id="resetButtonTitle" type="text"/>\n								</div>\n								<div class="form-row">\n								    <label><%= messages("form.show_reset") %></label>\n								    <input id="showResetButton" type="checkbox"/>\n								</div>\n								<div class="form-row">\n								    <label><%= messages("enable_captcha") %></label>\n								    <input id="enableCaptcha" type="checkbox"/>\n								</div>\n								<div class="form-row">\n								    <label><%= messages("enable_save") %></label>\n								    <input id="enableSave" type="checkbox"/>\n								</div>\n								\n								<div class="buttons">\n								    <input id="saveButton" type="submit" value="<%= messages("save") %>" />\n								    <input id="cancelButton" type="button" value="<%= messages("cancel") %>" />\n								</div>\n								</form>\n								\n							</div>\n							<div id="tab-2" class="tab-pane fade">\n								<div id="fieldsTable"> </div>\n							    <div class="buttons">\n							        <input id="addFieldButton" type="button" value="<%= messages("add_field") %>" />\n							        <input id="deleteFieldButton" type="button" value="<%= messages("delete_fields") %>" />\n							    </div>    \n								\n							</div>\n							<div id="tab-3" class="tab-pane fade">\n								<div id="dataTable"></div>\n							    <div class="buttons">\n							        <input id="deleteDataButton" type="button" value="<%= messages("delete") %>" />\n							    </div> \n								\n							</div>\n						</div>\n					</div>\n				</div>\n			</div>\n		</div>\n	</div>\n</div>\n\n<div id="field-dialog" style="display:none" title="<%= messages("form.field_details") %>">\n<form id="fieldForm">\n    <div id="field-messages" class="messages"> </div>\n    <div class="form-row">\n        <label><%= messages("title") %></label>\n        <input type="text" name="field.title" />\n    </div>\n    <div class="form-row">\n        <label><%= messages("form.unique_name") %></label>\n        <input type="text" name="field.name" />\n    </div>\n    <div class="form-row">\n        <label><%= messages("form.field_type") %></label>\n        <select id="fieldType" name="field.fieldType">\n            <option value="TEXT">Text</option>\n            <option value="CHECKBOX">Checkbox</option>\n            <option value="RADIO">Radiobox</option>\n            <option value="PASSWORD">Password</option>\n            <option value="LISTBOX">Listbox</option>\n            <option value="FILE">File upload</option>\n        </select>\n    </div>\n    <div class="form-row" id="field-width">\n        <label><%= messages("form.width_chars") %></label>\n        <input type="text" name="field.width" />\n    </div>\n    <div class="form-row" id="field-height">\n        <label><%= messages("form.height_chars") %></label>\n        <input type="text" name="field.height" />\n    </div>\n    <div class="form-row">\n        <label><%= messages("mandatory") %></label>\n        <input type="checkbox" name="field.mandatory" />\n    </div>\n    <div class="form-row" id="field-values">\n        <label><%= messages("values") %></label>\n        <textarea name="field.values"></textarea>\n    </div>\n    <div class="form-row" id="field-defaultValue">\n        <label><%= messages("default_value") %></label>\n        <input type="text" name="field.defaultValue"/>\n    </div>\n    <div id="regexDiv">\n    <div class="form-row" id="field-defaultValue">\n        <label><%= messages("form.regex_code") %></label>\n        <input type="text" name="field.regex"/>\n    </div>\n    <div class="form-row" id="field-defaultValue">\n        <label><%= messages("form.regex_message") %></label>\n        <select id="language"></select> \n        <input type="text" name="field.regexMessage"/>\n    </div>\n    </div>\n    <div class="buttons-dlg">\n        <input id="saveAndAddButton" type="submit" value="<%= messages("save_add") %>" />\n        <input id="fieldSaveButton" type="button" value="<%= messages("save") %>" />\n        <input id="fieldCancelButton" type="button" value="<%= messages("cancel") %>" />\n    </div>\n</form>\n</div>\n\n<div id="formData-dialog" style="display:none" title="<%= messages("form.form_data") %>">\n<form id="formDataForm">\n    <div id="formData"></div>\n    <div class="buttons-dlg">\n        <input id="formDataSendButton" type="button" value="<%= messages("send") %>" />\n        <input id="formDataCancelButton" type="button" value="<%= messages("cancel") %>" />\n    </div>\n</form>\n</div>\n'}),define("view/plugins/FormView",["text!template/plugins/form.html"],function(e){function c(){i=t!="",Heiduc.initJSONRpc(h),$("#title").change(B),$("#language").change(z),$('input[name="field.regexMessage"]').change(U),$("#form").submit(function(){return P(),!1}),$("#cancelButton").click(H),$("#addFieldButton").click(g),$("#deleteFieldButton").click(O),$("#fieldType").change(w),$("#fieldForm").submit(function(){return M(),!1}),$("#fieldSaveButton").click(function(){b(!0)}),$("#fieldCancelButton").click(y),$('input[name="field.title"]').change(j),$("#deleteDataButton").click(K),$("#formDataCancelButton").click(function(){$("#formData-dialog").dialog("close")}),$("#formDataSendButton").click(G)}function h(){D(),d(),p()}function p(){Heiduc.jsonrpc.languageService.select(function(e){var t="";$.each(e.list,function(e,n){r[n.code]=n,t+='<option value="'+n.code+'">'+n.title+"</option>"}),$("#language").html(t)})}function d(){if(t=="")return;Heiduc.jsonrpc.fieldService.getByForm(function(e,t){o=e.list,v()},t)}function v(){var e='<table class="table table-striped"><tr><th></th><th>'+messages("title")+"</th><th>"+messages("name")+"</th><th>"+messages("type")+"</th><th></th></tr>";$.each(o,function(t,n){e+='<tr>				<td><input type="checkbox" name="item'+t+'" value="'+n.id+'"/></td>				<td><a class="fieldEdit" data-id="'+n.id+'">'+n.title+"</a></td>				<td>"+n.name+"</td>				<td>"+m(n.fieldType)+'</td>				<td><a class="fieldUp" data-index="'+t+'"><img src="/static/images/02_up.png"/></a>				    <a class="fieldDown" data-index="'+t+'"><img src="/static/images/02_down.png"/></a>				</td>				</tr>'}),$("#fieldsTable").html(e+"</table>"),$("#fieldsTable tr:even").addClass("even"),$("#fieldsTable .fieldEdit").click(function(){A($(this).attr("data-id"))}),$("#fieldsTable .fieldUp").click(function(){F($(this).attr("data-index"))}),$("#fieldsTable .fieldDown").click(function(){I($(this).attr("data-index"))})}function m(e){return e=="TEXT"?"Text":e=="CHECKBOX"?"Checkbox":e=="RADIO"?"Radiobox":e=="PASSWORD"?"Password":e=="LISTBOX"?"Listbox":e=="FILE"?"File upload":"undefined"}function g(){s=null,S(),$("#field-dialog").dialog("open")}function y(){$("#field-dialog").dialog("close")}function b(e){var t=x(),n=T(t);n.length==0?Heiduc.jsonrpc.fieldService.updateField(function(t,n){t.result=="success"?(e&&$("#field-dialog").dialog("close"),d()):C(t.messages.list)},t):C(n)}function w(){E()}function E(){var e=$('select[name="field.fieldType"]').val();e=="TEXT"&&($("#field-values").hide(),$("#field-height").show(),$("#field-width").show(),$("#field-defaultValue").show(),$("#regexDiv").show()),e=="LISTBOX"&&($("#field-values").show(),$("#field-height").hide(),$("#field-width").hide(),$("#field-defaultValue").hide(),$("#regexDiv").hide()),e=="CHECKBOX"&&($("#field-values").show(),$("#field-height").hide(),$("#field-width").hide(),$("#field-defaultValue").hide(),$("#regexDiv").hide()),e=="RADIO"&&($("#field-values").show(),$("#field-height").hide(),$("#field-width").hide(),$("#field-defaultValue").hide(),$("#regexDiv").hide()),e=="PASSWORD"&&($("#field-values").hide(),$("#field-height").hide(),$("#field-width").show(),$("#field-defaultValue").hide(),$("#regexDiv").hide()),e=="FILE"&&($("#field-values").hide(),$("#field-height").hide(),$("#field-width").hide(),$("#field-defaultValue").hide(),$("#regexDiv").hide())}function S(){s==null?(a={},$('input[name="field.name"]').val(""),$('input[name="field.title"]').val(""),$('select[name="field.fieldType"]').val("TEXT"),$('textarea[name="field.values"]').val(""),$('input[name="field.defaultValue"]').val(""),$('input[name="field.height"]').val("1"),$('input[name="field.width"]').val("20"),$('input[name="field.mandatory"]')[0].checked=!1,$('input[name="field.regex"]').val(""),$('input[name="field.regexMessage"]').val("")):($('input[name="field.name"]').val(s.name),$('input[name="field.title"]').val(s.title),$('select[name="field.fieldType"]').val(s.fieldType),$('textarea[name="field.values"]').val(s.values),$('input[name="field.defaultValue"]').val(s.defaultValue),$('input[name="field.height"]').val(s.height),$('input[name="field.width"]').val(s.width),$('input[name="field.mandatory"]')[0].checked=s.optional,$('input[name="field.regex"]').val(s.regex),$('input[name="field.regexMessage"]').val(R())),E(),L()}function x(){var e=s!=null?s.index:o==null?0:o.length;return Heiduc.javaMap({id:s!=null?String(s.id):null,formId:t,name:$('input[name="field.name"]').val(),title:$('input[name="field.title"]').val(),fieldType:$('select[name="field.fieldType"]').val(),values:$('textarea[name="field.values"]').val(),defaultValue:$('input[name="field.defaultValue"]').val(),height:$('input[name="field.height"]').val(),width:$('input[name="field.width"]').val(),index:String(e),regex:$('input[name="field.regex"]').val(),regexMessage:W(),mandatory:String($('input[name="field.mandatory"]:checked').size()>0)})}function T(e){var t=new Array;e.map.name==""&&t.push(messages("name_is_empty")),e.map.title==""&&t.push(messages("title_is_empty"));var n=Number(e.map.height);e.map.fieldType=="TEXT"&&n<=0&&t.push(messages("form.height_zero_error"));var r=Number(e.map.width);return e.map.fieldType=="TEXT"&&r<=0&&t.push(messages("form.width_zero_error")),t}function N(e){Heiduc.infoMessage("#field-messages",e)}function C(e){Heiduc.errorMessages("#field-messages",e)}function k(e){Heiduc.errorMessage("#field-messages",e)}function L(){$("#field-messages").html("")}function A(e){L(),Heiduc.jsonrpc.fieldService.getById(function(e){s=e,X(),S(),$("#field-dialog").dialog("open")},e)}function O(){var e=new Array;$("input:checked").each(function(){e.push(this.value)});if(e.length==0){Heiduc.info(messages("nothing_selected"));return}confirm(messages("are_you_sure"))&&Heiduc.jsonrpc.fieldService.remove(function(t){t.result=="success"?(Heiduc.info(e.length+" "+messages("form.success_field_delete")+"."),d()):Heiduc.showServiceMessages(t)},Heiduc.javaList(e))}function M(){b(!1),g()}function D(){Heiduc.jsonrpc.formService.getForm(function(e){n=e,V(),e!=null?($("#title").val(e.title),$("#name").val(e.name),$("#email").val(e.email),$("#letterSubject").val(e.letterSubject),$("#sendButtonTitle").val(e.sendButtonTitle),$("#resetButtonTitle").val(e.resetButtonTitle),$("#showResetButton").each(function(){this.checked=e.showResetButton}),$("#enableCaptcha").each(function(){this.checked=e.enableCaptcha}),$("#enableSave").each(function(){this.checked=e.enableSave}),$(".fieldsTab").show()):($("#title").val(""),$("#name").val(""),$("#email").val(""),$("#letterSubject").val(""),$("#sendButtonTitle").val(""),$("#resetButtonTitle").val(""),$("#showResetButton").each(function(){this.checked=!1}),$("#enableCaptcha").each(function(){this.checked=!1}),$("#enableSave").each(function(){this.checked=!1}),$(".fieldsTab").hide())},t)}function P(){var e=Heiduc.javaMap({id:t,title:$("#title").val(),name:$("#name").val(),email:$("#email").val(),letterSubject:$("#letterSubject").val(),sendButtonTitle:$("#sendButtonTitle").val(),resetButtonTitle:$("#resetButtonTitle").val(),showResetButton:String($("#showResetButton:checked").size()>0),enableCaptcha:String($("#enableCaptcha:checked").size()>0),enableSave:String($("#enableSave:checked").size()>0)});Heiduc.jsonrpc.formService.saveForm(function(e){e.result=="success"?i?location.href="#plugins/forms":(t=e.message,i=!0,h(),Heiduc.info(messages("form.success_create"))):Heiduc.showServiceMessages(e)},e)}function H(){location.href="#plugins/forms"}function B(){if(i)return;var e=$("#name").val(),t=$("#title").val();e==""&&$("#name").val(Heiduc.urlFromTitle(t))}function j(){if(s!=null)return;var e=$('input[name="field.name"]').val(),t=$('input[name="field.title"]').val();e==""&&$('input[name="field.name"]').val(Heiduc.urlFromTitle(t))}function F(e){e-1>=0&&(Heiduc.jsonrpc.fieldService.moveUp(function(e){},t,o[e].id),o[e].index--,o[e-1].index++,q(e,e-1),v())}function I(e){e+1<o.length&&(Heiduc.jsonrpc.fieldService.moveDown(function(e){},t,o[e].id),o[e+1].index--,o[e].index++,q(e,e+1),v())}function q(e,t){var n=o[t];o[t]=o[e],o[e]=n}function R(){return a[$("#language").val()]?a[$("#language").val()]:""}function U(){a[$("#language").val()]=$('input[name="field.regexMessage"]').val()}function z(){$('input[name="field.regexMessage"]').val(a[$("#language").val()])}function W(){var e="",t=0;return $.each(a,function(n,r){e+=(t++==0?"":"::")+n+r}),e}function X(){s.regexMessage?$.each(s.regexMessage.split("::"),function(e,t){var n=t.substr(0,2),r=t.substr(2);a[n]=r}):a={}}function V(){n==null?(f=[],J()):Heiduc.jsonrpc.formService.getFormData(function(e){f=e.list,J()},n.id)}function J(){var e='<table class="table table-striped"><tr><th></th><th>'+messages("ip_address")+"</th><th>"+messages("date")+"</th></tr>";$.each(f,function(t,n){e+='<tr><td><input type="checkbox" name="item'+t+'" value="'+n.id+'"/></td><td>'+n.ipAddress+"</td>"+'<td><a class="showForm" data-index="'+t+'">'+(new Date(n.modDate.time)).toLocaleString()+"</a></td></tr>"}),$("#dataTable").html(e+"</table>"),$("#dataTable tr:even").addClass("even"),$("#dataTable a.showForm").click(function(){Q($(this).attr("data-index"))})}function K(){var e=new Array;$("#dataTable input:checked").each(function(){e.push(this.value)});if(e.length==0){Heiduc.info(messages("nothing_selected"));return}confirm(messages("are_you_sure"))&&Heiduc.jsonrpc.formService.removeData(function(t){t.result=="success"?(Heiduc.info(e.length+" "+messages("form.success_records_delete")+"."),h()):Heiduc.showServiceMessages(t)},Heiduc.javaList(e))}function Q(e){l=e;var t=f[e],n='<table class="table table-striped"><tr><th>'+messages("name")+"</th><th>"+messages("value")+"</th></tr>";$.each(t.values.map,function(e,t){var r=t;if(r.indexOf("/file/form")==0){var i=r.split("/"),s=i[i.length-1];r='<a href="'+r+'">'+s+"</a>"}n+="<tr><td>"+e+"</td><td>"+r+"</td></tr>"}),$("#formData").html(n+"</table>"),$("#formData tr:even").addClass("even"),$("#formData-dialog").dialog("open")}function G(){confirm(messages("are_you_sure"))&&Heiduc.jsonrpc.formService.sendFormLetter(function(e){Heiduc.showServiceMessages(e)},f[l].id)}console.log("Loading FormView.js");var t="",n=null,r={},i=t!="",s=null,o=null,u=null,a={},f=null,l=0;return Backbone.View.extend({css:"/static/css/form.css",el:$("#content"),tmpl:_.template(e),render:function(){Heiduc.addCSSFile(this.css),this.el.html(this.tmpl({messages:messages})),c()},remove:function(){this.el.html(""),Heiduc.removeCSSFile(this.css)},setId:function(e){t=e}})}),define("text!template/plugins/seo-urls.html",[],function(){return'\n<div class="row">\n	<div class="col-lg-12">\n		<div class="panel panel-default">\n			<div class="panel-body">\n				<div class="row">\n					<div class="col-md-12">\n						<ul class="nav nav-tabs" id="tabs_a">\n							<li class="active"><a data-toggle="tab" href="#tab-1"><%= messages("plugins.seo_urls") %></a></li>\n						</ul>\n						<div class="tab-content" id="tabs_content_a">\n							<div id="tab-1" class="tab-pane fade in active">\n								<div id="urls"><img src="/static/images/ajax-loader.gif" /></div>\n\n								<div class="form-sep">\n								    <input class="btn btn-primary" id="addButton" type="button" value="<%= messages("add") %>" />\n								    <input class="btn btn-default" id="removeButton" type="button" value="<%= messages("remove") %>" />\n								</div>\n								\n							</div>\n						</div>\n					</div>\n				</div>\n			</div>\n		</div>\n	</div>\n</div>\n\n\n<div class="modal fade" id="url-dialog" tabindex="-1" role="dialog" aria-labelledby="" aria-hidden="true">\n  <div class="modal-dialog">\n    <div class="modal-content">\n      <div class="modal-header">\n        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>\n        <h4 class="modal-title"><%= messages("seo_urls.details") %></h4>\n      </div>\n      <div class="modal-body">\n      	\n      	<form id="seoForm">\n		    <div id="url-messages" class="messages"> </div>\n		    <div class="form-row">\n		        <label><%= messages("seo_urls.from_link") %></label>\n		        <input id="fromLink" type="text" />\n		    </div>\n		    <div class="form-row">\n		        <label><%= messages("seo_urls.to_link") %></label>\n		        <input id="toLink" type="text" />\n		    </div>\n		    <div class="modal-footer">\n		        <input id="saveAndAddButton" class="btn btn-default" type="button" value="<%= messages("save_add") %>" />\n		        <input id="saveDlgButton" class="btn btn-default" type="submit" value="<%= messages("save") %>" />\n		        <input id="cancelDlgButton" class="btn btn-default" type="button" value="<%= messages("cancel") %>" />\n		    </div>\n		 </form>\n      </div>	\n    </div>\n  </div>\n</div>\n'}),define("view/plugins/SeoUrlsView",["text!template/plugins/seo-urls.html"],function(e){function n(){Heiduc.initJSONRpc(r),$("#addButton").click(s),$("#removeButton").click(u),$("#saveAndAddButton").click(a),$("#seoForm").submit(function(){return l(!0),!1}),$("#cancelDlgButton").click(c)}function r(){Heiduc.jsonrpc.seoUrlService.select(function(e){var t='<table class="table table-striped"><tr><th></th><th>'+messages("from")+"</th><th>"+messages("to")+"</th></tr>";$.each(e.list,function(e,n){t+='<tr><td><input type="checkbox" value="'+n.id+'"/></td><td><a data-id="'+n.id+'">'+n.fromLink+"</a></td><td>"+n.toLink+"</td></tr>"}),$("#urls").html(t+"</table>"),$("#urls tr:even").addClass("even"),$("#urls a").click(function(){i($(this).attr("data-id"))})})}function i(e){h(),Heiduc.jsonrpc.seoUrlService.getById(function(e){t=e,o(),$("#url-dialog").modal({show:!0})},e)}function s(){t=null,o(),$("#url-dialog").modal({show:!0})}function o(){h(),t==null?($("#fromLink").val(""),$("#toLink").val("")):($("#fromLink").val(t.fromLink),$("#toLink").val(t.toLink))}function u(){var e=new Array;$("#urls input:checked").each(function(){e.push(this.value)});if(e.length==0){Heiduc.info(messages("nothing_selected"));return}confirm(messages("are_you_sure"))&&Heiduc.jsonrpc.seoUrlService.remove(function(e){Heiduc.showServiceMessages(e),r()},Heiduc.javaList(e))}function a(){l(!1,!0)}function f(e){var t=new Array;return e.fromLink==""&&t.push(messages("seo_urls.from_link_empty")),e.toLink==""&&t.push(messages("seo_urls.to_link_empty")),t}function l(e,n){var i={id:t!=null?String(t.id):"",fromLink:$("#fromLink").val(),toLink:$("#toLink").val()},o=f(i);o.length==0?Heiduc.jsonrpc.seoUrlService.save(function(t){t.result=="success"?(e&&$("#url-dialog").modal("hide"),r(),n&&s()):p(t.messages.list)},Heiduc.javaMap(i)):p(o)}function c(){$("#url-dialog").modal("hide")}function h(){$("#url-messages").html("")}function p(e){Heiduc.errorMessages("#url-messages",e)}console.log("Loading SeoUrlsView.js");var t=null;return Backbone.View.extend({css:"/static/css/form.css",el:$("#content"),render:function(){Heiduc.addCSSFile(this.css),this.el.html(_.template(e,{messages:messages})),n()},remove:function(){this.el.html(""),Heiduc.removeCSSFile(this.css)}})}),define("view/plugins/AddonsView",[],function(){function r(){}function i(){Heiduc.jsonrpc.pluginService.getByName(function(e){t=e;var n="/file/plugins/"+t.name+"/"+t.configURL;$("#addons").load(n)},e.split("/")[0])}console.log("Loading AddonsView.js");var e=null,t=null,n='<div id="addons" class="row"></div>';return Backbone.View.extend({el:$("#content"),render:function(){this.el.html(_.template(n,{messages:messages})),i()},remove:function(){this.el.html("")},setAddonsId:function(t){e=t}})}),define("text!template/config/config.html",[],function(){return'<div class="row">\n	<div class="col-lg-12">\n		<div class="panel panel-default">\n			<div class="panel-body">\n				<div class="row">\n					<div class="col-md-12">\n						<ul class="nav nav-tabs" id="tabs">\n							<li><a href="#config"><%= messages("config.title") %></a></li>\n						    <li><a href="#config/comments"><%= messages("comments") %></a></li>\n						    <li><a href="#config/languages"><%= messages("languages") %></a></li>\n						    <li><a href="#config/messages"><%= messages("message_bundle") %></a></li>\n						    <li><a href="#config/users"><%= messages("users") %></a>\n						    <li><a href="#config/groups"><%= messages("groups") %></a></li>\n						    <li><a href="#config/tags"><%= messages("tags") %></a></li>\n						    <li><a href="#config/attributes"><%= messages("attributes") %></a></li>\n						</ul>\n						<div class="tab-content" id="tabs_content_a">\n							<div id="tab-1" class="tab-pane fade in active">\n								\n							</div>\n						</div>\n					</div>\n					<div class="col-md-3">\n						\n					</div>\n				</div>\n			</div>\n		</div>\n	</div>\n</div>\n\n\n<div class="modal fade" id="import-dialog" tabindex="-1" role="dialog" aria-labelledby="" aria-hidden="true">\n  <div class="modal-dialog">\n    <div class="modal-content">\n      <div class="modal-header">\n        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>\n        <h4 class="modal-title"><%= messages("config.import_site") %></h4>\n      </div>\n      <div class="modal-body">\n      	<form id="upload" action="/cms/upload" method="post" enctype="multipart/form-data">\n		    <%= messages("file_upload") %>:\n		    <input type="hidden" name="fileType" value="import" />\n		    <input type="file" name="uploadFile" />\n		    <div class="modal-footer">\n		    	<input type="submit" class="btn btn-default" value="<%= messages("send") %>" />\n		        <input id="importCancelButton" data-dismiss="modal" class="btn btn-default" type="button" value="<%= messages("cancel") %>" />\n		    </div>    \n		</form>\n      </div>	\n    </div>\n  </div>\n</div>\n\n<div class="modal fade" id="afterUpload-dialog" tabindex="-1" role="dialog" aria-labelledby="" aria-hidden="true">\n  <div class="modal-dialog">\n    <div class="modal-content">\n      <div class="modal-header">\n        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>\n        <h4 class="modal-title"><%= messages("status_window") %></h4>\n      </div>\n      <div class="modal-body">\n      	<form id="okForm">\n		    <p class="message"></p>\n		    <div class="modal-footer">\n		        <input class="btn btn-default" id="okButton" type="submit" value="OK" />\n		    </div>\n		</form>\n      </div>	\n    </div>\n  </div>\n</div>\n\n<div class="modal fade" id="export-dialog" tabindex="-1" role="dialog" aria-labelledby="" aria-hidden="true">\n  <div class="modal-dialog">\n    <div class="modal-content">\n      <div class="modal-header">\n        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>\n        <h4 class="modal-title"><%= messages("export_window") %></h4>\n      </div>\n      <div class="modal-body">\n      	<form id="exportForm">\n		    <div class="form-row">\n		    <input type="radio" name="exportType" value="full" />\n		        <%= messages("config.full_export") %> <br/>\n		    <input type="radio" name="exportType" value="site" checked="checked"/>\n		        <%= messages("config.export_site") %> <br/>\n		    <input type="radio" name="exportType" value="resources"/>\n		        <%= messages("resources") %> <br/>\n		    </div>\n		    <div id="exportInfo" class="form-row"></div>    \n		    <div id="timer" class="form-row"></div>\n		    <div class="modal-footer">\n		        <input class="btn btn-default" id="exportDialogButton" type="submit" value="<%= messages("export") %>" />\n		        <input class="btn btn-default" data-dismiss="modal" id="exportCancelButton" type="button" value="<%= messages("cancel") %>" />\n		    </div>\n		</form>\n      </div>	\n    </div>\n  </div>\n</div>\n\n<div class="modal fade" id="stat-dialog" tabindex="-1" role="dialog" aria-labelledby="" aria-hidden="true">\n  <div class="modal-dialog">\n    <div class="modal-content">\n      <div class="modal-header">\n        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>\n        <h4 class="modal-title"><%= messages("stat") %></h4>\n      </div>\n      <div class="modal-body">\n      	<div class="form-row">\n	    	<label><%= messages("pages") %>:</label>\n	    	<span id="statPages"></span>\n	    </div>\n	    <div class="form-row">\n	    	<label><%= messages("stat.page_permissions") %>:</label>\n	    	<span id="statPagePermissions"></span>\n	    </div>\n	    <div class="form-row">\n	    	<label><%= messages("structures") %>:</label>\n	    	<span id="statStructures"></span>\n	    </div>\n	    <div class="form-row">\n	    	<label><%= messages("stat.structure_templates") %>:</label>\n	    	<span id="statStructureTemplates"></span>\n	    </div>\n	    <div class="form-row">\n	    	<label><%= messages("templates") %>:</label>\n	    	<span id="statTemplates"></span>\n	    </div>\n	    <div class="form-row">\n	    	<label><%= messages("folders") %>:</label>\n	    	<span id="statFolders"></span>\n	    </div>\n	    <div class="form-row">\n	    	<label><%= messages("stat.folder_permissions") %>:</label>\n	    	<span id="statFolderPermissions"></span>\n	    </div>\n	    <div class="form-row">\n	    	<label><%= messages("files") %>:</label>\n	    	<span id="statFiles"></span>\n	    </div>\n	    <div class="form-row">\n	    	<label><%= messages("languages") %>:</label>\n	    	<span id="statLanguages"></span>\n	    </div>\n	    <div class="form-row">\n	    	<label><%= messages("messages") %>:</label>\n	    	<span id="statMessages"></span>\n	    </div>\n	    <div class="form-row">\n	    	<label><%= messages("users") %>:</label>\n	    	<span id="statUsers"></span>\n	    </div>\n	    <div class="form-row">\n	    	<label><%= messages("groups") %>:</label>\n	    	<span id="statGroups"></span>\n	    </div>\n	    <div class="form-row">\n	    	<label><%= messages("tags") %>:</label>\n	    	<span id="statTags"></span>\n	    </div>\n	    <div class="form-row">\n	    	<label><b><%= messages("stat.total") %>:</b></label>\n	    	<span id="statTotal" style="font-weight:bold;"></span>\n	    </div>\n	    <div class="modal-footer">\n	        <input class="btn btn-default" id="statOKButton" data-dismiss="modal" type="button" value="OK" />\n	    </div>\n      </div>	\n    </div>\n  </div>\n</div>\n\n\n'}),define("text!template/config/index.html",[],function(){return'<form id="configForm">\n	\n	<div class="form-group">\n		<div class="row">\n			<div class="col-lg-12">\n        		<label><%= messages("site_domain") %></label>\n        		<input id="siteDomain" type="text"  class="form-control"/>\n			</div>\n		</div>\n	</div>\n	\n	<div class="form-group">\n		<div class="row">\n			<div class="col-lg-6">\n				<label></label>\n				<label class="checkbox-inline">\n				<input type="checkbox" id="enableCkeditor" value=""> <%= messages("config.enable_ckeditor") %>\n				</label>\n			</div>\n			<div class="col-lg-6">\n				<label></label>\n				<label class="checkbox-inline">\n					<input id="enableRecaptcha" type="checkbox"/> <%= messages("config.enable_recaptcha") %>\n				</label>\n			</div>\n		</div>\n	</div>\n	\n	<div id="recaptcha" class="form-group">\n		<div class="row">\n			<div class="col-lg-6">\n				<label><%= messages("config.recaptcha_public_key") %></label>\n        		<input id="recaptchaPublicKey" type="text" class="form-control" />\n			</div>\n			<div class="col-lg-6">\n        		<label><%= messages("config.recaptcha_private_key") %></label>\n        		<input id="recaptchaPrivateKey" type="text"  class="form-control"/>\n			</div>\n		</div>\n	</div>\n	\n	<div class="form-group">\n		<div class="row">\n			<div class="col-lg-12">\n				<label><%= messages("config.edit_extension") %></label>\n        		<input id="editExt" class="form-control" type="text" />\n			</div>\n		</div>\n	</div>\n	\n	<div class="form-group">\n		<div class="row">\n			<div class="col-lg-6">\n				<label><%= messages("config.login_url") %></label>\n        		<input id="siteUserLoginUrl" class="form-control" type="text" />\n			</div>\n			<div class="col-lg-6">\n        		<label><%= messages("config.404_url") %></label>\n        		<input id="site404Url" class="form-control" type="text" />\n			</div>\n		</div>\n	</div>\n	\n	<div class="form-group">\n		<div class="row">\n			<div class="col-lg-6">\n				<label><%= messages("profile.timezone") %></label>\n        		<select id="timezone" class="form-control"></select>\n			</div>\n			<div class="col-lg-6">\n        		<label><%= messages("page.select_language") %></label>\n        		<select id="language" class="form-control"></select>\n        		\n			</div>\n		</div>\n	</div>\n	\n	<div class="form-group">\n		<div class="row">\n			<div class="col-lg-6">\n				<label></label>\n				<label class="checkbox-inline">\n					<input type="checkbox" id="enablePicasa" value=""> <%= messages("config.enable_picasa") %>\n				</label>\n			</div>\n		</div>\n	</div>\n\n	<div id="picasa" class="form-group">\n		<div class="row">\n			<div class="col-lg-6">\n				<label>Picasa <%= messages("user_email") %></label>\n        		<input id="picasaUser" class="form-control" type="text" />\n			</div>\n			<div class="col-lg-6">\n        		<label>Picasa <%= messages("password") %></label>\n        		<input id="picasaPassword" class="form-control" type="password" />\n			</div>\n		</div>\n	</div>\n	\n	<div class="form-group">\n		<div class="row">\n			<div class="col-lg-6">\n        		<label>Google Analytics ID</label>\n        		<input id="googleAnalyticsId" type="text"  class="form-control"/>\n			</div>\n			<div class="col-lg-6">\n				<label><%= messages("config.db_version") %></label>\n				<span id="version" />\n			</div>\n		</div>\n	</div>\n	\n	<div class="form-group">\n		<div class="row">\n			<div class="col-lg-12">\n				<label><%= messages("config.site_owner_email") %></label>\n        		<input id="siteEmail" type="text"  class="form-control"/>\n			</div>\n		</div>\n	</div>\n	\n	<div class="form-sep">\n		<input id="saveButton" type="submit" class="btn btn-primary" value="<%= messages("save") %>"/>\n		<input id="exportButton" type="button" class="btn" value="<%= messages("export") %>"/>\n		<input id="importButton" type="button" class="btn" value="<%= messages("import") %>"/>\n		<input id="reindexButton" type="button" class="btn" value="<%= messages("config.create_search_index") %>"/>\n		<input id="resetButton" type="button" class="btn" value="<%= messages("reset") %>"/>\n		<input id="loadDefaultSiteButton" type="button" class="btn" value="<%= messages("config.load_default_site") %>"/>\n		<input id="cacheResetButton" type="button" class="btn" value="<%= messages("config.cache_reset") %>"/>\n		<input id="statButton" type="button" class="btn" value="<%= messages("stat") %>"/>\n	</div>\n	\n	\n</form>'}),define("view/config/IndexView",["text!template/config/index.html"],function(e){function f(){$("#upload").ajaxForm(g),Heiduc.initJSONRpc(l),$("#enableRecaptcha").click(v),$("#configForm").submit(function(){return x(),!1}),$("#exportButton").click(T),$("#importButton").click(y),$("#importCancelButton").click(b),$("#resetButton").click(A),$("#cacheResetButton").click(M),$("#reindexButton").click(O),$("#loadDefaultSiteButton").click(D),$("#okForm").submit(function(){return w(),!1}),$("#exportForm").submit(function(){return C(),!1}),$("#exportCancelButton").click(N),$("ul.nav-tabs li:nth-child(1)").addClass("active"),$("#enablePicasa").click(m),$("#statButton").click(P)}function l(){E(),c(),h()}function c(){Heiduc.jsonrpc.userService.getTimezones(function(e){u=e.list,p()})}function h(){Heiduc.jsonrpc.languageService.select(function(e){a=e.list,d()})}function p(){var e="";$.each(u,function(t,n){e+='<option value="'+n+'">'+n+"</option>"}),$("#timezone").html(e),$("#timezone").val(t.defaultTimezone)}function d(){var e="";$.each(a,function(t,n){e+='<option value="'+n.code+'" '+">"+n.title+"</option>"}),$("#language").html(e),$("#language").val(t.defaultLanguage)}function v(){var e=$("#enableRecaptcha:checked").size()>0;e?$("#recaptcha").show():$("#recaptcha").hide()}function m(){var e=$("#enablePicasa:checked").size()>0;e?$("#picasa").show():$("#picasa").hide()}function g(e){var t=e.split("::"),n=t[1],r=t[2];n=="success"?r=messages("config.saved_for_import"):r=messages("error")+". "+r,$("#import-dialog").modal("hide"),$("#afterUpload-dialog .message").text(r),$("#afterUpload-dialog").modal({show:!0})}function y(){$("#import-dialog").modal({show:!0})}function b(){$("#import-dialog").modal("hide")}function w(){$("#afterUpload-dialog").modal("hide"),l()}function E(){Heiduc.jsonrpc.configService.getConfig(function(e){t=e,S()})}function S(){$("#version").html(t.version),$("#googleAnalyticsId").val(t.googleAnalyticsId),$("#siteEmail").val(t.siteEmail),$("#siteDomain").val(t.siteDomain),$("#enableRecaptcha").each(function(){this.checked=t.enableRecaptcha}),$("#recaptchaPublicKey").val(t.recaptchaPublicKey),$("#recaptchaPrivateKey").val(t.recaptchaPrivateKey),v(),$("#editExt").val(t.editExt),$("#siteUserLoginUrl").val(t.siteUserLoginUrl),$("#site404Url").val(t.site404Url),$("#enablePicasa").each(function(){this.checked=t.enablePicasa}),$("#enableCkeditor").each(function(){this.checked=t.enableCkeditor}),$("#picasaUser").val(t.picasaUser),$("#picasaPassword").val(t.picasaPassword),m()}function x(){var e=Heiduc.javaMap({googleAnalyticsId:$("#googleAnalyticsId").val(),siteEmail:$("#siteEmail").val(),siteDomain:$("#siteDomain").val(),enableRecaptcha:String($("#enableRecaptcha:checked").size()>0),recaptchaPublicKey:$("#recaptchaPublicKey").val(),recaptchaPrivateKey:$("#recaptchaPrivateKey").val(),enablePicasa:String($("#enablePicasa:checked").size()>0),enableCkeditor:String($("#enableCkeditor:checked").size()>0),picasaUser:$("#picasaUser").val(),picasaPassword:$("#picasaPassword").val(),editExt:$("#editExt").val(),defaultTimezone:$("#timezone").val(),defaultLanguage:$("#language").val(),siteUserLoginUrl:$("#siteUserLoginUrl").val(),site404Url:$("#site404Url").val()});Heiduc.jsonrpc.configService.saveConfig(function(e){Heiduc.showServiceMessages(e)},e)}function T(){$("#export-dialog").modal({show:!0})}function N(){clearInterval(n),clearInterval(r)}function C(){$("#exportDialogButton").attr("disabled",!0),i=0,L(),o=$("input[name=exportType]:checked").val(),Heiduc.jsonrpc.configService.startExportTask(function(e){e.result=="success"?(s=e.message,Heiduc.info(messages("creating_export_file")),n=setInterval(k,1e4),r=setInterval(L,1e3)):Heiduc.showServiceMessages(e)},o)}function k(){Heiduc.jsonrpc.configService.isExportTaskFinished(function(e){e&&(clearInterval(n),clearInterval(r),$("#export-dialog").modal("hide"),$("#exportDialogButton").attr("disabled",!1),location.href="/file/tmp/"+s)},o)}function L(){$("#timer").html(i++ +" sec.")}function A(){confirm(messages("config.reset_warning1"))&&confirm(messages("config.reset_warning2"))&&Heiduc.jsonrpc.configService.reset(function(e){Heiduc.showServiceMessages(e),e.result=="success"&&(location.href="/")})}function O(){confirm(messages("are_you_sure"))&&Heiduc.jsonrpc.configService.reindex(function(e){Heiduc.showServiceMessages(e)})}function M(){confirm(messages("are_you_sure"))&&Heiduc.jsonrpc.configService.cacheReset(function(e){Heiduc.showServiceMessages(e)})}function D(){confirm(messages("are_you_sure"))&&Heiduc.jsonrpc.configService.loadDefaultSite(function(e){Heiduc.showServiceMessages(e)})}function P(){Heiduc.jsonrpc.configService.getSiteStat(function(e){$("#statPages").text(e.pages),$("#statPagePermissions").text(e.pagePermissions),$("#statStructures").text(e.structures),$("#statStructureTemplates").text(e.structureTemplates),$("#statTemplates").text(e.templates),$("#statFolders").text(e.folders),$("#statFolderPermissions").text(e.folderPermissions),$("#statFiles").text(e.files),$("#statLanguages").text(e.languages),$("#statMessages").text(e.messages),$("#statUsers").text(e.users),$("#statGroups").text(e.groups),$("#statTags").text(e.tags),$("#statTotal").text(e.total),$("#stat-dialog").modal({show:!0})})}function H(){}console.log("Loading IndexView.js");var t="",n=null,r=null,i=0,s=null,o=null,u=null,a=null;return Backbone.View.extend({el:$("#tab-1"),render:function(){this.el=$("#tab-1"),this.el.html(_.template(e,{messages:messages})),f()},remove:function(){this.el.html("")}})}),define("text!template/config/comments.html",[],function(){return'\n<form id="commentsForm">\n	\n	<div class="form-group">\n		<div class="row">\n			<div class="col-lg-12">\n        		<label><%= messages("config.comments_email") %></label>\n        		<input id="commentsEmail" type="text"  class="form-control"/>\n			</div>\n		</div>\n		<div class="row">\n			<div class="col-lg-12">\n        		<label><%= messages("config.comments_template") %></label>\n        		<textarea id="commentsTemplate" class="form-control" cols="80" rows="20"></textarea>\n			</div>\n		</div>\n	</div>\n	\n	<div class="form-sep">\n		<input id="commentsSaveButton" type="submit" class="btn btn-primary" value="<%= messages("save") %>"/>\n		<button id="restoreButton" class="btn"><%= messages("restore_default") %></button>\n		</div>\n	</div>\n\n</form>\n\n\n'}),define("view/config/CommentsView",["text!template/config/comments.html","cm","cm-css","cm-js","cm-xml","cm-html"],function(e){function r(){Heiduc.initJSONRpc(i),$("#commentsForm").submit(function(){return u(),!1}),$("#restoreButton").click(a),$("ul.nav-tabs li:nth-child(2)").addClass("active")}function i(){s()}function s(){Heiduc.jsonrpc.configService.getConfig(function(e){t=e,o()})}function o(){$("#commentsEmail").val(t.commentsEmail),$("#commentsTemplate").val(t.commentsTemplate),n=CodeMirror.fromTextArea(document.getElementById("commentsTemplate"),{lineNumbers:!0,theme:"eclipse",mode:"htmlmixed"}),n.focus(),$(n.getScrollerElement()).css("height",.6*$(window).height()+"px").css("border","1px solid silver"),n.refresh()}function u(){n.save();var e=Heiduc.javaMap({commentsEmail:$("#commentsEmail").val(),commentsTemplate:$("#commentsTemplate").val()});Heiduc.jsonrpc.configService.saveConfig(function(e){Heiduc.showServiceMessages(e)},e)}function a(){Heiduc.jsonrpc.configService.restoreCommentsTemplate(function(e){Heiduc.showServiceMessages(e),s()})}console.log("Loading CommentsView.js");var t="",n=null;return Backbone.View.extend({css:["/static/js/codemirror/codemirror.css","/static/js/codemirror/eclipse.css"],el:$("#tab-1"),render:function(){Heiduc.addCSSFiles(this.css),this.el=$("#tab-1"),this.el.html(_.template(e,{messages:messages})),r()},remove:function(){this.el.html(""),Heiduc.removeCSSFiles(this.css)}})}),define("text!template/config/languages.html",[],function(){return'<div id="languages"> </div>\n<div class="form-sep">\n    <input class="btn btn-primary" id="addLanguageButton" type="button" value="<%= messages("add") %>" />\n    <input class="btn btn-default" id="removeLanguageButton" type="button" value="<%= messages("remove") %>" />\n</div>\n\n<div class="modal fade" id="language-dialog" tabindex="-1" role="dialog" aria-labelledby="" aria-hidden="true">\n  <div class="modal-dialog">\n    <div class="modal-content">\n      <div class="modal-header">\n        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>\n        <h4 class="modal-title"><%= messages("config.site_language") %></h4>\n      </div>\n      <div class="modal-body">\n      	<form id="languageForm">\n		    <div id="pageMessages"></div>\n		    <div id="languageSelection" style="padding-bottom: 10px;">\n        <input id="selectFromListRadio" type="radio" name="select" \n            checked="checked" /> <%= messages("select_from_list") %>\n        <input id="notInListRadio" type="radio" name="select" />\n            <%= messages("config.not_in_list") %> \n    </div>        \n    <div id="listed-language">\n        <select id="selectLanguage"></select>\n    </div>\n    <div id="not-listed-language" style="display:none">\n    <div class="form-row">\n        <label><%= messages("language") %> <a href="http://ftp.ics.uci.edu/pub/ietf/http/related/iso639.txt">iso639</a> 2 letter code</label>\n        <input id="languageCode" type="text"/>\n    </div>\n    <div class="form-row">\n        <label><%= messages("title") %></label>\n        <input id="languageTitle" type="text"/>\n    </div>\n    </div>\n    <div class="modal-footer">\n        <input class="btn btn-primary" id="languageSaveButton" type="submit" value="<%= messages("save") %>" />\n        <input class="btn btn-default" id="languageCancelButton" data-dismiss="modal" type="button" value="<%= messages("cancel") %>" />\n    </div>\n  </form>\n      </div>	\n    </div>\n  </div>\n</div>\n\n'}),define("view/config/LanguagesView",["text!template/config/languages.html"],function(e){function r(){Heiduc.initJSONRpc(i),m(),$("#selectFromListRadio").click(function(){g(!0)}),$("#notInListRadio").click(function(){g(!1)}),$("#languageForm").submit(function(){return c(),!1}),$("#selectLanguage").change(y),$("#languageCancelButton").click(h),$("#addLanguageButton").click(s),$("#removeLanguageButton").click(o),$("ul.nav-tabs li:nth-child(3)").addClass("active")}function i(){p()}function s(){t=null,$("#language-dialog").modal({show:!0}),$("#languageSelection").show(),$("#listed-language").show(),$("#not-listed-language").hide(),$("#language-dialog .messages").html("")}function o(){var e=[];$("#languages input:checked").each(function(){e.push(this.value)});if(e.length==0){Heiduc.info(messages("nothing_selected"));return}confirm(messages("are_you_sure"))&&Heiduc.jsonrpc.languageService.remove(function(e){Heiduc.info(e.message),p()},Heiduc.javaList(e))}function u(e){Heiduc.infoMessage("#language-dialog .messages",e)}function a(e){Heiduc.errorMessage("#language-dialog .messages",e)}function f(e){Heiduc.errorMessages("#language-dialog .messages",e)}function l(e){var t=[];return e.code==""&&t.push(messages("config.code_is_empty")),e.title==""&&t.push(messages("title_is_empty")),t}function c(){var e={id:t!=null?String(t.id):"",code:$("#languageCode").val(),title:$("#languageTitle").val()},n=l(e);n.length==0?Heiduc.jsonrpc.languageService.save(function(e){e.result=="success"?($("#language-dialog").dialog("close"),p()):f(e.messages.list)},Heiduc.javaMap(e)):f(n)}function h(){}function p(){Heiduc.jsonrpc.languageService.select(function(e){n=e.list;var t='<table class="table table-striped"><tr><th></th><th>'+messages("code")+"</th><th>"+messages("title")+"</th></tr>";$.each(e.list,function(e,n){t+='<tr><td><input type="checkbox" value="'+n.id+'"/></td><td>'+n.code+'</td><td>	                <a data-id="'+n.id+'">'+n.title+"</a></td></tr>"}),$("#languages").html(t+"</table>"),$("#languages tr:even").addClass("even"),$("#languages a").click(function(){var e=$(this).attr("data-id");e&&d(e)})})}function d(e){Heiduc.jsonrpc.languageService.getById(function(e){t=e,$("#languageCode").val(e.code),$("#languageTitle").val(e.title),$("#language-dialog").dialog("open"),$("#languageSelection").hide(),$("#listed-language").hide(),$("#not-listed-language").show(),$("#language-dialog .messages").html("")},e)}function m(){var e="";for(var t in v)e+='<option value="'+t+'">'+v[t]+"</option>\n";$("#selectLanguage").html(e),$("#selectLanguage").val("ru"),y()}function g(e){e?($("#listed-language").show(),$("#not-listed-language").hide()):($("#listed-language").hide(),$("#not-listed-language").show())}function y(){var e=$("#selectLanguage").val();$("#languageCode").val(e),$("#languageTitle").val(v[e])}console.log("Loading LanguagesView.js");var t=null,n=null,v={aa:"Afar",ab:"Abkhazian",af:"Afrikaans",am:"Amharic",ar:"Arabic",as:"Assamese",ay:"Aymara",az:"Azerbaijani",ba:"Bashkir",be:"Byelorussian",bg:"Bulgarian",bh:"Bihari",bi:"Bislama",bn:"Bengali; Bangla",bo:"Tibetan",br:"Breton",bs:"Bosnian",ca:"Catalan",co:"Corsican",cs:"Czech",cy:"Welsh",da:"Danish",de:"German",dz:"Bhutani",el:"Greek",en:"English",eo:"Esperanto",es:"Spanish",et:"Estonian",eu:"Basque",fa:"Persian",fi:"Finnish",fj:"Fiji",fo:"Faroese",fr:"French",fy:"Frisian",ga:"Irish",gd:"Scots Gaelic",gl:"Galician",gn:"Guarani",gu:"Gujarati",ha:"Hausa",he:"Hebrew (formerly iw)",hi:"Hindi",hr:"Croatian",hu:"Hungarian",hy:"Armenian",ia:"Interlingua",id:"Indonesian (formerly in)",ie:"Interlingue",ik:"Inupiak",is:"Icelandic",it:"Italian",iu:"Inuktitut",ja:"Japanese",jw:"Javanese",ka:"Georgian",kk:"Kazakh",kl:"Greenlandic",km:"Cambodian",kn:"Kannada",ko:"Korean",ks:"Kashmiri",ku:"Kurdish",ky:"Kirghiz",la:"Latin",ln:"Lingala",lo:"Laothian",lt:"Lithuanian",lv:"Latvian, Lettish",mg:"Malagasy",mi:"Maori",mk:"Macedonian",ml:"Malayalam",mn:"Mongolian",mo:"Moldavian",mr:"Marathi",ms:"Malay",mt:"Maltese",my:"Burmese",na:"Nauru",ne:"Nepali",nl:"Dutch",no:"Norwegian",oc:"Occitan",om:"(Afan) Oromo",or:"Oriya",pa:"Punjabi",pl:"Polish",ps:"Pashto, Pushto",pt:"Portuguese",qu:"Quechua",rm:"Rhaeto-Romance",rn:"Kirundi",ro:"Romanian",ru:"Russian",rw:"Kinyarwanda",sa:"Sanskrit",sd:"Sindhi",sg:"Sangho",sh:"Serbo-Croatian",si:"Sinhalese",sk:"Slovak",sl:"Slovenian",sm:"Samoan",sn:"Shona",so:"Somali",sq:"Albanian",sr:"Serbian",ss:"Siswati",st:"Sesotho",su:"Sundanese",sv:"Swedish",sw:"Swahili",ta:"Tamil",te:"Telugu",tg:"Tajik",th:"Thai",ti:"Tigrinya",tk:"Turkmen",tl:"Tagalog",tn:"Setswana",to:"Tonga",tr:"Turkish",ts:"Tsonga",tt:"Tatar",tw:"Twi",ug:"Uighur",uk:"Ukrainian",ur:"Urdu",uz:"Uzbek",vi:"Vietnamese",vo:"Volapuk",wo:"Wolof",xh:"Xhosa",yi:"Yiddish (formerly ji)",yo:"Yoruba",za:"Zhuang","zh-CN":"Simplified Chinese","zh-TW":"Traditional Chinese",zu:"Zulu"};return Backbone.View.extend({el:$("#tab-1"),render:function(){this.el=$("#tab-1"),this.el.html(_.template(e,{messages:messages})),r()},remove:function(){this.el.html("")}})}),define("text!template/config/messages.html",[],function(){return'\n<div id="messageBundle"> </div>\n<div class="form-sep">\n    <input class="btn btn-primary" id="addMessageButton" type="button" value="<%= messages("add") %>" />\n    <input class="btn btn-default" id="removeMessageButton" type="button" value="<%= messages("remove") %>" />\n</div>\n\n<div class="modal fade" id="message-dialog" tabindex="-1" role="dialog" aria-labelledby="" aria-hidden="true">\n  <div class="modal-dialog">\n    <div class="modal-content">\n      <div class="modal-header">\n        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>\n        <h4 class="modal-title"><%= messages("config.localized_message") %></h4>\n      </div>\n      <div class="modal-body">\n      	<form id="messageForm">\n		    <div class="messages"> </div>\n		    <div class="form-row">\n		        <label><%= messages("config.message_code") %></label>\n		        <input id="messageCode" type="text"/>\n		    </div>\n		    <div id="messagesInput"> </div>\n		    <div class="modal-footer">\n		        <input class="btn btn-primary" id="saveMessageDlgButton" type="submit" value="<%= messages("save") %>" />\n		        <input class="btn btn-default" data-dismiss="modal" id="cancelMessageDlgButton" type="button" value="<%= messages("cancel") %>" />\n		    </div>\n		  </form>\n      </div>	\n    </div>\n  </div>\n</div>'}),define("view/config/MessagesView",["text!template/config/messages.html"],function(e){function n(){Heiduc.initJSONRpc(r),$("#addMessageButton").click(s),$("#removeMessageButton").click(o),$("#messageForm").submit(function(){return f(),!1}),$("#cancelMessageDlgButton").click(l),$("ul.nav-tabs li:nth-child(4)").addClass("active")}function r(){i()}function i(){Heiduc.jsonrpc.languageService.select(function(e){t=e.list,u()})}function s(){p();var e="";$.each(t,function(t,n){e+='<div class="form-row"><label>'+n.title+'</label><input type="text" id="message_'+n.code+'" /></div>'}),$("#messageCode").val(""),$("#messagesInput").html(e),$("#message-dialog").modal({show:!0})}function o(){var e=[];$("#messageBundle input:checked").each(function(){e.push(this.value)});if(e.length==0){Heiduc.info(messages("nothing_selected"));return}confirm(messages("are_you_sure"))&&Heiduc.jsonrpc.messageService.remove(function(e){Heiduc.info(e.message),u()},Heiduc.javaList(e))}function u(){Heiduc.jsonrpc.messageService.select(function(e){var n='<table class="table table-striped"><tr><th></th><th>'+messages("code")+"</th>";$.each(t,function(e,t){n+="<th>"+t.title+"</th>"}),n+="</tr>",$.each(e.list,function(e,r){n+='<tr><td><input type="checkbox" value="'+r.code+'"/></td>	                <td><a data-code="'+r.code+'">'+r.code+"</a></td>",$.each(t,function(e,t){n+="<td>"+r.values.map[t.code]+"</td>"}),n+="</tr>"}),$("#messageBundle").html(n+"</table>"),$("#messageBundle tr:even").addClass("even"),$("#messageBundle td a").click(function(){var e=$(this).attr("data-code");e&&a(e)})})}function a(e){Heiduc.jsonrpc.messageService.selectByCode(function(t){s(),$("#messageCode").val(e),$.each(t.list,function(e,t){$("#message_"+t.languageCode).val(t.value)})},e)}function f(){var e={code:$("#messageCode").val()};$.each(t,function(t,n){e[n.code]=$("#message_"+n.code).val()}),Heiduc.jsonrpc.messageService.save(function(e){e.result=="success"?u():h(e.messages.list)},Heiduc.javaMap(e))}function l(){}function c(e){Heiduc.errorMessage("#message-dialog .messages",e)}function h(e){Heiduc.errorMessages("#message-dialog .messages",e)}function p(){$("#message-dialog .messages").html()}console.log("Loading MessagesView.js");var t=null;return Backbone.View.extend({el:$("#tab-1"),render:function(){this.el=$("#tab-1"),this.el.html(_.template(e,{messages:messages})),n()},remove:function(){this.el.html("")}})}),define("text!template/config/users.html",[],function(){return'<div id="users"> </div>\n<div class="form-sep">\n    <input class="btn btn-primary" id="addUserButton" type="button" value="<%= messages("add") %>" />\n    <input class="btn btn-default" id="removeUserButton" type="button" value="<%= messages("remove") %>" />\n</div>\n\n<div class="modal fade" id="user-dialog" tabindex="-1" role="dialog" aria-labelledby="" aria-hidden="true">\n  <div class="modal-dialog">\n    <div class="modal-content">\n      <div class="modal-header">\n        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>\n        <h4 class="modal-title"><%= messages("config.user_details") %></h4>\n      </div>\n      <div class="modal-body">\n      	<form id="userForm">\n    <div class="messages"> </div>\n    <div class="form-row">\n        <label><%= messages("user_name") %></label>\n        <input id="userName" type="text"/>\n    </div>\n    <div class="form-row">\n        <label><%= messages("user_email") %></label>\n        <input id="userEmail" type="text"/>\n    </div>\n    <div class="form-row">\n        <label><%= messages("user_role") %></label>\n        <select id="userRole">\n            <option value="SITE_USER" selected="selected"><%= messages("site_user") %></option>\n            <option value="USER"><%= messages("user") %></option>\n            <option value="ADMIN"><%= messages("administrator") %></option>\n        </select>\n    </div>\n    <div class="form-row">\n        <label><%= messages("password") %></label>\n        <input id="userPassword1" type="password"/>\n    </div>\n    <div class="form-row">\n        <label><%= messages("retype_password") %></label>\n        <input id="userPassword2" type="password"/>\n    </div>\n    <div class="form-row">\n         <label><%= messages("profile.timezone") %></label>\n         <select id="timezone"></select>\n    </div>    \n    <div class="modal-footer">\n        <input class="btn btn-primary" id="userSaveDlgButton" type="submit" value="<%= messages("save") %>" />\n        <input class="btn btn-default" id="userDisableDlgButton" type="button" value="<%= messages("disable") %>" />\n        <input class="btn btn-default" data-dismiss="modal" id="userCancelDlgButton" type="button" value="<%= messages("cancel") %>" />\n    </div>\n  </form>\n      </div>	\n    </div>\n  </div>\n</div>\n\n'}),define("view/config/UsersView",["text!template/config/users.html"],function(e){function r(){Heiduc.initJSONRpc(i),$("#addUserButton").click(s),$("#removeUserButton").click(o),$("#userForm").submit(function(){return h(),!1}),$("#userCancelDlgButton").click(p),$("#userDisableDlgButton").click(m),$("ul.nav-tabs li:nth-child(5)").addClass("active")}function i(){Heiduc.jsonrpc.userService.getTimezones(function(e){timezones=e.list,g(),u()})}function s(){t=null,l(),$("#user-dialog").modal({show:!0})}function o(){var e=[];$("#users input:checked").each(function(){e.push(String(this.value))});if(e.length==0){Heiduc.info(messages("nothing_selected"));return}confirm(messages("are_you_sure"))&&Heiduc.jsonrpc.userService.remove(function(e){Heiduc.info(e.message),u()},Heiduc.javaList(e))}function u(){Heiduc.jsonrpc.userService.select(function(e){var t='<table class="table table-striped"><tr><th></th><th>'+messages("name")+"</th><th>"+messages("email")+"</th><th>"+messages("role")+"</th><th>"+messages("access")+"</th></tr>";$.each(e.list,function(e,n){var r=n.disabled?messages("disabled"):messages("enabled");t+='<tr><td><input type="checkbox" value="'+n.id+'"/></td><td>'+n.name+'</td><td>	                <a data-id="'+n.id+'">'+n.email+"</a></td><td>"+a(n.role)+"</td>"+"<td>"+r+"</td></tr>"}),$("#users").html(t+"</table>"),$("#users tr:even").addClass("even"),$("#users a").click(function(){var e=$(this).attr("data-id");e&&f(e)})})}function a(e){if(e=="ADMIN")return messages("administrator");if(e=="USER")return messages("user");if(e=="SITE_USER")return messages("site_user")}function f(e){Heiduc.jsonrpc.userService.getById(function(e){t=e,l(),$("#user-dialog").modal({show:!0})},e)}function l(){t==null?($("#userName").val(""),$("#userEmail").val(""),$("#userEmail").removeAttr("disabled"),$("#userRole").val(""),$("#userDisableDlgButton").hide()):($("#userName").val(t.name),$("#userEmail").val(t.email),$("#userEmail").attr("disabled",!0),$("#userRole").val(t.roleString),$("#timezone").val(t.timezone),$("#userDisableDlgButton").val(t.disabled?messages("enable"):messages("disable")).show()),$("#userPassword1").val(""),$("#userPassword2").val(""),$("#user-dialog .messages").html("")}function c(e){var t=[];return e.email==""&&t.push(messages("email_is_empty")),e.password1!=e.password2&&t.push(messages("config.passwords_dont_match")),t}function h(){var e={id:t!=null?String(t.id):"",name:$("#userName").val(),email:$("#userEmail").val(),role:$("#userRole").val(),timezone:$("#timezone").val(),password:$("#userPassword1").val(),password1:$("#userPassword1").val(),password2:$("#userPassword2").val()},n=c(e);n.length==0?Heiduc.jsonrpc.userService.save(function(e){e.result=="success"?(Heiduc.info(e.message),u()):v(e.messages.list)},Heiduc.javaMap(e)):v(n)}function p(){}function d(e){Heiduc.errorMessage("#user-dialog .messages",e)}function v(e){Heiduc.errorMessages("#user-dialog .messages",e)}function m(){Heiduc.jsonrpc.userService.disable(function(e){Heiduc.showServiceMessages(e),u()},t.id,!t.disabled)}function g(){var e="";$.each(timezones,function(t,n){e+='<option value="'+n+'">'+n+"</option>"}),$("#timezone").html(e)}console.log("Loading UsersView.js");var t=null,n=null;return Backbone.View.extend({el:$("#tab-1"),render:function(){this.el=$("#tab-1"),this.el.html(_.template(e,{messages:messages})),r()},remove:function(){this.el.html("")}})}),define("text!template/config/groups.html",[],function(){return'\n<div id="groups"> </div>\n<div class="form-sep">\n    <input class="btn btn-primary" id="addGroupButton" type="button" value="<%= messages("add") %>" />\n    <input class="btn btn-default" id="removeGroupButton" type="button" value="<%= messages("remove") %>" />\n</div>\n\n<div class="modal fade" id="group-dialog" tabindex="-1" role="dialog" aria-labelledby="" aria-hidden="true">\n  <div class="modal-dialog">\n    <div class="modal-content">\n      <div class="modal-header">\n        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>\n        <h4 class="modal-title"><%= messages("config.group_details") %></h4>\n      </div>\n      <div class="modal-body">\n      	<form id="groupForm">\n		    <div class="messages"> </div>\n		    <div class="form-row">\n		        <label><%= messages("config.group_name") %></label>\n		        <input id="groupName" type="text"/>\n		    </div>\n		    <div class="modal-footer">\n		        <input class="btn btn-primary" id="groupSaveDlgButton" type="submit" value="<%= messages("save") %>" />\n		        <input class="btn btn-default" data-dismiss="modal" id="groupCancelDlgButton" type="button" value="<%= messages("cancel") %>" />\n		    </div>\n		  </form>\n      </div>	\n    </div>\n  </div>\n</div>\n\n\n<div class="modal fade" id="user-group-dialog" tabindex="-1" role="dialog" aria-labelledby="" aria-hidden="true">\n  <div class="modal-dialog">\n    <div class="modal-content">\n      <div class="modal-header">\n        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>\n        <h4 class="modal-title"><%= messages("config.group_users") %></h4>\n      </div>\n      <div class="modal-body">\n      	<form id="userGroupForm">\n		    <div id="groupUsers"> </div>\n		    <div class="modal-footer">\n		        <input class="btn btn-primary" id="userGroupSaveDlgButton" type="submit" value="<%= messages("save") %>" />\n		        <input class="btn btn-default" data-dismiss="modal" id="userGroupCancelDlgButton" type="button" value="<%= messages("cancel") %>" />\n		    </div>\n		  </form>\n      </div>	\n    </div>\n  </div>\n</div>\n\n'}),define("view/config/GroupsView",["text!template/config/groups.html"],function(e){function i(){Heiduc.initJSONRpc(s),$("#addGroupButton").click(u),$("#removeGroupButton").click(a),$("#groupForm").submit(function(){return h(),!1}),$("#groupCancelDlgButton").click(p),$("#userGroupForm").submit(function(){return y(),!1}),$("#userGroupCancelDlgButton").click(g),$("ul.nav-tabs li:nth-child(6)").addClass("active")}function s(){o()}function o(){Heiduc.jsonrpc.groupService.select(function(e){n=Heiduc.idMap(e.list);var t='<table class="table table-striped"><tr><th></th><th>'+messages("name")+"</th><th>"+messages("users")+"</th></tr>";$.each(e.list,function(e,n){if(n.name=="guests")return;var r=messages("add_users");n.users.list.length>0&&(r="",$.each(n.users.list,function(e,t){r+=(e==0?"":", ")+t.name}));var i='<a class="groupEdit" data-id="'+n.id+'">'+n.name+"</a>",s='<a class="userGroupEdit" data-id="'+n.id+'">'+r+"</a>";t+='<tr><td><input type="checkbox" value="'+n.id+'"/></td><td>'+i+"</td><td>"+s+"</td></tr>"}),$("#groups").html(t+"</table>"),$("#groups tr:even").addClass("even"),$("#groups .groupEdit").click(function(){f($(this).attr("data-id"))}),$("#groups .userGroupEdit").click(function(){m($(this).attr("data-id"))})})}function u(){t=null,l(),$("#group-dialog").modal({show:!0})}function a(){var e=[];$("#groups input:checked").each(function(){e.push(String(this.value))});if(e.length==0){Heiduc.info(messages("nothing_selected"));return}confirm(messages("are_you_sure"))&&Heiduc.jsonrpc.groupService.remove(function(e){Heiduc.info(e.message),o()},Heiduc.javaList(e))}function f(e){Heiduc.jsonrpc.groupService.getById(function(e){t=e,l(),$("#group-dialog").modal({show:!0})},e)}function l(){t==null?$("#groupName").val(""):$("#groupName").val(t.name),$("#group-dialog .messages").html("")}function c(e){var t=[];return e.name==""&&t.push(messages("name_is_empty")),t}function h(){var e={id:t!=null?String(t.id):"",name:$("#groupName").val()},n=c(e);n.length==0?Heiduc.jsonrpc.groupService.save(function(e){e.result=="success"?(Heiduc.info(e.message),o()):v(e.messages.list)},Heiduc.javaMap(e)):v(n)}function p(){}function d(e){Heiduc.errorMessage("#group-dialog .messages",e)}function v(e){Heiduc.errorMessages("#group-dialog .messages",e)}function m(e){t=n[e],Heiduc.jsonrpc.userService.select(function(e){r=Heiduc.idMap(e.list);var n=Heiduc.idMap(t.users.list),i="";$.each(r,function(e,t){var r="";n[t.id]!=undefined&&(r='checked = "checked"'),i+='<div class="form-row"><input type="checkbox" '+r+' value="'+t.id+'"> '+t.name+"</div>"}),$("#groupUsers").html(i),$("#user-group-dialog").modal({show:!0})})}function g(){}function y(){var e=[];$("#user-group-dialog input:checked").each(function(){e.push(this.value)}),Heiduc.jsonrpc.groupService.setGroupUsers(function(e){Heiduc.showServiceMessages(e),o()},t.id,Heiduc.javaList(e))}console.log("Loading GroupsView.js");var t=null,n=null,r=null;return Backbone.View.extend({el:$("#tab-1"),render:function(){this.el=$("#tab-1"),this.el.html(_.template(e,{messages:messages})),i()},remove:function(){this.el.html("")}})}),define("text!template/config/tags.html",[],function(){return'\n<ul id="tags"></ul>\n<div class="form-sep">\n    <input class="btn btn-primary" id="addButton" type="button" value="<%= messages("add") %>" />\n</div>\n\n<div class="modal fade" id="tag-dialog" tabindex="-1" role="dialog" aria-labelledby="" aria-hidden="true">\n  <div class="modal-dialog">\n    <div class="modal-content">\n      <div class="modal-header">\n        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>\n        <h4 class="modal-title"><%= messages("config.tag_details") %></h4>\n      </div>\n      <div class="modal-body">\n      	<form id="tagForm">\n		    <div class="messages"> </div>\n		    <div class="form-row">\n		        <label><%= messages("title") %></label>\n		        <input id="title" type="text"/>\n		    </div>\n		    <div class="form-row">\n		        <label><%= messages("config.tag_name") %></label>\n		        <input id="tagName" type="text"/>\n		    </div>\n		    <div id="pages"></div>\n		    <div class="modal-footer">\n		        <input class="btn btn-primary" id="tagSaveDlgButton" type="submit" value="<%= messages("save") %>" />\n		        <input class="btn btn-default"  id="tagDeleteDlgButton" type="button" value="<%= messages("delete") %>" />\n		        <input class="btn btn-default" data-dismiss="modal" id="tagCancelDlgButton" type="button" value="<%= messages("cancel") %>" />\n		    </div>\n		  </form>\n      </div>	\n    </div>\n  </div>\n</div>'}),define("view/config/TagsView",["text!template/config/tags.html","jquery.treeview"],function(e){function s(){Heiduc.initJSONRpc(o),$("#addButton").click(function(){u("")}),$("#tagForm").submit(function(){return m(),!1}),$("#tagCancelDlgButton").click(g),$("#tagDeleteDlgButton").click(w),$("ul.nav-tabs li:nth-child(7)").addClass("active"),$("#title").change(S)}function o(){a()}function u(e){n=e,t=null,h(),$("#tag-dialog").modal({show:!0})}function a(){Heiduc.jsonrpc.tagService.getTree(function(e){$("#tags").html(f(e.list)),$("#tags .tagEdit").click(function(){c($(this).attr("data-id"))}),$("#tags .addTag").click(function(){u($(this).attr("data-id"))}),$("#tags").treeview({animated:"fast",collapsed:!0,unique:!0,persist:"cookie",cookieId:"tagTree"})})}function f(e){var t="";return $.each(e,function(e,n){t+=l(n)}),t}function l(e){var t='<li><a class="tagEdit" data-id="'+e.entity.id+'">'+e.entity.name+'</a> <a class="addTag" title="'+messages("add_child")+'" data-id="'+e.entity.id+'">+</a>';return e.children.list.length>0&&(t+="<ul>",$.each(e.children.list,function(e,n){t+=l(n)}),t+="</ul>"),t+"</li>"}function c(e){Heiduc.jsonrpc.tagService.getById(function(e){t=e,n=t.parent,h(),$("#tag-dialog").modal({show:!0})},e)}function h(){t==null?($("#tagName").val(""),$("#title").val(""),$("#pages").html("")):($("#tagName").val(t.name),$("#title").val(t.title),p()),$("#tag-dialog .messages").html("")}function p(){Heiduc.jsonrpc.tagService.getPages(function(e){i=e.list,d()},t.id)}function d(){$("#pages").html("");if(i.length>0){var e="";$.each(i,function(t,n){e+='<span class="tag">'+n.title+' <a data-id="'+t+'"><img src="/static/images/02_x.png" /></a></span>'}),$("#pages").html(e),$("#pages a").click(function(){E($(this).attr("data-id"))})}}function v(e){var t=[];return e.name==""&&t.push(messages("config.tag_is_empty")),t}function m(){var e={id:t!=null?String(t.id):"",parent:n==null?"":String(n),name:$("#tagName").val(),title:$("#title").val()},r=v(e);r.length==0?Heiduc.jsonrpc.tagService.save(function(e){e.result=="success"?(Heiduc.info(e.message),a()):y(e.message)},Heiduc.javaMap(e)):b(r)}function g(){}function y(e){Heiduc.errorMessage("#tag-dialog .messages",e)}function b(e){Heiduc.errorMessages("#tag-dialog .messages",e)}function w(){confirm(messages("are_you_sure"))&&Heiduc.jsonrpc.tagService.remove(function(e){Heiduc.showServiceMessages(e),a()},t.id)}function E(e){confirm(messages("are_you_sure"))&&Heiduc.jsonrpc.tagService.removeTag(function(t){Heiduc.showServiceMessages(t),i.splice(e,1),d()},i[e].friendlyURL,t.id)}function S(){if(t!=null)return;var e=$("#tagName").val(),n=$("#title").val();e==""&&$("#tagName").val(Heiduc.urlFromTitle(n))}console.log("Loading TagsView.js");var t=null,n=null,r=null,i=null;return Backbone.View.extend({css:"/static/css/jquery.treeview.css",el:$("#tab-1"),render:function(){Heiduc.addCSSFile(this.css),this.el=$("#tab-1"),this.el.html(_.template(e,{messages:messages})),s()},remove:function(){this.el.html(""),Heiduc.removeCSSFile(this.css)}})}),define("text!template/config/attributes.html",[],function(){return'\n<div id="attributes"></div>\n  \n<div class="form-sep">\n    <input class="btn btn-primary" id="addButton" type="button" value="<%= messages("add") %>" />\n    <input class="btn btn-default" id="removeButton" type="button" value="<%= messages("remove") %>" />\n</div>\n\n<div class="modal fade" id="attribute-dialog" tabindex="-1" role="dialog" aria-labelledby="" aria-hidden="true">\n  <div class="modal-dialog">\n    <div class="modal-content">\n      <div class="modal-header">\n        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>\n        <h4 class="modal-title"><%= messages("attribute") %></h4>\n      </div>\n      <div class="modal-body">\n      	<form id="attributeForm">\n	    <div class="form-row">\n	        <label><%= messages("name") %></label>\n	        <input id="name" type="text"/>\n	    </div>\n	    <div class="form-row">\n	        <label><%= messages("value") %></label>\n	        <input id="value" type="text" size="40"/>\n	    </div>\n	    <div class="modal-footer">\n	        <input class="btn btn-primary" id="saveButton" type="submit" value="<%= messages("save") %>" />\n	        <input class="btn btn-default" data-dismiss="modal" id="cancelButton" type="button" value="<%= messages("cancel") %>" />\n	    </div>\n	  </form>\n      </div>	\n    </div>\n  </div>\n</div>'}),define("view/config/AttributesView",["text!template/config/attributes.html"],function(e){function n(){$("ul.nav-tabs li:nth-child(8)").addClass("active"),Heiduc.initJSONRpc(r),$("#addButton").click(o),$("#cancelButton").click(function(){}),$("#attributeForm").submit(function(){return a(),!1}),$("#removeButton").click(f)}function r(){i()}function i(){Heiduc.jsonrpc.configService.getConfig(function(e){t=e,s()})}function s(){var e='<table class="table table-striped"><tr><th></th><th>'+messages("name")+"</th><th>"+messages("value")+"</th></tr>";$.each(t.attributes.map,function(t,n){e+='<tr><td><input type="checkbox" value="'+t+'"/></td>'+'<td><a data-name="'+t+'">'+t+"</a></td>"+"<td>"+n+"</td></tr>"}),$("#attributes").html(e+"</table>"),$("#attributes tr:even").addClass("even"),$("#attributes a").click(function(){u($(this).attr("data-name"))})}function o(){$("#attribute-dialog").modal({show:!0}),$("#name").val(""),$("#value").val("")}function u(e){$("#attribute-dialog").modal({show:!0}),$("#name").val(e),$("#value").val(t.attributes.map[e])}function a(){var e=$("#name").val(),t=$("#value").val();Heiduc.jsonrpc.configService.saveAttribute(function(e){Heiduc.showServiceMessages(e),r()},e,t)}function f(){var e=[];$("#attributes input:checked").each(function(){e.push(this.value)});if(e.length==0){Heiduc.info(messages("nothing_selected"));return}confirm(messages("are_you_sure"))&&Heiduc.jsonrpc.configService.removeAttributes(function(e){Heiduc.info(e.message),r()},Heiduc.javaList(e))}console.log("Loading AttributesView.js");var t="";return Backbone.View.extend({el:$("#tab-1"),render:function(){this.el=$("#tab-1"),this.el.html(_.template(e,{messages:messages})),n()},remove:function(){this.el.html("")}})}),define("view/config/ConfigRouter",["view/config/IndexView","view/config/CommentsView","view/config/LanguagesView","view/config/MessagesView","view/config/UsersView","view/config/GroupsView","view/config/TagsView","view/config/AttributesView"],function(e,t,n,r,i,s,o,u){return console.log("Loading ConfigRouter.js"),Backbone.Router.extend({configView:null,currentView:null,indexView:new e,commentsView:new t,languagesView:new n,messagesView:new r,usersView:new i,groupsView:new s,tagsView:new o,attributesView:new u,initialize:function(e){this.configView=e.view},show:function(e){Heiduc.app.currentView!=this.configView&&Heiduc.app.show(this.configView),this.currentView&&(this.currentView.remove(),this.currentView=null),$("ul.nav-tabs li").removeClass("active"),e.render(),this.currentView=e},routes:{"config/comments":"comments","config/languages":"languages","config/messages":"messages","config/users":"users","config/groups":"groups","config/tags":"tags","config/attributes":"attributes"},index:function(){this.show(this.indexView)},comments:function(){this.show(this.commentsView)},languages:function(){this.show(this.languagesView)},messages:function(){this.show(this.messagesView)},users:function(){this.show(this.usersView)},groups:function(){this.show(this.groupsView)},tags:function(){this.show(this.tagsView)},attributes:function(){this.show(this.attributesView)}})}),define("view/config/ConfigView",["text!template/config/config.html","view/config/ConfigRouter","jquery.form"],function(e,t){return console.log("Loading ConfigView.js"),Backbone.View.extend({css:"/static/css/config.css",el:$("#content"),tmpl:_.template(e),viewCmd:null,router:null,initialize:function(){this.router=new t({view:this})},render:function(){Heiduc.addCSSFile(this.css),this.el.html(this.tmpl({messages:messages})),this.router.index()},remove:function(){this.router.currentView&&this.router.currentView.remove(),this.el.html(""),Heiduc.removeCSSFile(this.css)}})}),define("text!template/folders.html",[],function(){return'<div class="row">\n	<div class="col-lg-12">\n		<div class="panel panel-default">\n			<div class="panel-heading"><a href="#folders"><%= messages("resources") %>:</a> / <span id="crumbs"></span> </div>\n			<div class="panel-body">\n				<div class="row">\n					<div class="col-md-12">\n						<ul class="nav nav-tabs" id="tabs_a">\n							<li class="active"><a data-toggle="tab" href="#tab-1"><%= messages("folders") %></a></li>\n						    <li><a data-toggle="tab" href="#tab-2">Picasa</a></li>\n						</ul>\n						<div class="tab-content" id="tabs_content_a">\n							<div id="tab-1" class="tab-pane fade in active">\n								<p id="folder-location"></p>\n    							<ul id="folders-tree"><img src="/static/images/ajax-loader.gif" /></ul>\n							</div>\n							<div id="tab-2" class="tab-pane fade">\n								<div id="albums"><img src="/static/images/ajax-loader.gif" /></div>\n							    <div class="clear">\n							        <a id="createAlbumLink"><%= messages("folders.create_album") %></a>\n							    </div> \n							    <div id="albumDetails">\n							        <hr class="clear picasa-hr" />\n							        <p class="album-name">\n							            Album : <span id="album-location"></span>\n							            <a id="deleteAlbumLink"><%= messages("folders.delete_album") %></a>\n							        </p>\n							        <div id="photos"></div>\n							        <div class="clear">\n							            <a id="uploadPhotoLink"><%= messages("folders.upload_image") %></a>\n							        </div>\n							    </div> \n							    <div class="clear"></div>\n								\n							</div>    \n								\n							</div>\n						</div>\n					</div>\n				</div>\n			</div>\n		</div>\n	</div>\n</div>\n\n\n<div class="modal fade" id="album-dialog" tabindex="-1" role="dialog" aria-labelledby="" aria-hidden="true">\n  <div class="modal-dialog">\n    <div class="modal-content">\n      <div class="modal-header">\n        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>\n        <h4 class="modal-title"><%= messages("folders.new_album") %></h4>\n      </div>\n      <div class="modal-body">\n      	<form id="albumForm">\n		    <div class="form-row">\n		        <label><%= messages("folders.album_title") %></label>\n		        <input id="title"/>\n		    </div>\n		    <div id="albumMessages"></div>\n		    <div class="buttons-dlg">\n		        <input type="submit" value="<%= messages("save") %>" />\n		        <input id="cancelAlbumButton" type="button" value="<%= messages("cancel") %>" />\n		    </div>\n		  </form>  \n      </div>	\n    </div>\n  </div>\n</div>\n\n<div class="modal fade" id="upload-dialog" tabindex="-1" role="dialog" aria-labelledby="" aria-hidden="true">\n  <div class="modal-dialog">\n    <div class="modal-content">\n      <div class="modal-header">\n        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>\n        <h4 class="modal-title"><%= messages("folders.upload_image") %></h4>\n      </div>\n      <div class="modal-body">\n      	<form id="upload" action="/cms/upload" method="post" enctype="multipart/form-data">\n		    <input type="hidden" name="fileType" value="picasa" />\n		    <input type="hidden" name="albumId" />\n		    <input type="file" name="uploadFile" />\n		    <div class="buttons-dlg">\n		        <input type="submit" value="<%= messages("upload") %>" />\n		        <input id="uploadCancelButton" type="button" value="<%= messages("cancel") %>" />\n		    </div>    \n		  </form>\n      </div>	\n    </div>\n  </div>\n</div>\n\n\n\n'}),define("view/FoldersView",["text!template/folders.html","jquery.form","jquery.treeview"],function(e){function t(){Heiduc.initJSONRpc(n),$.cookie("folderReturnPath",null,{path:"/",expires:10})}function n(){Heiduc.jsonrpc.folderService.getTree(function(e){$("#folders-tree").html(r(e)),$("#folders-tree").treeview({animated:"fast",collapsed:!0,unique:!0,persist:"cookie",cookieId:"folderTree"})})}function r(e){var t='<li><a href="#folder/'+e.entity.id+'">'+e.entity.title+'</a> <a title="'+messages("add_child")+'" href="#addFolder/'+e.entity.id+'">+</a>';return e.children.list.length>0&&(t+="<ul>",$.each(e.children.list,function(e,n){t+=r(n)}),t+="</ul>"),t+"</li>"}function a(){$("#upload").ajaxForm(E),Heiduc.initJSONRpc(f),$("#createAlbumLink").click(m),$("#deleteAlbumLink").click(y),$("#uploadPhotoLink").click(w),$("#albumForm").submit(function(){return g(),!1}),$("#cancelAlbumButton").click(function(){$("#album-dialog").dialog("close")}),$("#uploadAlbumButton").click(function(){$("#upload-dialog").dialog("close")}),$("#uploadCancelButton").click(function(){$("#upload-dialog").dialog("close")})}function f(){Heiduc.jsonrpc.configService.getConfig(function(e){i=e,i.enablePicasa?l():($("#albums").html(messages("folders.picasa_not_enabled")),$("#createAlbumLink").hide())})}function l(){Heiduc.jsonrpc.picasaService.selectAlbums(function(e){s=e.list,c()})}function c(){var e="";$.each(s,function(t,n){var r="";$.each(n.categories.list,function(e,t){r+=t+" "}),e+='<a class="album" data-i="'+t+'">'+'<img src="/static/images/Photos.png" /><p>'+n.title+" "+r+"</p></a>"}),$("#albums").html(e),$("#albums a.album").click(function(){h($(this).attr("data-i"))})}function h(e){u=s[e],p()}function p(){$("#album-location").text(u.title),Heiduc.jsonrpc.picasaService.selectPhotos(function(e){o=e.list,d()},u.id)}function d(){$("#albumDetails").show();var e="";$.each(o,function(t,n){var r="";$.each(n.categories.list,function(e,t){r+=t+" "}),e+='<div class="photo"><img class="remove" src="/static/images/02_x.png" data-i="'+t+'" />'+'<a data-i="'+t+'"><img src="'+n.thumbnailURL+'" />'+"<p>"+n.title+"<br/>"+r+"</p></a></div>"}),$("#photos").html(e),$("#photos img.remove").click(function(){b($(this).attr("data-i"))}),$("#photos a").click(function(){v($(this).attr("data-i"))})}function v(e){window.open(o[e].URL,"preview")}function m(){$("#album-dialog").dialog("open")}function g(){var e=$("#title").val();if(!e){Heiduc.errorMessage("#albumMessages",messages("title_is_empty"));return}Heiduc.jsonrpc.picasaService.addAlbum(function(e){e.result=="success"?($("#album-dialog").dialog("close"),l()):Heiduc.errorMessage("#albumMessages",e.message)},e)}function y(){confirm(messages("folders.you_delete_album")+" "+u.title+". "+messages("are_you_sure"))&&Heiduc.jsonrpc.picasaService.removeAlbum(function(e){e.result=="success"&&(l(),$("#albumDetails").hide()),Heiduc.showServiceMessages(e)},u.id)}function b(e){photo=o[e],confirm(messages("folders.you_delete_photo")+" "+photo.title+". "+messages("are_you_sure"))&&Heiduc.jsonrpc.picasaService.removePhoto(function(e){e.result=="success"&&p(),Heiduc.showServiceMessages(e)},u.id,photo.id)}function w(){$("#upload-dialog input[name=albumId]").val(u.id),$("#upload-dialog").dialog("open")}function E(e){var t=e.split("::"),n=t[1],r=t[2];n=="success"?(Heiduc.info("Success."),setTimeout(p,3e3)):(r=messages("error")+". "+r,Heiduc.error(r)),$("#upload-dialog").dialog("close")}console.log("Loading FoldersView.js");var i=null,s=null,o=null,u=null;return Backbone.View.extend({css:["/static/css/jquery.treeview.css","/static/css/picasa.css"],el:$("#content"),tmpl:_.template(e),render:function(){Heiduc.addCSSFiles(this.css),this.el.html(this.tmpl({messages:messages})),t(),a()},remove:function(){this.el.html(""),Heiduc.removeCSSFiles(this.css)}})}),define("text!template/folder.html",[],function(){return'<div class="row">\n	<div class="col-lg-12">\n		<div class="panel panel-default">\n			<div class="panel-heading"><a href="#folders"><%= messages("resources") %>:</a> / <span id="crumbs"></span> </div>\n			<div class="panel-body">\n				<div class="row">\n					<div class="col-md-12">\n						<ul class="nav nav-tabs" id="tabs_a">\n							<li class="active"><a data-toggle="tab" href="#tab-1"><%= messages("folder") %></a></li>\n						    <li><a data-toggle="tab" href="#tab-2"><%= messages("files") %></a></li>\n						    <li><a data-toggle="tab" href="#tab-3"><%= messages("subfolders") %></a></li>\n						    <li><a data-toggle="tab" href="#tab-4"><%= messages("security") %></a></li>\n						</ul>\n						<div class="tab-content" id="tabs_content_a">\n							<div id="tab-1" class="tab-pane fade in active">\n								<form id="folderForm">\n								\n								<div class="form-group">\n									<div class="row">\n										<div class="col-lg-6">\n											<label><%= messages("title") %></label>\n							        		<input id="title" class="form-control" type="text" />\n										</div>\n									</div>\n								</div>\n								<div class="form-group">\n									<div class="row">\n										<div class="col-lg-6">\n											<label><%= messages("folder.name_for_url") %></label>\n							        		<input id="name" class="form-control" type="text" />\n										</div>\n									</div>\n								</div>\n								\n								<div class="form-sep">\n									<input class="btn btn-primary" id="saveButton" type="submit" value="<%= messages("save") %>" />\n								    <input class="btn btn-default" id="cancelButton" type="button" value="<%= messages("cancel") %>" />\n								    <input class="btn btn-default" id="exportButton" type="button" value="<%= messages("export") %>" />\n								</div>\n								</form>\n								\n							</div>\n							<div id="tab-2" class="tab-pane fade">\n								<div id="filesTable"> </div>\n							    <div class="form-sep">\n							        <input class="btn btn-primary" id="createFileButton" type="button" \n							            value="<%= messages("create_file") %>" />\n							        <input class="btn btn-default" id="uploadButton" type="button" \n							            value="<%= messages("upload_file") %>" />\n							        <input class="btn btn-default" id="deleteFilesButton" type="button" \n							            value="<%= messages("delete_files") %>" />\n							        <input class="btn btn-default" id="fileCancelButton" type="button" \n							            value="<%= messages("cancel") %>" />\n							    </div>\n							</div>\n							<div id="tab-3" class="tab-pane fade">\n								<div id="children"> </div>\n							    <div class="form-sep">\n							        <input class="btn btn-primary" id="addChildButton" type="button" \n							            value="<%= messages("folder.add_child_folder") %>" />\n							        <input class="btn btn-default" id="deleteFoldersButton" type="button" \n							            value="<%= messages("folder.delete_folders") %>" />\n							        <input class="btn btn-default" id="folderCancelButton" type="button" \n							            value="<%= messages("cancel") %>" />\n							    </div>    \n							</div>\n							<div id="tab-4" class="tab-pane fade">\n								<div id="permissions"> </div>\n							    <div class="form-sep">\n							        <input class="btn btn-primary" id="addPermissionButton" type="button" \n							            value="<%= messages("add_permission") %>" />\n							        <input class="btn btn-default" id="deletePermissionButton" type="button" \n							            value="<%= messages("delete_permission") %>" />\n							    </div>    \n							</div>\n						</div>\n					</div>\n				</div>\n			</div>\n		</div>\n	</div>\n</div>\n\n\n<div class="modal fade" id="file-upload" tabindex="-1" role="dialog" aria-labelledby="" aria-hidden="true">\n  <div class="modal-dialog">\n    <div class="modal-content">\n      <div class="modal-header">\n        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>\n        <h4 class="modal-title"><%= messages("folder.upload_file") %></h4>\n      </div>\n      <div class="modal-body">\n      	<form id="upload" action="/cms/upload" method="post" enctype="multipart/form-data">\n	    	<%= messages("file_upload") %>:\n	    	<input type="hidden" name="fileType" value="resource" />\n	    	<input type="hidden" name="folderId" />\n	    	<input type="file" name="uploadFile" multiple="true" />\n		    <div class="modal-footer">\n	    	    <input type="submit" class="btn btn-primary" value="<%= messages("send") %>" />\n	        	<input class="btn btn-default" data-dismiss="modal" id="fileUploadCancelButton" type="button" \n	            	value="<%= messages("cancel") %>" />\n	    	</div>\n		</form>\n      </div>	\n    </div>\n  </div>\n</div>\n\n<div class="modal fade" id="permission-dialog" tabindex="-1" role="dialog" aria-labelledby="" aria-hidden="true">\n  <div class="modal-dialog">\n    <div class="modal-content">\n      <div class="modal-header">\n        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>\n        <h4 class="modal-title"><%= messages("permission_details") %></h4>\n      </div>\n      <div class="modal-body">\n      	<form id="permissionForm">\n		    <div class="form-row">\n		        <label><%= messages("group") %></label>\n		        <select id="groupSelect"></select>\n		        <span id="groupName"></span>        \n		    </div>\n		    <div id="permissionList" class="form-row">\n		        <fieldset>\n		            <legend><%= messages("permission") %></legend>\n		            <input type="radio" name="permission" value="DENIED"/> <%= messages("denied") %> <br />\n		            <input type="radio" name="permission" value="READ" /> <%= messages("read") %> <br />\n		            <input type="radio" name="permission" value="WRITE" /> <%= messages("read_write") %> <br />\n		        </fieldset>        \n		    </div>\n		    <div class="modal-footer">\n		        <input id="permissionSaveButton" class="btn btn-primary" type="submit" value="<%= messages("save") %>" />\n		        <input id="permissionCancelButton" class="btn btn-default" data-dismiss="modal" type="button" value="<%= messages("cancel") %>" />\n		    </div>\n		</form>\n      </div>	\n    </div>\n  </div>\n</div>\n\n<div class="modal fade" id="export-dialog" tabindex="-1" role="dialog" aria-labelledby="" aria-hidden="true">\n  <div class="modal-dialog">\n    <div class="modal-content">\n      <div class="modal-header">\n        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>\n        <h4 class="modal-title"><<%= messages("folder.export_window") %></h4>\n      </div>\n      <div class="modal-body">\n      	<form id="exportForm">\n		    <p><%= messages("folder.export_window_info") %></p>\n		    <div id="exportInfo" class="form-row"></div>    \n		    <div id="timer" class="form-row"></div>\n		    <div class="buttons-dlg">\n		        <input id="exportCancelButton" type="button" value="<%= messages("cancel") %>" />\n		    </div>\n		  </form>\n      </div>	\n    </div>\n  </div>\n</div>\n\n\n'}),define("view/FolderView",["text!template/folder.html","jquery.form"],function(e){function h(){s=t!="",$("#upload").ajaxForm(y),Heiduc.initJSONRpc(p),$("#title").change(T),$("#folderForm").submit(function(){return k(),!1}),$("#cancelButton").click(L),$("#exportButton").click(A),$("#exportCancelButton").click(J),$("#createFileButton").click(x),$("#uploadButton").click(m),$("#deleteFilesButton").click(S),$("#fileCancelButton").click(L),$("#addChildButton").click(D),$("#deleteFoldersButton").click(H),$("#folderCancelButton").click(L),$("#addPermissionButton").click(z),$("#deletePermissionButton").click(W),$("#permissionForm").submit(function(){return U(),!1}),$("#permissionCancelButton").click(X),$("#file-upload input[name=folderId]").val(t)}function p(){Heiduc.jsonrpc.folderService.getFolderRequest(function(e){o=e,d(),I(),K(),s?(j(o.permissions),C(),w(),$(".filesTab").show(),$(".childrenTab").show(),i.root?($("#saveButton").attr("disabled","disabled"),$("#title").attr("disabled","disabled"),$("#name").attr("disabled","disabled")):($("#saveButton").removeAttr("disabled"),$("#title").removeAttr("disabled"),$("#name").removeAttr("disabled"))):($(".filesTab").hide(),$(".childrenTab").hide())},t,n)}function d(){i=o.folder,s&&(n=String(i.parent)),v(),V()}function v(){s?($("#title").val(i.title),$("#name").val(i.name)):($("#title").val(""),$("#name").val(""))}function m(){$("#file-upload").modal({show:!0})}function g(){}function y(e){var t=e.split("::"),n=t[1],r=t[2];n=="success"?(Heiduc.info(messages("folder.file_success_upload")),b()):Heiduc.error(messages("folder.error_during_upload")+" "+r),$("#file-upload").modal({show:!1})}function b(){Heiduc.jsonrpc.fileService.getByFolder(function(e){o.files=e,w()},t)}function w(){r=o.files;var e='<table class="table table-striped"><tr><th></th><th>'+messages("title")+"</th><th>"+messages("filename")+"</th><th>"+messages("mimetype")+"</th><th>"+messages("size")+"</th></tr>";$.each(r.list,function(t,n){e+='<tr>	<td><input type="checkbox" name="item'+t+'" value="'+n.id+'"/></td>	<td><a href="#file/'+n.id+'">'+n.title+"</a></td>	<td>"+n.filename+"</td>	<td>"+n.mimeType+"</td>	<td>"+n.size+" "+messages("bytes")+"</td></tr>"}),e+="</table>",$("#filesTable").html(e),$("#filesTable tr:even").addClass("even")}function E(){var e=[];return $("#filesTable input[type=checkbox]:checked").each(function(){e.push(this.value)}),e}function S(){var e=Heiduc.javaList(E());if(e.list.length==0){Heiduc.info(messages("nothing_selected"));return}confirm(messages("are_you_sure"))&&Heiduc.jsonrpc.fileService.deleteFiles(function(e){e.result=="success"?(b(),Heiduc.info(messages("folder.files_success_delete"))):Heiduc.error(messages("folder.error_deleting_files")+" "+e.messsage)},e)}function x(){location.href="#addFile/"+t}function T(){if(s)return;var e=$("#name").val(),t=$("#title").val();e==""&&$("#name").val(Heiduc.urlFromTitle(t))}function N(){Heiduc.jsonrpc.folderService.getByParent(function(e){o.children=e,C()},t)}function C(){if(!s)return;var e='<table class="table table-striped"><tr><th></th><th>'+messages("title")+"</th><th>"+messages("name")+"</th></tr>";$.each(o.children.list,function(t,n){e+='<tr><td><input type="checkbox" value="'+n.id+'"/></td><td><a href="#folder/'+n.id+'">'+n.title+"</td><td>"+n.name+"</td></tr>"}),$("#children").html(e+"</table>"),$("#children tr:even").addClass("even")}function k(){var e=Heiduc.javaMap({id:t,parent:n,name:$("#name").val(),title:$("#title").val()});Heiduc.jsonrpc.folderService.saveFolder(function(e){e.result=="success"?(Heiduc.info(messages("folder.success_save")),t==""&&(t=e.message,s=!0,$('#file-upload input[name="folderId"]').val(t),p())):Heiduc.showServiceMessages(e)},e)}function L(){$.cookie("folderReturnPath")?location.href=$.cookie("folderReturnPath"):location.href="#folders"}function A(){l=0,M(),$("#export-dialog").modal({show:!0}),Heiduc.jsonrpc.configService.startExportFolderTask(function(e){e.result=="success"?(c=e.message,Heiduc.infoMessage("#exportInfo",messages("creating_export_file")),a=setInterval(O,1e4),f=setInterval(M,1e3)):Heiduc.showServiceMessages(e)},i.id)}function O(){Heiduc.jsonrpc.configService.isExportTaskFinished(function(e){e&&(clearInterval(a),clearInterval(f),$("#export-dialog").dialog("close"),$("#exportDialogButton").attr("disabled",!1),location.href="/file/tmp/"+c)},"folder")}function M(){$("#timer").html(l++ +" "+messages("sec")+".")}function D(){location.href="#addFolder/"+t}function P(){var e=[];return $("#children input[type=checkbox]:checked").each(function(){e.push(this.value)}),e}function H(){var e=Heiduc.javaList(P());if(e.list.length==0){Heiduc.info(messages("nothing_selected"));return}confirm(messages("are_you_sure"))&&Heiduc.jsonrpc.folderService.deleteFolder(function(e){e.result=="success"?(N(),Heiduc.info(messages("folder.success_delete"))):Heiduc.error(messages("folder.error_deleting")+" "+e.messsage)},e)}function B(e){if(e=="DENIED")return messages("denied");if(e=="READ")return messages("read");if(e=="WRITE")return messages("read_write");if(e=="ADMIN")return messages("read_write_grant")}function j(e){u=Heiduc.idMap(e.list);var t='<table class="table table-striped"><tr><th></th><th>'+messages("group")+"</th><th>"+messages("permission")+"</th></tr>";$.each(u,function(e,n){var r="",i=n.group.name;n.inherited||(r='<input type="checkbox" value="'+n.id+'">',i='<a data-id="'+n.id+'"> '+n.group.name+"</a>"),t+="<tr><td>"+r+"</td><td>"+i+"</td><td>"+B(n.permission)+"</td></tr>"}),$("#permissions").html(t+"</table>"),$("#permissions tr:even").addClass("even"),$("#permissions a").click(function(){q($(this).attr("data-id"))})}function F(){Heiduc.jsonrpc.folderPermissionService.selectByFolder(function(e){j(e)},t)}function I(){var e=o.groups;groups=Heiduc.idMap(e.list);var t="";$.each(groups,function(e,n){t+='<option value="'+n.id+'">'+n.name+"</option>"}),$("#groupSelect").html(t)}function q(e){permission=u[e],R(),$("#permission-dialog").modal({show:!0})}function R(){$("#permission-dialog input[type=radio]").removeAttr("checked"),permission==null?($("#permission-dialog input[value=READ]").attr("checked","checked"),$("#groupSelect").show(),$("#groupName").hide()):($("#permissionList input[value="+permission.permission+"]").attr("checked","checked"),$("#groupSelect").hide(),$("#groupName").show(),$("#groupName").text(permission.group.name))}function U(){var e={folderId:t,groupId:permission==null?$("#groupSelect").val():String(permission.group.id),permission:$("#permissionList input:checked")[0].value};Heiduc.jsonrpc.folderPermissionService.save(function(e){Heiduc.showServiceMessages(e),e.result=="success"&&F()},Heiduc.javaMap(e))}function z(){permission=null,R(),$("#permission-dialog").modal({show:!0})}function W(){var e=[];$("#permissions input:checked").each(function(){e.push(this.value)});if(e.length==0){Heiduc.info(messages("nothing_selected"));return}confirm(messages("are_you_sure"))&&Heiduc.jsonrpc.folderPermissionService.remove(function(e){Heiduc.showServiceMessages(e),F()},Heiduc.javaList(e))}function X(){}function V(){var e=o.folderPermission;e.changeGranted?($("#saveButton").show(),$("#createFileButton").show(),$("#uploadButton").show(),$("#deleteFilesButton").show(),$("#addChildButton").show(),$("#deleteFoldersButton").show()):($("#saveButton").hide(),$("#createFileButton").hide(),$("#uploadButton").hide(),$("#deleteFilesButton").hide(),$("#addChildButton").hide(),$("#deleteFoldersButton").hide()),e.admin&&s?$(".securityTab").show():$(".securityTab").hide()}function J(){clearInterval(a),clearInterval(f)}function K(){var e="",t=o.parent;$.each(o.ancestors.list,function(t,n){var r=n.name=="/"?"file":n.name;e+='<a href="#folder/'+n.id+'">'+r+"</a> / "}),s?e+=" "+(i.name=="/"?"file":i.name):e+='<a href="#folder/'+t.id+'">'+t.name+"</a>",$("#crumbs").html(e)}console.log("Loading FolderView.js");var t=null,n=null,r="",i=null,s=t!="",o=null,u=null,a=null,f=null,l=0,c=null;return Backbone.View.extend({el:$("#content"),tmpl:_.template(e),render:function(){this.el.html(this.tmpl({messages:messages})),h()},remove:function(){this.el.html("")},setFolderId:function(e){t=e},setFolderParentId:function(e){n=e}})}),define("text!template/file.html",[],function(){return'<div class="row">\n	<div class="col-lg-12">\n		<div class="panel panel-default">\n			<div class="panel-body">\n				<div class="row">\n					<div class="col-md-12">\n						<ul class="nav nav-tabs" id="tabs_a">\n							<li class="active"><a data-toggle="tab" href="#tab-1"><%= messages("file") %></a></li>\n							<li class ="contentTab"><a id= "_fileContent" data-toggle= "tab" href= "#tab-2" ><%= messages("content")%></a></li>\n						</ul>\n						<div class="tab-content" id="tabs_content_a">\n							<div id="tab-1" class="tab-pane fade in active">\n								<form id="fileForm">\n									<div class="form-group">\n										<div class="row">\n											<div class="col-lg-6">\n												<label><%= messages("title") %></label>\n								        		<input id="title" class="form-control" type="text" />\n											</div>\n										</div>\n									</div>\n									<div class="form-group">\n										<div class="row">\n											<div class="col-lg-6">\n												<label><%= messages("name") %></label>\n								        		<input id="name" class="form-control" type="text" />\n											</div>\n										</div>\n									</div>\n									<div class="form-group">\n										<div class="row">\n											<div class="col-lg-6">\n												<label><%= messages("content_type") %></label>\n								        		<span id="mimeType"> </span>\n											</div>\n										</div>\n									</div>\n									<div class="form-group">\n										<div class="row">\n											<div class="col-lg-6">\n												<label><%= messages("size") %></label>\n								        		<span id="size"> </span>\n											</div>\n										</div>\n									</div>\n									<div class="form-group">\n										<div class="row">\n											<div class="col-lg-6">\n												<label><%= messages("external_link") %></label>\n								        		<span id="fileLink"> </span>\n											</div>\n										</div>\n									</div>\n									<div class="form-group">\n										<div class="row">\n											<div class="col-lg-6">\n												<label></label>\n								        		<span id="download"> </span>\n											</div>\n										</div>\n									</div>\n									<div id="imageContent" style="float:left;margin-left: 20px;"> </div>\n									<div class="form-sep">\n										<input id="saveButton" class="btn btn-primary" type="submit" value="<%= messages("save") %>" />\n								    	<input id="cancelButton" class="btn btn-default" type="button" value="<%= messages("cancel") %>" />\n									</div>\n									\n								</form>	\n								\n							</div>\n							<div id="tab-2" class="tab-pane fade">\n								<form id="contentForm">\n									<div class="form-group">\n										<div class="row">\n											<div class="col-lg-6">\n								        		<span id="filename"></span>\n											</div>\n										</div>\n									</div>\n									<div class="form-group">\n										<div class="row">\n											<div class="col-lg-6">\n												<label></label>\n												<label class="checkbox-inline">\n													<input id="autosave" type="checkbox" id="enablePicasa" value=""> <%= messages("autosave") %>\n												</label>\n											</div>\n										</div>\n									</div>\n									<div class="form-group">\n										<div class="row">\n											<div class="col-lg-6">\n												<label></label>\n												<textarea id="fileContent" rows="20" cols="80"></textarea>\n											</div>\n										</div>\n									</div>\n								    <div class="form-sep">\n								        <input id="saveContentButton" class="btn btn-primary" type="submit" value="<%= messages("save_continue") %>" />\n								        <input id="contentCancelButton" class="btn btn-default" type="button" value="<%= messages("cancel") %>" />\n								    </div>    \n							  </form>\n							</div>\n						</div>\n					</div>\n				</div>\n			</div>\n		</div>\n	</div>\n</div>\n\n\n'}),define("view/FileView",["text!template/file.html","cm","cm-css","cm-js","cm-xml","cm-html"],function(e){function u(){i=t!="",$('a[data-toggle="tab"]').on("shown.bs.tab",a),Heiduc.initJSONRpc(p),$("#fileForm").submit(function(){return m(),!1}),$("#cancelButton").click(g),$("#autosave").change(h),$("#contentForm").submit(function(){return c(),!1}),$("#contentCancelButton").click(g)}function a(e,t){e.target.id==="_fileContent"?(f(),o&&(o.focus(),$(o.getScrollerElement()).css("height",.6*$(window).height()+"px").css("border","1px solid silver"),o.refresh())):l()}function f(){t!="null"&&$("#autosave:checked").length>0&&s==""&&(s=setInterval(c,Heiduc.AUTOSAVE_TIMEOUT*1e3))}function l(){s!=""&&(clearInterval(s),s="")}function c(){o&&o.save();var e=$("textarea").val();Heiduc.jsonrpc.fileService.updateContent(function(e){if(e.result=="success"){var t=new Date;Heiduc.info(e.message+" "+t)}else Heiduc.error(e.message)},t,e)}function h(){$("#autosave:checked").length>0?f():l()}function p(){Heiduc.jsonrpc.fileService.getFile(function(e){r=e,i&&(n=r.folderId),v()},t)}function d(e){var t="html";r.mimeType=="text/css"&&(t="css"),r.mimeType=="text/xml"&&(t="xml"),r.mimeType=="text/html"&&(t="htmlmixed"),r.mimeType.indexOf("javascript")!=-1&&(t="javascript"),o=CodeMirror.fromTextArea(document.getElementById("fileContent"),{lineNumbers:!0,theme:"eclipse",mode:t})}function v(){i?($("#filename").html(r.name),$("#title").val(r.title),$("#name").val(r.name),$("#fileEditDiv").show(),$("#mimeType").html(r.mimeType),$("#size").html(r.size),$("#fileLink").html(r.link),$("#download").html('<a href="'+r.link+'">'+messages("download")+"</a>"),r.textFile?($(".contentTab").show(),$("#fileContent").val(r.content),d(r.mimetype)):$(".contentTab").hide(),r.imageFile?$("#imageContent").html('<img src="'+r.link+'" />'):$("#imageContent").html("")):($("#filename").html(""),$("#title").val(""),$("#name").val(""),$("#fileEditDiv").hide(),$(".contentTab").hide(),$("#imageContent").html(""))}function m(){var e=Heiduc.javaMap({id:t,folderId:String(n),title:$("#title").val(),name:$("#name").val()});Heiduc.jsonrpc.fileService.saveFile(function(e){Heiduc.showServiceMessages(e),e.result=="success"&&(location.href="#file/"+e.data)},e)}function g(){location.href="#folder/"+n}console.log("Loading FileView.js");var t=null,n=null,r="",i=t!="",s="",o=null;return Backbone.View.extend({css:["/static/js/codemirror/codemirror.css","/static/js/codemirror/eclipse.css","/static/css/file.css"],el:$("#content"),tmpl:_.template(e),render:function(){Heiduc.addCSSFiles(this.css),this.el.html(this.tmpl({messages:messages})),u()},remove:function(){this.el.html(""),Heiduc.removeCSSFiles(this.css)},setFileId:function(e){t=e},setFolderId:function(e){n=e}})}),define("text!template/topbar.html",[],function(){return'<!-- HEADER -->\n<nav class="header-navbar">\n    <div class="navbar-header clearfix">\n	<a class="navbar-toggle collapsed" data-toggle="collapse" data-target="#mini-navbar-collapse">\n	    <span class="sr-only">Toggle navigation</span>\n	    <i class="fa fa-plus"></i>\n	</a>\n	\n	<a class="logo pull-left" href="#">\n	    <img src="/static/assets/img/logo.png" width="110" alt="Heiduc Logo">\n	</a>\n	\n	<a class="sidebar-switch pull-right"><span class="icon fa"></span></a>\n    </div>\n  \n    <div class="collapse navbar-collapse" id="mini-navbar-collapse">\n	<form class="navbar-form navbar-left" role="search">\n	    <div class="input-group input-group-sm">\n		<input type="text" class="form-control" placeholder="Search">\n		<span class="input-group-btn">\n		    <button class="btn" type="button"><i class="fa fa-search"></i></button>\n		</span>\n	    </div>\n	</form>\n	\n	<ul class="nav navbar-nav navbar-right">\n		<li>\n			<%= locale %>\n		</li>\n		<li><a href="#">\n		<i class="fa fa-lock"></i>\n		<span>Locked</span>\n	    </a></li>\n	    <li class="turn-off"><a href="#logout">\n		<i class="fa fa-power-off"></i>\n		<span><%= messages("logout") %></span>\n	    </a></li>\n	</ul>\n    </div><!-- navbar-collapse -->\n</nav>\n<!-- HEADER -->\n\n'}),define("text!template/sidebar.html",[],function(){return'<!-- side navigation -->\n<aside class="sidebar affix" role="complementary">\n	<div class="sidebar-user">\n		<div class="media sidebar-padding">\n			<div class="media-left media-middle">\n				<img src="/static/images/guy.jpg" alt="person" style="width: 60px" class="img-circle">\n			</div>\n			<div class="media-body media-middle">\n				<a href="#profile" class="h4 margin-none"><%= Heiduc.app.user.name %></a>\n				<ul class="list-unstyled list-inline margin-none">\n					<li><a href="#profile"><i class="fa fa-user"></i><%= Heiduc.app.user.email %></a></li>\n				</ul>\n			</div>\n		</div>\n	</div>\n	<!-- Wrapper Reqired by Nicescroll (start scroll from here) -->\n	<div class="nicescroll">\n		<div class="wrapper" style="margin-bottom: 140px; overflow-y: hidden; outline: none;" tabindex="0">\n			<ul class="nav nav-sidebar" id="sidebar-menu">\n                <h4 class="sidebar-headline">管理</h4>\n                <li class="active"><a href="#index"><i class="fa fa-desktop"></i> Dashboard <span class="sr-only">(current)</span></a></li>\n				<li><a href="#pages"><i class="fa fa-dashboard"></i> <%= messages("content") %></a></li>\n				<% if (Heiduc.app.user.admin) { %>\n                <li><a href="#templates"><i class="fa fa-group"></i> <%= messages("templates") %></a></li>\n                <% } %>      \n                <li><a href="#folders"><i class="fa fa-rmb"></i> <%= messages("resources") %></a></li>\n                <% if (Heiduc.app.user.admin) { %>\n                <li><a href="#config"><i class="fa fa-cogs"></i><%= messages("configuration") %></a></li>\n				<% } %>\n			</ul>\n			<ul class="nav nav-sidebar">\n                <h4 class="sidebar-headline">功能</h4>\n                <%= plugins %>\n			</ul>\n			<% if (Heiduc.app.user.admin) { %>\n			<h4 class="sidebar-headline">支持</h4>\n\n			<ul class="nav nav-sidebar">\n				<li class="submenu">\n					<a href="#plugins"><i class="fa fa-plus-square"></i><%= messages("plugins") %></a>\n					<ul>\n						<li><a href="#plugins/config"><%= messages("plugins.config") %></a></li>\n						<li>\n							<a href="#plugins/forms">\n								<%= messages("forms") %><!--  &nbsp;<span class="label label-primary">1468</span> -->\n							</a>\n						</li>\n						<li><a href="#plugins/seo-urls"><%= messages("plugins.seo_urls") %> </a></li>\n					</ul>\n				</li>\n			</ul>\n			<% } %>\n		</div>\n	</aside>\n\n'}),define("app",["view/LoginView","view/PagesView","view/IndexView","view/StructuresView","view/StructureView","view/StructureTemplateView","view/TemplatesView","view/TemplateView","view/page/PageView","view/ProfileView","view/plugins/PluginsView","view/plugins/PluginView","view/plugins/ConfigView","view/plugins/FormsView","view/plugins/FormView","view/plugins/SeoUrlsView","view/plugins/AddonsView","view/config/ConfigView","view/FoldersView","view/FolderView","view/FileView","text!template/topbar.html","text!template/locale.html","text!template/sidebar.html"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x){return Backbone.Router.extend({initialize:function(){function e(){var e=$(window).innerHeight();$(".main").css("min-height",e)}this.bind("login",this.login,this),this.bind("renderSide",this.renderSide,this),Heiduc.loggedIn?this.login():this.currentView=this.loginView.render(),$("#topbar, #main_wrapper").fadeIn(),$("#main_wrapper").append('<!-- FOOTER --><footer id="footer" role="contentinfo">Copyright &copy; 2015 Heiduc Inc.</footer><!-- FOOTER -->'),e(),$(window).on("resize",function(){e()})},currentView:null,indexView:new n,loginView:new e,pagesView:new t,structuresView:new r,structureView:new i,structureTemplateView:new s,templatesView:new o,templateView:new u,pageView:new a,profileView:new f,pluginsView:new l,pluginView:new c,pluginsConfigView:new h,pluginsFormsView:new p,pluginsFormView:new d,pluginsSeoUrlsView:new v,pluginsAddonsView:new m,configView:new g,foldersView:new y,folderView:new b,fileView:new w,routes:{index:"index",pages:"pages","page/content/:id":"editContent","page/:id":"editPage",structures:"structures",structure:"addStructure","structure/:id":"editStructure","addStructureTemplate/:id":"addStructureTemplate","structureTemplate/:id":"structureTemplate",profile:"profile",logout:"logout",plugins:"plugins","plugins/config":"pluginsConfig","plugins/forms":"pluginsForms","plugins/form":"pluginsFormNew","plugins/form/:id":"pluginsFormEdit","plugins/seo-urls":"pluginsSeoUrls","plugin/:id":"plugin","addons/*path":"pluginsAddons",templates:"templates",template:"createTemplate","template/:id":"editTemplate",config:"config",folders:"folders","folder/:id":"editFolder","addFolder/:id":"addFolder","file/:id":"editFile","addFile/:id":"addFile"},show:function(e){this.currentView&&(this.currentView.remove(),this.currentView=null),this.currentView=e,$("#content").hide(),e.render(),$("#content").fadeIn()},pages:function(){this.show(this.pagesView)},index:function(){this.show(this.indexView)},structures:function(){this.show(this.structuresView)},addStructure:function(){this.structureView.setId(""),this.show(this.structureView)},editStructure:function(e){this.structureView.setId(e),this.show(this.structureView)},addStructureTemplate:function(e){this.structureTemplateView.create(e),this.show(this.structureTemplateView)},structureTemplate:function(e){this.structureTemplateView.edit(e),this.show(this.structureTemplateView)},templates:function(){this.show(this.templatesView)},createTemplate:function(){this.templateView.create(),this.show(this.templateView)},editTemplate:function(e){this.templateView.edit(e),this.show(this.templateView)},editContent:function(e){this.pageView.editContent(e),this.show(this.pageView)},editPage:function(e){this.pageView.editPage(e),this.show(this.pageView)},profile:function(e){this.show(this.profileView)},plugins:function(){this.show(this.pluginsView)},pluginsConfig:function(){this.show(this.pluginsConfigView)},pluginsForms:function(){this.show(this.pluginsFormsView)},pluginsFormNew:function(){this.pluginsFormView.setId(""),this.show(this.pluginsFormView)},pluginsFormEdit:function(e){this.pluginsFormView.setId(e),this.show(this.pluginsFormView)},pluginsSeoUrls:function(){this.show(this.pluginsSeoUrlsView)},pluginsAddons:function(e){this.pluginsAddonsView.setAddonsId(e),this.show(this.pluginsAddonsView)},config:function(){this.show(this.configView)},folders:function(){this.show(this.foldersView)},editFolder:function(e){this.folderView.setFolderId(e),this.folderView.setFolderParentId(""),this.show(this.folderView)},addFolder:function(e){this.folderView.setFolderId(""),this.folderView.setFolderParentId(e),this.show(this.folderView)},editFile:function(e){this.fileView.setFileId(e),this.fileView.setFolderId(""),this.show(this.fileView)},addFile:function(e){this.fileView.setFileId(""),this.fileView.setFolderId(e),this.show(this.fileView)},logout:function(){Heiduc.jsonrpc.loginFrontService.logout(function(e,t){if(Heiduc.serviceFailed(t))return;e.result=="success"?location.href="/cms":Heiduc.showServiceMessages(e)})},plugin:function(e){this.pluginView.setPluginId(e),this.show(this.pluginView)},login:function(){Heiduc.jsonrpcInitialized=!1,Heiduc.createJSONRpc(),Heiduc.initJSONRpcSystem(Heiduc.initBackServices),Heiduc.initJSONRpc(function(){try{Heiduc.jsonrpc.userService.getLoggedIn(function(e){Heiduc.app.user=e;var t=_.template(S,{messages:messages});$("#topbar").html(_.template(E,{locale:t,Heiduc:Heiduc,messages:messages})),Heiduc.app.trigger("renderSide"),Backbone.history.start()||Heiduc.app.navigate("index",!0)})}catch(e){alert(e)}})},renderSide:function(){try{var e=_.template(S,{messages:messages});Heiduc.jsonrpc.pluginService.select(function(e){plugins=e.list;var t="";$.each(plugins,function(e,n){var r="#plugin/"+n.id;n.configURL&&(r="#addons/"+n.name);var i=n.role==null?[]:n.role.split(",");if(Heiduc.app.user.user&&$.inArray("ALL",i)<0&&$.inArray("USER",i)<0)return!0;t+='<li><a href="'+r+'">'+Heiduc.message(n.title)+"</a></li>\r\n"});var n=_.template(S,{messages:messages});$("#topbar").after(_.template(x,{locale:n,Heiduc:Heiduc,messages:messages,plugins:t})),$(".sidebar .nicescroll .wrapper").niceScroll({scrollspeed:26,cursorcolor:"#429eee",cursorborder:0,horizrailenabled:!1,railoffset:{left:-1}}),$(".nav-sidebar .submenu > a").on("click",function(e){e.preventDefault();var t=$(this).closest(".sidebar"),n=t.find(".submenu .in");n.collapse("hide"),$(this).next("ul").show().collapse("show"),n.hide(),$(this).hasClass("open")&&$(this).removeClass("open"),t.find("a.open").removeClass("open"),$(this).addClass("open")}),$("sidebar").find(".collapse").on("shown.bs.collapse",function(){$(".sidebar").getNiceScroll().show().onResize()}),$(".sidebar-switch").on("click",function(){parseInt($(window).width())<1169?($(".wrapper").removeClass("sidebar-toggle"),$(".wrapper").toggleClass("sidebar-toggle-sm")):parseInt($(window).width())>1170&&$(".wrapper").toggleClass("sidebar-toggle")}),$(window).on("resize",function(){$(window).width()>1169?$(".wrapper").removeClass("sidebar-toggle-sm"):$(window).width()<1170&&$(".wrapper").removeClass("sidebar-toggle")})})}catch(t){alert(t)}},pluginRouter:{navigate:function(e,t){hashStrip=/^#*/;var n=window.location.hash,r=(n||"").replace(hashStrip,"");return e.routes instanceof Object&&e.routes.hasOwnProperty(r)&&(e.navigate("loader"),e.navigate(r,t),e.route("addons/*path","pluginsAddons",function(e){Heiduc.app.pluginsAddons(e)})),e}}})}),function(e,t,n){function i(e){return e}function s(e){return o(decodeURIComponent(e.replace(r," ")))}function o(e){return e.indexOf('"')===0&&(e=e.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\")),e}function u(e){return a.json?JSON.parse(e):e}var r=/\+/g,a=e.cookie=function(r,o,f){if(o!==n){f=e.extend({},a.defaults,f),o===null&&(f.expires=-1);if(typeof f.expires=="number"){var l=f.expires,c=f.expires=new Date;c.setDate(c.getDate()+l)}return o=a.json?JSON.stringify(o):String(o),t.cookie=[encodeURIComponent(r),"=",a.raw?o:encodeURIComponent(o),f.expires?"; expires="+f.expires.toUTCString():"",f.path?"; path="+f.path:"",f.domain?"; domain="+f.domain:"",f.secure?"; secure":""].join("")}var h=a.raw?i:s,p=t.cookie.split("; "),d=r?null:{};for(var v=0,m=p.length;v<m;v++){var g=p[v].split("="),y=h(g.shift()),b=h(g.join("="));if(r&&r===y){d=u(b);break}r||(d[y]=u(b))}return d};a.defaults={},e.removeCookie=function(t,n){return e.cookie(t)!==null?(e.cookie(t,null,n),!0):!1}}(jQuery,document),define("jquery.cookie",function(){}),function(e){window.DOMParser==undefined&&window.ActiveXObject&&(DOMParser=function(){},DOMParser.prototype.parseFromString=function(e){var t=new ActiveXObject("Microsoft.XMLDOM");return t.async="false",t.loadXML(e),t}),e.xmlDOM=function(t,n){try{var r=(new DOMParser).parseFromString(t,"text/xml");if(!e.isXMLDoc(r))throw"Unable to parse XML";var i=e("parsererror",r);if(i.length==1)throw"Error: "+e(r).text()}catch(s){var o=s.name==undefined?s:s.name+": "+s.message;return e.isFunction(n)?n(o):e(document).trigger("xmlParseError",[o]),e([])}return e(r)}}(jQuery),define("jquery.xmldom",function(){}),function(e){function h(t,n){throw e.extend(t,n),t}function p(e){var n=[];if(c.call(e)!==s)return t;for(var r=0,i=e.length;r<i;r++)n[r]=e[r].jqote_id;return n.length?n.sort().join(".").replace(/(\b\d+\b)\.(?:\1(\.|$))+/g,"$1$2"):t}function d(n,r){var i,o=[],r=r||f,a=c.call(n);if(a===u)return n.jqote_id?[n]:t;if(a!==s)return[e.jqotec(n,r)];if(a===s)for(var l=0,h=n.length;l<h;l++)return o.length?o:t}var t=!1,n="UndefinedTemplateError",r="TemplateCompilationError",i="TemplateExecutionError",s="[object Array]",o="[object String]",u="[object Function]",a=1,f="%",l=/^[^<]*(<[\w\W]+>)[^>]*$/,c=Object.prototype.toString;e.fn.extend({jqote:function(t,n){var t=c.call(t)===s?t:[t],r="";return this.each(function(i){var s=e.jqotec(this,n);for(var o=0;o<t.length;o++)r+=s.call(t[o],i,o,t,s)}),r}}),e.each({app:"append",pre:"prepend",sub:"html"},function(t,n){e.fn["jqote"+t]=function(r,i,s){var o,u,a=e.jqote(r,i,s),f=l.test(a)?e:function(t){return e(document.createTextNode(t))};return!(o=p(d(r)))||(u=new RegExp("(^|\\.)"+o.split(".").join("\\.(.*)?")+"(\\.|$)")),this.each(function(){var r=f(a);e(this)[n](r),(r[0].nodeType===3?e(this):r).trigger("jqote."+t,[r,u])})}}),e.extend({jqote:function(e,r,i){var o="",i=i||f,u=d(e);u===t&&h(new Error("Empty or undefined template passed to $.jqote"),{type:n}),r=c.call(r)!==s?[r]:r;for(var a=0,l=u.length;a<l;a++)for(var p=0;p<r.length;p++)o+=u[a].call(r[p],a,p,r,u[a]);return o},jqotec:function(t,s){var u,p,d,s=s||f,v=c.call(t);if(v===o&&l.test(t)){p=d=t;if(u=e.jqotecache[t])return u}else{p=v===o||t.nodeType?e(t):t instanceof jQuery?t:null,(!p[0]||!(d=p[0].innerHTML)&&!(d=p.text()))&&h(new Error("Empty or undefined template passed to $.jqotec"),{type:n});if(u=e.jqotecache[e.data(p[0],"jqote_id")])return u}var m="",g,y=d.replace(/\s*<!\[CDATA\[\s*|\s*\]\]>\s*|[\r\n\t]/g,"").split("<"+s).join(s+">").split(s+">");for(var b=0,w=y.length;b<w;b++)m+=y[b].charAt(0)!==""?"out+='"+y[b].replace(/(\\|["'])/g,"\\$1")+"'":y[b].charAt(1)==="="?";out+=("+y[b].substr(2)+");":y[b].charAt(1)==="!"?";out+=$.jqotenc(("+y[b].substr(2)+"));":";"+y[b].substr(1);m="try{"+('var out="";'+m+";return out;").split("out+='';").join("").split('var out="";out+=').join("var out=")+'}catch(e){e.type="'+i+'";e.args=arguments;e.template=arguments.callee.toString();throw e;}';try{var E=new Function("i, j, data, fn",m)}catch(p){h(p,{type:r})}return g=p instanceof jQuery?e.data(p[0],"jqote_id",a):p,e.jqotecache[g]=(E.jqote_id=a++,E)},jqotefn:function(n){var r=c.call(n),i=r===o&&l.test(n)?n:e.data(e(n)[0],"jqote_id");return e.jqotecache[i]||t},jqotetag:function(e){c.call(e)===o&&(f=e)},jqotenc:function(e){return e.toString().replace(/&(?!\w+;)/g,"&#38;").split("<").join("&#60;").split(">").join("&#62;").split('"').join("&#34;").split("'").join("&#39;")},jqotecache:{}}),e.event.special.jqote={add:function(e){var t,n=e.handler,r=e.data?c.call(e.data)!==s?[e.data]:e.data:[];e.namespace||(e.namespace="app.pre.sub");if(!r.length||!(t=p(d(r))))return;e.handler=function(e,r,i){return!i||i.test(t)?n.apply(this,[e,r]):null}}}}(jQuery),define("jquery.jquote2",function(){}),Heiduc==undefined&&alert(messages("heiduc.namespace_error")),Heiduc.AUTOSAVE_TIMEOUT=60,Heiduc.ENGLISH_CODE="en",Heiduc.info=function(e){noty({text:e,layout:"bottomRight",type:"success",theme:"tisa_theme",timeout:1e4,closeWith:["button"],maxVisible:10})},Heiduc.error=function(e){noty({text:e,layout:"bottomRight",type:"error",theme:"tisa_theme",timeout:!1,closeWith:["button"],maxVisible:10})},Heiduc.infoMessage=function(e,t){noty({text:t,layout:"bottomRight",type:"info",theme:"tisa_theme",timeout:1e3,dismissQueue:!1,closeWith:["click"],maxVisible:10})},Heiduc.errorMessage=function(e,t){noty({text:t,layout:"bottomRight",type:"error",theme:"tisa_theme",dismissQueue:!1,timeout:3e3,closeWith:["click"],maxVisible:10})},Heiduc.errorMessages=function(e,t){var n="";$.each(t,function(e,t){n+=(e==0?"":"<br />")+t}),Heiduc.errorMessage(e,n)},Heiduc.showServiceMessages=function(e){e.result=="success"?(Heiduc.info(e.message),e.messages.list.length>0&&$.each(e.messages.list,function(e,t){Heiduc.info(t)})):(Heiduc.error(e.message),e.messages.list.length>0&&$.each(e.messages.list,function(e,t){Heiduc.error(t)}))},Heiduc.idMap=function(e){var t={};return $.each(e,function(e,n){t[n.id]=n}),t},Heiduc.message=function(e){return e.charAt(0)=="$"?messages(e.substr(1)):e},Heiduc.addCSSFile=function(e){$("head").append('<link rel="stylesheet" href="'+e+'" type="text/css" />')},Heiduc.addCSSFiles=function(e){$.each(e,function(e,t){Heiduc.addCSSFile(t)})},Heiduc.removeCSSFile=function(e){$('head link[href="'+e+'"]').remove()},Heiduc.removeCSSFiles=function(e){$.each(e,function(e,t){Heiduc.removeCSSFile(t)})},Heiduc.clientId=Heiduc.generateGUID(),Heiduc.channel=null,Heiduc.socket=null,Heiduc.initChannel=function(e,t,n,r){var i=atmosphere,s="websocket",o={url:"/_ah/channel/"+Heiduc.clientId,contentType:"application/json",logLevel:"error",transport:s,fallbackTransport:"long-polling",trackMessageLength:!1,reconnectInterval:5e3,enableXDR:!0,enableProtocol:!0,timeout:6e4};o.onOpen=e,o.onMessage=t,o.onError=n,o.onClose=r;var u=i.subscribe(o);Heiduc.socket=u},Heiduc.sendChannelCommand=function(e,t){var n="&clientId="+Heiduc.clientId;$.each(t,function(e,t){n+="&"+e+"="+t});var r=new XMLHttpRequest;r.open("POST","/_ah/channelCommand?cmd="+e+n,!0),r.send()},Heiduc.changeLanguageCall=function(e){Heiduc.jsonrpc.loginFrontService.setLanguage(function(e){location.reload()},e)},define("cms",function(){}),Heiduc==undefined&&alert(messages("heiduc.namespace_error")),Heiduc.backServiceFailed=function(e){return e!=null?(Heiduc.error(messages("heiduc.cant_connect")+" "+e+" "+e.message+" "+e.code+" "+e.msg),!0):!1},Heiduc.serviceHandler=function(e){return function(){var t=arguments[0],n=arguments;n[0]=function(e,n){$("#loading").hide();if(Heiduc.backServiceFailed(n))return;t(e)},$("#loading").show(),e.apply(null,n)}},Heiduc.setupJSONRpcHooks=function(){for(var e in Heiduc.jsonrpc)if(e.indexOf("Service")!=-1&&e.indexOf("FrontService")==-1)for(var t in Heiduc.jsonrpc[e])if(typeof Heiduc.jsonrpc[e][t]=="function"){var n=Heiduc.jsonrpc[e][t];Heiduc.jsonrpc[e][t]=Heiduc.serviceHandler(n)}},Heiduc.initBackServices=function(){Heiduc.setupJSONRpcHooks()},define("back-services",function(){}),function(e){function t(e,t){return function(n){return a(e.call(this,n),t)}}function n(e,t){return function(n){return this.lang().ordinal(e.call(this,n),t)}}function r(){}function i(e){w(e),o(this,e)}function s(e){var t=d(e),n=t.year||0,r=t.month||0,i=t.week||0,s=t.day||0,o=t.hour||0,u=t.minute||0,a=t.second||0,f=t.millisecond||0;this._input=e,this._milliseconds=+f+1e3*a+6e4*u+36e5*o,this._days=+s+7*i,this._months=+r+12*n,this._data={},this._bubble()}function o(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return t.hasOwnProperty("toString")&&(e.toString=t.toString),t.hasOwnProperty("valueOf")&&(e.valueOf=t.valueOf),e}function u(e){return 0>e?Math.ceil(e):Math.floor(e)}function a(e,t){for(var n=e+"";n.length<t;)n="0"+n;return n}function f(e,t,n,r){var i,s,o=t._milliseconds,u=t._days,a=t._months;o&&e._d.setTime(+e._d+o*n),(u||a)&&(i=e.minute(),s=e.hour()),u&&e.date(e.date()+u*n),a&&e.month(e.month()+a*n),o&&!r&&tt.updateOffset(e),(u||a)&&(e.minute(i),e.hour(s))}function l(e){return"[object Array]"===Object.prototype.toString.call(e)}function c(e){return"[object Date]"===Object.prototype.toString.call(e)||e instanceof Date}function h(e,t,n){var r,i=Math.min(e.length,t.length),s=Math.abs(e.length-t.length),o=0;for(r=0;i>r;r++)(n&&e[r]!==t[r]||!n&&m(e[r])!==m(t[r]))&&o++;return o+s}function p(e){if(e){var t=e.toLowerCase().replace(/(.)s$/,"$1");e=Bt[e]||jt[t]||t}return e}function d(e){var t,n,r={};for(n in e)e.hasOwnProperty(n)&&(t=p(n),t&&(r[t]=e[n]));return r}function v(t){var n,r;if(0===t.indexOf("week"))n=7,r="day";else{if(0!==t.indexOf("month"))return;n=12,r="month"}tt[t]=function(i,s){var o,u,a=tt.fn._lang[t],f=[];if("number"==typeof i&&(s=i,i=e),u=function(e){var t=tt().utc().set(r,e);return a.call(tt.fn._lang,t,i||"")},null!=s)return u(s);for(o=0;n>o;o++)f.push(u(o));return f}}function m(e){var t=+e,n=0;return 0!==t&&isFinite(t)&&(n=t>=0?Math.floor(t):Math.ceil(t)),n}function g(e,t){return(new Date(Date.UTC(e,t+1,0))).getUTCDate()}function y(e){return b(e)?366:365}function b(e){return 0===e%4&&0!==e%100||0===e%400}function w(e){var t;e._a&&-2===e._pf.overflow&&(t=e._a[ot]<0||e._a[ot]>11?ot:e._a[ut]<1||e._a[ut]>g(e._a[st],e._a[ot])?ut:e._a[at]<0||e._a[at]>23?at:e._a[ft]<0||e._a[ft]>59?ft:e._a[lt]<0||e._a[lt]>59?lt:e._a[ct]<0||e._a[ct]>999?ct:-1,e._pf._overflowDayOfYear&&(st>t||t>ut)&&(t=ut),e._pf.overflow=t)}function E(e){e._pf={empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1}}function S(e){return null==e._isValid&&(e._isValid=!isNaN(e._d.getTime())&&e._pf.overflow<0&&!e._pf.empty&&!e._pf.invalidMonth&&!e._pf.nullInput&&!e._pf.invalidFormat&&!e._pf.userInvalidated,e._strict&&(e._isValid=e._isValid&&0===e._pf.charsLeftOver&&0===e._pf.unusedTokens.length)),e._isValid}function x(e){return e?e.toLowerCase().replace("_","-"):e}function T(e,t){return t.abbr=e,ht[e]||(ht[e]=new r),ht[e].set(t),ht[e]}function N(e){delete ht[e]}function C(e){var t,n,r,i,s=0,o=function(e){if(!ht[e]&&pt)try{require("./lang/"+e)}catch(t){}return ht[e]};if(!e)return tt.fn._lang;if(!l(e)){if(n=o(e))return n;e=[e]}for(;s<e.length;){for(i=x(e[s]).split("-"),t=i.length,r=x(e[s+1]),r=r?r.split("-"):null;t>0;){if(n=o(i.slice(0,t).join("-")))return n;if(r&&r.length>=t&&h(i,r,!0)>=t-1)break;t--}s++}return tt.fn._lang}function k(e){return e.match(/\[[\s\S]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"")}function L(e){var t,n,r=e.match(gt);for(t=0,n=r.length;n>t;t++)r[t]=Rt[r[t]]?Rt[r[t]]:k(r[t]);return function(i){var s="";for(t=0;n>t;t++)s+=r[t]instanceof Function?r[t].call(i,e):r[t];return s}}function A(e,t){return e.isValid()?(t=O(t,e.lang()),Ft[t]||(Ft[t]=L(t)),Ft[t](e)):e.lang().invalidDate()}function O(e,t){function n(e){return t.longDateFormat(e)||e}var r=5;for(yt.lastIndex=0;r>=0&&yt.test(e);)e=e.replace(yt,n),yt.lastIndex=0,r-=1;return e}function M(e,t){var n;switch(e){case"DDDD":return Et;case"YYYY":case"GGGG":case"gggg":return St;case"YYYYY":case"GGGGG":case"ggggg":return xt;case"S":case"SS":case"SSS":case"DDD":return wt;case"MMM":case"MMMM":case"dd":case"ddd":case"dddd":return Nt;case"a":case"A":return C(t._l)._meridiemParse;case"X":return Lt;case"Z":case"ZZ":return Ct;case"T":return kt;case"SSSS":return Tt;case"MM":case"DD":case"YY":case"GG":case"gg":case"HH":case"hh":case"mm":case"ss":case"M":case"D":case"d":case"H":case"h":case"m":case"s":case"w":case"ww":case"W":case"WW":case"e":case"E":return bt;default:return n=new RegExp(I(F(e.replace("\\","")),"i"))}}function _(e){var t=(Ct.exec(e)||[])[0],n=(t+"").match(Dt)||["-",0,0],r=+(60*n[1])+m(n[2]);return"+"===n[0]?-r:r}function D(e,t,n){var r,i=n._a;switch(e){case"M":case"MM":null!=t&&(i[ot]=m(t)-1);break;case"MMM":case"MMMM":r=C(n._l).monthsParse(t),null!=r?i[ot]=r:n._pf.invalidMonth=t;break;case"D":case"DD":null!=t&&(i[ut]=m(t));break;case"DDD":case"DDDD":null!=t&&(n._dayOfYear=m(t));break;case"YY":i[st]=m(t)+(m(t)>68?1900:2e3);break;case"YYYY":case"YYYYY":i[st]=m(t);break;case"a":case"A":n._isPm=C(n._l).isPM(t);break;case"H":case"HH":case"h":case"hh":i[at]=m(t);break;case"m":case"mm":i[ft]=m(t);break;case"s":case"ss":i[lt]=m(t);break;case"S":case"SS":case"SSS":case"SSSS":i[ct]=m(1e3*("0."+t));break;case"X":n._d=new Date(1e3*parseFloat(t));break;case"Z":case"ZZ":n._useUTC=!0,n._tzm=_(t);break;case"w":case"ww":case"W":case"WW":case"d":case"dd":case"ddd":case"dddd":case"e":case"E":e=e.substr(0,1);case"gg":case"gggg":case"GG":case"GGGG":case"GGGGG":e=e.substr(0,2),t&&(n._w=n._w||{},n._w[e]=t)}}function P(e){var t,n,r,i,s,o,u,a,f,l,c=[];if(!e._d){for(r=B(e),e._w&&null==e._a[ut]&&null==e._a[ot]&&(s=function(t){return t?t.length<3?parseInt(t,10)>68?"19"+t:"20"+t:t:null==e._a[st]?tt().weekYear():e._a[st]},o=e._w,null!=o.GG||null!=o.W||null!=o.E?u=K(s(o.GG),o.W||1,o.E,4,1):(a=C(e._l),f=null!=o.d?X(o.d,a):null!=o.e?parseInt(o.e,10)+a._week.dow:0,l=parseInt(o.w,10)||1,null!=o.d&&f<a._week.dow&&l++,u=K(s(o.gg),l,f,a._week.doy,a._week.dow)),e._a[st]=u.year,e._dayOfYear=u.dayOfYear),e._dayOfYear&&(i=null==e._a[st]?r[st]:e._a[st],e._dayOfYear>y(i)&&(e._pf._overflowDayOfYear=!0),n=W(i,0,e._dayOfYear),e._a[ot]=n.getUTCMonth(),e._a[ut]=n.getUTCDate()),t=0;3>t&&null==e._a[t];++t)e._a[t]=c[t]=r[t];for(;7>t;t++)e._a[t]=c[t]=null==e._a[t]?2===t?1:0:e._a[t];c[at]+=m((e._tzm||0)/60),c[ft]+=m((e._tzm||0)%60),e._d=(e._useUTC?W:z).apply(null,c)}}function H(e){var t;e._d||(t=d(e._i),e._a=[t.year,t.month,t.day,t.hour,t.minute,t.second,t.millisecond],P(e))}function B(e){var t=new Date;return e._useUTC?[t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()]:[t.getFullYear(),t.getMonth(),t.getDate()]}function j(e){e._a=[],e._pf.empty=!0;var t,n,r,i,s,o=C(e._l),u=""+e._i,a=u.length,f=0;for(r=O(e._f,o).match(gt)||[],t=0;t<r.length;t++)i=r[t],n=(M(i,e).exec(u)||[])[0],n&&(s=u.substr(0,u.indexOf(n)),s.length>0&&e._pf.unusedInput.push(s),u=u.slice(u.indexOf(n)+n.length),f+=n.length),Rt[i]?(n?e._pf.empty=!1:e._pf.unusedTokens.push(i),D(i,n,e)):e._strict&&!n&&e._pf.unusedTokens.push(i);e._pf.charsLeftOver=a-f,u.length>0&&e._pf.unusedInput.push(u),e._isPm&&e._a[at]<12&&(e._a[at]+=12),e._isPm===!1&&12===e._a[at]&&(e._a[at]=0),P(e),w(e)}function F(e){return e.replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(e,t,n,r,i){return t||n||r||i})}function I(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function q(e){var t,n,r,i,s;if(0===e._f.length)return e._pf.invalidFormat=!0,e._d=new Date(0/0),void 0;for(i=0;i<e._f.length;i++)s=0,t=o({},e),E(t),t._f=e._f[i],j(t),S(t)&&(s+=t._pf.charsLeftOver,s+=10*t._pf.unusedTokens.length,t._pf.score=s,(null==r||r>s)&&(r=s,n=t));o(e,n||t)}function R(e){var t,n=e._i,r=At.exec(n);if(r){for(e._pf.iso=!0,t=4;t>0;t--)if(r[t]){e._f=Mt[t-1]+(r[6]||" ");break}for(t=0;4>t;t++)if(_t[t][1].exec(n)){e._f+=_t[t][0];break}Ct.exec(n)&&(e._f+="Z"),j(e)}else e._d=new Date(n)}function U(t){var n=t._i,r=dt.exec(n);n===e?t._d=new Date:r?t._d=new Date(+r[1]):"string"==typeof n?R(t):l(n)?(t._a=n.slice(0),P(t)):c(n)?t._d=new Date(+n):"object"==typeof n?H(t):t._d=new Date(n)}function z(e,t,n,r,i,s,o){var u=new Date(e,t,n,r,i,s,o);return 1970>e&&u.setFullYear(e),u}function W(e){var t=new Date(Date.UTC.apply(null,arguments));return 1970>e&&t.setUTCFullYear(e),t}function X(e,t){if("string"==typeof e)if(isNaN(e)){if(e=t.weekdaysParse(e),"number"!=typeof e)return null}else e=parseInt(e,10);return e}function V(e,t,n,r,i){return i.relativeTime(t||1,!!n,e,r)}function $(e,t,n){var r=it(Math.abs(e)/1e3),i=it(r/60),s=it(i/60),o=it(s/24),u=it(o/365),a=45>r&&["s",r]||1===i&&["m"]||45>i&&["mm",i]||1===s&&["h"]||22>s&&["hh",s]||1===o&&["d"]||25>=o&&["dd",o]||45>=o&&["M"]||345>o&&["MM",it(o/30)]||1===u&&["y"]||["yy",u];return a[2]=t,a[3]=e>0,a[4]=n,V.apply({},a)}function J(e,t,n){var r,i=n-t,s=n-e.day();return s>i&&(s-=7),i-7>s&&(s+=7),r=tt(e).add("d",s),{week:Math.ceil(r.dayOfYear()/7),year:r.year()}}function K(e,t,n,r,i){var s,o,u=(new Date(Date.UTC(e,0))).getUTCDay();return n=null!=n?n:i,s=i-u+(u>r?7:0),o=7*(t-1)+(n-i)+s+1,{year:o>0?e:e-1,dayOfYear:o>0?o:y(e-1)+o}}function Q(e){var t=e._i,n=e._f;return"undefined"==typeof e._pf&&E(e),null===t?tt.invalid({nullInput:!0}):("string"==typeof t&&(e._i=t=C().preparse(t)),tt.isMoment(t)?(e=o({},t),e._d=new Date(+t._d)):n?l(n)?q(e):j(e):U(e),new i(e))}function G(e,t){tt.fn[e]=tt.fn[e+"s"]=function(e){var n=this._isUTC?"UTC":"";return null!=e?(this._d["set"+n+t](e),tt.updateOffset(this),this):this._d["get"+n+t]()}}function Y(e){tt.duration.fn[e]=function(){return this._data[e]}}function Z(e,t){tt.duration.fn["as"+e]=function(){return+this/t}}function et(e){var t=!1,n=tt;"undefined"==typeof ender&&(this.moment=e?function(){return!t&&console&&console.warn&&(t=!0,console.warn("Accessing Moment through the global scope is deprecated, and will be removed in an upcoming release.")),n.apply(null,arguments)}:tt)}for(var tt,nt,rt="2.4.0",it=Math.round,st=0,ot=1,ut=2,at=3,ft=4,lt=5,ct=6,ht={},pt="undefined"!=typeof module&&module.exports,dt=/^\/?Date\((\-?\d+)/i,vt=/(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/,mt=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/,gt=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,4}|X|zz?|ZZ?|.)/g,yt=/(\[[^\[]*\])|(\\)?(LT|LL?L?L?|l{1,4})/g,bt=/\d\d?/,wt=/\d{1,3}/,Et=/\d{3}/,St=/\d{1,4}/,xt=/[+\-]?\d{1,6}/,Tt=/\d+/,Nt=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,Ct=/Z|[\+\-]\d\d:?\d\d/i,kt=/T/i,Lt=/[\+\-]?\d+(\.\d{1,3})?/,At=/^\s*\d{4}-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d:?\d\d|Z)?)?$/,Ot="YYYY-MM-DDTHH:mm:ssZ",Mt=["YYYY-MM-DD","GGGG-[W]WW","GGGG-[W]WW-E","YYYY-DDD"],_t=[["HH:mm:ss.SSSS",/(T| )\d\d:\d\d:\d\d\.\d{1,3}/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],Dt=/([\+\-]|\d\d)/gi,Pt="Date|Hours|Minutes|Seconds|Milliseconds".split("|"),Ht={Milliseconds:1,Seconds:1e3,Minutes:6e4,Hours:36e5,Days:864e5,Months:2592e6,Years:31536e6},Bt={ms:"millisecond",s:"second",m:"minute",h:"hour",d:"day",D:"date",w:"week",W:"isoWeek",M:"month",y:"year",DDD:"dayOfYear",e:"weekday",E:"isoWeekday",gg:"weekYear",GG:"isoWeekYear"},jt={dayofyear:"dayOfYear",isoweekday:"isoWeekday",isoweek:"isoWeek",weekyear:"weekYear",isoweekyear:"isoWeekYear"},Ft={},It="DDD w W M D d".split(" "),qt="M D H h m s w W".split(" "),Rt={M:function(){return this.month()+1},MMM:function(e){return this.lang().monthsShort(this,e)},MMMM:function(e){return this.lang().months(this,e)},D:function(){return this.date()},DDD:function(){return this.dayOfYear()},d:function(){return this.day()},dd:function(e){return this.lang().weekdaysMin(this,e)},ddd:function(e){return this.lang().weekdaysShort(this,e)},dddd:function(e){return this.lang().weekdays(this,e)},w:function(){return this.week()},W:function(){return this.isoWeek()},YY:function(){return a(this.year()%100,2)},YYYY:function(){return a(this.year(),4)},YYYYY:function(){return a(this.year(),5)},gg:function(){return a(this.weekYear()%100,2)},gggg:function(){return this.weekYear()},ggggg:function(){return a(this.weekYear(),5)},GG:function(){return a(this.isoWeekYear()%100,2)},GGGG:function(){return this.isoWeekYear()},GGGGG:function(){return a(this.isoWeekYear(),5)},e:function(){return this.weekday()},E:function(){return this.isoWeekday()},a:function(){return this.lang().meridiem(this.hours(),this.minutes(),!0)},A:function(){return this.lang().meridiem(this.hours(),this.minutes(),!1)},H:function(){return this.hours()},h:function(){return this.hours()%12||12},m:function(){return this.minutes()},s:function(){return this.seconds()},S:function(){return m(this.milliseconds()/100)},SS:function(){return a(m(this.milliseconds()/10),2)},SSS:function(){return a(this.milliseconds(),3)},SSSS:function(){return a(this.milliseconds(),3)},Z:function(){var e=-this.zone(),t="+";return 0>e&&(e=-e,t="-"),t+a(m(e/60),2)+":"+a(m(e)%60,2)},ZZ:function(){var e=-this.zone(),t="+";return 0>e&&(e=-e,t="-"),t+a(m(10*e/6),4)},z:function(){return this.zoneAbbr()},zz:function(){return this.zoneName()},X:function(){return this.unix()}},Ut=["months","monthsShort","weekdays","weekdaysShort","weekdaysMin"];It.length;)nt=It.pop(),Rt[nt+"o"]=n(Rt[nt],nt);for(;qt.length;)nt=qt.pop(),Rt[nt+nt]=t(Rt[nt],2);for(Rt.DDDD=t(Rt.DDD,3),o(r.prototype,{set:function(e){var t,n;for(n in e)t=e[n],"function"==typeof t?this[n]=t:this["_"+n]=t},_months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),months:function(e){return this._months[e.month()]},_monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),monthsShort:function(e){return this._monthsShort[e.month()]},monthsParse:function(e){var t,n,r;for(this._monthsParse||(this._monthsParse=[]),t=0;12>t;t++)if(this._monthsParse[t]||(n=tt.utc([2e3,t]),r="^"+this.months(n,"")+"|^"+this.monthsShort(n,""),this._monthsParse[t]=new RegExp(r.replace(".",""),"i")),this._monthsParse[t].test(e))return t},_weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdays:function(e){return this._weekdays[e.day()]},_weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysShort:function(e){return this._weekdaysShort[e.day()]},_weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),weekdaysMin:function(e){return this._weekdaysMin[e.day()]},weekdaysParse:function(e){var t,n,r;for(this._weekdaysParse||(this._weekdaysParse=[]),t=0;7>t;t++)if(this._weekdaysParse[t]||(n=tt([2e3,1]).day(t),r="^"+this.weekdays(n,"")+"|^"+this.weekdaysShort(n,"")+"|^"+this.weekdaysMin(n,""),this._weekdaysParse[t]=new RegExp(r.replace(".",""),"i")),this._weekdaysParse[t].test(e))return t},_longDateFormat:{LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D YYYY",LLL:"MMMM D YYYY LT",LLLL:"dddd, MMMM D YYYY LT"},longDateFormat:function(e){var t=this._longDateFormat[e];return!t&&this._longDateFormat[e.toUpperCase()]&&(t=this._longDateFormat[e.toUpperCase()].replace(/MMMM|MM|DD|dddd/g,function(e){return e.slice(1)}),this._longDateFormat[e]=t),t},isPM:function(e){return"p"===(e+"").toLowerCase().charAt(0)},_meridiemParse:/[ap]\.?m?\.?/i,meridiem:function(e,t,n){return e>11?n?"pm":"PM":n?"am":"AM"},_calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},calendar:function(e,t){var n=this._calendar[e];return"function"==typeof n?n.apply(t):n},_relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},relativeTime:function(e,t,n,r){var i=this._relativeTime[n];return"function"==typeof i?i(e,t,n,r):i.replace(/%d/i,e)},pastFuture:function(e,t){var n=this._relativeTime[e>0?"future":"past"];return"function"==typeof n?n(t):n.replace(/%s/i,t)},ordinal:function(e){return this._ordinal.replace("%d",e)},_ordinal:"%d",preparse:function(e){return e},postformat:function(e){return e},week:function(e){return J(e,this._week.dow,this._week.doy).week},_week:{dow:0,doy:6},_invalidDate:"Invalid date",invalidDate:function(){return this._invalidDate}}),tt=function(t,n,r,i){return"boolean"==typeof r&&(i=r,r=e),Q({_i:t,_f:n,_l:r,_strict:i,_isUTC:!1})},tt.utc=function(t,n,r,i){var s;return"boolean"==typeof r&&(i=r,r=e),s=Q({_useUTC:!0,_isUTC:!0,_l:r,_i:t,_f:n,_strict:i}).utc()},tt.unix=function(e){return tt(1e3*e)},tt.duration=function(e,t){var n,r,i,o=tt.isDuration(e),u="number"==typeof e,a=o?e._input:u?{}:e,f=null;return u?t?a[t]=e:a.milliseconds=e:(f=vt.exec(e))?(n="-"===f[1]?-1:1,a={y:0,d:m(f[ut])*n,h:m(f[at])*n,m:m(f[ft])*n,s:m(f[lt])*n,ms:m(f[ct])*n}):(f=mt.exec(e))&&(n="-"===f[1]?-1:1,i=function(e){var t=e&&parseFloat(e.replace(",","."));return(isNaN(t)?0:t)*n},a={y:i(f[2]),M:i(f[3]),d:i(f[4]),h:i(f[5]),m:i(f[6]),s:i(f[7]),w:i(f[8])}),r=new s(a),o&&e.hasOwnProperty("_lang")&&(r._lang=e._lang),r},tt.version=rt,tt.defaultFormat=Ot,tt.updateOffset=function(){},tt.lang=function(e,t){var n;return e?(t?T(x(e),t):null===t?(N(e),e="en"):ht[e]||C(e),n=tt.duration.fn._lang=tt.fn._lang=C(e),n._abbr):tt.fn._lang._abbr},tt.langData=function(e){return e&&e._lang&&e._lang._abbr&&(e=e._lang._abbr),C(e)},tt.isMoment=function(e){return e instanceof i},tt.isDuration=function(e){return e instanceof s},nt=Ut.length-1;nt>=0;--nt)v(Ut[nt]);for(tt.normalizeUnits=function(e){return p(e)},tt.invalid=function(e){var t=tt.utc(0/0);return null!=e?o(t._pf,e):t._pf.userInvalidated=!0,t},tt.parseZone=function(e){return tt(e).parseZone()},o(tt.fn=i.prototype,{clone:function(){return tt(this)},valueOf:function(){return+this._d+6e4*(this._offset||0)},unix:function(){return Math.floor(+this/1e3)},toString:function(){return this.clone().lang("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},toDate:function(){return this._offset?new Date(+this):this._d},toISOString:function(){return A(tt(this).utc(),"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]")},toArray:function(){var e=this;return[e.year(),e.month(),e.date(),e.hours(),e.minutes(),e.seconds(),e.milliseconds()]},isValid:function(){return S(this)},isDSTShifted:function(){return this._a?this.isValid()&&h(this._a,(this._isUTC?tt.utc(this._a):tt(this._a)).toArray())>0:!1},parsingFlags:function(){return o({},this._pf)},invalidAt:function(){return this._pf.overflow},utc:function(){return this.zone(0)},local:function(){return this.zone(0),this._isUTC=!1,this},format:function(e){var t=A(this,e||tt.defaultFormat);return this.lang().postformat(t)},add:function(e,t){var n;return n="string"==typeof e?tt.duration(+t,e):tt.duration(e,t),f(this,n,1),this},subtract:function(e,t){var n;return n="string"==typeof e?tt.duration(+t,e):tt.duration(e,t),f(this,n,-1),this},diff:function(e,t,n){var r,i,s=this._isUTC?tt(e).zone(this._offset||0):tt(e).local(),o=6e4*(this.zone()-s.zone());return t=p(t),"year"===t||"month"===t?(r=432e5*(this.daysInMonth()+s.daysInMonth()),i=12*(this.year()-s.year())+(this.month()-s.month()),i+=(this-tt(this).startOf("month")-(s-tt(s).startOf("month")))/r,i-=6e4*(this.zone()-tt(this).startOf("month").zone()-(s.zone()-tt(s).startOf("month").zone()))/r,"year"===t&&(i/=12)):(r=this-s,i="second"===t?r/1e3:"minute"===t?r/6e4:"hour"===t?r/36e5:"day"===t?(r-o)/864e5:"week"===t?(r-o)/6048e5:r),n?i:u(i)},from:function(e,t){return tt.duration(this.diff(e)).lang(this.lang()._abbr).humanize(!t)},fromNow:function(e){return this.from(tt(),e)},calendar:function(){var e=this.diff(tt().zone(this.zone()).startOf("day"),"days",!0),t=-6>e?"sameElse":-1>e?"lastWeek":0>e?"lastDay":1>e?"sameDay":2>e?"nextDay":7>e?"nextWeek":"sameElse";return this.format(this.lang().calendar(t,this))},isLeapYear:function(){return b(this.year())},isDST:function(){return this.zone()<this.clone().month(0).zone()||this.zone()<this.clone().month(5).zone()},day:function(e){var t=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=e?(e=X(e,this.lang()),this.add({d:e-t})):t},month:function(e){var t,n=this._isUTC?"UTC":"";return null!=e?"string"==typeof e&&(e=this.lang().monthsParse(e),"number"!=typeof e)?this:(t=this.date(),this.date(1),this._d["set"+n+"Month"](e),this.date(Math.min(t,this.daysInMonth())),tt.updateOffset(this),this):this._d["get"+n+"Month"]()},startOf:function(e){switch(e=p(e)){case"year":this.month(0);case"month":this.date(1);case"week":case"isoWeek":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===e?this.weekday(0):"isoWeek"===e&&this.isoWeekday(1),this},endOf:function(e){return e=p(e),this.startOf(e).add("isoWeek"===e?"week":e,1).subtract("ms",1)},isAfter:function(e,t){return t="undefined"!=typeof t?t:"millisecond",+this.clone().startOf(t)>+tt(e).startOf(t)},isBefore:function(e,t){return t="undefined"!=typeof t?t:"millisecond",+this.clone().startOf(t)<+tt(e).startOf(t)},isSame:function(e,t){return t="undefined"!=typeof t?t:"millisecond",+this.clone().startOf(t)===+tt(e).startOf(t)},min:function(e){return e=tt.apply(null,arguments),this>e?this:e},max:function(e){return e=tt.apply(null,arguments),e>this?this:e},zone:function(e){var t=this._offset||0;return null==e?this._isUTC?t:this._d.getTimezoneOffset():("string"==typeof e&&(e=_(e)),Math.abs(e)<16&&(e=60*e),this._offset=e,this._isUTC=!0,t!==e&&f(this,tt.duration(t-e,"m"),1,!0),this)},zoneAbbr:function(){return this._isUTC?"UTC":""},zoneName:function(){return this._isUTC?"Coordinated Universal Time":""},parseZone:function(){return"string"==typeof this._i&&this.zone(this._i),this},hasAlignedHourOffset:function(e){return e=e?tt(e).zone():0,0===(this.zone()-e)%60},daysInMonth:function(){return g(this.year(),this.month())},dayOfYear:function(e){var t=it((tt(this).startOf("day")-tt(this).startOf("year"))/864e5)+1;return null==e?t:this.add("d",e-t)},weekYear:function(e){var t=J(this,this.lang()._week.dow,this.lang()._week.doy).year;return null==e?t:this.add("y",e-t)},isoWeekYear:function(e){var t=J(this,1,4).year;return null==e?t:this.add("y",e-t)},week:function(e){var t=this.lang().week(this);return null==e?t:this.add("d",7*(e-t))},isoWeek:function(e){var t=J(this,1,4).week;return null==e?t:this.add("d",7*(e-t))},weekday:function(e){var t=(this.day()+7-this.lang()._week.dow)%7;return null==e?t:this.add("d",e-t)},isoWeekday:function(e){return null==e?this.day()||7:this.day(this.day()%7?e:e-7)},get:function(e){return e=p(e),this[e]()},set:function(e,t){return e=p(e),"function"==typeof this[e]&&this[e](t),this},lang:function(t){return t===e?this._lang:(this._lang=C(t),this)}}),nt=0;nt<Pt.length;nt++)G(Pt[nt].toLowerCase().replace(/s$/,""),Pt[nt]);G("year","FullYear"),tt.fn.days=tt.fn.day,tt.fn.months=tt.fn.month,tt.fn.weeks=tt.fn.week,tt.fn.isoWeeks=tt.fn.isoWeek,tt.fn.toJSON=tt.fn.toISOString,o(tt.duration.fn=s.prototype,{_bubble:function(){var e,t,n,r,i=this._milliseconds,s=this._days,o=this._months,a=this._data;a.milliseconds=i%1e3,e=u(i/1e3),a.seconds=e%60,t=u(e/60),a.minutes=t%60,n=u(t/60),a.hours=n%24,s+=u(n/24),a.days=s%30,o+=u(s/30),a.months=o%12,r=u(o/12),a.years=r},weeks:function(){return u(this.days()/7)},valueOf:function(){return this._milliseconds+864e5*this._days+2592e6*(this._months%12)+31536e6*m(this._months/12)},humanize:function(e){var t=+this,n=$(t,!e,this.lang());return e&&(n=this.lang().pastFuture(t,n)),this.lang().postformat(n)},add:function(e,t){var n=tt.duration(e,t);return this._milliseconds+=n._milliseconds,this._days+=n._days,this._months+=n._months,this._bubble(),this},subtract:function(e,t){var n=tt.duration(e,t);return this._milliseconds-=n._milliseconds,this._days-=n._days,this._months-=n._months,this._bubble(),this},get:function(e){return e=p(e),this[e.toLowerCase()+"s"]()},as:function(e){return e=p(e),this["as"+e.charAt(0).toUpperCase()+e.slice(1)+"s"]()},lang:tt.fn.lang,toIsoString:function(){var e=Math.abs(this.years()),t=Math.abs(this.months()),n=Math.abs(this.days()),r=Math.abs(this.hours()),i=Math.abs(this.minutes()),s=Math.abs(this.seconds()+this.milliseconds()/1e3);return this.asSeconds()?(this.asSeconds()<0?"-":"")+"P"+(e?e+"Y":"")+(t?t+"M":"")+(n?n+"D":"")+(r||i||s?"T":"")+(r?r+"H":"")+(i?i+"M":"")+(s?s+"S":""):"P0D"}});for(nt in Ht)Ht.hasOwnProperty(nt)&&(Z(nt,Ht[nt]),Y(nt.toLowerCase()));Z("Weeks",6048e5),tt.duration.fn.asMonths=function(){return(+this-31536e6*this.years())/2592e6+12*this.years()},tt.lang("en",{ordinal:function(e){var t=e%10,n=1===m(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th";return e+n}}),pt?(module.exports=tt,et(!0)):"function"==typeof define&&define.amd?define("moment",["require","exports","module"],function(t,n,r){return r.config().noGlobal!==!0&&et(r.config().noGlobal===e),tt}):et()}.call(this),define("moment-js",function(){}),typeof Object.create!="function"&&(Object.create=function(e){function t(){}return t.prototype=e,new t}),function(e){var t={init:function(t){return this.options=e.extend({},e.noty.defaults,t),this.options.layout=this.options.custom?e.noty.layouts.inline:e.noty.layouts[this.options.layout],e.noty.themes[this.options.theme]?this.options.theme=e.noty.themes[this.options.theme]:t.themeClassName=this.options.theme,delete t.layout,delete t.theme,this.options=e.extend({},this.options,this.options.layout.options),this.options.id="noty_"+(new Date).getTime()*Math.floor(Math.random()*1e6),this.options=e.extend({},this.options,t),this._build(),this},_build:function(){var t=e('<div class="noty_bar noty_type_'+this.options.type+'"></div>').attr("id",this.options.id);t.append(this.options.template).find(".noty_text").html(this.options.text),this.$bar=this.options.layout.parent.object!==null?e(this.options.layout.parent.object).css(this.options.layout.parent.css).append(t):t,this.options.themeClassName&&this.$bar.addClass(this.options.themeClassName).addClass("noty_container_type_"+this.options.type);if(this.options.buttons){this.options.closeWith=[],this.options.timeout=!1;var n=e("<div/>").addClass("noty_buttons");this.options.layout.parent.object!==null?this.$bar.find(".noty_bar").append(n):this.$bar.append(n);var r=this;e.each(this.options.buttons,function(t,n){var i=e("<button/>").addClass(n.addClass?n.addClass:"gray").html(n.text).attr("id",n.id?n.id:"button-"+t).appendTo(r.$bar.find(".noty_buttons")).bind("click",function(){e.isFunction(n.onClick)&&n.onClick.call(i,r)})})}this.$message=this.$bar.find(".noty_message"),this.$closeButton=this.$bar.find(".noty_close"),this.$buttons=this.$bar.find(".noty_buttons"),e.noty.store[this.options.id]=this},show:function(){var t=this;return t.options.custom?t.options.custom.find(t.options.layout.container.selector).append(t.$bar):e(t.options.layout.container.selector).append(t.$bar),t.options.theme&&t.options.theme.style&&t.options.theme.style.apply(t),e.type(t.options.layout.css)==="function"?this.options.layout.css.apply(t.$bar):t.$bar.css(this.options.layout.css||{}),t.$bar.addClass(t.options.layout.addClass),t.options.layout.container.style.apply(e(t.options.layout.container.selector)),t.showing=!0,t.options.theme&&t.options.theme.style&&t.options.theme.callback.onShow.apply(this),e.inArray("click",t.options.closeWith)>-1&&t.$bar.css("cursor","pointer").one("click",function(e){t.stopPropagation(e),t.options.callback.onCloseClick&&t.options.callback.onCloseClick.apply(t),t.close()}),e.inArray("hover",t.options.closeWith)>-1&&t.$bar.one("mouseenter",function(){t.close()}),e.inArray("button",t.options.closeWith)>-1&&t.$closeButton.one("click",function(e){t.stopPropagation(e),t.close()}),e.inArray("button",t.options.closeWith)==-1&&t.$closeButton.remove(),t.options.callback.onShow&&t.options.callback.onShow.apply(t),t.$bar.animate(t.options.animation.open,t.options.animation.speed,t.options.animation.easing,function(){t.options.callback.afterShow&&t.options.callback.afterShow.apply(t),t.showing=!1,t.shown=!0}),t.options.timeout&&t.$bar.delay(t.options.timeout).promise().done(function(){t.close()}),this},close:function(){if(this.closed)return;if(this.$bar&&this.$bar.hasClass("i-am-closing-now"))return;var t=this;if(this.showing){t.$bar.queue(function(){t.close.apply(t)});return}if(!this.shown&&!this.showing){var n=[];e.each(e.noty.queue,function(e,r){r.options.id!=t.options.id&&n.push(r)}),e.noty.queue=n;return}t.$bar.addClass("i-am-closing-now"),t.options.callback.onClose&&t.options.callback.onClose.apply(t),t.$bar.clearQueue().stop().animate(t.options.animation.close,t.options.animation.speed,t.options.animation.easing,function(){t.options.callback.afterClose&&t.options.callback.afterClose.apply(t)}).promise().done(function(){t.options.modal&&(e.notyRenderer.setModalCount(-1),e.notyRenderer.getModalCount()==0&&e(".noty_modal").fadeOut("fast",function(){e(this).remove()})),e.notyRenderer.setLayoutCountFor(t,-1),e.notyRenderer.getLayoutCountFor(t)==0&&e(t.options.layout.container.selector,t.options.custom).remove(),typeof t.$bar!="undefined"&&t.$bar!==null&&(t.$bar.remove(),t.$bar=null,t.closed=!0),delete e.noty.store[t.options.id],t.options.theme.callback&&t.options.theme.callback.onClose&&t.options.theme.callback.onClose.apply(t),t.options.dismissQueue||(e.noty.ontap=!0,e.notyRenderer.render()),t.options.maxVisible>0&&t.options.dismissQueue&&e.notyRenderer.render()})},setText:function(e){return this.closed||(this.options.text=e,this.$bar.find(".noty_text").html(e)),this},setType:function(e){return this.closed||(this.options.type=e,this.options.theme.style.apply(this),this.options.theme.callback.onShow.apply(this)),this},setTimeout:function(e){if(!this.closed){var t=this;this.options.timeout=e,t.$bar.delay(t.options.timeout).promise().done(function(){t.close()})}return this},stopPropagation:function(e){e=e||window.event,typeof e.stopPropagation!="undefined"?e.stopPropagation():e.cancelBubble=!0},closed:!1,showing:!1,shown:!1};e.notyRenderer={},e.notyRenderer.init=function(n){var r=Object.create(t).init(n);return r.options.killer&&e.noty.closeAll(),r.options.force?e.noty.queue.unshift(r):e.noty.queue.push(r),e.notyRenderer.render(),e.noty.returns=="object"?r:r.options.id},e.notyRenderer.render=function(){var t=e.noty.queue[0];e.type(t)==="object"?t.options.dismissQueue?t.options.maxVisible>0?e(t.options.layout.container.selector+" li").length<t.options.maxVisible&&e.notyRenderer.show(e.noty.queue.shift()):e.notyRenderer.show(e.noty.queue.shift()):e.noty.ontap&&(e.notyRenderer.show(e.noty.queue.shift()),e.noty.ontap=!1):e.noty.ontap=!0},e.notyRenderer.show=function(t){t.options.modal&&(e.notyRenderer.createModalFor(t),e.notyRenderer.setModalCount(1)),t.options.custom?t.options.custom.find(t.options.layout.container.selector).length==0?t.options.custom.append(e(t.options.layout.container.object).addClass("i-am-new")):t.options.custom.find(t.options.layout.container.selector).removeClass("i-am-new"):e(t.options.layout.container.selector).length==0?e("body").append(e(t.options.layout.container.object).addClass("i-am-new")):e(t.options.layout.container.selector).removeClass("i-am-new"),e.notyRenderer.setLayoutCountFor(t,1),t.show()},e.notyRenderer.createModalFor=function(t){if(e(".noty_modal").length==0){var n=e("<div/>").addClass("noty_modal").addClass(t.options.theme).data("noty_modal_count",0);t.options.theme.modal&&t.options.theme.modal.css&&n.css(t.options.theme.modal.css),n.prependTo(e("body")).fadeIn("fast")}},e.notyRenderer.getLayoutCountFor=function(t){return e(t.options.layout.container.selector,t.options.custom).data("noty_layout_count")||0},e.notyRenderer.setLayoutCountFor=function(t,n){return e(t.options.layout.container.selector,t.options.custom).data("noty_layout_count",e.notyRenderer.getLayoutCountFor(t)+n)},e.notyRenderer.getModalCount=function(){return e(".noty_modal").data("noty_modal_count")||0},e.notyRenderer.setModalCount=function(t){return e(".noty_modal").data("noty_modal_count",e.notyRenderer.getModalCount()+t)},e.fn.noty=function(t){return t.custom=e(this),e.notyRenderer.init(t)},e.noty={},e.noty.queue=[],e.noty.ontap=!0,e.noty.layouts={},e.noty.themes={},e.noty.returns="object",e.noty.store={},e.noty.get=function(t){return e.noty.store.hasOwnProperty(t)?e.noty.store[t]:!1},e.noty.close=function(t){return e.noty.get(t)?e.noty.get(t).close():!1},e.noty.setText=function(t,n){return e.noty.get(t)?e.noty.get(t).setText(n):!1},e.noty.setType=function(t,n){return e.noty.get(t)?e.noty.get(t).setType(n):!1},e.noty.clearQueue=function(){e.noty.queue=[]},e.noty.closeAll=function(){e.noty.clearQueue(),e.each(e.noty.store,function(e,t){t.close()})};var n=window.alert;e.noty.consumeAlert=function(t){window.alert=function(n){t?t.text=n:t={text:n},e.notyRenderer.init(t)}},e.noty.stopConsumeAlert=function(){window.alert=n},e.noty.defaults={layout:"top",theme:"defaultTheme",type:"alert",text:"",dismissQueue:!0,template:'<div class="noty_message"><span class="noty_text"></span><div class="noty_close"></div></div>',animation:{open:{height:"toggle"},close:{height:"toggle"},easing:"swing",speed:500},timeout:!1,force:!1,modal:!1,maxVisible:5,killer:!1,closeWith:["click"],callback:{onShow:function(){},afterShow:function(){},onClose:function(){},afterClose:function(){},onCloseClick:function(){}},buttons:!1},e(window).resize(function(){e.each(e.noty.layouts,function(t,n){n.container.style.apply(e(n.container.selector))})})}(jQuery),window.noty=function(t){return jQuery.notyRenderer.init(t)},define("noty",function(){}),function(e){e.noty.layouts.bottomRight={name:"bottomRight",options:{},container:{object:'<ul id="noty_bottomRight_layout_container" />',selector:"ul#noty_bottomRight_layout_container",style:function(){e(this).css({bottom:20,right:20,position:"fixed",width:"310px",height:"auto",margin:0,padding:0,listStyleType:"none",zIndex:1e7}),window.innerWidth<600&&e(this).css({right:5})}},parent:{object:"<li />",selector:"li",css:{}},css:{display:"none",width:"310px"},addClass:""}}(jQuery),define("noty-layout",function(){}),jQuery.easing.jswing=jQuery.easing.swing,jQuery.extend(jQuery.easing,{def:"easeOutQuad",swing:function(e,t,n,r,i){return jQuery.easing[jQuery.easing.def](e,t,n,r,i)},easeInQuad:function(e,t,n,r,i){return r*(t/=i)*t+n},easeOutQuad:function(e,t,n,r,i){return-r*(t/=i)*(t-2)+n},easeInOutQuad:function(e,t,n,r,i){return(t/=i/2)<1?r/2*t*t+n:-r/2*(--t*(t-2)-1)+n},easeInCubic:function(e,t,n,r,i){return r*(t/=i)*t*t+n},easeOutCubic:function(e,t,n,r,i){return r*((t=t/i-1)*t*t+1)+n},easeInOutCubic:function(e,t,n,r,i){return(t/=i/2)<1?r/2*t*t*t+n:r/2*((t-=2)*t*t+2)+n},easeInQuart:function(e,t,n,r,i){return r*(t/=i)*t*t*t+n},easeOutQuart:function(e,t,n,r,i){return-r*((t=t/i-1)*t*t*t-1)+n},easeInOutQuart:function(e,t,n,r,i){return(t/=i/2)<1?r/2*t*t*t*t+n:-r/2*((t-=2)*t*t*t-2)+n},easeInQuint:function(e,t,n,r,i){return r*(t/=i)*t*t*t*t+n},easeOutQuint:function(e,t,n,r,i){return r*((t=t/i-1)*t*t*t*t+1)+n},easeInOutQuint:function(e,t,n,r,i){return(t/=i/2)<1?r/2*t*t*t*t*t+n:r/2*((t-=2)*t*t*t*t+2)+n},easeInSine:function(e,t,n,r,i){return-r*Math.cos(t/i*(Math.PI/2))+r+n},easeOutSine:function(e,t,n,r,i){return r*Math.sin(t/i*(Math.PI/2))+n},easeInOutSine:function(e,t,n,r,i){return-r/2*(Math.cos(Math.PI*t/i)-1)+n},easeInExpo:function(e,t,n,r,i){return t==0?n:r*Math.pow(2,10*(t/i-1))+n},easeOutExpo:function(e,t,n,r,i){return t==i?n+r:r*(-Math.pow(2,-10*t/i)+1)+n},easeInOutExpo:function(e,t,n,r,i){return t==0?n:t==i?n+r:(t/=i/2)<1?r/2*Math.pow(2,10*(t-1))+n:r/2*(-Math.pow(2,-10*--t)+2)+n},easeInCirc:function(e,t,n,r,i){return-r*(Math.sqrt(1-(t/=i)*t)-1)+n},easeOutCirc:function(e,t,n,r,i){return r*Math.sqrt(1-(t=t/i-1)*t)+n},easeInOutCirc:function(e,t,n,r,i){return(t/=i/2)<1?-r/2*(Math.sqrt(1-t*t)-1)+n:r/2*(Math.sqrt(1-(t-=2)*t)+1)+n},easeInElastic:function(e,t,n,r,i){var s=1.70158,o=0,u=r;if(t==0)return n;if((t/=i)==1)return n+r;o||(o=i*.3);if(u<Math.abs(r)){u=r;var s=o/4}else var s=o/(2*Math.PI)*Math.asin(r/u);return-(u*Math.pow(2,10*(t-=1))*Math.sin((t*i-s)*2*Math.PI/o))+n},easeOutElastic:function(e,t,n,r,i){var s=1.70158,o=0,u=r;if(t==0)return n;if((t/=i)==1)return n+r;o||(o=i*.3);if(u<Math.abs(r)){u=r;var s=o/4}else var s=o/(2*Math.PI)*Math.asin(r/u);return u*Math.pow(2,-10*t)*Math.sin((t*i-s)*2*Math.PI/o)+r+n},easeInOutElastic:function(e,t,n,r,i){var s=1.70158,o=0,u=r;if(t==0)return n;if((t/=i/2)==2)return n+r;o||(o=i*.3*1.5);if(u<Math.abs(r)){u=r;var s=o/4}else var s=o/(2*Math.PI)*Math.asin(r/u);return t<1?-0.5*u*Math.pow(2,10*(t-=1))*Math.sin((t*i-s)*2*Math.PI/o)+n:u*Math.pow(2,-10*(t-=1))*Math.sin((t*i-s)*2*Math.PI/o)*.5+r+n},easeInBack:function(e,t,n,r,i,s){return s==undefined&&(s=1.70158),r*(t/=i)*t*((s+1)*t-s)+n},easeOutBack:function(e,t,n,r,i,s){return s==undefined&&(s=1.70158),r*((t=t/i-1)*t*((s+1)*t+s)+1)+n},easeInOutBack:function(e,t,n,r,i,s){return s==undefined&&(s=1.70158),(t/=i/2)<1?r/2*t*t*(((s*=1.525)+1)*t-s)+n:r/2*((t-=2)*t*(((s*=1.525)+1)*t+s)+2)+n},easeInBounce:function(e,t,n,r,i){return r-jQuery.easing.easeOutBounce(e,i-t,0,r,i)+n},easeOutBounce:function(e,t,n,r,i){return(t/=i)<1/2.75?r*7.5625*t*t+n:t<2/2.75?r*(7.5625*(t-=1.5/2.75)*t+.75)+n:t<2.5/2.75?r*(7.5625*(t-=2.25/2.75)*t+.9375)+n:r*(7.5625*(t-=2.625/2.75)*t+.984375)+n},easeInOutBounce:function(e,t,n,r,i){return t<i/2?jQuery.easing.easeInBounce(e,t*2,0,r,i)*.5+n:jQuery.easing.easeOutBounce(e,t*2-i,0,r,i)*.5+r*.5+n}}),define("jquery.easing",function(){});if("undefined"==typeof jQuery)throw new Error("Bootstrap's JavaScript requires jQuery");+function(e){var t=e.fn.jquery.split(" ")[0].split(".");if(t[0]<2&&t[1]<9||1==t[0]&&9==t[1]&&t[2]<1)throw new Error("Bootstrap's JavaScript requires jQuery version 1.9.1 or higher")}(jQuery),+function(e){function t(){var e=document.createElement("bootstrap"),t={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var n in t)if(void 0!==e.style[n])return{end:t[n]};return!1}e.fn.emulateTransitionEnd=function(t){var n=!1,r=this;e(this).one("bsTransitionEnd",function(){n=!0});var i=function(){n||e(r).trigger(e.support.transition.end)};return setTimeout(i,t),this},e(function(){e.support.transition=t(),e.support.transition&&(e.event.special.bsTransitionEnd={bindType:e.support.transition.end,delegateType:e.support.transition.end,handle:function(t){return e(t.target).is(this)?t.handleObj.handler.apply(this,arguments):void 0}})})}(jQuery),+function(e){function t(t){return this.each(function(){var n=e(this),i=n.data("bs.alert");i||n.data("bs.alert",i=new r(this)),"string"==typeof t&&i[t].call(n)})}var n='[data-dismiss="alert"]',r=function(t){e(t).on("click",n,this.close)};r.VERSION="3.3.4",r.TRANSITION_DURATION=150,r.prototype.close=function(t){function n(){o.detach().trigger("closed.bs.alert").remove()}var i=e(this),s=i.attr("data-target");s||(s=i.attr("href"),s=s&&s.replace(/.*(?=#[^\s]*$)/,""));var o=e(s);t&&t.preventDefault(),o.length||(o=i.closest(".alert")),o.trigger(t=e.Event("close.bs.alert")),t.isDefaultPrevented()||(o.removeClass("in"),e.support.transition&&o.hasClass("fade")?o.one("bsTransitionEnd",n).emulateTransitionEnd(r.TRANSITION_DURATION):n())};var i=e.fn.alert;e.fn.alert=t,e.fn.alert.Constructor=r,e.fn.alert.noConflict=function(){return e.fn.alert=i,this},e(document).on("click.bs.alert.data-api",n,r.prototype.close)}(jQuery),+function(e){function t(t){return this.each(function(){var r=e(this),i=r.data("bs.button"),s="object"==typeof t&&t;i||r.data("bs.button",i=new n(this,s)),"toggle"==t?i.toggle():t&&i.setState(t)})}var n=function(t,r){this.$element=e(t),this.options=e.extend({},n.DEFAULTS,r),this.isLoading=!1};n.VERSION="3.3.4",n.DEFAULTS={loadingText:"loading..."},n.prototype.setState=function(t){var n="disabled",r=this.$element,i=r.is("input")?"val":"html",s=r.data();t+="Text",null==s.resetText&&r.data("resetText",r[i]()),setTimeout(e.proxy(function(){r[i](null==s[t]?this.options[t]:s[t]),"loadingText"==t?(this.isLoading=!0,r.addClass(n).attr(n,n)):this.isLoading&&(this.isLoading=!1,r.removeClass(n).removeAttr(n))},this),0)},n.prototype.toggle=function(){var e=!0,t=this.$element.closest('[data-toggle="buttons"]');if(t.length){var n=this.$element.find("input");"radio"==n.prop("type")&&(n.prop("checked")&&this.$element.hasClass("active")?e=!1:t.find(".active").removeClass("active")),e&&n.prop("checked",!this.$element.hasClass("active")).trigger("change")}else this.$element.attr("aria-pressed",!this.$element.hasClass("active"));e&&this.$element.toggleClass("active")};var r=e.fn.button;e.fn.button=t,e.fn.button.Constructor=n,e.fn.button.noConflict=function(){return e.fn.button=r,this},e(document).on("click.bs.button.data-api",'[data-toggle^="button"]',function(n){var r=e(n.target);r.hasClass("btn")||(r=r.closest(".btn")),t.call(r,"toggle"),n.preventDefault()}).on("focus.bs.button.data-api blur.bs.button.data-api",'[data-toggle^="button"]',function(t){e(t.target).closest(".btn").toggleClass("focus",/^focus(in)?$/.test(t.type))})}(jQuery),+function(e){function t(t){return this.each(function(){var r=e(this),i=r.data("bs.carousel"),s=e.extend({},n.DEFAULTS,r.data(),"object"==typeof t&&t),o="string"==typeof t?t:s.slide;i||r.data("bs.carousel",i=new n(this,s)),"number"==typeof t?i.to(t):o?i[o]():s.interval&&i.pause().cycle()})}var n=function(t,n){this.$element=e(t),this.$indicators=this.$element.find(".carousel-indicators"),this.options=n,this.paused=null,this.sliding=null,this.interval=null,this.$active=null,this.$items=null,this.options.keyboard&&this.$element.on("keydown.bs.carousel",e.proxy(this.keydown,this)),"hover"==this.options.pause&&!("ontouchstart"in document.documentElement)&&this.$element.on("mouseenter.bs.carousel",e.proxy(this.pause,this)).on("mouseleave.bs.carousel",e.proxy(this.cycle,this))};n.VERSION="3.3.4",n.TRANSITION_DURATION=600,n.DEFAULTS={interval:5e3,pause:"hover",wrap:!0,keyboard:!0},n.prototype.keydown=function(e){if(!/input|textarea/i.test(e.target.tagName)){switch(e.which){case 37:this.prev();break;case 39:this.next();break;default:return}e.preventDefault()}},n.prototype.cycle=function(t){return t||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(e.proxy(this.next,this),this.options.interval)),this},n.prototype.getItemIndex=function(e){return this.$items=e.parent().children(".item"),this.$items.index(e||this.$active)},n.prototype.getItemForDirection=function(e,t){var n=this.getItemIndex(t),r="prev"==e&&0===n||"next"==e&&n==this.$items.length-1;if(r&&!this.options.wrap)return t;var i="prev"==e?-1:1,s=(n+i)%this.$items.length;return this.$items.eq(s)},n.prototype.to=function(e){var t=this,n=this.getItemIndex(this.$active=this.$element.find(".item.active"));return e>this.$items.length-1||0>e?void 0:this.sliding?this.$element.one("slid.bs.carousel",function(){t.to(e)}):n==e?this.pause().cycle():this.slide(e>n?"next":"prev",this.$items.eq(e))},n.prototype.pause=function(t){return t||(this.paused=!0),this.$element.find(".next, .prev").length&&e.support.transition&&(this.$element.trigger(e.support.transition.end),this.cycle(!0)),this.interval=clearInterval(this.interval),this},n.prototype.next=function(){return this.sliding?void 0:this.slide("next")},n.prototype.prev=function(){return this.sliding?void 0:this.slide("prev")},n.prototype.slide=function(t,r){var i=this.$element.find(".item.active"),s=r||this.getItemForDirection(t,i),o=this.interval,u="next"==t?"left":"right",f=this;if(s.hasClass("active"))return this.sliding=!1;var l=s[0],h=e.Event("slide.bs.carousel",{relatedTarget:l,direction:u});if(this.$element.trigger(h),!h.isDefaultPrevented()){if(this.sliding=!0,o&&this.pause(),this.$indicators.length){this.$indicators.find(".active").removeClass("active");var p=e(this.$indicators.children()[this.getItemIndex(s)]);p&&p.addClass("active")}var d=e.Event("slid.bs.carousel",{relatedTarget:l,direction:u});return e.support.transition&&this.$element.hasClass("slide")?(s.addClass(t),s[0].offsetWidth,i.addClass(u),s.addClass(u),i.one("bsTransitionEnd",function(){s.removeClass([t,u].join(" ")).addClass("active"),i.removeClass(["active",u].join(" ")),f.sliding=!1,setTimeout(function(){f.$element.trigger(d)},0)}).emulateTransitionEnd(n.TRANSITION_DURATION)):(i.removeClass("active"),s.addClass("active"),this.sliding=!1,this.$element.trigger(d)),o&&this.cycle(),this}};var r=e.fn.carousel;e.fn.carousel=t,e.fn.carousel.Constructor=n,e.fn.carousel.noConflict=function(){return e.fn.carousel=r,this};var i=function(n){var r,i=e(this),s=e(i.attr("data-target")||(r=i.attr("href"))&&r.replace(/.*(?=#[^\s]+$)/,""));if(s.hasClass("carousel")){var o=e.extend({},s.data(),i.data()),u=i.attr("data-slide-to");u&&(o.interval=!1),t.call(s,o),u&&s.data("bs.carousel").to(u),n.preventDefault()}};e(document).on("click.bs.carousel.data-api","[data-slide]",i).on("click.bs.carousel.data-api","[data-slide-to]",i),e(window).on("load",function(){e('[data-ride="carousel"]').each(function(){var n=e(this);t.call(n,n.data())})})}(jQuery),+function(e){function t(t){var n,r=t.attr("data-target")||(n=t.attr("href"))&&n.replace(/.*(?=#[^\s]+$)/,"");return e(r)}function n(t){return this.each(function(){var n=e(this),i=n.data("bs.collapse"),s=e.extend({},r.DEFAULTS,n.data(),"object"==typeof t&&t);!i&&s.toggle&&/show|hide/.test(t)&&(s.toggle=!1),i||n.data("bs.collapse",i=new r(this,s)),"string"==typeof t&&i[t]()})}var r=function(t,n){this.$element=e(t),this.options=e.extend({},r.DEFAULTS,n),this.$trigger=e('[data-toggle="collapse"][href="#'+t.id+'"],[data-toggle="collapse"][data-target="#'+t.id+'"]'),this.transitioning=null,this.options.parent?this.$parent=this.getParent():this.addAriaAndCollapsedClass(this.$element,this.$trigger),this.options.toggle&&this.toggle()};r.VERSION="3.3.4",r.TRANSITION_DURATION=350,r.DEFAULTS={toggle:!0},r.prototype.dimension=function(){var e=this.$element.hasClass("width");return e?"width":"height"},r.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var t,i=this.$parent&&this.$parent.children(".panel").children(".in, .collapsing");if(!(i&&i.length&&(t=i.data("bs.collapse"),t&&t.transitioning))){var s=e.Event("show.bs.collapse");if(this.$element.trigger(s),!s.isDefaultPrevented()){i&&i.length&&(n.call(i,"hide"),t||i.data("bs.collapse",null));var o=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[o](0).attr("aria-expanded",!0),this.$trigger.removeClass("collapsed").attr("aria-expanded",!0),this.transitioning=1;var u=function(){this.$element.removeClass("collapsing").addClass("collapse in")[o](""),this.transitioning=0,this.$element.trigger("shown.bs.collapse")};if(!e.support.transition)return u.call(this);var f=e.camelCase(["scroll",o].join("-"));this.$element.one("bsTransitionEnd",e.proxy(u,this)).emulateTransitionEnd(r.TRANSITION_DURATION)[o](this.$element[0][f])}}}},r.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var t=e.Event("hide.bs.collapse");if(this.$element.trigger(t),!t.isDefaultPrevented()){var n=this.dimension();this.$element[n](this.$element[n]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse in").attr("aria-expanded",!1),this.$trigger.addClass("collapsed").attr("aria-expanded",!1),this.transitioning=1;var i=function(){this.transitioning=0,this.$element.removeClass("collapsing").addClass("collapse").trigger("hidden.bs.collapse")};return e.support.transition?void this.$element[n](0).one("bsTransitionEnd",e.proxy(i,this)).emulateTransitionEnd(r.TRANSITION_DURATION):i.call(this)}}},r.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()},r.prototype.getParent=function(){return e(this.options.parent).find('[data-toggle="collapse"][data-parent="'+this.options.parent+'"]').each(e.proxy(function(n,r){var i=e(r);this.addAriaAndCollapsedClass(t(i),i)},this)).end()},r.prototype.addAriaAndCollapsedClass=function(e,t){var n=e.hasClass("in");e.attr("aria-expanded",n),t.toggleClass("collapsed",!n).attr("aria-expanded",n)};var i=e.fn.collapse;e.fn.collapse=n,e.fn.collapse.Constructor=r,e.fn.collapse.noConflict=function(){return e.fn.collapse=i,this},e(document).on("click.bs.collapse.data-api",'[data-toggle="collapse"]',function(r){var i=e(this);i.attr("data-target")||r.preventDefault();var s=t(i),o=s.data("bs.collapse"),u=o?"toggle":i.data();n.call(s,u)})}(jQuery),+function(e){function t(t){t&&3===t.which||(e(i).remove(),e(s).each(function(){var r=e(this),i=n(r),s={relatedTarget:this};i.hasClass("open")&&(i.trigger(t=e.Event("hide.bs.dropdown",s)),t.isDefaultPrevented()||(r.attr("aria-expanded","false"),i.removeClass("open").trigger("hidden.bs.dropdown",s)))}))}function n(t){var n=t.attr("data-target");n||(n=t.attr("href"),n=n&&/#[A-Za-z]/.test(n)&&n.replace(/.*(?=#[^\s]*$)/,""));var r=n&&e(n);return r&&r.length?r:t.parent()}function r(t){return this.each(function(){var n=e(this),r=n.data("bs.dropdown");r||n.data("bs.dropdown",r=new o(this)),"string"==typeof t&&r[t].call(n)})}var i=".dropdown-backdrop",s='[data-toggle="dropdown"]',o=function(t){e(t).on("click.bs.dropdown",this.toggle)};o.VERSION="3.3.4",o.prototype.toggle=function(r){var i=e(this);if(!i.is(".disabled, :disabled")){var s=n(i),o=s.hasClass("open");if(t(),!o){"ontouchstart"in document.documentElement&&!s.closest(".navbar-nav").length&&e('<div class="dropdown-backdrop"/>').insertAfter(e(this)).on("click",t);var u={relatedTarget:this};if(s.trigger(r=e.Event("show.bs.dropdown",u)),r.isDefaultPrevented())return;i.trigger("focus").attr("aria-expanded","true"),s.toggleClass("open").trigger("shown.bs.dropdown",u)}return!1}},o.prototype.keydown=function(t){if(/(38|40|27|32)/.test(t.which)&&!/input|textarea/i.test(t.target.tagName)){var r=e(this);if(t.preventDefault(),t.stopPropagation(),!r.is(".disabled, :disabled")){var i=n(r),o=i.hasClass("open");if(!o&&27!=t.which||o&&27==t.which)return 27==t.which&&i.find(s).trigger("focus"),r.trigger("click");var u=" li:not(.disabled):visible a",l=i.find('[role="menu"]'+u+', [role="listbox"]'+u);if(l.length){var h=l.index(t.target);38==t.which&&h>0&&h--,40==t.which&&h<l.length-1&&h++,~h||(h=0),l.eq(h).trigger("focus")}}}};var u=e.fn.dropdown;e.fn.dropdown=r,e.fn.dropdown.Constructor=o,e.fn.dropdown.noConflict=function(){return e.fn.dropdown=u,this},e(document).on("click.bs.dropdown.data-api",t).on("click.bs.dropdown.data-api",".dropdown form",function(e){e.stopPropagation()}).on("click.bs.dropdown.data-api",s,o.prototype.toggle).on("keydown.bs.dropdown.data-api",s,o.prototype.keydown).on("keydown.bs.dropdown.data-api",'[role="menu"]',o.prototype.keydown).on("keydown.bs.dropdown.data-api",'[role="listbox"]',o.prototype.keydown)}(jQuery),+function(e){function t(t,r){return this.each(function(){var i=e(this),s=i.data("bs.modal"),o=e.extend({},n.DEFAULTS,i.data(),"object"==typeof t&&t);s||i.data("bs.modal",s=new n(this,o)),"string"==typeof t?s[t](r):o.show&&s.show(r)})}var n=function(t,n){this.options=n,this.$body=e(document.body),this.$element=e(t),this.$dialog=this.$element.find(".modal-dialog"),this.$backdrop=null,this.isShown=null,this.originalBodyPad=null,this.scrollbarWidth=0,this.ignoreBackdropClick=!1,this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,e.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))};n.VERSION="3.3.4",n.TRANSITION_DURATION=300,n.BACKDROP_TRANSITION_DURATION=150,n.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},n.prototype.toggle=function(e){return this.isShown?this.hide():this.show(e)},n.prototype.show=function(t){var r=this,i=e.Event("show.bs.modal",{relatedTarget:t});this.$element.trigger(i),this.isShown||i.isDefaultPrevented()||(this.isShown=!0,this.checkScrollbar(),this.setScrollbar(),this.$body.addClass("modal-open"),this.escape(),this.resize(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',e.proxy(this.hide,this)),this.$dialog.on("mousedown.dismiss.bs.modal",function(){r.$element.one("mouseup.dismiss.bs.modal",function(t){e(t.target).is(r.$element)&&(r.ignoreBackdropClick=!0)})}),this.backdrop(function(){var i=e.support.transition&&r.$element.hasClass("fade");r.$element.parent().length||r.$element.appendTo(r.$body),r.$element.show().scrollTop(0),r.adjustDialog(),i&&r.$element[0].offsetWidth,r.$element.addClass("in").attr("aria-hidden",!1),r.enforceFocus();var s=e.Event("shown.bs.modal",{relatedTarget:t});i?r.$dialog.one("bsTransitionEnd",function(){r.$element.trigger("focus").trigger(s)}).emulateTransitionEnd(n.TRANSITION_DURATION):r.$element.trigger("focus").trigger(s)}))},n.prototype.hide=function(t){t&&t.preventDefault(),t=e.Event("hide.bs.modal"),this.$element.trigger(t),this.isShown&&!t.isDefaultPrevented()&&(this.isShown=!1,this.escape(),this.resize(),e(document).off("focusin.bs.modal"),this.$element.removeClass("in").attr("aria-hidden",!0).off("click.dismiss.bs.modal").off("mouseup.dismiss.bs.modal"),this.$dialog.off("mousedown.dismiss.bs.modal"),e.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",e.proxy(this.hideModal,this)).emulateTransitionEnd(n.TRANSITION_DURATION):this.hideModal())},n.prototype.enforceFocus=function(){e(document).off("focusin.bs.modal").on("focusin.bs.modal",e.proxy(function(e){this.$element[0]===e.target||this.$element.has(e.target).length||this.$element.trigger("focus")},this))},n.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keydown.dismiss.bs.modal",e.proxy(function(e){27==e.which&&this.hide()},this)):this.isShown||this.$element.off("keydown.dismiss.bs.modal")},n.prototype.resize=function(){this.isShown?e(window).on("resize.bs.modal",e.proxy(this.handleUpdate,this)):e(window).off("resize.bs.modal")},n.prototype.hideModal=function(){var e=this;this.$element.hide(),this.backdrop(function(){e.$body.removeClass("modal-open"),e.resetAdjustments(),e.resetScrollbar(),e.$element.trigger("hidden.bs.modal")})},n.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},n.prototype.backdrop=function(t){var r=this,i=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var s=e.support.transition&&i;if(this.$backdrop=e('<div class="modal-backdrop '+i+'" />').appendTo(this.$body),this.$element.on("click.dismiss.bs.modal",e.proxy(function(e){return this.ignoreBackdropClick?void (this.ignoreBackdropClick=!1):void (e.target===e.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus():this.hide()))},this)),s&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!t)return;s?this.$backdrop.one("bsTransitionEnd",t).emulateTransitionEnd(n.BACKDROP_TRANSITION_DURATION):t()}else if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("in");var o=function(){r.removeBackdrop(),t&&t()};e.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("bsTransitionEnd",o).emulateTransitionEnd(n.BACKDROP_TRANSITION_DURATION):o()}else t&&t()},n.prototype.handleUpdate=function(){this.adjustDialog()},n.prototype.adjustDialog=function(){var e=this.$element[0].scrollHeight>document.documentElement.clientHeight;this.$element.css({paddingLeft:!this.bodyIsOverflowing&&e?this.scrollbarWidth:"",paddingRight:this.bodyIsOverflowing&&!e?this.scrollbarWidth:""})},n.prototype.resetAdjustments=function(){this.$element.css({paddingLeft:"",paddingRight:""})},n.prototype.checkScrollbar=function(){var e=window.innerWidth;if(!e){var t=document.documentElement.getBoundingClientRect();e=t.right-Math.abs(t.left)}this.bodyIsOverflowing=document.body.clientWidth<e,this.scrollbarWidth=this.measureScrollbar()},n.prototype.setScrollbar=function(){var e=parseInt(this.$body.css("padding-right")||0,10);this.originalBodyPad=document.body.style.paddingRight||"",this.bodyIsOverflowing&&this.$body.css("padding-right",e+this.scrollbarWidth)},n.prototype.resetScrollbar=function(){this.$body.css("padding-right",this.originalBodyPad)},n.prototype.measureScrollbar=function(){var e=document.createElement("div");e.className="modal-scrollbar-measure",this.$body.append(e);var t=e.offsetWidth-e.clientWidth;return this.$body[0].removeChild(e),t};var r=e.fn.modal;e.fn.modal=t,e.fn.modal.Constructor=n,e.fn.modal.noConflict=function(){return e.fn.modal=r,this},e(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(n){var r=e(this),i=r.attr("href"),s=e(r.attr("data-target")||i&&i.replace(/.*(?=#[^\s]+$)/,"")),o=s.data("bs.modal")?"toggle":e.extend({remote:!/#/.test(i)&&i},s.data(),r.data());r.is("a")&&n.preventDefault(),s.one("show.bs.modal",function(e){e.isDefaultPrevented()||s.one("hidden.bs.modal",function(){r.is(":visible")&&r.trigger("focus")})}),t.call(s,o,this)})}(jQuery),+function(e){function t(t){return this.each(function(){var r=e(this),i=r.data("bs.tooltip"),s="object"==typeof t&&t;(i||!/destroy|hide/.test(t))&&(i||r.data("bs.tooltip",i=new n(this,s)),"string"==typeof t&&i[t]())})}var n=function(e,t){this.type=null,this.options=null,this.enabled=null,this.timeout=null,this.hoverState=null,this.$element=null,this.init("tooltip",e,t)};n.VERSION="3.3.4",n.TRANSITION_DURATION=150,n.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1,viewport:{selector:"body",padding:0}},n.prototype.init=function(t,n,r){if(this.enabled=!0,this.type=t,this.$element=e(n),this.options=this.getOptions(r),this.$viewport=this.options.viewport&&e(this.options.viewport.selector||this.options.viewport),this.$element[0]instanceof document.constructor&&!this.options.selector)throw new Error("`selector` option must be specified when initializing "+this.type+" on the window.document object!");for(var i=this.options.trigger.split(" "),s=i.length;s--;){var o=i[s];if("click"==o)this.$element.on("click."+this.type,this.options.selector,e.proxy(this.toggle,this));else if("manual"!=o){var u="hover"==o?"mouseenter":"focusin",f="hover"==o?"mouseleave":"focusout";this.$element.on(u+"."+this.type,this.options.selector,e.proxy(this.enter,this)),this.$element.on(f+"."+this.type,this.options.selector,e.proxy(this.leave,this))}}this.options.selector?this._options=e.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},n.prototype.getDefaults=function(){return n.DEFAULTS},n.prototype.getOptions=function(t){return t=e.extend({},this.getDefaults(),this.$element.data(),t),t.delay&&"number"==typeof t.delay&&(t.delay={show:t.delay,hide:t.delay}),t},n.prototype.getDelegateOptions=function(){var t={},n=this.getDefaults();return this._options&&e.each(this._options,function(e,r){n[e]!=r&&(t[e]=r)}),t},n.prototype.enter=function(t){var n=t instanceof this.constructor?t:e(t.currentTarget).data("bs."+this.type);return n&&n.$tip&&n.$tip.is(":visible")?void (n.hoverState="in"):(n||(n=new this.constructor(t.currentTarget,this.getDelegateOptions()),e(t.currentTarget).data("bs."+this.type,n)),clearTimeout(n.timeout),n.hoverState="in",n.options.delay&&n.options.delay.show?void (n.timeout=setTimeout(function(){"in"==n.hoverState&&n.show()},n.options.delay.show)):n.show())},n.prototype.leave=function(t){var n=t instanceof this.constructor?t:e(t.currentTarget).data("bs."+this.type);return n||(n=new this.constructor(t.currentTarget,this.getDelegateOptions()),e(t.currentTarget).data("bs."+this.type,n)),clearTimeout(n.timeout),n.hoverState="out",n.options.delay&&n.options.delay.hide?void (n.timeout=setTimeout(function(){"out"==n.hoverState&&n.hide()},n.options.delay.hide)):n.hide()},n.prototype.show=function(){var t=e.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(t);var r=e.contains(this.$element[0].ownerDocument.documentElement,this.$element[0]);if(t.isDefaultPrevented()||!r)return;var i=this,s=this.tip(),o=this.getUID(this.type);this.setContent(),s.attr("id",o),this.$element.attr("aria-describedby",o),this.options.animation&&s.addClass("fade");var u="function"==typeof this.options.placement?this.options.placement.call(this,s[0],this.$element[0]):this.options.placement,f=/\s?auto?\s?/i,l=f.test(u);l&&(u=u.replace(f,"")||"top"),s.detach().css({top:0,left:0,display:"block"}).addClass(u).data("bs."+this.type,this),this.options.container?s.appendTo(this.options.container):s.insertAfter(this.$element);var h=this.getPosition(),p=s[0].offsetWidth,d=s[0].offsetHeight;if(l){var v=u,m=this.options.container?e(this.options.container):this.$element.parent(),g=this.getPosition(m);u="bottom"==u&&h.bottom+d>g.bottom?"top":"top"==u&&h.top-d<g.top?"bottom":"right"==u&&h.right+p>g.width?"left":"left"==u&&h.left-p<g.left?"right":u,s.removeClass(v).addClass(u)}var y=this.getCalculatedOffset(u,h,p,d);this.applyPlacement(y,u);var b=function(){var e=i.hoverState;i.$element.trigger("shown.bs."+i.type),i.hoverState=null,"out"==e&&i.leave(i)};e.support.transition&&this.$tip.hasClass("fade")?s.one("bsTransitionEnd",b).emulateTransitionEnd(n.TRANSITION_DURATION):b()}},n.prototype.applyPlacement=function(t,n){var r=this.tip(),i=r[0].offsetWidth,s=r[0].offsetHeight,o=parseInt(r.css("margin-top"),10),u=parseInt(r.css("margin-left"),10);isNaN(o)&&(o=0),isNaN(u)&&(u=0),t.top=t.top+o,t.left=t.left+u,e.offset.setOffset(r[0],e.extend({using:function(e){r.css({top:Math.round(e.top),left:Math.round(e.left)})}},t),0),r.addClass("in");var f=r[0].offsetWidth,l=r[0].offsetHeight;"top"==n&&l!=s&&(t.top=t.top+s-l);var c=this.getViewportAdjustedDelta(n,t,f,l);c.left?t.left+=c.left:t.top+=c.top;var h=/top|bottom/.test(n),p=h?2*c.left-i+f:2*c.top-s+l,d=h?"offsetWidth":"offsetHeight";r.offset(t),this.replaceArrow(p,r[0][d],h)},n.prototype.replaceArrow=function(e,t,n){this.arrow().css(n?"left":"top",50*(1-e/t)+"%").css(n?"top":"left","")},n.prototype.setContent=function(){var e=this.tip(),t=this.getTitle();e.find(".tooltip-inner")[this.options.html?"html":"text"](t),e.removeClass("fade in top bottom left right")},n.prototype.hide=function(t){function r(){"in"!=i.hoverState&&s.detach(),i.$element.removeAttr("aria-describedby").trigger("hidden.bs."+i.type),t&&t()}var i=this,s=e(this.$tip),o=e.Event("hide.bs."+this.type);return this.$element.trigger(o),o.isDefaultPrevented()?void 0:(s.removeClass("in"),e.support.transition&&s.hasClass("fade")?s.one("bsTransitionEnd",r).emulateTransitionEnd(n.TRANSITION_DURATION):r(),this.hoverState=null,this)},n.prototype.fixTitle=function(){var e=this.$element;(e.attr("title")||"string"!=typeof e.attr("data-original-title"))&&e.attr("data-original-title",e.attr("title")||"").attr("title","")},n.prototype.hasContent=function(){return this.getTitle()},n.prototype.getPosition=function(t){t=t||this.$element;var n=t[0],r="BODY"==n.tagName,i=n.getBoundingClientRect();null==i.width&&(i=e.extend({},i,{width:i.right-i.left,height:i.bottom-i.top}));var s=r?{top:0,left:0}:t.offset(),o={scroll:r?document.documentElement.scrollTop||document.body.scrollTop:t.scrollTop()},u=r?{width:e(window).width(),height:e(window).height()}:null;return e.extend({},i,o,u,s)},n.prototype.getCalculatedOffset=function(e,t,n,r){return"bottom"==e?{top:t.top+t.height,left:t.left+t.width/2-n/2}:"top"==e?{top:t.top-r,left:t.left+t.width/2-n/2}:"left"==e?{top:t.top+t.height/2-r/2,left:t.left-n}:{top:t.top+t.height/2-r/2,left:t.left+t.width}},n.prototype.getViewportAdjustedDelta=function(e,t,n,r){var i={top:0,left:0};if(!this.$viewport)return i;var s=this.options.viewport&&this.options.viewport.padding||0,o=this.getPosition(this.$viewport);if(/right|left/.test(e)){var u=t.top-s-o.scroll,a=t.top+s-o.scroll+r;u<o.top?i.top=o.top-u:a>o.top+o.height&&(i.top=o.top+o.height-a)}else{var f=t.left-s,l=t.left+s+n;f<o.left?i.left=o.left-f:l>o.width&&(i.left=o.left+o.width-l)}return i},n.prototype.getTitle=function(){var e,t=this.$element,n=this.options;return e=t.attr("data-original-title")||("function"==typeof n.title?n.title.call(t[0]):n.title)},n.prototype.getUID=function(e){do e+=~~(1e6*Math.random());while(document.getElementById(e));return e},n.prototype.tip=function(){return this.$tip=this.$tip||e(this.options.template)},n.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},n.prototype.enable=function(){this.enabled=!0},n.prototype.disable=function(){this.enabled=!1},n.prototype.toggleEnabled=function(){this.enabled=!this.enabled},n.prototype.toggle=function(t){var n=this;t&&(n=e(t.currentTarget).data("bs."+this.type),n||(n=new this.constructor(t.currentTarget,this.getDelegateOptions()),e(t.currentTarget).data("bs."+this.type,n))),n.tip().hasClass("in")?n.leave(n):n.enter(n)},n.prototype.destroy=function(){var e=this;clearTimeout(this.timeout),this.hide(function(){e.$element.off("."+e.type).removeData("bs."+e.type)})};var r=e.fn.tooltip;e.fn.tooltip=t,e.fn.tooltip.Constructor=n,e.fn.tooltip.noConflict=function(){return e.fn.tooltip=r,this}}(jQuery),+function(e){function t(t){return this.each(function(){var r=e(this),i=r.data("bs.popover"),s="object"==typeof t&&t;(i||!/destroy|hide/.test(t))&&(i||r.data("bs.popover",i=new n(this,s)),"string"==typeof t&&i[t]())})}var n=function(e,t){this.init("popover",e,t)};if(!e.fn.tooltip)throw new Error("Popover requires tooltip.js");n.VERSION="3.3.4",n.DEFAULTS=e.extend({},e.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),n.prototype=e.extend({},e.fn.tooltip.Constructor.prototype),n.prototype.constructor=n,n.prototype.getDefaults=function(){return n.DEFAULTS},n.prototype.setContent=function(){var e=this.tip(),t=this.getTitle(),n=this.getContent();e.find(".popover-title")[this.options.html?"html":"text"](t),e.find(".popover-content").children().detach().end()[this.options.html?"string"==typeof n?"html":"append":"text"](n),e.removeClass("fade top bottom left right in"),e.find(".popover-title").html()||e.find(".popover-title").hide()},n.prototype.hasContent=function(){return this.getTitle()||this.getContent()},n.prototype.getContent=function(){var e=this.$element,t=this.options;return e.attr("data-content")||("function"==typeof t.content?t.content.call(e[0]):t.content)},n.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")};var r=e.fn.popover;e.fn.popover=t,e.fn.popover.Constructor=n,e.fn.popover.noConflict=function(){return e.fn.popover=r,this}}(jQuery),+function(e){function t(n,r){this.$body=e(document.body),this.$scrollElement=e(e(n).is(document.body)?window:n),this.options=e.extend({},t.DEFAULTS,r),this.selector=(this.options.target||"")+" .nav li > a",this.offsets=[],this.targets=[],this.activeTarget=null,this.scrollHeight=0,this.$scrollElement.on("scroll.bs.scrollspy",e.proxy(this.process,this)),this.refresh(),this.process()}function n(n){return this.each(function(){var r=e(this),i=r.data("bs.scrollspy"),s="object"==typeof n&&n;i||r.data("bs.scrollspy",i=new t(this,s)),"string"==typeof n&&i[n]()})}t.VERSION="3.3.4",t.DEFAULTS={offset:10},t.prototype.getScrollHeight=function(){return this.$scrollElement[0].scrollHeight||Math.max(this.$body[0].scrollHeight,document.documentElement.scrollHeight)},t.prototype.refresh=function(){var t=this,n="offset",r=0;this.offsets=[],this.targets=[],this.scrollHeight=this.getScrollHeight(),e.isWindow(this.$scrollElement[0])||(n="position",r=this.$scrollElement.scrollTop()),this.$body.find(this.selector).map(function(){var t=e(this),i=t.data("target")||t.attr("href"),s=/^#./.test(i)&&e(i);return s&&s.length&&s.is(":visible")&&[[s[n]().top+r,i]]||null}).sort(function(e,t){return e[0]-t[0]}).each(function(){t.offsets.push(this[0]),t.targets.push(this[1])})},t.prototype.process=function(){var e,t=this.$scrollElement.scrollTop()+this.options.offset,n=this.getScrollHeight(),r=this.options.offset+n-this.$scrollElement.height(),i=this.offsets,s=this.targets,o=this.activeTarget;if(this.scrollHeight!=n&&this.refresh(),t>=r)return o!=(e=s[s.length-1])&&this.activate(e);if(o&&t<i[0])return this.activeTarget=null,this.clear();for(e=i.length;e--;)o!=s[e]&&t>=i[e]&&(void 0===i[e+1]||t<i[e+1])&&this.activate(s[e])},t.prototype.activate=function(t){this.activeTarget=t,this.clear();var n=this.selector+'[data-target="'+t+'"],'+this.selector+'[href="'+t+'"]',r=e(n).parents("li").addClass("active");r.parent(".dropdown-menu").length&&(r=r.closest("li.dropdown").addClass("active")),r.trigger("activate.bs.scrollspy")},t.prototype.clear=function(){e(this.selector).parentsUntil(this.options.target,".active").removeClass("active")};var r=e.fn.scrollspy;e.fn.scrollspy=n,e.fn.scrollspy.Constructor=t,e.fn.scrollspy.noConflict=function(){return e.fn.scrollspy=r,this},e(window).on("load.bs.scrollspy.data-api",function(){e('[data-spy="scroll"]').each(function(){var t=e(this);n.call(t,t.data())})})}(jQuery),+function(e){function t(t){return this.each(function(){var r=e(this),i=r.data("bs.tab");i||r.data("bs.tab",i=new n(this)),"string"==typeof t&&i[t]()})}var n=function(t){this.element=e(t)};n.VERSION="3.3.4",n.TRANSITION_DURATION=150,n.prototype.show=function(){var t=this.element,n=t.closest("ul:not(.dropdown-menu)"),r=t.data("target");if(r||(r=t.attr("href"),r=r&&r.replace(/.*(?=#[^\s]*$)/,"")),!t.parent("li").hasClass("active")){var i=n.find(".active:last a"),s=e.Event("hide.bs.tab",{relatedTarget:t[0]}),o=e.Event("show.bs.tab",{relatedTarget:i[0]});if(i.trigger(s),t.trigger(o),!o.isDefaultPrevented()&&!s.isDefaultPrevented()){var u=e(r);this.activate(t.closest("li"),n),this.activate(u,u.parent(),function(){i.trigger({type:"hidden.bs.tab",relatedTarget:t[0]}),t.trigger({type:"shown.bs.tab",relatedTarget:i[0]})})}}},n.prototype.activate=function(t,r,i){function s(){o.removeClass("active").find("> .dropdown-menu > .active").removeClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!1),t.addClass("active").find('[data-toggle="tab"]').attr("aria-expanded",!0),u?(t[0].offsetWidth,t.addClass("in")):t.removeClass("fade"),t.parent(".dropdown-menu").length&&t.closest("li.dropdown").addClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!0),i&&i()}var o=r.find("> .active"),u=i&&e.support.transition&&(o.length&&o.hasClass("fade")||!!r.find("> .fade").length);o.length&&u?o.one("bsTransitionEnd",s).emulateTransitionEnd(n.TRANSITION_DURATION):s(),o.removeClass("in")};var r=e.fn.tab;e.fn.tab=t,e.fn.tab.Constructor=n,e.fn.tab.noConflict=function(){return e.fn.tab=r,this};var i=function(n){n.preventDefault(),t.call(e(this),"show")};e(document).on("click.bs.tab.data-api",'[data-toggle="tab"]',i).on("click.bs.tab.data-api",'[data-toggle="pill"]',i)}(jQuery),+function(e){function t(t){return this.each(function(){var r=e(this),i=r.data("bs.affix"),s="object"==typeof t&&t;i||r.data("bs.affix",i=new n(this,s)),"string"==typeof t&&i[t]()})}var n=function(t,r){this.options=e.extend({},n.DEFAULTS,r),this.$target=e(this.options.target).on("scroll.bs.affix.data-api",e.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",e.proxy(this.checkPositionWithEventLoop,this)),this.$element=e(t),this.affixed=null,this.unpin=null,this.pinnedOffset=null,this.checkPosition()};n.VERSION="3.3.4",n.RESET="affix affix-top affix-bottom",n.DEFAULTS={offset:0,target:window},n.prototype.getState=function(e,t,n,r){var i=this.$target.scrollTop(),s=this.$element.offset(),o=this.$target.height();if(null!=n&&"top"==this.affixed)return n>i?"top":!1;if("bottom"==this.affixed)return null!=n?i+this.unpin<=s.top?!1:"bottom":e-r>=i+o?!1:"bottom";var u=null==this.affixed,a=u?i:s.top,f=u?o:t;return null!=n&&n>=i?"top":null!=r&&a+f>=e-r?"bottom":!1},n.prototype.getPinnedOffset=function(){if(this.pinnedOffset)return this.pinnedOffset;this.$element.removeClass(n.RESET).addClass("affix");var e=this.$target.scrollTop(),t=this.$element.offset();return this.pinnedOffset=t.top-e},n.prototype.checkPositionWithEventLoop=function(){setTimeout(e.proxy(this.checkPosition,this),1)},n.prototype.checkPosition=function(){if(this.$element.is(":visible")){var t=this.$element.height(),r=this.options.offset,i=r.top,s=r.bottom,o=e(document.body).height();"object"!=typeof r&&(s=i=r),"function"==typeof i&&(i=r.top(this.$element)),"function"==typeof s&&(s=r.bottom(this.$element));var u=this.getState(o,t,i,s);if(this.affixed!=u){null!=this.unpin&&this.$element.css("top","");var f="affix"+(u?"-"+u:""),l=e.Event(f+".bs.affix");if(this.$element.trigger(l),l.isDefaultPrevented())return;this.affixed=u,this.unpin="bottom"==u?this.getPinnedOffset():null,this.$element.removeClass(n.RESET).addClass(f).trigger(f.replace("affix","affixed")+".bs.affix")}"bottom"==u&&this.$element.offset({top:o-t-s})}};var r=e.fn.affix;e.fn.affix=t,e.fn.affix.Constructor=n,e.fn.affix.noConflict=function(){return e.fn.affix=r,this},e(window).on("load",function(){e('[data-spy="affix"]').each(function(){var n=e(this),r=n.data();r.offset=r.offset||{},null!=r.offsetBottom&&(r.offset.bottom=r.offsetBottom),null!=r.offsetTop&&(r.offset.top=r.offsetTop),t.call(n,r)})})}(jQuery),define("bootstrap",function(){}),function(e,t){function r(){return new Date(Date.UTC.apply(Date,arguments))}function i(){var e=new Date;return r(e.getFullYear(),e.getMonth(),e.getDate())}function s(e){return function(){return this[e].apply(this,arguments)}}function f(t,n){function u(e,t){return t.toLowerCase()}var r=e(t).data(),i={},s,o=new RegExp("^"+n.toLowerCase()+"([A-Z])");n=new RegExp("^"+n.toLowerCase());for(var a in r)n.test(a)&&(s=a.replace(o,u),i[s]=r[a]);return i}function l(t){var n={};if(!d[t]){t=t.split("-")[0];if(!d[t])return}var r=d[t];return e.each(p,function(e,t){t in r&&(n[t]=r[t])}),n}var n=e(window),o=function(){var t={get:function(e){return this.slice(e)[0]},contains:function(e){var t=e&&e.valueOf();for(var n=0,r=this.length;n<r;n++)if(this[n].valueOf()===t)return n;return-1},remove:function(e){this.splice(e,1)},replace:function(t){if(!t)return;e.isArray(t)||(t=[t]),this.clear(),this.push.apply(this,t)},clear:function(){this.splice(0)},copy:function(){var e=new o;return e.replace(this),e}};return function(){var n=[];return n.push.apply(n,arguments),e.extend(n,t),n}}(),u=function(t,n){this.dates=new o,this.viewDate=i(),this.focusDate=null,this._process_options(n),this.element=e(t),this.isInline=!1,this.isInput=this.element.is("input"),this.component=this.element.is(".date")?this.element.find(".add-on, .input-group-addon, .btn"):!1,this.hasInput=this.component&&this.element.find("input").length,this.component&&this.component.length===0&&(this.component=!1),this.picker=e(v.template),this._buildEvents(),this._attachEvents(),this.isInline?this.picker.addClass("datepicker-inline").appendTo(this.element):this.picker.addClass("datepicker-dropdown dropdown-menu"),this.o.rtl&&this.picker.addClass("datepicker-rtl"),this.viewMode=this.o.startView,this.o.calendarWeeks&&this.picker.find("tfoot th.today").attr("colspan",function(e,t){return parseInt(t)+1}),this._allow_update=!1,this.setStartDate(this._o.startDate),this.setEndDate(this._o.endDate),this.setDaysOfWeekDisabled(this.o.daysOfWeekDisabled),this.fillDow(),this.fillMonths(),this._allow_update=!0,this.update(),this.showMode(),this.isInline&&this.show()};u.prototype={constructor:u,_process_options:function(t){this._o=e.extend({},this._o,t);var n=this.o=e.extend({},this._o),r=n.language;d[r]||(r=r.split("-")[0],d[r]||(r=h.language)),n.language=r;switch(n.startView){case 2:case"decade":n.startView=2;break;case 1:case"year":n.startView=1;break;default:n.startView=0}switch(n.minViewMode){case 1:case"months":n.minViewMode=1;break;case 2:case"years":n.minViewMode=2;break;default:n.minViewMode=0}n.startView=Math.max(n.startView,n.minViewMode),n.multidate!==!0&&(n.multidate=Number(n.multidate)||!1,n.multidate!==!1?n.multidate=Math.max(0,n.multidate):n.multidate=1),n.multidateSeparator=String(n.multidateSeparator),n.weekStart%=7,n.weekEnd=(n.weekStart+6)%7;var i=v.parseFormat(n.format);n.startDate!==-Infinity&&(n.startDate?n.startDate instanceof Date?n.startDate=this._local_to_utc(this._zero_time(n.startDate)):n.startDate=v.parseDate(n.startDate,i,n.language):n.startDate=-Infinity),n.endDate!==Infinity&&(n.endDate?n.endDate instanceof Date?n.endDate=this._local_to_utc(this._zero_time(n.endDate)):n.endDate=v.parseDate(n.endDate,i,n.language):n.endDate=Infinity),n.daysOfWeekDisabled=n.daysOfWeekDisabled||[],e.isArray(n.daysOfWeekDisabled)||(n.daysOfWeekDisabled=n.daysOfWeekDisabled.split(/[,\s]*/)),n.daysOfWeekDisabled=e.map(n.daysOfWeekDisabled,function(e){return parseInt(e,10)});var s=String(n.orientation).toLowerCase().split(/\s+/g),o=n.orientation.toLowerCase();s=e.grep(s,function(e){return/^auto|left|right|top|bottom$/.test(e)}),n.orientation={x:"auto",y:"auto"};if(!!o&&o!=="auto")if(s.length===1)switch(s[0]){case"top":case"bottom":n.orientation.y=s[0];break;case"left":case"right":n.orientation.x=s[0]}else o=e.grep(s,function(e){return/^left|right$/.test(e)}),n.orientation.x=o[0]||"auto",o=e.grep(s,function(e){return/^top|bottom$/.test(e)}),n.orientation.y=o[0]||"auto"},_events:[],_secondaryEvents:[],_applyEvents:function(e){for(var n=0,r,i,s;n<e.length;n++)r=e[n][0],e[n].length===2?(i=t,s=e[n][1]):e[n].length===3&&(i=e[n][1],s=e[n][2]),r.on(s,i)},_unapplyEvents:function(e){for(var n=0,r,i,s;n<e.length;n++)r=e[n][0],e[n].length===2?(s=t,i=e[n][1]):e[n].length===3&&(s=e[n][1],i=e[n][2]),r.off(i,s)},_buildEvents:function(){this.isInput?this._events=[[this.element,{focus:e.proxy(this.show,this),keyup:e.proxy(function(t){e.inArray(t.keyCode,[27,37,39,38,40,32,13,9])===-1&&this.update()},this),keydown:e.proxy(this.keydown,this)}]]:this.component&&this.hasInput?this._events=[[this.element.find("input"),{focus:e.proxy(this.show,this),keyup:e.proxy(function(t){e.inArray(t.keyCode,[27,37,39,38,40,32,13,9])===-1&&this.update()},this),keydown:e.proxy(this.keydown,this)}],[this.component,{click:e.proxy(this.show,this)}]]:this.element.is("div")?this.isInline=!0:this._events=[[this.element,{click:e.proxy(this.show,this)}]],this._events.push([this.element,"*",{blur:e.proxy(function(e){this._focused_from=e.target},this)}],[this.element,{blur:e.proxy(function(e){this._focused_from=e.target},this)}]),this._secondaryEvents=[[this.picker,{click:e.proxy(this.click,this)}],[e(window),{resize:e.proxy(this.place,this)}],[e(document),{"mousedown touchstart":e.proxy(function(e){this.element.is(e.target)||this.element.find(e.target).length||this.picker.is(e.target)||this.picker.find(e.target).length||this.hide()},this)}]]},_attachEvents:function(){this._detachEvents(),this._applyEvents(this._events)},_detachEvents:function(){this._unapplyEvents(this._events)},_attachSecondaryEvents:function(){this._detachSecondaryEvents(),this._applyEvents(this._secondaryEvents)},_detachSecondaryEvents:function(){this._unapplyEvents(this._secondaryEvents)},_trigger:function(t,n){var r=n||this.dates.get(-1),i=this._utc_to_local(r);this.element.trigger({type:t,date:i,dates:e.map(this.dates,this._utc_to_local),format:e.proxy(function(e,t){arguments.length===0?(e=this.dates.length-1,t=this.o.format):typeof e=="string"&&(t=e,e=this.dates.length-1),t=t||this.o.format;var n=this.dates.get(e);return v.formatDate(n,t,this.o.language)},this)})},show:function(){this.isInline||this.picker.appendTo("body"),this.picker.show(),this.place(),this._attachSecondaryEvents(),this._trigger("show")},hide:function(){if(this.isInline)return;if(!this.picker.is(":visible"))return;this.focusDate=null,this.picker.hide().detach(),this._detachSecondaryEvents(),this.viewMode=this.o.startView,this.showMode(),this.o.forceParse&&(this.isInput&&this.element.val()||this.hasInput&&this.element.find("input").val())&&this.setValue(),this._trigger("hide")},remove:function(){this.hide(),this._detachEvents(),this._detachSecondaryEvents(),this.picker.remove(),delete this.element.data().datepicker,this.isInput||delete this.element.data().date},_utc_to_local:function(e){return e&&new Date(e.getTime()+e.getTimezoneOffset()*6e4)},_local_to_utc:function(e){return e&&new Date(e.getTime()-e.getTimezoneOffset()*6e4)},_zero_time:function(e){return e&&new Date(e.getFullYear(),e.getMonth(),e.getDate())},_zero_utc_time:function(e){return e&&new Date(Date.UTC(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()))},getDates:function(){return e.map(this.dates,this._utc_to_local)},getUTCDates:function(){return e.map(this.dates,function(e){return new Date(e)})},getDate:function(){return this._utc_to_local(this.getUTCDate())},getUTCDate:function(){return new Date(this.dates.get(-1))},setDates:function(){var t=e.isArray(arguments[0])?arguments[0]:arguments;this.update.apply(this,t),this._trigger("changeDate"),this.setValue()},setUTCDates:function(){var t=e.isArray(arguments[0])?arguments[0]:arguments;this.update.apply(this,e.map(t,this._utc_to_local)),this._trigger("changeDate"),this.setValue()},setDate:s("setDates"),setUTCDate:s("setUTCDates"),setValue:function(){var e=this.getFormattedDate();this.isInput?this.element.val(e).change():this.component&&this.element.find("input").val(e).change()},getFormattedDate:function(n){n===t&&(n=this.o.format);var r=this.o.language;return e.map(this.dates,function(e){return v.formatDate(e,n,r)}).join(this.o.multidateSeparator)},setStartDate:function(e){this._process_options({startDate:e}),this.update(),this.updateNavArrows()},setEndDate:function(e){this._process_options({endDate:e}),this.update(),this.updateNavArrows()},setDaysOfWeekDisabled:function(e){this._process_options({daysOfWeekDisabled:e}),this.update(),this.updateNavArrows()},place:function(){if(this.isInline)return;var t=this.picker.outerWidth(),r=this.picker.outerHeight(),i=10,s=n.width(),o=n.height(),u=n.scrollTop(),a=[];this.element.parents().each(function(){var t=e(this).css("z-index");t!="auto"&&t!==0&&a.push(parseInt(t))});var f=Math.max.apply(Math,a)+10,l=this.component?this.component.parent().offset():this.element.offset(),c=this.component?this.component.outerHeight(!0):this.element.outerHeight(!1),h=this.component?this.component.outerWidth(!0):this.element.outerWidth(!1),p=l.left,d=l.top;this.picker.removeClass("datepicker-orient-top datepicker-orient-bottom datepicker-orient-right datepicker-orient-left"),this.o.orientation.x!=="auto"?(this.picker.addClass("datepicker-orient-"+this.o.orientation.x),this.o.orientation.x==="right"&&(p-=t-h)):(this.picker.addClass("datepicker-orient-left"),l.left<0?p-=l.left-i:l.left+t>s&&(p=s-t-i));var v=this.o.orientation.y,m,g;v==="auto"&&(m=-u+l.top-r,g=u+o-(l.top+c+r),Math.max(m,g)===g?v="top":v="bottom"),this.picker.addClass("datepicker-orient-"+v),v==="top"?d+=c:d-=r+parseInt(this.picker.css("padding-top")),this.picker.css({top:d,left:p,zIndex:f})},_allow_update:!0,update:function(){if(!this._allow_update)return;var t=this.dates.copy(),n=[],r=!1;arguments.length?(e.each(arguments,e.proxy(function(e,t){t instanceof Date&&(t=this._local_to_utc(t)),n.push(t)},this)),r=!0):(n=this.isInput?this.element.val():this.element.data("date")||this.element.find("input").val(),n&&this.o.multidate?n=n.split(this.o.multidateSeparator):n=[n],delete this.element.data().date),n=e.map(n,e.proxy(function(e){return v.parseDate(e,this.o.format,this.o.language)},this)),n=e.grep(n,e.proxy(function(e){return e<this.o.startDate||e>this.o.endDate||!e},this),!0),this.dates.replace(n),this.dates.length?this.viewDate=new Date(this.dates.get(-1)):this.viewDate<this.o.startDate?this.viewDate=new Date(this.o.startDate):this.viewDate>this.o.endDate&&(this.viewDate=new Date(this.o.endDate)),r?this.setValue():n.length&&String(t)!==String(this.dates)&&this._trigger("changeDate"),!this.dates.length&&t.length&&this._trigger("clearDate"),this.fill()},fillDow:function(){var e=this.o.weekStart,t="<tr>";if(this.o.calendarWeeks){var n='<th class="cw">&nbsp;</th>';t+=n,this.picker.find(".datepicker-days thead tr:first-child").prepend(n)}while(e<this.o.weekStart+7)t+='<th class="dow">'+d[this.o.language].daysMin[e++%7]+"</th>";t+="</tr>",this.picker.find(".datepicker-days thead").append(t)},fillMonths:function(){var e="",t=0;while(t<12)e+='<span class="month">'+d[this.o.language].monthsShort[t++]+"</span>";this.picker.find(".datepicker-months td").html(e)},setRange:function(t){!t||!t.length?delete this.range:this.range=e.map(t,function(e){return e.valueOf()}),this.fill()},getClassNames:function(t){var n=[],r=this.viewDate.getUTCFullYear(),i=this.viewDate.getUTCMonth(),s=new Date;return t.getUTCFullYear()<r||t.getUTCFullYear()===r&&t.getUTCMonth()<i?n.push("old"):(t.getUTCFullYear()>r||t.getUTCFullYear()===r&&t.getUTCMonth()>i)&&n.push("new"),this.focusDate&&t.valueOf()===this.focusDate.valueOf()&&n.push("focused"),this.o.todayHighlight&&t.getUTCFullYear()===s.getFullYear()&&t.getUTCMonth()===s.getMonth()&&t.getUTCDate()===s.getDate()&&n.push("today"),this.dates.contains(t)!==-1&&n.push("active"),(t.valueOf()<this.o.startDate||t.valueOf()>this.o.endDate||e.inArray(t.getUTCDay(),this.o.daysOfWeekDisabled)!==-1)&&n.push("disabled"),this.range&&(t>this.range[0]&&t<this.range[this.range.length-1]&&n.push("range"),e.inArray(t.valueOf(),this.range)!==-1&&n.push("selected")),n},fill:function(){var n=new Date(this.viewDate),i=n.getUTCFullYear(),s=n.getUTCMonth(),o=this.o.startDate!==-Infinity?this.o.startDate.getUTCFullYear():-Infinity,u=this.o.startDate!==-Infinity?this.o.startDate.getUTCMonth():-Infinity,a=this.o.endDate!==Infinity?this.o.endDate.getUTCFullYear():Infinity,f=this.o.endDate!==Infinity?this.o.endDate.getUTCMonth():Infinity,l=d[this.o.language].today||d.en.today||"",c=d[this.o.language].clear||d.en.clear||"",h;this.picker.find(".datepicker-days thead th.datepicker-switch").text(d[this.o.language].months[s]+" "+i),this.picker.find("tfoot th.today").text(l).toggle(this.o.todayBtn!==!1),this.picker.find("tfoot th.clear").text(c).toggle(this.o.clearBtn!==!1),this.updateNavArrows(),this.fillMonths();var p=r(i,s-1,28),m=v.getDaysInMonth(p.getUTCFullYear(),p.getUTCMonth());p.setUTCDate(m),p.setUTCDate(m-(p.getUTCDay()-this.o.weekStart+7)%7);var g=new Date(p);g.setUTCDate(g.getUTCDate()+42),g=g.valueOf();var y=[],b;while(p.valueOf()<g){if(p.getUTCDay()===this.o.weekStart){y.push("<tr>");if(this.o.calendarWeeks){var w=new Date(+p+(this.o.weekStart-p.getUTCDay()-7)%7*864e5),E=new Date(Number(w)+(11-w.getUTCDay())%7*864e5),S=new Date(Number(S=r(E.getUTCFullYear(),0,1))+(11-S.getUTCDay())%7*864e5),x=(E-S)/864e5/7+1;y.push('<td class="cw">'+x+"</td>")}}b=this.getClassNames(p),b.push("day");if(this.o.beforeShowDay!==e.noop){var T=this.o.beforeShowDay(this._utc_to_local(p));T===t?T={}:typeof T=="boolean"?T={enabled:T}:typeof T=="string"&&(T={classes:T}),T.enabled===!1&&b.push("disabled"),T.classes&&(b=b.concat(T.classes.split(/\s+/))),T.tooltip&&(h=T.tooltip)}b=e.unique(b),y.push('<td class="'+b.join(" ")+'"'+(h?' title="'+h+'"':"")+">"+p.getUTCDate()+"</td>"),p.getUTCDay()===this.o.weekEnd&&y.push("</tr>"),p.setUTCDate(p.getUTCDate()+1)}this.picker.find(".datepicker-days tbody").empty().append(y.join(""));var N=this.picker.find(".datepicker-months").find("th:eq(1)").text(i).end().find("span").removeClass("active");e.each(this.dates,function(e,t){t.getUTCFullYear()===i&&N.eq(t.getUTCMonth()).addClass("active")}),(i<o||i>a)&&N.addClass("disabled"),i===o&&N.slice(0,u).addClass("disabled"),i===a&&N.slice(f+1).addClass("disabled"),y="",i=parseInt(i/10,10)*10;var C=this.picker.find(".datepicker-years").find("th:eq(1)").text(i+"-"+(i+9)).end().find("td");i-=1;var k=e.map(this.dates,function(e){return e.getUTCFullYear()}),L;for(var A=-1;A<11;A++)L=["year"],A===-1?L.push("old"):A===10&&L.push("new"),e.inArray(i,k)!==-1&&L.push("active"),(i<o||i>a)&&L.push("disabled"),y+='<span class="'+L.join(" ")+'">'+i+"</span>",i+=1;C.html(y)},updateNavArrows:function(){if(!this._allow_update)return;var e=new Date(this.viewDate),t=e.getUTCFullYear(),n=e.getUTCMonth();switch(this.viewMode){case 0:this.o.startDate!==-Infinity&&t<=this.o.startDate.getUTCFullYear()&&n<=this.o.startDate.getUTCMonth()?this.picker.find(".prev").css({visibility:"hidden"}):this.picker.find(".prev").css({visibility:"visible"}),this.o.endDate!==Infinity&&t>=this.o.endDate.getUTCFullYear()&&n>=this.o.endDate.getUTCMonth()?this.picker.find(".next").css({visibility:"hidden"}):this.picker.find(".next").css({visibility:"visible"});break;case 1:case 2:this.o.startDate!==-Infinity&&t<=this.o.startDate.getUTCFullYear()?this.picker.find(".prev").css({visibility:"hidden"}):this.picker.find(".prev").css({visibility:"visible"}),this.o.endDate!==Infinity&&t>=this.o.endDate.getUTCFullYear()?this.picker.find(".next").css({visibility:"hidden"}):this.picker.find(".next").css({visibility:"visible"})}},click:function(t){t.preventDefault();var n=e(t.target).closest("span, td, th"),i,s,o;if(n.length===1)switch(n[0].nodeName.toLowerCase()){case"th":switch(n[0].className){case"datepicker-switch":this.showMode(1);break;case"prev":case"next":var u=v.modes[this.viewMode].navStep*(n[0].className==="prev"?-1:1);switch(this.viewMode){case 0:this.viewDate=this.moveMonth(this.viewDate,u),this._trigger("changeMonth",this.viewDate);break;case 1:case 2:this.viewDate=this.moveYear(this.viewDate,u),this.viewMode===1&&this._trigger("changeYear",this.viewDate)}this.fill();break;case"today":var a=new Date;a=r(a.getFullYear(),a.getMonth(),a.getDate(),0,0,0),this.showMode(-2);var f=this.o.todayBtn==="linked"?null:"view";this._setDate(a,f);break;case"clear":var l;this.isInput?l=this.element:this.component&&(l=this.element.find("input")),l&&l.val("").change(),this.update(),this._trigger("changeDate"),this.o.autoclose&&this.hide()}break;case"span":n.is(".disabled")||(this.viewDate.setUTCDate(1),n.is(".month")?(o=1,s=n.parent().find("span").index(n),i=this.viewDate.getUTCFullYear(),this.viewDate.setUTCMonth(s),this._trigger("changeMonth",this.viewDate),this.o.minViewMode===1&&this._setDate(r(i,s,o))):(o=1,s=0,i=parseInt(n.text(),10)||0,this.viewDate.setUTCFullYear(i),this._trigger("changeYear",this.viewDate),this.o.minViewMode===2&&this._setDate(r(i,s,o))),this.showMode(-1),this.fill());break;case"td":n.is(".day")&&!n.is(".disabled")&&(o=parseInt(n.text(),10)||1,i=this.viewDate.getUTCFullYear(),s=this.viewDate.getUTCMonth(),n.is(".old")?s===0?(s=11,i-=1):s-=1:n.is(".new")&&(s===11?(s=0,i+=1):s+=1),this._setDate(r(i,s,o)))}this.picker.is(":visible")&&this._focused_from&&e(this._focused_from).focus(),delete this._focused_from},_toggle_multidate:function(e){var t=this.dates.contains(e);e?t!==-1?this.dates.remove(t):this.dates.push(e):this.dates.clear();if(typeof this.o.multidate=="number")while(this.dates.length>this.o.multidate)this.dates.remove(0)},_setDate:function(e,t){(!t||t==="date")&&this._toggle_multidate(e&&new Date(e));if(!t||t==="view")this.viewDate=e&&new Date(e);this.fill(),this.setValue(),this._trigger("changeDate");var n;this.isInput?n=this.element:this.component&&(n=this.element.find("input")),n&&n.change(),this.o.autoclose&&(!t||t==="date")&&this.hide()},moveMonth:function(e,n){if(!e)return t;if(!n)return e;var r=new Date(e.valueOf()),i=r.getUTCDate(),s=r.getUTCMonth(),o=Math.abs(n),u,a;n=n>0?1:-1;if(o===1){a=n===-1?function(){return r.getUTCMonth()===s}:function(){return r.getUTCMonth()!==u},u=s+n,r.setUTCMonth(u);if(u<0||u>11)u=(u+12)%12}else{for(var f=0;f<o;f++)r=this.moveMonth(r,n);u=r.getUTCMonth(),r.setUTCDate(i),a=function(){return u!==r.getUTCMonth()}}while(a())r.setUTCDate(--i),r.setUTCMonth(u);return r},moveYear:function(e,t){return this.moveMonth(e,t*12)},dateWithinRange:function(e){return e>=this.o.startDate&&e<=this.o.endDate},keydown:function(e){if(this.picker.is(":not(:visible)")){e.keyCode===27&&this.show();return}var t=!1,n,r,s,o=this.focusDate||this.viewDate;switch(e.keyCode){case 27:this.focusDate?(this.focusDate=null,this.viewDate=this.dates.get(-1)||this.viewDate,this.fill()):this.hide(),e.preventDefault();break;case 37:case 39:if(!this.o.keyboardNavigation)break;n=e.keyCode===37?-1:1,e.ctrlKey?(r=this.moveYear(this.dates.get(-1)||i(),n),s=this.moveYear(o,n),this._trigger("changeYear",this.viewDate)):e.shiftKey?(r=this.moveMonth(this.dates.get(-1)||i(),n),s=this.moveMonth(o,n),this._trigger("changeMonth",this.viewDate)):(r=new Date(this.dates.get(-1)||i()),r.setUTCDate(r.getUTCDate()+n),s=new Date(o),s.setUTCDate(o.getUTCDate()+n)),this.dateWithinRange(r)&&(this.focusDate=this.viewDate=s,this.setValue(),this.fill(),e.preventDefault());break;case 38:case 40:if(!this.o.keyboardNavigation)break;n=e.keyCode===38?-1:1,e.ctrlKey?(r=this.moveYear(this.dates.get(-1)||i(),n),s=this.moveYear(o,n),this._trigger("changeYear",this.viewDate)):e.shiftKey?(r=this.moveMonth(this.dates.get(-1)||i(),n),s=this.moveMonth(o,n),this._trigger("changeMonth",this.viewDate)):(r=new Date(this.dates.get(-1)||i()),r.setUTCDate(r.getUTCDate()+n*7),s=new Date(o),s.setUTCDate(o.getUTCDate()+n*7)),this.dateWithinRange(r)&&(this.focusDate=this.viewDate=s,this.setValue(),this.fill(),e.preventDefault());break;case 32:break;case 13:o=this.focusDate||this.dates.get(-1)||this.viewDate,this._toggle_multidate(o),t=!0,this.focusDate=null,this.viewDate=this.dates.get(-1)||this.viewDate,this.setValue(),this.fill(),this.picker.is(":visible")&&(e.preventDefault(),this.o.autoclose&&this.hide());break;case 9:this.focusDate=null,this.viewDate=this.dates.get(-1)||this.viewDate,this.fill(),this.hide()}if(t){this.dates.length?this._trigger("changeDate"):this._trigger("clearDate");var u;this.isInput?u=this.element:this.component&&(u=this.element.find("input")),u&&u.change()}},showMode:function(e){e&&(this.viewMode=Math.max(this.o.minViewMode,Math.min(2,this.viewMode+e))),this.picker.find(">div").hide().filter(".datepicker-"+v.modes[this.viewMode].clsName).css("display","block"),this.updateNavArrows()}};var a=function(t,n){this.element=e(t),this.inputs=e.map(n.inputs,function(e){return e.jquery?e[0]:e}),delete n.inputs,e(this.inputs).datepicker(n).bind("changeDate",e.proxy(this.dateUpdated,this)),this.pickers=e.map(this.inputs,function(t){return e(t).data("datepicker")}),this.updateDates()};a.prototype={updateDates:function(){this.dates=e.map(this.pickers,function(e){return e.getUTCDate()}),this.updateRanges()},updateRanges:function(){var t=e.map(this.dates,function(e){return e.valueOf()});e.each(this.pickers,function(e,n){n.setRange(t)})},dateUpdated:function(t){if(this.updating)return;this.updating=!0;var n=e(t.target).data("datepicker"),r=n.getUTCDate(),i=e.inArray(t.target,this.inputs),s=this.inputs.length;if(i===-1)return;e.each(this.pickers,function(e,t){t.getUTCDate()||t.setUTCDate(r)});if(r<this.dates[i])while(i>=0&&r<this.dates[i])this.pickers[i--].setUTCDate(r);else if(r>this.dates[i])while(i<s&&r>this.dates[i])this.pickers[i++].setUTCDate(r);this.updateDates(),delete this.updating},remove:function(){e.map(this.pickers,function(e){e.remove()}),delete this.element.data().datepicker}};var c=e.fn.datepicker;e.fn.datepicker=function(n){var r=Array.apply(null,arguments);r.shift();var i;return this.each(function(){var s=e(this),o=s.data("datepicker"),c=typeof n=="object"&&n;if(!o){var p=f(this,"date"),d=e.extend({},h,p,c),v=l(d.language),m=e.extend({},h,v,p,c);if(s.is(".input-daterange")||m.inputs){var g={inputs:m.inputs||s.find("input").toArray()};s.data("datepicker",o=new a(this,e.extend(m,g)))}else s.data("datepicker",o=new u(this,m))}if(typeof n=="string"&&typeof o[n]=="function"){i=o[n].apply(o,r);if(i!==t)return!1}}),i!==t?i:this};var h=e.fn.datepicker.defaults={autoclose:!1,beforeShowDay:e.noop,calendarWeeks:!1,clearBtn:!1,daysOfWeekDisabled:[],endDate:Infinity,forceParse:!0,format:"mm/dd/yyyy",keyboardNavigation:!0,language:"en",minViewMode:0,multidate:!1,multidateSeparator:",",orientation:"auto",rtl:!1,startDate:-Infinity,startView:0,todayBtn:!1,todayHighlight:!1,weekStart:0},p=e.fn.datepicker.locale_opts=["format","rtl","weekStart"];e.fn.datepicker.Constructor=u;var d=e.fn.datepicker.dates={en:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sun"],daysMin:["Su","Mo","Tu","We","Th","Fr","Sa","Su"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],today:"Today",clear:"Clear"}},v={modes:[{clsName:"days",navFnc:"Month",navStep:1},{clsName:"months",navFnc:"FullYear",navStep:1},{clsName:"years",navFnc:"FullYear",navStep:10}],isLeapYear:function(e){return e%4===0&&e%100!==0||e%400===0},getDaysInMonth:function(e,t){return[31,v.isLeapYear(e)?29:28,31,30,31,30,31,31,30,31,30,31][t]},validParts:/dd?|DD?|mm?|MM?|yy(?:yy)?/g,nonpunctuation:/[^ -\/:-@\[\u3400-\u9fff-`{-~\t\n\r]+/g,parseFormat:function(e){var t=e.replace(this.validParts,"\0").split("\0"),n=e.match(this.validParts);if(!t||!t.length||!n||n.length===0)throw new Error("Invalid date format.");return{separators:t,parts:n}},parseDate:function(n,i,s){function w(){var e=this.slice(0,a[c].length),t=a[c].slice(0,e.length);return e===t}if(!n)return t;if(n instanceof Date)return n;typeof i=="string"&&(i=v.parseFormat(i));var o=/([\-+]\d+)([dmwy])/,a=n.match(/([\-+]\d+)([dmwy])/g),f,l,c;if(/^[\-+]\d+[dmwy]([\s,]+[\-+]\d+[dmwy])*$/.test(n)){n=new Date;for(c=0;c<a.length;c++){f=o.exec(a[c]),l=parseInt(f[1]);switch(f[2]){case"d":n.setUTCDate(n.getUTCDate()+l);break;case"m":n=u.prototype.moveMonth.call(u.prototype,n,l);break;case"w":n.setUTCDate(n.getUTCDate()+l*7);break;case"y":n=u.prototype.moveYear.call(u.prototype,n,l)}}return r(n.getUTCFullYear(),n.getUTCMonth(),n.getUTCDate(),0,0,0)}a=n&&n.match(this.nonpunctuation)||[],n=new Date;var h={},p=["yyyy","yy","M","MM","m","mm","d","dd"],m={yyyy:function(e,t){return e.setUTCFullYear(t)},yy:function(e,t){return e.setUTCFullYear(2e3+t)},m:function(e,t){if(isNaN(e))return e;t-=1;while(t<0)t+=12;t%=12,e.setUTCMonth(t);while(e.getUTCMonth()!==t)e.setUTCDate(e.getUTCDate()-1);return e},d:function(e,t){return e.setUTCDate(t)}},g,y;m.M=m.MM=m.mm=m.m,m.dd=m.d,n=r(n.getFullYear(),n.getMonth(),n.getDate(),0,0,0);var b=i.parts.slice();a.length!==b.length&&(b=e(b).filter(function(t,n){return e.inArray(n,p)!==-1}).toArray());if(a.length===b.length){var E;for(c=0,E=b.length;c<E;c++){g=parseInt(a[c],10),f=b[c];if(isNaN(g))switch(f){case"MM":y=e(d[s].months).filter(w),g=e.inArray(y[0],d[s].months)+1;break;case"M":y=e(d[s].monthsShort).filter(w),g=e.inArray(y[0],d[s].monthsShort)+1}h[f]=g}var S,x;for(c=0;c<p.length;c++)x=p[c],x in h&&!isNaN(h[x])&&(S=new Date(n),m[x](S,h[x]),isNaN(S)||(n=S))}return n},formatDate:function(t,n,r){if(!t)return"";typeof n=="string"&&(n=v.parseFormat(n));var i={d:t.getUTCDate(),D:d[r].daysShort[t.getUTCDay()],DD:d[r].days[t.getUTCDay()],m:t.getUTCMonth()+1,M:d[r].monthsShort[t.getUTCMonth()],MM:d[r].months[t.getUTCMonth()],yy:t.getUTCFullYear().toString().substring(2),yyyy:t.getUTCFullYear()};i.dd=(i.d<10?"0":"")+i.d,i.mm=(i.m<10?"0":"")+i.m,t=[];var s=e.extend([],n.separators);for(var o=0,u=n.parts.length;o<=u;o++)s.length&&t.push(s.shift()),t.push(i[n.parts[o]]);return t.join("")},headTemplate:'<thead><tr><th class="prev"><i class="glyphicon glyphicon-chevron-left"></i></th><th colspan="5" class="datepicker-switch"></th><th class="next"><i class="glyphicon glyphicon-chevron-right"></i></th></tr></thead>',contTemplate:'<tbody><tr><td colspan="7"></td></tr></tbody>',footTemplate:'<tfoot><tr><th colspan="7" class="today"></th></tr><tr><th colspan="7" class="clear"></th></tr></tfoot>'};v.template='<div class="datepicker"><div class="datepicker-days"><table class=" table-condensed">'+v.headTemplate+"<tbody></tbody>"+v.footTemplate+"</table>"+"</div>"+'<div class="datepicker-months">'+'<table class="table-condensed">'+v.headTemplate+v.contTemplate+v.footTemplate+"</table>"+"</div>"+'<div class="datepicker-years">'+'<table class="table-condensed">'+v.headTemplate+v.contTemplate+v.footTemplate+"</table>"+"</div>"+"</div>",e.fn.datepicker.DPGlobal=v,e.fn.datepicker.noConflict=function(){return e.fn.datepicker=c,this},e(document).on("focus.datepicker.data-api click.datepicker.data-api",'[data-provide="datepicker"]',function(t){var n=e(this);if(n.data("datepicker"))return;t.preventDefault(),n.datepicker("show")}),e(function(){e('[data-provide="datepicker-inline"]').datepicker()})}(window.jQuery),define("datepicker",function(){}),!function(e){"function"==typeof define&&define.amd?define("jquery.nicescroll",["jquery"],e):e(jQuery)}(function(e){function t(){var e=document.getElementsByTagName("script"),t=e[e.length-1].src.split("?")[0];return t.split("/").length>0?t.split("/").slice(0,-1).join("/")+"/":""}function n(e,t,n){for(var r=0;r<t.length;r++)n(e,t[r])}var r=!1,i=!1,s=0,o=2e3,u=0,a=e,f=["ms","moz","webkit","o"],l=window.requestAnimationFrame||!1,c=window.cancelAnimationFrame||!1;if(!l)for(var h in f){var p=f[h];l||(l=window[p+"RequestAnimationFrame"]),c||(c=window[p+"CancelAnimationFrame"]||window[p+"CancelRequestAnimationFrame"])}var d=window.MutationObserver||window.WebKitMutationObserver||!1,v={zindex:"auto",cursoropacitymin:0,cursoropacitymax:1,cursorcolor:"#424242",cursorwidth:"5px",cursorborder:"1px solid #fff",cursorborderradius:"5px",scrollspeed:60,mousescrollstep:24,touchbehavior:!1,hwacceleration:!0,usetransition:!0,boxzoom:!1,dblclickzoom:!0,gesturezoom:!0,grabcursorenabled:!0,autohidemode:!0,background:"",iframeautoresize:!0,cursorminheight:32,preservenativescrolling:!0,railoffset:!1,railhoffset:!1,bouncescroll:!0,spacebarenabled:!0,railpadding:{top:0,right:0,left:0,bottom:0},disableoutline:!0,horizrailenabled:!0,railalign:"right",railvalign:"bottom",enabletranslate3d:!0,enablemousewheel:!0,enablekeyboard:!0,smoothscroll:!0,sensitiverail:!0,enablemouselockapi:!0,cursorfixedheight:!1,directionlockdeadzone:6,hidecursordelay:400,nativeparentscrolling:!0,enablescrollonselection:!0,overflowx:!0,overflowy:!0,cursordragspeed:.3,rtlmode:"auto",cursordragontouch:!1,oneaxismousemode:"auto",scriptpath:t()},m=!1,g=function(){function e(){var e=["-moz-grab","-webkit-grab","grab"];(n.ischrome&&!n.ischrome22||n.isie)&&(e=[]);for(var r=0;r<e.length;r++){var i=e[r];if(t.style.cursor=i,t.style.cursor==i)return i}return"url(//mail.google.com/mail/images/2/openhand.cur),n-resize"}if(m)return m;var t=document.createElement("DIV"),n={};n.haspointerlock="pointerLockElement"in document||"mozPointerLockElement"in document||"webkitPointerLockElement"in document,n.isopera="opera"in window,n.isopera12=n.isopera&&"getUserMedia"in navigator,n.isoperamini="[object OperaMini]"===Object.prototype.toString.call(window.operamini),n.isie="all"in document&&"attachEvent"in t&&!n.isopera,n.isieold=n.isie&&!("msInterpolationMode"in t.style),n.isie7=!(!n.isie||n.isieold||"documentMode"in document&&7!=document.documentMode),n.isie8=n.isie&&"documentMode"in document&&8==document.documentMode,n.isie9=n.isie&&"performance"in window&&document.documentMode>=9,n.isie10=n.isie&&"performance"in window&&document.documentMode>=10,n.isie9mobile=/iemobile.9/i.test(navigator.userAgent),n.isie9mobile&&(n.isie9=!1),n.isie7mobile=!n.isie9mobile&&n.isie7&&/iemobile/i.test(navigator.userAgent),n.ismozilla="MozAppearance"in t.style,n.iswebkit="WebkitAppearance"in t.style,n.ischrome="chrome"in window,n.ischrome22=n.ischrome&&n.haspointerlock,n.ischrome26=n.ischrome&&"transition"in t.style,n.cantouch="ontouchstart"in document.documentElement||"ontouchstart"in window,n.hasmstouch=window.navigator.msPointerEnabled||!1,n.ismac=/^mac$/i.test(navigator.platform),n.isios=n.cantouch&&/iphone|ipad|ipod/i.test(navigator.platform),n.isios4=n.isios&&!("seal"in Object),n.isandroid=/android/i.test(navigator.userAgent),n.trstyle=!1,n.hastransform=!1,n.hastranslate3d=!1,n.transitionstyle=!1,n.hastransition=!1,n.transitionend=!1;for(var r=["transform","msTransform","webkitTransform","MozTransform","OTransform"],i=0;i<r.length;i++)if(void 0!==t.style[r[i]]){n.trstyle=r[i];break}n.hastransform=0!=n.trstyle,n.hastransform&&(t.style[n.trstyle]="translate3d(1px,2px,3px)",n.hastranslate3d=/translate3d/.test(t.style[n.trstyle])),n.transitionstyle=!1,n.prefixstyle="",n.transitionend=!1;for(var r=["transition","webkitTransition","MozTransition","OTransition","OTransition","msTransition","KhtmlTransition"],s=["","-webkit-","-moz-","-o-","-o","-ms-","-khtml-"],o=["transitionend","webkitTransitionEnd","transitionend","otransitionend","oTransitionEnd","msTransitionEnd","KhtmlTransitionEnd"],i=0;i<r.length;i++)if(r[i]in t.style){n.transitionstyle=r[i],n.prefixstyle=s[i],n.transitionend=o[i];break}return n.ischrome26&&(n.prefixstyle=s[1]),n.hastransition=n.transitionstyle,n.cursorgrabvalue=e(),n.hasmousecapture="setCapture"in t,n.hasMutationObserver=d!==!1,t=null,m=n,n},y=function(e,t){function n(){var e=y.doc.css(E.trstyle);return e&&"matrix"==e.substr(0,6)?e.replace(/^.*\((.*)\)$/g,"$1").replace(/px/g,"").split(/, +/):!1}function f(){var e=y.win;if("zIndex"in e)return e.zIndex();for(;e.length>0;){if(9==e[0].nodeType)return!1;var t=e.css("zIndex");if(!isNaN(t)&&0!=t)return parseInt(t);e=e.parent()}return!1}function h(e,t,n){var r=e.css(t),i=parseFloat(r);if(isNaN(i)){i=T[r]||0;var s=3==i?n?y.win.outerHeight()-y.win.innerHeight():y.win.outerWidth()-y.win.innerWidth():1;return y.isie8&&i&&(i+=1),s?i:0}return i}function p(e,t,n,r){y._bind(e,t,function(r){var r=r?r:window.event,i={original:r,target:r.target||r.srcElement,type:"wheel",deltaMode:"MozMousePixelScroll"==r.type?0:1,deltaX:0,deltaZ:0,preventDefault:function(){return r.preventDefault?r.preventDefault():r.returnValue=!1,!1},stopImmediatePropagation:function(){r.stopImmediatePropagation?r.stopImmediatePropagation():r.cancelBubble=!0}};return"mousewheel"==t?(i.deltaY=-1/40*r.wheelDelta,r.wheelDeltaX&&(i.deltaX=-1/40*r.wheelDeltaX)):i.deltaY=r.detail,n.call(e,i)},r)}function m(e,t,n){var r,i;if(0==e.deltaMode?(r=-Math.floor(e.deltaX*(y.opt.mousescrollstep/54)),i=-Math.floor(e.deltaY*(y.opt.mousescrollstep/54))):1==e.deltaMode&&(r=-Math.floor(e.deltaX*y.opt.mousescrollstep),i=-Math.floor(e.deltaY*y.opt.mousescrollstep)),t&&y.opt.oneaxismousemode&&0==r&&i&&(r=i,i=0),r&&(y.scrollmom&&y.scrollmom.stop(),y.lastdeltax+=r,y.debounced("mousewheelx",function(){var e=y.lastdeltax;y.lastdeltax=0,y.rail.drag||y.doScrollLeftBy(e)},15)),i){if(y.opt.nativeparentscrolling&&n&&!y.ispage&&!y.zoomactive)if(0>i){if(y.getScrollTop()>=y.page.maxh)return!0}else if(y.getScrollTop()<=0)return!0;y.scrollmom&&y.scrollmom.stop(),y.lastdeltay+=i,y.debounced("mousewheely",function(){var e=y.lastdeltay;y.lastdeltay=0,y.rail.drag||y.doScrollBy(e)},15)}return e.stopImmediatePropagation(),e.preventDefault()}var y=this;if(this.version="3.5.6",this.name="nicescroll",this.me=t,this.opt={doc:a("body"),win:!1},a.extend(this.opt,v),this.opt.snapbackspeed=80,e)for(var w in y.opt)void 0!==e[w]&&(y.opt[w]=e[w]);this.doc=y.opt.doc,this.iddoc=this.doc&&this.doc[0]?this.doc[0].id||"":"",this.ispage=/^BODY|HTML/.test(y.opt.win?y.opt.win[0].nodeName:this.doc[0].nodeName),this.haswrapper=y.opt.win!==!1,this.win=y.opt.win||(this.ispage?a(window):this.doc),this.docscroll=this.ispage&&!this.haswrapper?a(window):this.win,this.body=a("body"),this.viewport=!1,this.isfixed=!1,this.iframe=!1,this.isiframe="IFRAME"==this.doc[0].nodeName&&"IFRAME"==this.win[0].nodeName,this.istextarea="TEXTAREA"==this.win[0].nodeName,this.forcescreen=!1,this.canshowonmouseevent="scroll"!=y.opt.autohidemode,this.onmousedown=!1,this.onmouseup=!1,this.onmousemove=!1,this.onmousewheel=!1,this.onkeypress=!1,this.ongesturezoom=!1,this.onclick=!1,this.onscrollstart=!1,this.onscrollend=!1,this.onscrollcancel=!1,this.onzoomin=!1,this.onzoomout=!1,this.view=!1,this.page=!1,this.scroll={x:0,y:0},this.scrollratio={x:0,y:0},this.cursorheight=20,this.scrollvaluemax=0,this.isrtlmode="auto"==this.opt.rtlmode?"rtl"==(this.win[0]==window?this.body:this.win).css("direction"):this.opt.rtlmode===!0,this.scrollrunning=!1,this.scrollmom=!1,this.observer=!1,this.observerremover=!1;do this.id="ascrail"+o++;while(document.getElementById(this.id));this.rail=!1,this.cursor=!1,this.cursorfreezed=!1,this.selectiondrag=!1,this.zoom=!1,this.zoomactive=!1,this.hasfocus=!1,this.hasmousefocus=!1,this.visibility=!0,this.locked=!1,this.hidden=!1,this.cursoractive=!0,this.wheelprevented=!1,this.overflowx=y.opt.overflowx,this.overflowy=y.opt.overflowy,this.nativescrollingarea=!1,this.checkarea=0,this.events=[],this.saved={},this.delaylist={},this.synclist={},this.lastdeltax=0,this.lastdeltay=0,this.detected=g();var E=a.extend({},this.detected);this.canhwscroll=E.hastransform&&y.opt.hwacceleration,this.ishwscroll=this.canhwscroll&&y.haswrapper,this.istouchcapable=!1,E.cantouch&&E.iswebkit&&!E.isios&&!E.isandroid&&(this.istouchcapable=!0,E.cantouch=!1),E.cantouch&&E.ismozilla&&!E.isios&&!E.isandroid&&(this.istouchcapable=!0,E.cantouch=!1),y.opt.enablemouselockapi||(E.hasmousecapture=!1,E.haspointerlock=!1),this.delayed=function(e,t,n,r){var i=y.delaylist[e],s=(new Date).getTime();return!r&&i&&i.tt?!1:(i&&i.tt&&clearTimeout(i.tt),void (i&&i.last+n>s&&!i.tt?y.delaylist[e]={last:s+n,tt:setTimeout(function(){y&&(y.delaylist[e].tt=0,t.call())},n)}:i&&i.tt||(y.delaylist[e]={last:s,tt:0},setTimeout(function(){t.call()},0))))},this.debounced=function(e,t,n){var r=y.delaylist[e];(new Date).getTime(),y.delaylist[e]=t,r||setTimeout(function(){var t=y.delaylist[e];y.delaylist[e]=!1,t.call()},n)};var S=!1;if(this.synched=function(e,t){function n(){S||(l(function(){S=!1;for(e in y.synclist){var t=y.synclist[e];t&&t.call(y),y.synclist[e]=!1}}),S=!0)}return y.synclist[e]=t,n(),e},this.unsynched=function(e){y.synclist[e]&&(y.synclist[e]=!1)},this.css=function(e,t){for(var n in t)y.saved.css.push([e,n,e.css(n)]),e.css(n,t[n])},this.scrollTop=function(e){return void 0===e?y.getScrollTop():y.setScrollTop(e)},this.scrollLeft=function(e){return void 0===e?y.getScrollLeft():y.setScrollLeft(e)},BezierClass=function(e,t,n,r,i,s,o){this.st=e,this.ed=t,this.spd=n,this.p1=r||0,this.p2=i||1,this.p3=s||0,this.p4=o||1,this.ts=(new Date).getTime(),this.df=this.ed-this.st},BezierClass.prototype={B2:function(e){return 3*e*e*(1-e)},B3:function(e){return 3*e*(1-e)*(1-e)},B4:function(e){return(1-e)*(1-e)*(1-e)},getNow:function(){var e=(new Date).getTime(),t=1-(e-this.ts)/this.spd,n=this.B2(t)+this.B3(t)+this.B4(t);return 0>t?this.ed:this.st+Math.round(this.df*n)},update:function(e,t){return this.st=this.getNow(),this.ed=e,this.spd=t,this.ts=(new Date).getTime(),this.df=this.ed-this.st,this}},this.ishwscroll){this.doc.translate={x:0,y:0,tx:"0px",ty:"0px"},E.hastranslate3d&&E.isios&&this.doc.css("-webkit-backface-visibility","hidden"),this.getScrollTop=function(e){if(!e){var t=n();if(t)return 16==t.length?-t[13]:-t[5];if(y.timerscroll&&y.timerscroll.bz)return y.timerscroll.bz.getNow()}return y.doc.translate.y},this.getScrollLeft=function(e){if(!e){var t=n();if(t)return 16==t.length?-t[12]:-t[4];if(y.timerscroll&&y.timerscroll.bh)return y.timerscroll.bh.getNow()}return y.doc.translate.x},this.notifyScrollEvent=document.createEvent?function(e){var t=document.createEvent("UIEvents");t.initUIEvent("scroll",!1,!0,window,1),e.dispatchEvent(t)}:document.fireEvent?function(e){var t=document.createEventObject();e.fireEvent("onscroll"),t.cancelBubble=!0}:function(){};var x=this.isrtlmode?1:-1;E.hastranslate3d&&y.opt.enabletranslate3d?(this.setScrollTop=function(e,t){y.doc.translate.y=e,y.doc.translate.ty=-1*e+"px",y.doc.css(E.trstyle,"translate3d("+y.doc.translate.tx+","+y.doc.translate.ty+",0px)"),t||y.notifyScrollEvent(y.win[0])},this.setScrollLeft=function(e,t){y.doc.translate.x=e,y.doc.translate.tx=e*x+"px",y.doc.css(E.trstyle,"translate3d("+y.doc.translate.tx+","+y.doc.translate.ty+",0px)"),t||y.notifyScrollEvent(y.win[0])}):(this.setScrollTop=function(e,t){y.doc.translate.y=e,y.doc.translate.ty=-1*e+"px",y.doc.css(E.trstyle,"translate("+y.doc.translate.tx+","+y.doc.translate.ty+")"),t||y.notifyScrollEvent(y.win[0])},this.setScrollLeft=function(e,t){y.doc.translate.x=e,y.doc.translate.tx=e*x+"px",y.doc.css(E.trstyle,"translate("+y.doc.translate.tx+","+y.doc.translate.ty+")"),t||y.notifyScrollEvent(y.win[0])})}else this.getScrollTop=function(){return y.docscroll.scrollTop()},this.setScrollTop=function(e){return y.docscroll.scrollTop(e)},this.getScrollLeft=function(){return y.detected.ismozilla&&y.isrtlmode?Math.abs(y.docscroll.scrollLeft()):y.docscroll.scrollLeft()},this.setScrollLeft=function(e){return y.docscroll.scrollLeft(y.detected.ismozilla&&y.isrtlmode?-e:e)};this.getTarget=function(e){return e?e.target?e.target:e.srcElement?e.srcElement:!1:!1},this.hasParent=function(e,t){if(!e)return!1;for(var n=e.target||e.srcElement||e||!1;n&&n.id!=t;)n=n.parentNode||!1;return n!==!1};var T={thin:1,medium:3,thick:5};this.getOffset=function(){if(y.isfixed)return{top:parseFloat(y.win.css("top")),left:parseFloat(y.win.css("left"))};if(!y.viewport)return y.win.offset();var e=y.win.offset(),t=y.viewport.offset();return{top:e.top-t.top+y.viewport.scrollTop(),left:e.left-t.left+y.viewport.scrollLeft()}},this.updateScrollBar=function(e){if(y.ishwscroll)y.rail.css({height:y.win.innerHeight()}),y.railh&&y.railh.css({width:y.win.innerWidth()});else{var t=y.getOffset(),n={top:t.top,left:t.left};n.top+=h(y.win,"border-top-width",!0),(y.win.outerWidth()-y.win.innerWidth())/2,n.left+=y.rail.align?y.win.outerWidth()-h(y.win,"border-right-width")-y.rail.width:h(y.win,"border-left-width");var r=y.opt.railoffset;if(r&&(r.top&&(n.top+=r.top),y.rail.align&&r.left&&(n.left+=r.left)),y.locked||y.rail.css({top:n.top,left:n.left,height:e?e.h:y.win.innerHeight()}),y.zoom&&y.zoom.css({top:n.top+1,left:1==y.rail.align?n.left-20:n.left+y.rail.width+4}),y.railh&&!y.locked){var n={top:t.top,left:t.left},r=y.opt.railhoffset;r&&(r.top&&(n.top+=r.top),r.left&&(n.left+=r.left));var i=y.railh.align?n.top+h(y.win,"border-top-width",!0)+y.win.innerHeight()-y.railh.height:n.top+h(y.win,"border-top-width",!0),s=n.left+h(y.win,"border-left-width");y.railh.css({top:i,left:s,width:y.railh.width})}}},this.doRailClick=function(e,t,n){var r,i,s,o;y.locked||(y.cancelEvent(e),t?(r=n?y.doScrollLeft:y.doScrollTop,s=n?(e.pageX-y.railh.offset().left-y.cursorwidth/2)*y.scrollratio.x:(e.pageY-y.rail.offset().top-y.cursorheight/2)*y.scrollratio.y,r(s)):(r=n?y.doScrollLeftBy:y.doScrollBy,s=n?y.scroll.x:y.scroll.y,o=n?e.pageX-y.railh.offset().left:e.pageY-y.rail.offset().top,i=n?y.view.w:y.view.h,r(s>=o?i:-i)))},y.hasanimationframe=l,y.hascancelanimationframe=c,y.hasanimationframe?y.hascancelanimationframe||(c=function(){y.cancelAnimationFrame=!0}):(l=function(e){return setTimeout(e,15-Math.floor(+(new Date)/1e3)%16)},c=clearInterval),this.init=function(){function e(t){if(y.selectiondrag){if(t){var n=y.win.outerHeight(),r=t.pageY-y.selectiondrag.top;r>0&&n>r&&(r=0),r>=n&&(r-=n),y.selectiondrag.df=r}if(0!=y.selectiondrag.df){var i=2*-Math.floor(y.selectiondrag.df/6);y.doScrollBy(i),y.debounced("doselectionscroll",function(){e()},50)}}}function t(){y.iframexd=!1;try{var e="contentDocument"in this?this.contentDocument:this.contentWindow.document;e.domain}catch(t){y.iframexd=!0,e=!1}if(y.iframexd)return"console"in window&&console.log("NiceScroll error: policy restriced iframe"),!0;if(y.forcescreen=!0,y.isiframe&&(y.iframe={doc:a(e),html:y.doc.contents().find("html")[0],body:y.doc.contents().find("body")[0]},y.getContentSize=function(){return{w:Math.max(y.iframe.html.scrollWidth,y.iframe.body.scrollWidth),h:Math.max(y.iframe.html.scrollHeight,y.iframe.body.scrollHeight)}},y.docscroll=a(y.iframe.body)),!E.isios&&y.opt.iframeautoresize&&!y.isiframe){y.win.scrollTop(0),y.doc.height("");var n=Math.max(e.getElementsByTagName("html")[0].scrollHeight,e.body.scrollHeight);y.doc.height(n)}y.lazyResize(30),E.isie7&&y.css(a(y.iframe.html),{"overflow-y":"hidden"}),y.css(a(y.iframe.body),{"overflow-y":"hidden"}),E.isios&&y.haswrapper&&y.css(a(e.body),{"-webkit-transform":"translate3d(0,0,0)"}),"contentWindow"in this?y.bind(this.contentWindow,"scroll",y.onscroll):y.bind(e,"scroll",y.onscroll),y.opt.enablemousewheel&&y.bind(e,"mousewheel",y.onmousewheel),y.opt.enablekeyboard&&y.bind(e,E.isopera?"keypress":"keydown",y.onkeypress),(E.cantouch||y.opt.touchbehavior)&&(y.bind(e,"mousedown",y.ontouchstart),y.bind(e,"mousemove",function(e){y.ontouchmove(e,!0)}),y.opt.grabcursorenabled&&E.cursorgrabvalue&&y.css(a(e.body),{cursor:E.cursorgrabvalue})),y.bind(e,"mouseup",y.ontouchend),y.zoom&&(y.opt.dblclickzoom&&y.bind(e,"dblclick",y.doZoom),y.ongesturezoom&&y.bind(e,"gestureend",y.ongesturezoom))}if(y.saved.css=[],E.isie7mobile)return!0;if(E.isoperamini)return!0;if(E.hasmstouch&&y.css(y.ispage?a("html"):y.win,{"-ms-touch-action":"none"}),y.zindex="auto",y.zindex=y.ispage||"auto"!=y.opt.zindex?y.opt.zindex:f()||"auto",y.ispage||"auto"==y.zindex||y.zindex>u&&(u=y.zindex),y.isie&&0==y.zindex&&"auto"==y.opt.zindex&&(y.zindex="auto"),!y.ispage||!E.cantouch&&!E.isieold&&!E.isie9mobile){var n=y.docscroll;y.ispage&&(n=y.haswrapper?y.win:y.doc),E.isie9mobile||y.css(n,{"overflow-y":"hidden"}),y.ispage&&E.isie7&&("BODY"==y.doc[0].nodeName?y.css(a("html"),{"overflow-y":"hidden"}):"HTML"==y.doc[0].nodeName&&y.css(a("body"),{"overflow-y":"hidden"})),!E.isios||y.ispage||y.haswrapper||y.css(a("body"),{"-webkit-overflow-scrolling":"touch"});var o=a(document.createElement("div"));o.css({position:"relative",top:0,"float":"right",width:y.opt.cursorwidth,height:"0px","background-color":y.opt.cursorcolor,border:y.opt.cursorborder,"background-clip":"padding-box","-webkit-border-radius":y.opt.cursorborderradius,"-moz-border-radius":y.opt.cursorborderradius,"border-radius":y.opt.cursorborderradius}),o.hborder=parseFloat(o.outerHeight()-o.innerHeight()),y.cursor=o;var l=a(document.createElement("div"));l.attr("id",y.id),l.addClass("nicescroll-rails");var c,h,p=["left","right"];for(var v in p)h=p[v],c=y.opt.railpadding[h],c?l.css("padding-"+h,c+"px"):y.opt.railpadding[h]=0;l.append(o),l.width=Math.max(parseFloat(y.opt.cursorwidth),o.outerWidth())+y.opt.railpadding.left+y.opt.railpadding.right,l.css({width:l.width+"px",zIndex:y.zindex,background:y.opt.background,cursor:"default"}),l.visibility=!0,l.scrollable=!0,l.align="left"==y.opt.railalign?0:1,y.rail=l,y.rail.drag=!1;var m=!1;if(!y.opt.boxzoom||y.ispage||E.isieold||(m=document.createElement("div"),y.bind(m,"click",y.doZoom),y.zoom=a(m),y.zoom.css({cursor:"pointer","z-index":y.zindex,backgroundImage:"url("+y.opt.scriptpath+"zoomico.png)",height:18,width:18,backgroundPosition:"0px 0px"}),y.opt.dblclickzoom&&y.bind(y.win,"dblclick",y.doZoom),E.cantouch&&y.opt.gesturezoom&&(y.ongesturezoom=function(e){return e.scale>1.5&&y.doZoomIn(e),e.scale<.8&&y.doZoomOut(e),y.cancelEvent(e)},y.bind(y.win,"gestureend",y.ongesturezoom))),y.railh=!1,y.opt.horizrailenabled){y.css(n,{"overflow-x":"hidden"});var o=a(document.createElement("div"));o.css({position:"absolute",top:0,height:y.opt.cursorwidth,width:"0px","background-color":y.opt.cursorcolor,border:y.opt.cursorborder,"background-clip":"padding-box","-webkit-border-radius":y.opt.cursorborderradius,"-moz-border-radius":y.opt.cursorborderradius,"border-radius":y.opt.cursorborderradius}),o.wborder=parseFloat(o.outerWidth()-o.innerWidth()),y.cursorh=o;var g=a(document.createElement("div"));g.attr("id",y.id+"-hr"),g.addClass("nicescroll-rails"),g.height=Math.max(parseFloat(y.opt.cursorwidth),o.outerHeight()),g.css({height:g.height+"px",zIndex:y.zindex,background:y.opt.background}),g.append(o),g.visibility=!0,g.scrollable=!0,g.align="top"==y.opt.railvalign?0:1,y.railh=g,y.railh.drag=!1}if(y.ispage)l.css({position:"fixed",top:"0px",height:"100%"}),l.css(l.align?{right:"0px"}:{left:"0px"}),y.body.append(l),y.railh&&(g.css({position:"fixed",left:"0px",width:"100%"}),g.css(g.align?{bottom:"0px"}:{top:"0px"}),y.body.append(g));else{if(y.ishwscroll){"static"==y.win.css("position")&&y.css(y.win,{position:"relative"});var w="HTML"==y.win[0].nodeName?y.body:y.win;y.zoom&&(y.zoom.css({position:"absolute",top:1,right:0,"margin-right":l.width+4}),w.append(y.zoom)),l.css({position:"absolute",top:0}),l.css(l.align?{right:0}:{left:0}),w.append(l),g&&(g.css({position:"absolute",left:0,bottom:0}),g.css(g.align?{bottom:0}:{top:0}),w.append(g))}else{y.isfixed="fixed"==y.win.css("position");var S=y.isfixed?"fixed":"absolute";y.isfixed||(y.viewport=y.getViewport(y.win[0])),y.viewport&&(y.body=y.viewport,0==/fixed|relative|absolute/.test(y.viewport.css("position"))&&y.css(y.viewport,{position:"relative"})),l.css({position:S}),y.zoom&&y.zoom.css({position:S}),y.updateScrollBar(),y.body.append(l),y.zoom&&y.body.append(y.zoom),y.railh&&(g.css({position:S}),y.body.append(g))}E.isios&&y.css(y.win,{"-webkit-tap-highlight-color":"rgba(0,0,0,0)","-webkit-touch-callout":"none"}),E.isie&&y.opt.disableoutline&&y.win.attr("hideFocus","true"),E.iswebkit&&y.opt.disableoutline&&y.win.css({outline:"none"})}if(y.opt.autohidemode===!1?(y.autohidedom=!1,y.rail.css({opacity:y.opt.cursoropacitymax}),y.railh&&y.railh.css({opacity:y.opt.cursoropacitymax})):y.opt.autohidemode===!0||"leave"===y.opt.autohidemode?(y.autohidedom=a().add(y.rail),E.isie8&&(y.autohidedom=y.autohidedom.add(y.cursor)),y.railh&&(y.autohidedom=y.autohidedom.add(y.railh)),y.railh&&E.isie8&&(y.autohidedom=y.autohidedom.add(y.cursorh))):"scroll"==y.opt.autohidemode?(y.autohidedom=a().add(y.rail),y.railh&&(y.autohidedom=y.autohidedom.add(y.railh))):"cursor"==y.opt.autohidemode?(y.autohidedom=a().add(y.cursor),y.railh&&(y.autohidedom=y.autohidedom.add(y.cursorh))):"hidden"==y.opt.autohidemode&&(y.autohidedom=!1,y.hide(),y.locked=!1),E.isie9mobile){y.scrollmom=new b(y),y.onmangotouch=function(){var e=y.getScrollTop(),t=y.getScrollLeft();if(e==y.scrollmom.lastscrolly&&t==y.scrollmom.lastscrollx)return!0;var n=e-y.mangotouch.sy,r=t-y.mangotouch.sx,i=Math.round(Math.sqrt(Math.pow(r,2)+Math.pow(n,2)));if(0!=i){var s=0>n?-1:1,o=0>r?-1:1,u=+(new Date);if(y.mangotouch.lazy&&clearTimeout(y.mangotouch.lazy),u-y.mangotouch.tm>80||y.mangotouch.dry!=s||y.mangotouch.drx!=o)y.scrollmom.stop(),y.scrollmom.reset(t,e),y.mangotouch.sy=e,y.mangotouch.ly=e,y.mangotouch.sx=t,y.mangotouch.lx=t,y.mangotouch.dry=s,y.mangotouch.drx=o,y.mangotouch.tm=u;else{y.scrollmom.stop(),y.scrollmom.update(y.mangotouch.sx-r,y.mangotouch.sy-n),u-y.mangotouch.tm,y.mangotouch.tm=u;var a=Math.max(Math.abs(y.mangotouch.ly-e),Math.abs(y.mangotouch.lx-t));y.mangotouch.ly=e,y.mangotouch.lx=t,a>2&&(y.mangotouch.lazy=setTimeout(function(){y.mangotouch.lazy=!1,y.mangotouch.dry=0,y.mangotouch.drx=0,y.mangotouch.tm=0,y.scrollmom.doMomentum(30)},100))}}};var x=y.getScrollTop(),T=y.getScrollLeft();y.mangotouch={sy:x,ly:x,dry:0,sx:T,lx:T,drx:0,lazy:!1,tm:0},y.bind(y.docscroll,"scroll",y.onmangotouch)}else{if(E.cantouch||y.istouchcapable||y.opt.touchbehavior||E.hasmstouch){y.scrollmom=new b(y),y.ontouchstart=function(e){if(e.pointerType&&2!=e.pointerType&&"touch"!=e.pointerType)return!1;if(y.hasmoving=!1,!y.locked){if(E.hasmstouch)for(var t=e.target?e.target:!1;t;){var n=a(t).getNiceScroll();if(n.length>0&&n[0].me==y.me)break;if(n.length>0)return!1;if("DIV"==t.nodeName&&t.id==y.id)break;t=t.parentNode?t.parentNode:!1}y.cancelScroll();var t=y.getTarget(e);if(t){var r=/INPUT/i.test(t.nodeName)&&/range/i.test(t.type);if(r)return y.stopPropagation(e)}if(!("clientX"in e)&&"changedTouches"in e&&(e.clientX=e.changedTouches[0].clientX,e.clientY=e.changedTouches[0].clientY),y.forcescreen){var i=e,e={original:e.original?e.original:e};e.clientX=i.screenX,e.clientY=i.screenY}if(y.rail.drag={x:e.clientX,y:e.clientY,sx:y.scroll.x,sy:y.scroll.y,st:y.getScrollTop(),sl:y.getScrollLeft(),pt:2,dl:!1},y.ispage||!y.opt.directionlockdeadzone)y.rail.drag.dl="f";else{var s={w:a(window).width(),h:a(window).height()},o={w:Math.max(document.body.scrollWidth,document.documentElement.scrollWidth),h:Math.max(document.body.scrollHeight,document.documentElement.scrollHeight)},u=Math.max(0,o.h-s.h),f=Math.max(0,o.w-s.w);y.rail.drag.ck=!y.rail.scrollable&&y.railh.scrollable?u>0?"v":!1:y.rail.scrollable&&!y.railh.scrollable&&f>0?"h":!1,y.rail.drag.ck||(y.rail.drag.dl="f")}if(y.opt.touchbehavior&&y.isiframe&&E.isie){var l=y.win.position();y.rail.drag.x+=l.left,y.rail.drag.y+=l.top}if(y.hasmoving=!1,y.lastmouseup=!1,y.scrollmom.reset(e.clientX,e.clientY),!E.cantouch&&!this.istouchcapable&&!E.hasmstouch){var c=t?/INPUT|SELECT|TEXTAREA/i.test(t.nodeName):!1;if(!c)return!y.ispage&&E.hasmousecapture&&t.setCapture(),y.opt.touchbehavior?(t.onclick&&!t._onclick&&(t._onclick=t.onclick,t.onclick=function(e){return y.hasmoving?!1:void t._onclick.call(this,e)}),y.cancelEvent(e)):y.stopPropagation(e);/SUBMIT|CANCEL|BUTTON/i.test(a(t).attr("type"))&&(pc={tg:t,click:!1},y.preventclick=pc)}}},y.ontouchend=function(e){return e.pointerType&&2!=e.pointerType&&"touch"!=e.pointerType?!1:y.rail.drag&&2==y.rail.drag.pt&&(y.scrollmom.doMomentum(),y.rail.drag=!1,y.hasmoving&&(y.lastmouseup=!0,y.hideCursor(),E.hasmousecapture&&document.releaseCapture(),!E.cantouch))?y.cancelEvent(e):void 0};var N=y.opt.touchbehavior&&y.isiframe&&!E.hasmousecapture;y.ontouchmove=function(e,t){if(e.pointerType&&2!=e.pointerType&&"touch"!=e.pointerType)return!1;if(y.rail.drag&&2==y.rail.drag.pt){if(E.cantouch&&void 0===e.original)return!0;y.hasmoving=!0,y.preventclick&&!y.preventclick.click&&(y.preventclick.click=y.preventclick.tg.onclick||!1,y.preventclick.tg.onclick=y.onpreventclick);var n=a.extend({original:e},e);if(e=n,"changedTouches"in e&&(e.clientX=e.changedTouches[0].clientX,e.clientY=e.changedTouches[0].clientY),y.forcescreen){var r=e,e={original:e.original?e.original:e};e.clientX=r.screenX,e.clientY=r.screenY}var i=ofy=0;if(N&&!t){var s=y.win.position();i=-s.left,ofy=-s.top}var o=e.clientY+ofy,u=o-y.rail.drag.y,f=e.clientX+i,l=f-y.rail.drag.x,c=y.rail.drag.st-u;if(y.ishwscroll&&y.opt.bouncescroll?0>c?c=Math.round(c/2):c>y.page.maxh&&(c=y.page.maxh+Math.round((c-y.page.maxh)/2)):(0>c&&(c=0,o=0),c>y.page.maxh&&(c=y.page.maxh,o=0)),y.railh&&y.railh.scrollable){var h=y.isrtlmode?l-y.rail.drag.sl:y.rail.drag.sl-l;y.ishwscroll&&y.opt.bouncescroll?0>h?h=Math.round(h/2):h>y.page.maxw&&(h=y.page.maxw+Math.round((h-y.page.maxw)/2)):(0>h&&(h=0,f=0),h>y.page.maxw&&(h=y.page.maxw,f=0))}var p=!1;if(y.rail.drag.dl)p=!0,"v"==y.rail.drag.dl?h=y.rail.drag.sl:"h"==y.rail.drag.dl&&(c=y.rail.drag.st);else{var d=Math.abs(u),v=Math.abs(l),m=y.opt.directionlockdeadzone;if("v"==y.rail.drag.ck){if(d>m&&.3*d>=v)return y.rail.drag=!1,!0;v>m&&(y.rail.drag.dl="f",a("body").scrollTop(a("body").scrollTop()))}else if("h"==y.rail.drag.ck){if(v>m&&.3*v>=d)return y.rail.drag=!1,!0;d>m&&(y.rail.drag.dl="f",a("body").scrollLeft(a("body").scrollLeft()))}}if(y.synched("touchmove",function(){y.rail.drag&&2==y.rail.drag.pt&&(y.prepareTransition&&y.prepareTransition(0),y.rail.scrollable&&y.setScrollTop(c),y.scrollmom.update(f,o),y.railh&&y.railh.scrollable?(y.setScrollLeft(h),y.showCursor(c,h)):y.showCursor(c),E.isie10&&document.selection.clear())}),E.ischrome&&y.istouchcapable&&(p=!1),p)return y.cancelEvent(e)}}}y.onmousedown=function(e,t){if(!y.rail.drag||1==y.rail.drag.pt){if(y.locked)return y.cancelEvent(e);y.cancelScroll(),y.rail.drag={x:e.clientX,y:e.clientY,sx:y.scroll.x,sy:y.scroll.y,pt:1,hr:!!t};var n=y.getTarget(e);return!y.ispage&&E.hasmousecapture&&n.setCapture(),y.isiframe&&!E.hasmousecapture&&(y.saved.csspointerevents=y.doc.css("pointer-events"),y.css(y.doc,{"pointer-events":"none"})),y.hasmoving=!1,y.cancelEvent(e)}},y.onmouseup=function(e){if(y.rail.drag){if(E.hasmousecapture&&document.releaseCapture(),y.isiframe&&!E.hasmousecapture&&y.doc.css("pointer-events",y.saved.csspointerevents),1!=y.rail.drag.pt)return;return y.rail.drag=!1,y.hasmoving&&y.triggerScrollEnd(),y.cancelEvent(e)}},y.onmousemove=function(e){if(y.rail.drag){if(1!=y.rail.drag.pt)return;if(E.ischrome&&0==e.which)return y.onmouseup(e);if(y.cursorfreezed=!0,y.hasmoving=!0,y.rail.drag.hr){y.scroll.x=y.rail.drag.sx+(e.clientX-y.rail.drag.x),y.scroll.x<0&&(y.scroll.x=0);var t=y.scrollvaluemaxw;y.scroll.x>t&&(y.scroll.x=t)}else{y.scroll.y=y.rail.drag.sy+(e.clientY-y.rail.drag.y),y.scroll.y<0&&(y.scroll.y=0);var n=y.scrollvaluemax;y.scroll.y>n&&(y.scroll.y=n)}return y.synched("mousemove",function(){y.rail.drag&&1==y.rail.drag.pt&&(y.showCursor(),y.rail.drag.hr?y.doScrollLeft(Math.round(y.scroll.x*y.scrollratio.x),y.opt.cursordragspeed):y.doScrollTop(Math.round(y.scroll.y*y.scrollratio.y),y.opt.cursordragspeed))}),y.cancelEvent(e)}},E.cantouch||y.opt.touchbehavior?(y.onpreventclick=function(e){return y.preventclick?(y.preventclick.tg.onclick=y.preventclick.click,y.preventclick=!1,y.cancelEvent(e)):void 0},y.bind(y.win,"mousedown",y.ontouchstart),y.onclick=E.isios?!1:function(e){return y.lastmouseup?(y.lastmouseup=!1,y.cancelEvent(e)):!0},y.opt.grabcursorenabled&&E.cursorgrabvalue&&(y.css(y.ispage?y.doc:y.win,{cursor:E.cursorgrabvalue}),y.css(y.rail,{cursor:E.cursorgrabvalue}))):(y.hasTextSelected="getSelection"in document?function(){return document.getSelection().rangeCount>0}:"selection"in document?function(){return"None"!=document.selection.type}:function(){return!1},y.onselectionstart=function(){y.ispage||(y.selectiondrag=y.win.offset())},y.onselectionend=function(){y.selectiondrag=!1},y.onselectiondrag=function(t){y.selectiondrag&&y.hasTextSelected()&&y.debounced("selectionscroll",function(){e(t)},250)}),E.hasmstouch&&(y.css(y.rail,{"-ms-touch-action":"none"}),y.css(y.cursor,{"-ms-touch-action":"none"}),y.bind(y.win,"MSPointerDown",y.ontouchstart),y.bind(document,"MSPointerUp",y.ontouchend),y.bind(document,"MSPointerMove",y.ontouchmove),y.bind(y.cursor,"MSGestureHold",function(e){e.preventDefault()}),y.bind(y.cursor,"contextmenu",function(e){e.preventDefault()})),this.istouchcapable&&(y.bind(y.win,"touchstart",y.ontouchstart),y.bind(document,"touchend",y.ontouchend),y.bind(document,"touchcancel",y.ontouchend),y.bind(document,"touchmove",y.ontouchmove)),y.bind(y.cursor,"mousedown",y.onmousedown),y.bind(y.cursor,"mouseup",y.onmouseup),y.railh&&(y.bind(y.cursorh,"mousedown",function(e){y.onmousedown(e,!0)}),y.bind(y.cursorh,"mouseup",y.onmouseup)),(y.opt.cursordragontouch||!E.cantouch&&!y.opt.touchbehavior)&&(y.rail.css({cursor:"default"}),y.railh&&y.railh.css({cursor:"default"}),y.jqbind(y.rail,"mouseenter",function(){return y.win.is(":visible")?(y.canshowonmouseevent&&y.showCursor(),void (y.rail.active=!0)):!1}),y.jqbind(y.rail,"mouseleave",function(){y.rail.active=!1,y.rail.drag||y.hideCursor()}),y.opt.sensitiverail&&(y.bind(y.rail,"click",function(e){y.doRailClick(e,!1,!1)}),y.bind(y.rail,"dblclick",function(e){y.doRailClick(e,!0,!1)}),y.bind(y.cursor,"click",function(e){y.cancelEvent(e)}),y.bind(y.cursor,"dblclick",function(e){y.cancelEvent(e)})),y.railh&&(y.jqbind(y.railh,"mouseenter",function(){return y.win.is(":visible")?(y.canshowonmouseevent&&y.showCursor(),void (y.rail.active=!0)):!1}),y.jqbind(y.railh,"mouseleave",function(){y.rail.active=!1,y.rail.drag||y.hideCursor()}),y.opt.sensitiverail&&(y.bind(y.railh,"click",function(e){y.doRailClick(e,!1,!0)}),y.bind(y.railh,"dblclick",function(e){y.doRailClick(e,!0,!0)}),y.bind(y.cursorh,"click",function(e){y.cancelEvent(e)}),y.bind(y.cursorh,"dblclick",function(e){y.cancelEvent(e)})))),E.cantouch||y.opt.touchbehavior?(y.bind(E.hasmousecapture?y.win:document,"mouseup",y.ontouchend),y.bind(document,"mousemove",y.ontouchmove),y.onclick&&y.bind(document,"click",y.onclick),y.opt.cursordragontouch&&(y.bind(y.cursor,"mousedown",y.onmousedown),y.bind(y.cursor,"mousemove",y.onmousemove),y.cursorh&&y.bind(y.cursorh,"mousedown",function(e){y.onmousedown(e,!0)}),y.cursorh&&y.bind(y.cursorh,"mousemove",y.onmousemove))):(y.bind(E.hasmousecapture?y.win:document,"mouseup",y.onmouseup),y.bind(document,"mousemove",y.onmousemove),y.onclick&&y.bind(document,"click",y.onclick),!y.ispage&&y.opt.enablescrollonselection&&(y.bind(y.win[0],"mousedown",y.onselectionstart),y.bind(document,"mouseup",y.onselectionend),y.bind(y.cursor,"mouseup",y.onselectionend),y.cursorh&&y.bind(y.cursorh,"mouseup",y.onselectionend),y.bind(document,"mousemove",y.onselectiondrag)),y.zoom&&(y.jqbind(y.zoom,"mouseenter",function(){y.canshowonmouseevent&&y.showCursor(),y.rail.active=!0}),y.jqbind(y.zoom,"mouseleave",function(){y.rail.active=!1,y.rail.drag||y.hideCursor()}))),y.opt.enablemousewheel&&(y.isiframe||y.bind(E.isie&&y.ispage?document:y.win,"mousewheel",y.onmousewheel),y.bind(y.rail,"mousewheel",y.onmousewheel),y.railh&&y.bind(y.railh,"mousewheel",y.onmousewheelhr)),y.ispage||E.cantouch||/HTML|^BODY/.test(y.win[0].nodeName)||(y.win.attr("tabindex")||y.win.attr({tabindex:s++}),y.jqbind(y.win,"focus",function(e){r=y.getTarget(e).id||!0,y.hasfocus=!0,y.canshowonmouseevent&&y.noticeCursor()}),y.jqbind(y.win,"blur",function(){r=!1,y.hasfocus=!1}),y.jqbind(y.win,"mouseenter",function(e){i=y.getTarget(e).id||!0,y.hasmousefocus=!0,y.canshowonmouseevent&&y.noticeCursor()}),y.jqbind(y.win,"mouseleave",function(){i=!1,y.hasmousefocus=!1,y.rail.drag||y.hideCursor()}))}if(y.onkeypress=function(e){if(y.locked&&0==y.page.maxh)return!0;e=e?e:window.e;var t=y.getTarget(e);if(t&&/INPUT|TEXTAREA|SELECT|OPTION/.test(t.nodeName)){var n=t.getAttribute("type")||t.type||!1;if(!n||!/submit|button|cancel/i.tp)return!0}if(a(t).attr("contenteditable"))return!0;if(y.hasfocus||y.hasmousefocus&&!r||y.ispage&&!r&&!i){var s=e.keyCode;if(y.locked&&27!=s)return y.cancelEvent(e);var o=e.ctrlKey||!1,u=e.shiftKey||!1,f=!1;switch(s){case 38:case 63233:y.doScrollBy(72),f=!0;break;case 40:case 63235:y.doScrollBy(-72),f=!0;break;case 37:case 63232:y.railh&&(o?y.doScrollLeft(0):y.doScrollLeftBy(72),f=!0);break;case 39:case 63234:y.railh&&(o?y.doScrollLeft(y.page.maxw):y.doScrollLeftBy(-72),f=!0);break;case 33:case 63276:y.doScrollBy(y.view.h),f=!0;break;case 34:case 63277:y.doScrollBy(-y.view.h),f=!0;break;case 36:case 63273:y.railh&&o?y.doScrollPos(0,0):y.doScrollTo(0),f=!0;break;case 35:case 63275:y.railh&&o?y.doScrollPos(y.page.maxw,y.page.maxh):y.doScrollTo(y.page.maxh),f=!0;break;case 32:y.opt.spacebarenabled&&(y.doScrollBy(u?y.view.h:-y.view.h),f=!0);break;case 27:y.zoomactive&&(y.doZoom(),f=!0)}if(f)return y.cancelEvent(e)}},y.opt.enablekeyboard&&y.bind(document,E.isopera&&!E.isopera12?"keypress":"keydown",y.onkeypress),y.bind(document,"keydown",function(e){var t=e.ctrlKey||!1;t&&(y.wheelprevented=!0)}),y.bind(document,"keyup",function(e){var t=e.ctrlKey||!1;t||(y.wheelprevented=!1)}),y.bind(window,"resize",y.lazyResize),y.bind(window,"orientationchange",y.lazyResize),y.bind(window,"load",y.lazyResize),E.ischrome&&!y.ispage&&!y.haswrapper){var C=y.win.attr("style"),k=parseFloat(y.win.css("width"))+1;y.win.css("width",k),y.synched("chromefix",function(){y.win.attr("style",C)})}y.onAttributeChange=function(){y.lazyResize(250)},y.ispage||y.haswrapper||(d!==!1?(y.observer=new d(function(e){e.forEach(y.onAttributeChange)}),y.observer.observe(y.win[0],{childList:!0,characterData:!1,attributes:!0,subtree:!1}),y.observerremover=new d(function(e){e.forEach(function(e){if(e.removedNodes.length>0)for(var t in e.removedNodes)if(e.removedNodes[t]==y.win[0])return y.remove()})}),y.observerremover.observe(y.win[0].parentNode,{childList:!0,characterData:!1,attributes:!1,subtree:!1})):(y.bind(y.win,E.isie&&!E.isie9?"propertychange":"DOMAttrModified",y.onAttributeChange),E.isie9&&y.win[0].attachEvent("onpropertychange",y.onAttributeChange),y.bind(y.win,"DOMNodeRemoved",function(e){e.target==y.win[0]&&y.remove()}))),!y.ispage&&y.opt.boxzoom&&y.bind(window,"resize",y.resizeZoom),y.istextarea&&y.bind(y.win,"mouseup",y.lazyResize),y.lazyResize(30)}"IFRAME"==this.doc[0].nodeName&&(this.doc[0].readyState&&"complete"==this.doc[0].readyState&&setTimeout(function(){t.call(y.doc[0],!1)},500),y.bind(this.doc,"load",t))},this.showCursor=function(e,t){y.cursortimeout&&(clearTimeout(y.cursortimeout),y.cursortimeout=0),y.rail&&(y.autohidedom&&(y.autohidedom.stop().css({opacity:y.opt.cursoropacitymax}),y.cursoractive=!0),y.rail.drag&&1==y.rail.drag.pt||(void 0!==e&&e!==!1&&(y.scroll.y=Math.round(1*e/y.scrollratio.y)),void 0!==t&&(y.scroll.x=Math.round(1*t/y.scrollratio.x))),y.cursor.css({height:y.cursorheight,top:y.scroll.y}),y.cursorh&&(y.cursorh.css(!y.rail.align&&y.rail.visibility?{width:y.cursorwidth,left:y.scroll.x+y.rail.width}:{width:y.cursorwidth,left:y.scroll.x}),y.cursoractive=!0),y.zoom&&y.zoom.stop().css({opacity:y.opt.cursoropacitymax}))},this.hideCursor=function(e){y.cursortimeout||y.rail&&y.autohidedom&&(y.hasmousefocus&&"leave"==y.opt.autohidemode||(y.cursortimeout=setTimeout(function(){y.rail.active&&y.showonmouseevent||(y.autohidedom.stop().animate({opacity:y.opt.cursoropacitymin}),y.zoom&&y.zoom.stop().animate({opacity:y.opt.cursoropacitymin}),y.cursoractive=!1),y.cursortimeout=0},e||y.opt.hidecursordelay)))},this.noticeCursor=function(e,t,n){y.showCursor(t,n),y.rail.active||y.hideCursor(e)},this.getContentSize=y.ispage?function(){return{w:Math.max(document.body.scrollWidth,document.documentElement.scrollWidth),h:Math.max(document.body.scrollHeight,document.documentElement.scrollHeight)}}:y.haswrapper?function(){return{w:y.doc.outerWidth()+parseInt(y.win.css("paddingLeft"))+parseInt(y.win.css("paddingRight")),h:y.doc.outerHeight()+parseInt(y.win.css("paddingTop"))+parseInt(y.win.css("paddingBottom"))}}:function(){return{w:y.docscroll[0].scrollWidth,h:y.docscroll[0].scrollHeight}},this.onResize=function(e,t){if(!y||!y.win)return!1;if(!y.haswrapper&&!y.ispage){if("none"==y.win.css("display"))return y.visibility&&y.hideRail().hideRailHr(),!1;y.hidden||y.visibility||y.showRail().showRailHr()}var n=y.page.maxh,r=y.page.maxw,i={h:y.view.h,w:y.view.w};if(y.view={w:y.ispage?y.win.width():parseInt(y.win[0].clientWidth),h:y.ispage?y.win.height():parseInt(y.win[0].clientHeight)},y.page=t?t:y.getContentSize(),y.page.maxh=Math.max(0,y.page.h-y.view.h),y.page.maxw=Math.max(0,y.page.w-y.view.w),y.page.maxh==n&&y.page.maxw==r&&y.view.w==i.w){if(y.ispage)return y;var s=y.win.offset();if(y.lastposition){var o=y.lastposition;if(o.top==s.top&&o.left==s.left)return y}y.lastposition=s}if(0==y.page.maxh?(y.hideRail(),y.scrollvaluemax=0,y.scroll.y=0,y.scrollratio.y=0,y.cursorheight=0,y.setScrollTop(0),y.rail.scrollable=!1):y.rail.scrollable=!0,0==y.page.maxw?(y.hideRailHr(),y.scrollvaluemaxw=0,y.scroll.x=0,y.scrollratio.x=0,y.cursorwidth=0,y.setScrollLeft(0),y.railh.scrollable=!1):y.railh.scrollable=!0,y.locked=0==y.page.maxh&&0==y.page.maxw,y.locked)return y.ispage||y.updateScrollBar(y.view),!1;y.hidden||y.visibility?y.hidden||y.railh.visibility||y.showRailHr():y.showRail().showRailHr(),y.istextarea&&y.win.css("resize")&&"none"!=y.win.css("resize")&&(y.view.h-=20),y.cursorheight=Math.min(y.view.h,Math.round(y.view.h*(y.view.h/y.page.h))),y.cursorheight=y.opt.cursorfixedheight?y.opt.cursorfixedheight:Math.max(y.opt.cursorminheight,y.cursorheight),y.cursorwidth=Math.min(y.view.w,Math.round(y.view.w*(y.view.w/y.page.w))),y.cursorwidth=y.opt.cursorfixedheight?y.opt.cursorfixedheight:Math.max(y.opt.cursorminheight,y.cursorwidth),y.scrollvaluemax=y.view.h-y.cursorheight-y.cursor.hborder,y.railh&&(y.railh.width=y.page.maxh>0?y.view.w-y.rail.width:y.view.w,y.scrollvaluemaxw=y.railh.width-y.cursorwidth-y.cursorh.wborder),y.ispage||y.updateScrollBar(y.view),y.scrollratio={x:y.page.maxw/y.scrollvaluemaxw,y:y.page.maxh/y.scrollvaluemax};var u=y.getScrollTop();return u>y.page.maxh?y.doScrollTop(y.page.maxh):(y.scroll.y=Math.round(y.getScrollTop()*(1/y.scrollratio.y)),y.scroll.x=Math.round(y.getScrollLeft()*(1/y.scrollratio.x)),y.cursoractive&&y.noticeCursor()),y.scroll.y&&0==y.getScrollTop()&&y.doScrollTo(Math.floor(y.scroll.y*y.scrollratio.y)),y},this.resize=y.onResize,this.lazyResize=function(e){return e=isNaN(e)?30:e,y.delayed("resize",y.resize,e),y},this._bind=function(e,t,n,r){y.events.push({e:e,n:t,f:n,b:r,q:!1}),e.addEventListener?e.addEventListener(t,n,r||!1):e.attachEvent?e.attachEvent("on"+t,n):e["on"+t]=n},this.jqbind=function(e,t,n){y.events.push({e:e,n:t,f:n,q:!0}),a(e).bind(t,n)},this.bind=function(e,t,n,r){var i="jquery"in e?e[0]:e;if("mousewheel"==t)if("onwheel"in document||document.documentMode>=9)y._bind(i,"wheel",n,r||!1);else{var s=void 0!==document.onmousewheel?"mousewheel":"DOMMouseScroll";p(i,s,n,r||!1),"DOMMouseScroll"==s&&p(i,"MozMousePixelScroll",n,r||!1)}else if(i.addEventListener){if(E.cantouch&&/mouseup|mousedown|mousemove/.test(t)){var o="mousedown"==t?"touchstart":"mouseup"==t?"touchend":"touchmove";y._bind(i,o,function(e){if(e.touches){if(e.touches.length<2){var t=e.touches.length?e.touches[0]:e;t.original=e,n.call(this,t)}}else if(e.changedTouches){var t=e.changedTouches[0];t.original=e,n.call(this,t)}},r||!1)}y._bind(i,t,n,r||!1),E.cantouch&&"mouseup"==t&&y._bind(i,"touchcancel",n,r||!1)}else y._bind(i,t,function(e){return e=e||window.event||!1,e&&e.srcElement&&(e.target=e.srcElement),"pageY"in e||(e.pageX=e.clientX+document.documentElement.scrollLeft,e.pageY=e.clientY+document.documentElement.scrollTop),n.call(i,e)===!1||r===!1?y.cancelEvent(e):!0})},this._unbind=function(e,t,n,r){e.removeEventListener?e.removeEventListener(t,n,r):e.detachEvent?e.detachEvent("on"+t,n):e["on"+t]=!1},this.unbindAll=function(){for(var e=0;e<y.events.length;e++){var t=y.events[e];t.q?t.e.unbind(t.n,t.f):y._unbind(t.e,t.n,t.f,t.b)}},this.cancelEvent=function(e){var e=e.original?e.original:e?e:window.event||!1;return e?(e.preventDefault&&e.preventDefault(),e.stopPropagation&&e.stopPropagation(),e.preventManipulation&&e.preventManipulation(),e.cancelBubble=!0,e.cancel=!0,e.returnValue=!1,!1):!1},this.stopPropagation=function(e){var e=e.original?e.original:e?e:window.event||!1;return e?e.stopPropagation?e.stopPropagation():(e.cancelBubble&&(e.cancelBubble=!0),!1):!1},this.showRail=function(){return 0==y.page.maxh||!y.ispage&&"none"==y.win.css("display")||(y.visibility=!0,y.rail.visibility=!0,y.rail.css("display","block")),y},this.showRailHr=function(){return y.railh?(0==y.page.maxw||!y.ispage&&"none"==y.win.css("display")||(y.railh.visibility=!0,y.railh.css("display","block")),y):y},this.hideRail=function(){return y.visibility=!1,y.rail.visibility=!1,y.rail.css("display","none"),y},this.hideRailHr=function(){return y.railh?(y.railh.visibility=!1,y.railh.css("display","none"),y):y},this.show=function(){return y.hidden=!1,y.locked=!1,y.showRail().showRailHr()},this.hide=function(){return y.hidden=!0,y.locked=!0,y.hideRail().hideRailHr()},this.toggle=function(){return y.hidden?y.show():y.hide()},this.remove=function(){y.stop(),y.cursortimeout&&clearTimeout(y.cursortimeout),y.doZoomOut(),y.unbindAll(),E.isie9&&y.win[0].detachEvent("onpropertychange",y.onAttributeChange),y.observer!==!1&&y.observer.disconnect(),y.observerremover!==!1&&y.observerremover.disconnect(),y.events=null,y.cursor&&y.cursor.remove(),y.cursorh&&y.cursorh.remove(),y.rail&&y.rail.remove(),y.railh&&y.railh.remove(),y.zoom&&y.zoom.remove();for(var e=0;e<y.saved.css.length;e++){var t=y.saved.css[e];t[0].css(t[1],void 0===t[2]?"":t[2])}y.saved=!1,y.me.data("__nicescroll","");var n=a.nicescroll;n.each(function(e){if(this&&this.id===y.id){delete n[e];for(var t=++e;t<n.length;t++,e++)n[e]=n[t];n.length--,n.length&&delete n[n.length]}});for(var r in y)y[r]=null,delete y[r];y=null},this.scrollstart=function(e){return this.onscrollstart=e,y},this.scrollend=function(e){return this.onscrollend=e,y},this.scrollcancel=function(e){return this.onscrollcancel=e,y},this.zoomin=function(e){return this.onzoomin=e,y},this.zoomout=function(e){return this.onzoomout=e,y},this.isScrollable=function(e){var t=e.target?e.target:e;if("OPTION"==t.nodeName)return!0;for(;t&&1==t.nodeType&&!/^BODY|HTML/.test(t.nodeName);){var n=a(t),r=n.css("overflowY")||n.css("overflowX")||n.css("overflow")||"";if(/scroll|auto/.test(r))return t.clientHeight!=t.scrollHeight;t=t.parentNode?t.parentNode:!1}return!1},this.getViewport=function(e){for(var t=e&&e.parentNode?e.parentNode:!1;t&&1==t.nodeType&&!/^BODY|HTML/.test(t.nodeName);){var n=a(t);if(/fixed|absolute/.test(n.css("position")))return n;var r=n.css("overflowY")||n.css("overflowX")||n.css("overflow")||"";if(/scroll|auto/.test(r)&&t.clientHeight!=t.scrollHeight)return n;if(n.getNiceScroll().length>0)return n;t=t.parentNode?t.parentNode:!1}return t?a(t):!1},this.triggerScrollEnd=function(){if(y.onscrollend){var e=y.getScrollLeft(),t=y.getScrollTop(),n={type:"scrollend",current:{x:e,y:t},end:{x:e,y:t}};y.onscrollend.call(y,n)}},this.onmousewheel=function(e){if(!y.wheelprevented){if(y.locked)return y.debounced("checkunlock",y.resize,250),!0;if(y.rail.drag)return y.cancelEvent(e);if("auto"==y.opt.oneaxismousemode&&0!=e.deltaX&&(y.opt.oneaxismousemode=!1),y.opt.oneaxismousemode&&0==e.deltaX&&!y.rail.scrollable)return y.railh&&y.railh.scrollable?y.onmousewheelhr(e):!0;var t=+(new Date),n=!1;if(y.opt.preservenativescrolling&&y.checkarea+600<t&&(y.nativescrollingarea=y.isScrollable(e),n=!0),y.checkarea=t,y.nativescrollingarea)return!0;var r=m(e,!1,n);return r&&(y.checkarea=0),r}},this.onmousewheelhr=function(e){if(!y.wheelprevented){if(y.locked||!y.railh.scrollable)return!0;if(y.rail.drag)return y.cancelEvent(e);var t=+(new Date),n=!1;return y.opt.preservenativescrolling&&y.checkarea+600<t&&(y.nativescrollingarea=y.isScrollable(e),n=!0),y.checkarea=t,y.nativescrollingarea?!0:y.locked?y.cancelEvent(e):m(e,!0,n)}},this.stop=function(){return y.cancelScroll(),y.scrollmon&&y.scrollmon.stop(),y.cursorfreezed=!1,y.scroll.y=Math.round(y.getScrollTop()*(1/y.scrollratio.y)),y.noticeCursor(),y},this.getTransitionSpeed=function(e){var t=Math.round(10*y.opt.scrollspeed),n=Math.min(t,Math.round(e/20*y.opt.scrollspeed));return n>20?n:0},y.opt.smoothscroll?y.ishwscroll&&E.hastransition&&y.opt.usetransition?(this.prepareTransition=function(e,t){var n=t?e>20?e:0:y.getTransitionSpeed(e),r=n?E.prefixstyle+"transform "+n+"ms ease-out":"";return y.lasttransitionstyle&&y.lasttransitionstyle==r||(y.lasttransitionstyle=r,y.doc.css(E.transitionstyle,r)),n},this.doScrollLeft=function(e,t){var n=y.scrollrunning?y.newscrolly:y.getScrollTop();y.doScrollPos(e,n,t)},this.doScrollTop=function(e,t){var n=y.scrollrunning?y.newscrollx:y.getScrollLeft();y.doScrollPos(n,e,t)},this.doScrollPos=function(e,t,n){var r=y.getScrollTop(),i=y.getScrollLeft();return((y.newscrolly-r)*(t-r)<0||(y.newscrollx-i)*(e-i)<0)&&y.cancelScroll(),0==y.opt.bouncescroll&&(0>t?t=0:t>y.page.maxh&&(t=y.page.maxh),0>e?e=0:e>y.page.maxw&&(e=y.page.maxw)),y.scrollrunning&&e==y.newscrollx&&t==y.newscrolly?!1:(y.newscrolly=t,y.newscrollx=e,y.newscrollspeed=n||!1,y.timer?!1:void (y.timer=setTimeout(function(){var n=y.getScrollTop(),r=y.getScrollLeft(),i={};i.x=e-r,i.y=t-n,i.px=r,i.py=n;var s=Math.round(Math.sqrt(Math.pow(i.x,2)+Math.pow(i.y,2))),o=y.newscrollspeed&&y.newscrollspeed>1?y.newscrollspeed:y.getTransitionSpeed(s);if(y.newscrollspeed&&y.newscrollspeed<=1&&(o*=y.newscrollspeed),y.prepareTransition(o,!0),y.timerscroll&&y.timerscroll.tm&&clearInterval(y.timerscroll.tm),o>0){if(!y.scrollrunning&&y.onscrollstart){var u={type:"scrollstart",current:{x:r,y:n},request:{x:e,y:t},end:{x:y.newscrollx,y:y.newscrolly},speed:o};y.onscrollstart.call(y,u)}E.transitionend?y.scrollendtrapped||(y.scrollendtrapped=!0,y.bind(y.doc,E.transitionend,y.onScrollTransitionEnd,!1)):(y.scrollendtrapped&&clearTimeout(y.scrollendtrapped),y.scrollendtrapped=setTimeout(y.onScrollTransitionEnd,o));var a=n,f=r;y.timerscroll={bz:new BezierClass(a,y.newscrolly,o,0,0,.58,1),bh:new BezierClass(f,y.newscrollx,o,0,0,.58,1)},y.cursorfreezed||(y.timerscroll.tm=setInterval(function(){y.showCursor(y.getScrollTop(),y.getScrollLeft())},60))}y.synched("doScroll-set",function(){y.timer=0,y.scrollendtrapped&&(y.scrollrunning=!0),y.setScrollTop(y.newscrolly),y.setScrollLeft(y.newscrollx),y.scrollendtrapped||y.onScrollTransitionEnd()})},50)))},this.cancelScroll=function(){if(!y.scrollendtrapped)return!0;var e=y.getScrollTop(),t=y.getScrollLeft();return y.scrollrunning=!1,E.transitionend||clearTimeout(E.transitionend),y.scrollendtrapped=!1,y._unbind(y.doc,E.transitionend,y.onScrollTransitionEnd),y.prepareTransition(0),y.setScrollTop(e),y.railh&&y.setScrollLeft(t),y.timerscroll&&y.timerscroll.tm&&clearInterval(y.timerscroll.tm),y.timerscroll=!1,y.cursorfreezed=!1,y.showCursor(e,t),y},this.onScrollTransitionEnd=function(){y.scrollendtrapped&&y._unbind(y.doc,E.transitionend,y.onScrollTransitionEnd),y.scrollendtrapped=!1,y.prepareTransition(0),y.timerscroll&&y.timerscroll.tm&&clearInterval(y.timerscroll.tm),y.timerscroll=!1;var e=y.getScrollTop(),t=y.getScrollLeft();return y.setScrollTop(e),y.railh&&y.setScrollLeft(t),y.noticeCursor(!1,e,t),y.cursorfreezed=!1,0>e?e=0:e>y.page.maxh&&(e=y.page.maxh),0>t?t=0:t>y.page.maxw&&(t=y.page.maxw),e!=y.newscrolly||t!=y.newscrollx?y.doScrollPos(t,e,y.opt.snapbackspeed):(y.onscrollend&&y.scrollrunning&&y.triggerScrollEnd(),void (y.scrollrunning=!1))}):(this.doScrollLeft=function(e,t){var n=y.scrollrunning?y.newscrolly:y.getScrollTop();y.doScrollPos(e,n,t)},this.doScrollTop=function(e,t){var n=y.scrollrunning?y.newscrollx:y.getScrollLeft();y.doScrollPos(n,e,t)},this.doScrollPos=function(e,t,n){function r(){if(y.cancelAnimationFrame)return!0;if(y.scrollrunning=!0,h=1-h)return y.timer=l(r)||1;var e=0,t=sy=y.getScrollTop();if(y.dst.ay){t=y.bzscroll?y.dst.py+y.bzscroll.getNow()*y.dst.ay:y.newscrolly;var n=t-sy;(0>n&&t<y.newscrolly||n>0&&t>y.newscrolly)&&(t=y.newscrolly),y.setScrollTop(t),t==y.newscrolly&&(e=1)}else e=1;var i=sx=y.getScrollLeft();if(y.dst.ax){i=y.bzscroll?y.dst.px+y.bzscroll.getNow()*y.dst.ax:y.newscrollx;var n=i-sx;(0>n&&i<y.newscrollx||n>0&&i>y.newscrollx)&&(i=y.newscrollx),y.setScrollLeft(i),i==y.newscrollx&&(e+=1)}else e+=1;2==e?(y.timer=0,y.cursorfreezed=!1,y.bzscroll=!1,y.scrollrunning=!1,0>t?t=0:t>y.page.maxh&&(t=y.page.maxh),0>i?i=0:i>y.page.maxw&&(i=y.page.maxw),i!=y.newscrollx||t!=y.newscrolly?y.doScrollPos(i,t):y.onscrollend&&y.triggerScrollEnd()):y.timer=l(r)||1}var t=void 0===t||t===!1?y.getScrollTop(!0):t;if(y.timer&&y.newscrolly==t&&y.newscrollx==e)return!0;y.timer&&c(y.timer),y.timer=0;var i=y.getScrollTop(),s=y.getScrollLeft();((y.newscrolly-i)*(t-i)<0||(y.newscrollx-s)*(e-s)<0)&&y.cancelScroll(),y.newscrolly=t,y.newscrollx=e,y.bouncescroll&&y.rail.visibility||(y.newscrolly<0?y.newscrolly=0:y.newscrolly>y.page.maxh&&(y.newscrolly=y.page.maxh)),y.bouncescroll&&y.railh.visibility||(y.newscrollx<0?y.newscrollx=0:y.newscrollx>y.page.maxw&&(y.newscrollx=y.page.maxw)),y.dst={},y.dst.x=e-s,y.dst.y=t-i,y.dst.px=s,y.dst.py=i;var o=Math.round(Math.sqrt(Math.pow(y.dst.x,2)+Math.pow(y.dst.y,2)));y.dst.ax=y.dst.x/o,y.dst.ay=y.dst.y/o;var u=0,a=o;0==y.dst.x?(u=i,a=t,y.dst.ay=1,y.dst.py=0):0==y.dst.y&&(u=s,a=e,y.dst.ax=1,y.dst.px=0);var f=y.getTransitionSpeed(o);if(n&&1>=n&&(f*=n),y.bzscroll=f>0?y.bzscroll?y.bzscroll.update(a,f):new BezierClass(u,a,f,0,1,0,1):!1,!y.timer){(i==y.page.maxh&&t>=y.page.maxh||s==y.page.maxw&&e>=y.page.maxw)&&y.checkContentSize();var h=1;if(y.cancelAnimationFrame=!1,y.timer=1,y.onscrollstart&&!y.scrollrunning){var p={type:"scrollstart",current:{x:s,y:i},request:{x:e,y:t},end:{x:y.newscrollx,y:y.newscrolly},speed:f};y.onscrollstart.call(y,p)}r(),(i==y.page.maxh&&t>=i||s==y.page.maxw&&e>=s)&&y.checkContentSize(),y.noticeCursor()}},this.cancelScroll=function(){return y.timer&&c(y.timer),y.timer=0,y.bzscroll=!1,y.scrollrunning=!1,y}):(this.doScrollLeft=function(e,t){var n=y.getScrollTop();y.doScrollPos(e,n,t)},this.doScrollTop=function(e,t){var n=y.getScrollLeft();y.doScrollPos(n,e,t)},this.doScrollPos=function(e,t){var n=e>y.page.maxw?y.page.maxw:e;0>n&&(n=0);var r=t>y.page.maxh?y.page.maxh:t;0>r&&(r=0),y.synched("scroll",function(){y.setScrollTop(r),y.setScrollLeft(n)})},this.cancelScroll=function(){}),this.doScrollBy=function(e,t){var n=0;if(t)n=Math.floor((y.scroll.y-e)*y.scrollratio.y);else{var r=y.timer?y.newscrolly:y.getScrollTop(!0);n=r-e}if(y.bouncescroll){var i=Math.round(y.view.h/2);-i>n?n=-i:n>y.page.maxh+i&&(n=y.page.maxh+i)}return y.cursorfreezed=!1,py=y.getScrollTop(!0),0>n&&0>=py?y.noticeCursor():n>y.page.maxh&&py>=y.page.maxh?(y.checkContentSize(),y.noticeCursor()):void y.doScrollTop(n)},this.doScrollLeftBy=function(e,t){var n=0;if(t)n=Math.floor((y.scroll.x-e)*y.scrollratio.x);else{var r=y.timer?y.newscrollx:y.getScrollLeft(!0);n=r-e}if(y.bouncescroll){var i=Math.round(y.view.w/2);-i>n?n=-i:n>y.page.maxw+i&&(n=y.page.maxw+i)}return y.cursorfreezed=!1,px=y.getScrollLeft(!0),0>n&&0>=px?y.noticeCursor():n>y.page.maxw&&px>=y.page.maxw?y.noticeCursor():void y.doScrollLeft(n)},this.doScrollTo=function(e,t){var n=t?Math.round(e*y.scrollratio.y):e;0>n?n=0:n>y.page.maxh&&(n=y.page.maxh),y.cursorfreezed=!1,y.doScrollTop(e)},this.checkContentSize=function(){var e=y.getContentSize();(e.h!=y.page.h||e.w!=y.page.w)&&y.resize(!1,e)},y.onscroll=function(){y.rail.drag||y.cursorfreezed||y.synched("scroll",function(){y.scroll.y=Math.round(y.getScrollTop()*(1/y.scrollratio.y)),y.railh&&(y.scroll.x=Math.round(y.getScrollLeft()*(1/y.scrollratio.x))),y.noticeCursor()})},y.bind(y.docscroll,"scroll",y.onscroll),this.doZoomIn=function(e){if(!y.zoomactive){y.zoomactive=!0,y.zoomrestore={style:{}};var t=["position","top","left","zIndex","backgroundColor","marginTop","marginBottom","marginLeft","marginRight"],n=y.win[0].style;for(var r in t){var i=t[r];y.zoomrestore.style[i]=void 0!==n[i]?n[i]:""}y.zoomrestore.style.width=y.win.css("width"),y.zoomrestore.style.height=y.win.css("height"),y.zoomrestore.padding={w:y.win.outerWidth()-y.win.width(),h:y.win.outerHeight()-y.win.height()},E.isios4&&(y.zoomrestore.scrollTop=a(window).scrollTop(),a(window).scrollTop(0)),y.win.css({position:E.isios4?"absolute":"fixed",top:0,left:0,"z-index":u+100,margin:"0px"});var s=y.win.css("backgroundColor");return(""==s||/transparent|rgba\(0, 0, 0, 0\)|rgba\(0,0,0,0\)/.test(s))&&y.win.css("backgroundColor","#fff"),y.rail.css({"z-index":u+101}),y.zoom.css({"z-index":u+102}),y.zoom.css("backgroundPosition","0px -18px"),y.resizeZoom(),y.onzoomin&&y.onzoomin.call(y),y.cancelEvent(e)}},this.doZoomOut=function(e){return y.zoomactive?(y.zoomactive=!1,y.win.css("margin",""),y.win.css(y.zoomrestore.style),E.isios4&&a(window).scrollTop(y.zoomrestore.scrollTop),y.rail.css({"z-index":y.zindex}),y.zoom.css({"z-index":y.zindex}),y.zoomrestore=!1,y.zoom.css("backgroundPosition","0px 0px"),y.onResize(),y.onzoomout&&y.onzoomout.call(y),y.cancelEvent(e)):void 0},this.doZoom=function(e){return y.zoomactive?y.doZoomOut(e):y.doZoomIn(e)},this.resizeZoom=function(){if(y.zoomactive){var e=y.getScrollTop();y.win.css({width:a(window).width()-y.zoomrestore.padding.w+"px",height:a(window).height()-y.zoomrestore.padding.h+"px"}),y.onResize(),y.setScrollTop(Math.min(y.page.maxh,e))}},this.init(),a.nicescroll.push(this)},b=function(e){var t=this;this.nc=e,this.lastx=0,this.lasty=0,this.speedx=0,this.speedy=0,this.lasttime=0,this.steptime=0,this.snapx=!1,this.snapy=!1,this.demulx=0,this.demuly=0,this.lastscrollx=-1,this.lastscrolly=-1,this.chkx=0,this.chky=0,this.timer=0,this.time=function(){return+(new Date)},this.reset=function(e,n){t.stop();var r=t.time();t.steptime=0,t.lasttime=r,t.speedx=0,t.speedy=0,t.lastx=e,t.lasty=n,t.lastscrollx=-1,t.lastscrolly=-1},this.update=function(e,n){var r=t.time();t.steptime=r-t.lasttime,t.lasttime=r;var i=n-t.lasty,s=e-t.lastx,o=t.nc.getScrollTop(),u=t.nc.getScrollLeft(),a=o+i,f=u+s;t.snapx=0>f||f>t.nc.page.maxw,t.snapy=0>a||a>t.nc.page.maxh,t.speedx=s,t.speedy=i,t.lastx=e,t.lasty=n},this.stop=function(){t.nc.unsynched("domomentum2d"),t.timer&&clearTimeout(t.timer),t.timer=0,t.lastscrollx=-1,t.lastscrolly=-1},this.doSnapy=function(e,n){var r=!1;0>n?(n=0,r=!0):n>t.nc.page.maxh&&(n=t.nc.page.maxh,r=!0),0>e?(e=0,r=!0):e>t.nc.page.maxw&&(e=t.nc.page.maxw,r=!0),r?t.nc.doScrollPos(e,n,t.nc.opt.snapbackspeed):t.nc.triggerScrollEnd()},this.doMomentum=function(e){var n=t.time(),r=e?n+e:t.lasttime,i=t.nc.getScrollLeft(),s=t.nc.getScrollTop(),o=t.nc.page.maxh,u=t.nc.page.maxw;t.speedx=u>0?Math.min(60,t.speedx):0,t.speedy=o>0?Math.min(60,t.speedy):0;var a=r&&60>=n-r;(0>s||s>o||0>i||i>u)&&(a=!1);var f=t.speedy&&a?t.speedy:!1,l=t.speedx&&a?t.speedx:!1;if(f||l){var c=Math.max(16,t.steptime);if(c>50){var h=c/50;t.speedx*=h,t.speedy*=h,c=50}t.demulxy=0,t.lastscrollx=t.nc.getScrollLeft(),t.chkx=t.lastscrollx,t.lastscrolly=t.nc.getScrollTop(),t.chky=t.lastscrolly;var p=t.lastscrollx,d=t.lastscrolly,v=function(){var e=t.time()-n>600?.04:.02;t.speedx&&(p=Math.floor(t.lastscrollx-t.speedx*(1-t.demulxy)),t.lastscrollx=p,(0>p||p>u)&&(e=.1)),t.speedy&&(d=Math.floor(t.lastscrolly-t.speedy*(1-t.demulxy)),t.lastscrolly=d,(0>d||d>o)&&(e=.1)),t.demulxy=Math.min(1,t.demulxy+e),t.nc.synched("domomentum2d",function(){if(t.speedx){var e=t.nc.getScrollLeft();e!=t.chkx&&t.stop(),t.chkx=p,t.nc.setScrollLeft(p)}if(t.speedy){var n=t.nc.getScrollTop();n!=t.chky&&t.stop(),t.chky=d,t.nc.setScrollTop(d)}t.timer||(t.nc.hideCursor(),t.doSnapy(p,d))}),t.demulxy<1?t.timer=setTimeout(v,c):(t.stop(),t.nc.hideCursor(),t.doSnapy(p,d))};v()}else t.doSnapy(t.nc.getScrollLeft(),t.nc.getScrollTop())}},w=e.fn.scrollTop;e.cssHooks.pageYOffset={get:function(e){var t=a.data(e,"__nicescroll")||!1;return t&&t.ishwscroll?t.getScrollTop():w.call(e)},set:function(e,t){var n=a.data(e,"__nicescroll")||!1;return n&&n.ishwscroll?n.setScrollTop(parseInt(t)):w.call(e,t),this}},e.fn.scrollTop=function(e){if(void 0===e){var t=this[0]?a.data(this[0],"__nicescroll")||!1:!1;return t&&t.ishwscroll?t.getScrollTop():w.call(this)}return this.each(function(){var t=a.data(this,"__nicescroll")||!1;t&&t.ishwscroll?t.setScrollTop(parseInt(e)):w.call(a(this),e)})};var E=e.fn.scrollLeft;a.cssHooks.pageXOffset={get:function(e){var t=a.data(e,"__nicescroll")||!1;return t&&t.ishwscroll?t.getScrollLeft():E.call(e)},set:function(e,t){var n=a.data(e,"__nicescroll")||!1;return n&&n.ishwscroll?n.setScrollLeft(parseInt(t)):E.call(e,t),this}},e.fn.scrollLeft=function(e){if(void 0===e){var t=this[0]?a.data(this[0],"__nicescroll")||!1:!1;return t&&t.ishwscroll?t.getScrollLeft():E.call(this)}return this.each(function(){var t=a.data(this,"__nicescroll")||!1;t&&t.ishwscroll?t.setScrollLeft(parseInt(e)):E.call(a(this),e)})};var S=function(e){var t=this;if(this.length=0,this.name="nicescrollarray",this.each=function(e){for(var n=0,r=0;n<t.length;n++)e.call(t[n],r++);return t},this.push=function(e){t[t.length]=e,t.length++},this.eq=function(e){return t[e]},e)for(var n=0;n<e.length;n++){var r=a.data(e[n],"__nicescroll")||!1;r&&(this[this.length]=r,this.length++)}return this};n(S.prototype,["show","hide","toggle","onResize","resize","remove","stop","doScrollPos"],function(e,t){e[t]=function(){var e=arguments;return this.each(function(){this[t].apply(this,e)})}}),e.fn.getNiceScroll=function(e){if(void 0===e)return new S(this);var t=this[e]&&a.data(this[e],"__nicescroll")||!1;return t},e.extend(e.expr[":"],{nicescroll:function(e){return a.data(e,"__nicescroll")?!0:!1}}),a.fn.niceScroll=function(e,t){void 0===t&&("object"!=typeof e||"jquery"in e||(t=e,e=!1));var n=new S;void 0===t&&(t={}),e&&(t.doc=a(e),t.win=a(this));var r=!("doc"in t);return r||"win"in t||(t.win=a(this)),this.each(function(){var e=a(this).data("__nicescroll")||!1;e||(t.doc=r?a(this):t.doc,e=new y(t,a(this)),a(this).data("__nicescroll",e)),n.push(e)}),1==n.length?n[0]:n},window.NiceScroll={getjQuery:function(){return e}},a.nicescroll||(a.nicescroll=new S,a.nicescroll.options=v)}),require.config({paths:{jquery:"/static/assets/js/jquery.min",underscore:"libs/underscore",backbone:"libs/backbone",text:"libs/text","jquery.cookie":"/static/js/jquery.cookie","jquery.xmldom":"/static/js/jquery.xmldom","jquery.form":"/static/js/jquery.form","jquery.treeview":"/static/js/jquery.treeview","jquery.jquote2":"libs/jquery.jquote2.min",jsonrpc:"/static/js/jsonrpc",heiduc:"/static/js/heiduc",cms:"/static/js/cms",i18n:"/i18n","back-services":"/static/js/back-services",cm:"/static/js/codemirror/codemirror","cm-css":"/static/js/codemirror/css","cm-html":"/static/js/codemirror/htmlmixed","cm-js":"/static/js/codemirror/javascript","cm-xml":"/static/js/codemirror/xml","moment-js":"/static/assets/lib/moment-js/moment.min","jquery.easing":"/static/assets/js/jquery.easing.1.3.min",bootstrap:"/static/assets/bootstrap/js/bootstrap.min",datepicker:"/static/assets/lib/bootstrap-datepicker/js/bootstrap-datepicker",noty:"/static/assets/lib/noty/jquery.noty","noty-layout":"/static/assets/lib/noty/layouts/bottomRight","jquery.nicescroll":"/static/assets/lib/nicescroll/jquery.nicescroll.min"},shim:{underscore:{exports:"_"},backbone:{deps:["jquery","underscore"],exports:"Backbone"},bootstrap:["jquery"],"jquery.cookie":["jquery"],"jquery.xmldom":["jquery"],"jquery.form":["jquery"],"jquery.treeview":["jquery"],"jquery.jquote2":["jquery"],"jquery.easing":["jquery"],"jquery.nicescroll":["jquery"],"cm-css":["cm"],"cm-html":["cm"],"cm-js":["cm"],"cm-xml":["cm"],heiduc:["jsonrpc"],cms:["heiduc"],"back-services":["heiduc"],datepicker:["bootstrap"],noty:["jquery"],"noty-layout":["jquery","noty"],app:["jquery","heiduc","backbone"]}}),require(["app","jquery","underscore","backbone","jquery.cookie","jquery.xmldom","jquery.jquote2","i18n","jsonrpc","heiduc","cms","back-services","moment-js","noty","noty-layout","jquery.easing","bootstrap","datepicker","jquery.nicescroll"],function(e){Heiduc.initJSONRpc(function(){Heiduc.jsonrpc.loginFrontService.getSystemProperties(function(t){Heiduc.version=t.map.version,Heiduc.fullVersion=t.map.fullVersion,Heiduc.loggedIn=t.map.loggedIn==="true",Heiduc.app=new e})})}),define("main",function(){});
function toJSON(e){function i(){var e;while(n)e=n[t].prev,delete n[t],n=e}function u(e,a,f){var l=[],c,h,p,d,v;if(e===null||e===undefined)return"null";if(typeof e=="string")return escapeJSONString(e);if(typeof e=="number")return e.toString();if(typeof e=="boolean")return e.toString();if(e[t]){c=[f],p=a;while(p)h&&h.unshift(p[t].ref),p===e&&(d=p,h=[d[t].ref]),c.unshift(p[t].ref),p=p[t].parent;if(d){if(JSONRpcClient.fixupCircRefs)return c.shift(),h.shift(),r.push([c,h]),s;throw i(),new Error("circular reference detected!")}if(JSONRpcClient.fixupDuplicates){h=[e[t].ref],p=e[t].parent;while(p)h.unshift(p[t].ref),p=p[t].parent;return c.shift(),h.shift(),r.push([c,h]),s}}else e[t]={parent:a,prev:n,ref:f},n=e;if(e.constructor===Date)return e.javaClass?'{javaClass: "'+e.javaClass+'", time: '+e.valueOf()+"}":'{javaClass: "java.util.Date", time: '+e.valueOf()+"}";if(e.constructor===Array){for(v=0;v<e.length;v++)o=u(e[v],e,v),l.push(o===s?null:o);return"["+l.join(", ")+"]"}for(var m in e)m!==t&&(e[m]===null||e[m]===undefined?l.push('"'+m+'": null'):typeof e[m]!="function"&&(o=u(e[m],e,m),o!==s&&l.push(escapeJSONString(m)+": "+o)));return"{"+l.join(", ")+"}"}var t="$_$jabsorbed$813492",n,r=[],s={},o;return o=u(e,null,"root"),i(),r.length?{json:o,fixups:r}:{json:o}}function JSONRpcClient(){var e=0,t,n,r,i,s,o=typeof arguments[0],u=!0;o==="function"?(this.readyCB=arguments[0],e++):arguments[0]&&o==="object"&&arguments[0].length&&(this._addMethods(arguments[0]),e++,u=!1),this.serverURL=arguments[e],this.user=arguments[e+1],this.pass=arguments[e+2],this.objectID=0,u&&(this._addMethods(["system.listMethods"]),t=JSONRpcClient._makeRequest(this,"system.listMethods",[]),this.readyCB&&(i=this,t.cb=function(e,t){t||i._addMethods(e),i.readyCB(e,t)}),this.readyCB?(JSONRpcClient.async_requests.push(t),JSONRpcClient.kick_async()):(r=JSONRpcClient._sendRequest(this,t),this._addMethods(r)))}function JSONRPCCallableProxy(){this.objectID=arguments[0],this.javaClass=arguments[1],this.JSONRPCType="CallableReference"}var escapeJSONString=function(){var e=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,t={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};return function(n){return e.lastIndex=0,e.test(n)?'"'+n.replace(e,function(e){var n=t[e];return typeof n=="string"?n:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+n+'"'}}();JSONRpcClient.prototype.createCallableProxy=function(e,t){var n,r,i,s,o;n=new JSONRPCCallableProxy(e,t);for(s in JSONRpcClient.knownClasses[t])n[s]=JSONRpcClient.bind(JSONRpcClient.knownClasses[t][s],n);return n},JSONRpcClient.knownClasses={},JSONRpcClient.Exception=function(e){var t;for(var n in e)e.hasOwnProperty(n)&&(this[n]=e[n]);this.trace&&(t=this.trace.match(/^([^:]*)/),t&&(this.name=t[0])),this.name||(this.name="JSONRpcClientException")},JSONRpcClient.Exception.CODE_REMOTE_EXCEPTION=490,JSONRpcClient.Exception.CODE_ERR_CLIENT=550,JSONRpcClient.Exception.CODE_ERR_PARSE=590,JSONRpcClient.Exception.CODE_ERR_NOMETHOD=591,JSONRpcClient.Exception.CODE_ERR_UNMARSHALL=592,JSONRpcClient.Exception.CODE_ERR_MARSHALL=593,JSONRpcClient.Exception.prototype=new Error,JSONRpcClient.Exception.prototype.toString=function(e,t){var n="";return this.name&&(n+=this.name),this.message&&(n+=": "+this.message),n.length==0&&(n="no exception information given"),n},JSONRpcClient.default_ex_handler=function(e){var t,n="";for(t in e)n+=t+"	"+e[t]+"\n";alert(n)},JSONRpcClient.toplevel_ex_handler=JSONRpcClient.default_ex_handler,JSONRpcClient.profile_async=!1,JSONRpcClient.max_req_active=1,JSONRpcClient.requestId=1,JSONRpcClient.fixupCircRefs=!0,JSONRpcClient.fixupDuplicates=!0,JSONRpcClient.transformDates=!1,JSONRpcClient.transformDateWithoutHint=!1,JSONRpcClient.javaDateClasses={"java.util.Date":!0,"java.sql.Date":!0,"java.sql.Time":!0,"java.sql.Timestamp":!0},JSONRpcClient.bind=function(e,t){return function(){return e.apply(t,arguments)}},JSONRpcClient._createMethod=function(e,t){var n=function(){var n=[],r;for(var i=0;i<arguments.length;i++)n.push(arguments[i]);typeof n[0]=="function"&&(r=n.shift());var s=JSONRpcClient._makeRequest(this,t,n,this.objectID,r);return r?(JSONRpcClient.async_requests.push(s),JSONRpcClient.kick_async(),s.requestId):JSONRpcClient._sendRequest(e,s)};return n},JSONRpcClient.prototype.createObject=function(){var e=[],t=null,n,r,i;for(var s=0;s<arguments.length;s++)e.push(arguments[s]);return typeof e[0]=="function"&&(t=e.shift()),n=e[0]+".$constructor",r=e[1],i=JSONRpcClient._makeRequest(this,n,r,0,t),t===null?JSONRpcClient._sendRequest(this,i):(JSONRpcClient.async_requests.push(i),JSONRpcClient.kick_async(),i.requestId)},JSONRpcClient.CALLABLE_REFERENCE_METHOD_PREFIX=".ref",JSONRpcClient.prototype._addMethods=function(e,t){var n,r,i,s,o,u=[],a,f,l,c;for(var h=0;h<e.length;h++){r=this,i=e[h].split("."),l=e[h].indexOf("["),c=e[h].indexOf("]");if(e[h].substring(0,JSONRpcClient.CALLABLE_REFERENCE_METHOD_PREFIX.length)==JSONRpcClient.CALLABLE_REFERENCE_METHOD_PREFIX&&l!=-1&&c!=-1&&l<c)a=e[h].substring(l+1,c);else for(s=0;s<i.length-1;s++)n=i[s],r[n]?r=r[n]:(r[n]={},r=r[n]);n=i[i.length-1],a?(o=JSONRpcClient._createMethod(this,n),JSONRpcClient.knownClasses[a]||(JSONRpcClient.knownClasses[a]={}),JSONRpcClient.knownClasses[a][n]=o):(o=JSONRpcClient._createMethod(this,e[h]),!r[n]&&!t&&(r[n]=JSONRpcClient.bind(o,this)),u.push(o)),a=null}return u},JSONRpcClient._getCharsetFromHeaders=function(e){var t,n,r;try{t=e.getResponseHeader("Content-type"),n=t.split(/\s*;\s*/);for(r=0;r<n.length;r++)if(n[r].substring(0,8)=="charset=")return n[r].substring(8,n[r].length)}catch(i){}return"UTF-8"},JSONRpcClient.async_requests=[],JSONRpcClient.async_inflight={},JSONRpcClient.async_responses=[],JSONRpcClient.async_timeout=null,JSONRpcClient.num_req_active=0,JSONRpcClient._async_handler=function(){var e,t;JSONRpcClient.async_timeout=null;while(JSONRpcClient.async_responses.length>0){e=JSONRpcClient.async_responses.shift();if(e.canceled)continue;e.profile&&(e.profile.dispatch=new Date);try{e.cb(e.result,e.ex,e.profile)}catch(n){JSONRpcClient.toplevel_ex_handler(n)}}while(JSONRpcClient.async_requests.length>0&&JSONRpcClient.num_req_active<JSONRpcClient.max_req_active){t=JSONRpcClient.async_requests.shift();if(t.canceled)continue;JSONRpcClient._sendRequest(t.client,t)}},JSONRpcClient.kick_async=function(){JSONRpcClient.async_timeout||(JSONRpcClient.async_timeout=setTimeout(JSONRpcClient._async_handler,0))},JSONRpcClient.cancelRequest=function(e){if(JSONRpcClient.async_inflight[e])return JSONRpcClient.async_inflight[e].canceled=!0,!0;var t;for(t in JSONRpcClient.async_requests)if(JSONRpcClient.async_requests[t].requestId==e)return JSONRpcClient.async_requests[t].canceled=!0,!0;for(t in JSONRpcClient.async_responses)if(JSONRpcClient.async_responses[t].requestId==e)return JSONRpcClient.async_responses[t].canceled=!0,!0;return!1},JSONRpcClient._makeRequest=function(e,t,n,r,i){var s={};s.client=e,s.requestId=JSONRpcClient.requestId++;var o="{id:"+s.requestId+",method:";r&&r>0?o+='".obj['+r+"]."+t+'"':o+='"'+t+'"',i&&(s.cb=i),JSONRpcClient.profile_async&&(s.profile={submit:new Date});var u=toJSON(n);return o+=",params:"+u.json,u.fixups&&(o+=",fixups:"+toJSON(u.fixups).json),s.data=o+"}",s},JSONRpcClient._sendRequest=function(e,t){var n;t.profile&&(t.profile.start=new Date),n=JSONRpcClient.poolGetHTTPRequest(),JSONRpcClient.num_req_active++,n.open("POST",e.serverURL,!!t.cb,e.user,e.pass);try{n.setRequestHeader("Content-type","text/plain")}catch(r){}t.cb?n.onreadystatechange=function(){var r;if(n.readyState==4){n.onreadystatechange=function(){},r={cb:t.cb,result:null,ex:null},t.profile?(r.profile=t.profile,r.profile.end=new Date):r.profile=!1;try{r.result=e._handleResponse(n)}catch(i){r.ex=i}JSONRpcClient.async_inflight[t.requestId].canceled||JSONRpcClient.async_responses.push(r),delete JSONRpcClient.async_inflight[t.requestId],JSONRpcClient.kick_async()}}:n.onreadystatechange=function(){},JSONRpcClient.async_inflight[t.requestId]=t;try{n.send(t.data)}catch(r){throw JSONRpcClient.poolReturnHTTPRequest(n),JSONRpcClient.num_req_active--,new JSONRpcClient.Exception({code:JSONRpcClient.Exception.CODE_ERR_CLIENT,message:"Connection failed"})}return t.cb?null:(delete JSONRpcClient.async_inflight[t.requestId],e._handleResponse(n))},JSONRpcClient.prototype._handleResponse=function(e){this.charset||(this.charset=JSONRpcClient._getCharsetFromHeaders(e));var t,n,r;try{t=e.status,n=e.statusText,r=e.responseText}catch(i){throw JSONRpcClient.poolReturnHTTPRequest(e),JSONRpcClient.num_req_active--,JSONRpcClient.kick_async(),new JSONRpcClient.Exception({code:JSONRpcClient.Exception.CODE_ERR_CLIENT,message:"Connection failed"})}JSONRpcClient.poolReturnHTTPRequest(e),JSONRpcClient.num_req_active--;if(t!=200)throw new JSONRpcClient.Exception({code:t,message:n});return this.unmarshallResponse(r)},JSONRpcClient.prototype.unmarshallResponse=function(data){function applyFixups(e,t){function n(e,t){for(var n=0,r=t.length;n<r;n++)e=e[t[n]];return e}function r(e,t,n){var r=t.length-1;for(var i=0;i<r;i++)e=e[t[i]];e[t[r]]=n}for(var i=0,s=t.length;i<s;i++)r(e,t[i][0],n(e,t[i][1]))}function transformDate(e){function t(e,t){var n,r=0;if(e.hasOwnProperty(t)){for(n in e)if(e.hasOwnProperty(n)){r++;if(r>1)return}return!0}}var n,r;if(e&&typeof e=="object"){if(e.javaClass&&JSONRpcClient.javaDateClasses[e.javaClass])return r=new Date(e.time),e.javaClass!=="java.util.Date"&&(r.javaClass=e.javaClass),r;if(JSONRpcClient.transformDateWithoutHint&&t(e,"time"))return new Date(e.time);for(n in e)e.hasOwnProperty(n)&&(e[n]=transformDate(e[n]));return e}return e}var obj;try{eval("obj = "+data)}catch(e){throw new JSONRpcClient.Exception({code:550,message:"error parsing result"})}if(obj.error)throw new JSONRpcClient.Exception(obj.error);var r=obj.result,i,tmp;if(r){if(r.objectID&&r.JSONRPCType=="CallableReference")return this.createCallableProxy(r.objectID,r.javaClass);r=JSONRpcClient.extractCallableReferences(this,JSONRpcClient.transformDates?transformDate(r):r),obj.fixups&&applyFixups(r,obj.fixups)}return r},JSONRpcClient.extractCallableReferences=function(e,t){var n,r,i;for(n in t)typeof t[n]=="object"&&(r=JSONRpcClient.makeCallableReference(e,t[n]),r?t[n]=r:(r=JSONRpcClient.extractCallableReferences(e,t[n]),t[n]=r)),typeof n=="object"&&(r=JSONRpcClient.makeCallableReference(e,n),r?(i=t[n],delete t[n],t[r]=i):(r=JSONRpcClient.extractCallableReferences(e,n),i=t[n],delete t[n],t[r]=i));return t},JSONRpcClient.makeCallableReference=function(e,t){return t&&t.objectID&&t.javaClass&&t.JSONRPCType=="CallableReference"?e.createCallableProxy(t.objectID,t.javaClass):null},JSONRpcClient.http_spare=[],JSONRpcClient.http_max_spare=8,JSONRpcClient.poolGetHTTPRequest=function(){var e=JSONRpcClient.http_spare.pop();return e?e:JSONRpcClient.getHTTPRequest()},JSONRpcClient.poolReturnHTTPRequest=function(e){JSONRpcClient.http_spare.length>=JSONRpcClient.http_max_spare?delete e:JSONRpcClient.http_spare.push(e)},JSONRpcClient.msxmlNames=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","MSXML2.XMLHTTP.5.0","MSXML2.XMLHTTP.4.0","Microsoft.XMLHTTP"],JSONRpcClient.getHTTPRequest=function(){try{return JSONRpcClient.httpObjectName="XMLHttpRequest",new XMLHttpRequest}catch(e){}for(var t=0;t<JSONRpcClient.msxmlNames.length;t++)try{return JSONRpcClient.httpObjectName=JSONRpcClient.msxmlNames[t],new ActiveXObject(JSONRpcClient.msxmlNames[t])}catch(e){}throw JSONRpcClient.httpObjectName=null,new JSONRpcClient.Exception({code:0,message:"Can't create XMLHttpRequest object"})},define("jsonrpc",function(){});var Heiduc={};Heiduc.javaList=function(e){return{javaClass:"java.util.ArrayList",list:e}},Heiduc.javaMap=function(e){return{javaClass:"java.util.HashMap",map:e}},Heiduc.accents={"ÀÁÂÃÄÅ":"A","Æ":"AE","Ç":"C","ÈÉÊË":"E","ÌÍÎÏ":"I","Ð":"Th","Ñ":"N","ÒÓÔÕÖØ":"O","ÙÚÛÜ":"U","Ý":"Y","Þ":"Th","ß":"ss","àáâãäå":"a","æ":"ae","ç":"c","èéêë":"e","ìíîï":"i","ð":"o","ñ":"n","òóôõöø":"o","ùúûü":"u","ýÿ":"y","þ":"th"},Heiduc.replaceAccents=function(e){return $.each(Heiduc.accents,function(t,n){for(var r=0;r<t.length;r++)e=e.replace(t.charAt(r),n)}),e.toLowerCase()},Heiduc.urlFromTitle=function(e){return Heiduc.replaceAccents(e.toLowerCase()).replace(/\W/g,"-")},Heiduc.nameFromTitle=function(e){return e.toLowerCase().replace(/\W/g,"_")},Heiduc.isImage=function(e){var t=Heiduc.getFileExt(e);return t.toLowerCase().match(/gif|jpg|jpeg|png|ico/)!=null},Heiduc.getFileExt=function(e){return e.substring(e.lastIndexOf(".")+1,e.length)},Heiduc.getFileName=function(e){var t=e.lastIndexOf("\\");return t==-1&&(t=e.lastIndexOf("/")),t==-1?e:e.substring(t+1,e.length)},Heiduc.formatDate=function(e){return $.datepicker.formatDate("dd.mm.yy",e)},Heiduc.formatTime=function(e){return $.datepicker.formatDate("HH:MM",e)},Heiduc.identifier_regex=/^[a-zA-Z_][a-zA-Z0-9_]*$/,Heiduc.isValidIdentifier=function(e){return Heiduc.identifier_regex.test(e)},Heiduc.strip=function(e){var t=0;while(t<e.length&&e[t]==" ")t++;var n=e.substring(t);t=n.length-1;while(t>=0&&n[t]==" ")t--;return n.slice(0,t+1)},Heiduc.getQueryParam=function(e){var t=window.location.search.match(new RegExp("(\\?|&)"+e+"(\\[\\])?=([^&]*)"));return Heiduc.escapeHtml(t?t[3]:"")},Heiduc.escapeHtml=function(e){return e.replace(/&/g,"&amp;").replace(/>/g,"&gt;").replace(/</g,"&lt;").replace(/"/g,"&quot;").replace(/`/g,"&lsquo;").replace(/'/g,"&rsquo;")},Heiduc.unescapeHtml=function(e){return e.replace(/&amp;/g,"&").replace(/&gt;/g,">").replace(/&lt;/g,"<").replace(/&quot;/g,'"').replace(/&lsquo;/g,"`").replace(/&rsquo;/g,"'")},Heiduc.generateGUID=function(){function e(){return((1+Math.random())*65536|0).toString(16).substring(1)}return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()},Heiduc.jsonrpc="",Heiduc.jsonrpcListeners=[],Heiduc.jsonrpcSystemListeners=[],Heiduc.jsonrpcInitialized=!1,Heiduc.jsonrpcInitError=null,Heiduc.createJSONRpc=function(){Heiduc.jsonrpc=new JSONRpcClient(function(e,t){if(t)Heiduc.jsonrpcInitError="Error during JSON-RPC initialization "+t+" "+t.message;else{while(Heiduc.jsonrpcSystemListeners.length>0){var n=Heiduc.jsonrpcSystemListeners.pop();n()}while(Heiduc.jsonrpcListeners.length>0){var n=Heiduc.jsonrpcListeners.pop();n()}}Heiduc.jsonrpcInitialized=!0},"/json-rpc/")},Heiduc.createJSONRpc(),Heiduc.initJSONRpc=function(e){if(e==undefined)return;Heiduc.jsonrpcInitialized?e():Heiduc.jsonrpcListeners.push(e)},Heiduc.initJSONRpcSystem=function(e){if(e==undefined)return;Heiduc.jsonrpcInitialized?e():Heiduc.jsonrpcSystemListeners.push(e)},Heiduc.serviceFailed=function(e){return e!=null?(alert("JSON-RPC service fail "+e+" "+e.message),!0):!1},Heiduc.changeLanguage=function(e){var t=location.href.replace("#",""),n=t.indexOf("language="),r=location.search.indexOf("?")==-1?"?":"&";if(n>0){var i=t.substr(n+1),s=i.indexOf("&");t=t.substr(0,n)+"language="+e,s>0&&(t+=i.substr(s+1)),t.indexOf("&")<0&&(r="")}else t=t+r+"language="+e;location.href=t},String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")},String.prototype.ltrim=function(){return this.replace(/^\s+/,"")},String.prototype.rtrim=function(){return this.replace(/\s+$/,"")},String.prototype.startsWith=function(e){return this.match("^"+e)==e},String.prototype.endsWith=function(e){return this.match(e+"$")==e},define("heiduc",function(){}),!function(e,t){"object"==typeof module&&"object"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return t(e)}:t(e)}("undefined"!=typeof window?window:this,function(a,b){function s(e){var t=e.length,r=n.type(e);return"function"===r||n.isWindow(e)?!1:1===e.nodeType&&t?!0:"array"===r||0===t||"number"==typeof t&&t>0&&t-1 in e}function x(e,t,r){if(n.isFunction(t))return n.grep(e,function(e,n){return!!t.call(e,n,e)!==r});if(t.nodeType)return n.grep(e,function(e){return e===t!==r});if("string"==typeof t){if(w.test(t))return n.filter(t,e,r);t=n.filter(t,e)}return n.grep(e,function(e){return g.call(t,e)>=0!==r})}function D(e,t){while((e=e[t])&&1!==e.nodeType);return e}function G(e){var t=F[e]={};return n.each(e.match(E)||[],function(e,n){t[n]=!0}),t}function I(){l.removeEventListener("DOMContentLoaded",I,!1),a.removeEventListener("load",I,!1),n.ready()}function K(){Object.defineProperty(this.cache={},0,{get:function(){return{}}}),this.expando=n.expando+K.uid++}function P(e,t,r){var i;if(void 0===r&&1===e.nodeType)if(i="data-"+t.replace(O,"-$1").toLowerCase(),r=e.getAttribute(i),"string"==typeof r){try{r="true"===r?!0:"false"===r?!1:"null"===r?null:+r+""===r?+r:N.test(r)?n.parseJSON(r):r}catch(s){}M.set(e,t,r)}else r=void 0;return r}function Z(){return!0}function $(){return!1}function _(){try{return l.activeElement}catch(e){}}function jb(e,t){return n.nodeName(e,"table")&&n.nodeName(11!==t.nodeType?t:t.firstChild,"tr")?e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody")):e}function kb(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function lb(e){var t=gb.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function mb(e,t){for(var n=0,r=e.length;r>n;n++)L.set(e[n],"globalEval",!t||L.get(t[n],"globalEval"))}function nb(e,t){var r,i,s,o,u,a,f,l;if(1===t.nodeType){if(L.hasData(e)&&(o=L.access(e),u=L.set(t,o),l=o.events)){delete u.handle,u.events={};for(s in l)for(r=0,i=l[s].length;i>r;r++)n.event.add(t,s,l[s][r])}M.hasData(e)&&(a=M.access(e),f=n.extend({},a),M.set(t,f))}}function ob(e,t){var r=e.getElementsByTagName?e.getElementsByTagName(t||"*"):e.querySelectorAll?e.querySelectorAll(t||"*"):[];return void 0===t||t&&n.nodeName(e,t)?n.merge([e],r):r}function pb(e,t){var n=t.nodeName.toLowerCase();"input"===n&&T.test(e.type)?t.checked=e.checked:("input"===n||"textarea"===n)&&(t.defaultValue=e.defaultValue)}function sb(e,t){var r,i=n(t.createElement(e)).appendTo(t.body),s=a.getDefaultComputedStyle&&(r=a.getDefaultComputedStyle(i[0]))?r.display:n.css(i[0],"display");return i.detach(),s}function tb(e){var t=l,r=rb[e];return r||(r=sb(e,t),"none"!==r&&r||(qb=(qb||n("<iframe frameborder='0' width='0' height='0'/>")).appendTo(t.documentElement),t=qb[0].contentDocument,t.write(),t.close(),r=sb(e,t),qb.detach()),rb[e]=r),r}function xb(e,t,r){var i,s,o,u,a=e.style;return r=r||wb(e),r&&(u=r.getPropertyValue(t)||r[t]),r&&(""!==u||n.contains(e.ownerDocument,e)||(u=n.style(e,t)),vb.test(u)&&ub.test(t)&&(i=a.width,s=a.minWidth,o=a.maxWidth,a.minWidth=a.maxWidth=a.width=u,u=r.width,a.width=i,a.minWidth=s,a.maxWidth=o)),void 0!==u?u+"":u}function yb(e,t){return{get:function(){return e()?void delete this.get:(this.get=t).apply(this,arguments)}}}function Fb(e,t){if(t in e)return t;var n=t[0].toUpperCase()+t.slice(1),r=t,i=Eb.length;while(i--)if(t=Eb[i]+n,t in e)return t;return r}function Gb(e,t,n){var r=Ab.exec(t);return r?Math.max(0,r[1]-(n||0))+(r[2]||"px"):t}function Hb(e,t,r,i,s){for(var o=r===(i?"border":"content")?4:"width"===t?1:0,u=0;4>o;o+=2)"margin"===r&&(u+=n.css(e,r+R[o],!0,s)),i?("content"===r&&(u-=n.css(e,"padding"+R[o],!0,s)),"margin"!==r&&(u-=n.css(e,"border"+R[o]+"Width",!0,s))):(u+=n.css(e,"padding"+R[o],!0,s),"padding"!==r&&(u+=n.css(e,"border"+R[o]+"Width",!0,s)));return u}function Ib(e,t,r){var i=!0,s="width"===t?e.offsetWidth:e.offsetHeight,o=wb(e),u="border-box"===n.css(e,"boxSizing",!1,o);if(0>=s||null==s){if(s=xb(e,t,o),(0>s||null==s)&&(s=e.style[t]),vb.test(s))return s;i=u&&(k.boxSizingReliable()||s===e.style[t]),s=parseFloat(s)||0}return s+Hb(e,t,r||(u?"border":"content"),i,o)+"px"}function Jb(e,t){for(var r,i,s,o=[],u=0,a=e.length;a>u;u++)i=e[u],i.style&&(o[u]=L.get(i,"olddisplay"),r=i.style.display,t?(o[u]||"none"!==r||(i.style.display=""),""===i.style.display&&S(i)&&(o[u]=L.access(i,"olddisplay",tb(i.nodeName)))):(s=S(i),"none"===r&&s||L.set(i,"olddisplay",s?r:n.css(i,"display"))));for(u=0;a>u;u++)i=e[u],i.style&&(t&&"none"!==i.style.display&&""!==i.style.display||(i.style.display=t?o[u]||"":"none"));return e}function Kb(e,t,n,r,i){return new Kb.prototype.init(e,t,n,r,i)}function Sb(){return setTimeout(function(){Lb=void 0}),Lb=n.now()}function Tb(e,t){var n,r=0,i={height:e};for(t=t?1:0;4>r;r+=2-t)n=R[r],i["margin"+n]=i["padding"+n]=e;return t&&(i.opacity=i.width=e),i}function Ub(e,t,n){for(var r,i=(Rb[t]||[]).concat(Rb["*"]),s=0,o=i.length;o>s;s++)if(r=i[s].call(n,t,e))return r}function Vb(e,t,r){var i,s,o,u,a,f,l,c,h=this,p={},d=e.style,v=e.nodeType&&S(e),m=L.get(e,"fxshow");r.queue||(a=n._queueHooks(e,"fx"),null==a.unqueued&&(a.unqueued=0,f=a.empty.fire,a.empty.fire=function(){a.unqueued||f()}),a.unqueued++,h.always(function(){h.always(function(){a.unqueued--,n.queue(e,"fx").length||a.empty.fire()})})),1===e.nodeType&&("height"in t||"width"in t)&&(r.overflow=[d.overflow,d.overflowX,d.overflowY],l=n.css(e,"display"),c="none"===l?L.get(e,"olddisplay")||tb(e.nodeName):l,"inline"===c&&"none"===n.css(e,"float")&&(d.display="inline-block")),r.overflow&&(d.overflow="hidden",h.always(function(){d.overflow=r.overflow[0],d.overflowX=r.overflow[1],d.overflowY=r.overflow[2]}));for(i in t)if(s=t[i],Nb.exec(s)){if(delete t[i],o=o||"toggle"===s,s===(v?"hide":"show")){if("show"!==s||!m||void 0===m[i])continue;v=!0}p[i]=m&&m[i]||n.style(e,i)}else l=void 0;if(n.isEmptyObject(p))"inline"===("none"===l?tb(e.nodeName):l)&&(d.display=l);else{m?"hidden"in m&&(v=m.hidden):m=L.access(e,"fxshow",{}),o&&(m.hidden=!v),v?n(e).show():h.done(function(){n(e).hide()}),h.done(function(){var t;L.remove(e,"fxshow");for(t in p)n.style(e,t,p[t])});for(i in p)u=Ub(v?m[i]:0,i,h),i in m||(m[i]=u.start,v&&(u.end=u.start,u.start="width"===i||"height"===i?1:0))}}function Wb(e,t){var r,i,s,o,u;for(r in e)if(i=n.camelCase(r),s=t[i],o=e[r],n.isArray(o)&&(s=o[1],o=e[r]=o[0]),r!==i&&(e[i]=o,delete e[r]),u=n.cssHooks[i],u&&"expand"in u){o=u.expand(o),delete e[i];for(r in o)r in e||(e[r]=o[r],t[r]=s)}else t[i]=s}function Xb(e,t,r){var i,s,o=0,u=Qb.length,a=n.Deferred().always(function(){delete f.elem}),f=function(){if(s)return!1;for(var t=Lb||Sb(),n=Math.max(0,l.startTime+l.duration-t),r=n/l.duration||0,i=1-r,o=0,u=l.tweens.length;u>o;o++)l.tweens[o].run(i);return a.notifyWith(e,[l,i,n]),1>i&&u?n:(a.resolveWith(e,[l]),!1)},l=a.promise({elem:e,props:n.extend({},t),opts:n.extend(!0,{specialEasing:{}},r),originalProperties:t,originalOptions:r,startTime:Lb||Sb(),duration:r.duration,tweens:[],createTween:function(t,r){var i=n.Tween(e,l.opts,t,r,l.opts.specialEasing[t]||l.opts.easing);return l.tweens.push(i),i},stop:function(t){var n=0,r=t?l.tweens.length:0;if(s)return this;for(s=!0;r>n;n++)l.tweens[n].run(1);return t?a.resolveWith(e,[l,t]):a.rejectWith(e,[l,t]),this}}),c=l.props;for(Wb(c,l.opts.specialEasing);u>o;o++)if(i=Qb[o].call(l,e,c,l.opts))return i;return n.map(c,Ub,l),n.isFunction(l.opts.start)&&l.opts.start.call(e,l),n.fx.timer(n.extend(f,{elem:e,anim:l,queue:l.opts.queue})),l.progress(l.opts.progress).done(l.opts.done,l.opts.complete).fail(l.opts.fail).always(l.opts.always)}function qc(e){return function(t,r){"string"!=typeof t&&(r=t,t="*");var i,s=0,o=t.toLowerCase().match(E)||[];if(n.isFunction(r))while(i=o[s++])"+"===i[0]?(i=i.slice(1)||"*",(e[i]=e[i]||[]).unshift(r)):(e[i]=e[i]||[]).push(r)}}function rc(e,t,r,i){function u(l){var h;return s[l]=!0,n.each(e[l]||[],function(e,n){var a=n(t,r,i);return"string"!=typeof a||o||s[a]?o?!(h=a):void 0:(t.dataTypes.unshift(a),u(a),!1)}),h}var s={},o=e===mc;return u(t.dataTypes[0])||!s["*"]&&u("*")}function sc(e,t){var r,i,s=n.ajaxSettings.flatOptions||{};for(r in t)void 0!==t[r]&&((s[r]?e:i||(i={}))[r]=t[r]);return i&&n.extend(!0,e,i),e}function tc(e,t,n){var r,i,s,o,u=e.contents,a=e.dataTypes;while("*"===a[0])a.shift(),void 0===r&&(r=e.mimeType||t.getResponseHeader("Content-Type"));if(r)for(i in u)if(u[i]&&u[i].test(r)){a.unshift(i);break}if(a[0]in n)s=a[0];else{for(i in n){if(!a[0]||e.converters[i+" "+a[0]]){s=i;break}o||(o=i)}s=s||o}return s?(s!==a[0]&&a.unshift(s),n[s]):void 0}function uc(e,t,n,r){var i,s,o,u,a,f={},l=e.dataTypes.slice();if(l[1])for(o in e.converters)f[o.toLowerCase()]=e.converters[o];s=l.shift();while(s)if(e.responseFields[s]&&(n[e.responseFields[s]]=t),!a&&r&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),a=s,s=l.shift())if("*"===s)s=a;else if("*"!==a&&a!==s){if(o=f[a+" "+s]||f["* "+s],!o)for(i in f)if(u=i.split(" "),u[1]===s&&(o=f[a+" "+u[0]]||f["* "+u[0]])){o===!0?o=f[i]:f[i]!==!0&&(s=u[0],l.unshift(u[1]));break}if(o!==!0)if(o&&e["throws"])t=o(t);else try{t=o(t)}catch(c){return{state:"parsererror",error:o?c:"No conversion from "+a+" to "+s}}}return{state:"success",data:t}}function Ac(e,t,r,i){var s;if(n.isArray(t))n.each(t,function(t,n){r||wc.test(e)?i(e,n):Ac(e+"["+("object"==typeof n?t:"")+"]",n,r,i)});else if(r||"object"!==n.type(t))i(e,t);else for(s in t)Ac(e+"["+s+"]",t[s],r,i)}function Jc(e){return n.isWindow(e)?e:9===e.nodeType&&e.defaultView}var c=[],d=c.slice,e=c.concat,f=c.push,g=c.indexOf,h={},i=h.toString,j=h.hasOwnProperty,k={},l=a.document,m="2.1.3",n=function(e,t){return new n.fn.init(e,t)},o=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,p=/^-ms-/,q=/-([\da-z])/gi,r=function(e,t){return t.toUpperCase()};n.fn=n.prototype={jquery:m,constructor:n,selector:"",length:0,toArray:function(){return d.call(this)},get:function(e){return null!=e?0>e?this[e+this.length]:this[e]:d.call(this)},pushStack:function(e){var t=n.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e,t){return n.each(this,e,t)},map:function(e){return this.pushStack(n.map(this,function(t,n){return e.call(t,n,t)}))},slice:function(){return this.pushStack(d.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(0>e?t:0);return this.pushStack(n>=0&&t>n?[this[n]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:f,sort:c.sort,splice:c.splice},n.extend=n.fn.extend=function(){var e,t,r,i,s,o,u=arguments[0]||{},a=1,f=arguments.length,l=!1;for("boolean"==typeof u&&(l=u,u=arguments[a]||{},a++),"object"==typeof u||n.isFunction(u)||(u={}),a===f&&(u=this,a--);f>a;a++)if(null!=(e=arguments[a]))for(t in e)r=u[t],i=e[t],u!==i&&(l&&i&&(n.isPlainObject(i)||(s=n.isArray(i)))?(s?(s=!1,o=r&&n.isArray(r)?r:[]):o=r&&n.isPlainObject(r)?r:{},u[t]=n.extend(l,o,i)):void 0!==i&&(u[t]=i));return u},n.extend({expando:"jQuery"+(m+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isFunction:function(e){return"function"===n.type(e)},isArray:Array.isArray,isWindow:function(e){return null!=e&&e===e.window},isNumeric:function(e){return!n.isArray(e)&&e-parseFloat(e)+1>=0},isPlainObject:function(e){return"object"!==n.type(e)||e.nodeType||n.isWindow(e)?!1:e.constructor&&!j.call(e.constructor.prototype,"isPrototypeOf")?!1:!0},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},type:function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?h[i.call(e)]||"object":typeof e},globalEval:function(a){var b,c=eval;a=n.trim(a),a&&(1===a.indexOf("use strict")?(b=l.createElement("script"),b.text=a,l.head.appendChild(b).parentNode.removeChild(b)):c(a))},camelCase:function(e){return e.replace(p,"ms-").replace(q,r)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t,n){var r,i=0,o=e.length,u=s(e);if(n){if(u){for(;o>i;i++)if(r=t.apply(e[i],n),r===!1)break}else for(i in e)if(r=t.apply(e[i],n),r===!1)break}else if(u){for(;o>i;i++)if(r=t.call(e[i],i,e[i]),r===!1)break}else for(i in e)if(r=t.call(e[i],i,e[i]),r===!1)break;return e},trim:function(e){return null==e?"":(e+"").replace(o,"")},makeArray:function(e,t){var r=t||[];return null!=e&&(s(Object(e))?n.merge(r,"string"==typeof e?[e]:e):f.call(r,e)),r},inArray:function(e,t,n){return null==t?-1:g.call(t,e,n)},merge:function(e,t){for(var n=+t.length,r=0,i=e.length;n>r;r++)e[i++]=t[r];return e.length=i,e},grep:function(e,t,n){for(var r,i=[],s=0,o=e.length,u=!n;o>s;s++)r=!t(e[s],s),r!==u&&i.push(e[s]);return i},map:function(t,n,r){var i,o=0,u=t.length,a=s(t),f=[];if(a)for(;u>o;o++)i=n(t[o],o,r),null!=i&&f.push(i);else for(o in t)i=n(t[o],o,r),null!=i&&f.push(i);return e.apply([],f)},guid:1,proxy:function(e,t){var r,i,s;return"string"==typeof t&&(r=e[t],t=e,e=r),n.isFunction(e)?(i=d.call(arguments,2),s=function(){return e.apply(t||this,i.concat(d.call(arguments)))},s.guid=e.guid=e.guid||n.guid++,s):void 0},now:Date.now,support:k}),n.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(e,t){h["[object "+t+"]"]=t.toLowerCase()});var t=function(e){function ot(e,t,r,i){var s,u,f,l,c,d,g,y,S,x;if((t?t.ownerDocument||t:E)!==p&&h(t),t=t||p,r=r||[],l=t.nodeType,"string"!=typeof e||!e||1!==l&&9!==l&&11!==l)return r;if(!i&&v){if(11!==l&&(s=Z.exec(e)))if(f=s[1]){if(9===l){if(u=t.getElementById(f),!u||!u.parentNode)return r;if(u.id===f)return r.push(u),r}else if(t.ownerDocument&&(u=t.ownerDocument.getElementById(f))&&b(t,u)&&u.id===f)return r.push(u),r}else{if(s[2])return D.apply(r,t.getElementsByTagName(e)),r;if((f=s[3])&&n.getElementsByClassName)return D.apply(r,t.getElementsByClassName(f)),r}if(n.qsa&&(!m||!m.test(e))){if(y=g=w,S=t,x=1!==l&&e,1===l&&"object"!==t.nodeName.toLowerCase()){d=o(e),(g=t.getAttribute("id"))?y=g.replace(tt,"\\$&"):t.setAttribute("id",y),y="[id='"+y+"'] ",c=d.length;while(c--)d[c]=y+gt(d[c]);S=et.test(e)&&vt(t.parentNode)||t,x=d.join(",")}if(x)try{return D.apply(r,S.querySelectorAll(x)),r}catch(T){}finally{g||t.removeAttribute("id")}}}return a(e.replace(z,"$1"),t,r,i)}function ut(){function t(n,i){return e.push(n+" ")>r.cacheLength&&delete t[e.shift()],t[n+" "]=i}var e=[];return t}function at(e){return e[w]=!0,e}function ft(e){var t=p.createElement("div");try{return!!e(t)}catch(n){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function lt(e,t){var n=e.split("|"),i=e.length;while(i--)r.attrHandle[n[i]]=t}function ct(e,t){var n=t&&e,r=n&&1===e.nodeType&&1===t.nodeType&&(~t.sourceIndex||L)-(~e.sourceIndex||L);if(r)return r;if(n)while(n=n.nextSibling)if(n===t)return-1;return e?1:-1}function ht(e){return function(t){var n=t.nodeName.toLowerCase();return"input"===n&&t.type===e}}function pt(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function dt(e){return at(function(t){return t=+t,at(function(n,r){var i,s=e([],n.length,t),o=s.length;while(o--)n[i=s[o]]&&(n[i]=!(r[i]=n[i]))})})}function vt(e){return e&&"undefined"!=typeof e.getElementsByTagName&&e}function mt(){}function gt(e){for(var t=0,n=e.length,r="";n>t;t++)r+=e[t].value;return r}function yt(e,t,n){var r=t.dir,i=n&&"parentNode"===r,s=x++;return t.first?function(t,n,s){while(t=t[r])if(1===t.nodeType||i)return e(t,n,s)}:function(t,n,o){var u,a,f=[S,s];if(o){while(t=t[r])if((1===t.nodeType||i)&&e(t,n,o))return!0}else while(t=t[r])if(1===t.nodeType||i){if(a=t[w]||(t[w]={}),(u=a[r])&&u[0]===S&&u[1]===s)return f[2]=u[2];if(a[r]=f,f[2]=e(t,n,o))return!0}}}function bt(e){return e.length>1?function(t,n,r){var i=e.length;while(i--)if(!e[i](t,n,r))return!1;return!0}:e[0]}function wt(e,t,n){for(var r=0,i=t.length;i>r;r++)ot(e,t[r],n);return n}function Et(e,t,n,r,i){for(var s,o=[],u=0,a=e.length,f=null!=t;a>u;u++)(s=e[u])&&(!n||n(s,r,i))&&(o.push(s),f&&t.push(u));return o}function St(e,t,n,r,i,s){return r&&!r[w]&&(r=St(r)),i&&!i[w]&&(i=St(i,s)),at(function(s,o,u,a){var f,l,c,h=[],p=[],d=o.length,v=s||wt(t||"*",u.nodeType?[u]:u,[]),m=!e||!s&&t?v:Et(v,h,e,u,a),g=n?i||(s?e:d||r)?[]:o:m;if(n&&n(m,g,u,a),r){f=Et(g,p),r(f,[],u,a),l=f.length;while(l--)(c=f[l])&&(g[p[l]]=!(m[p[l]]=c))}if(s){if(i||e){if(i){f=[],l=g.length;while(l--)(c=g[l])&&f.push(m[l]=c);i(null,g=[],f,a)}l=g.length;while(l--)(c=g[l])&&(f=i?H(s,c):h[l])>-1&&(s[f]=!(o[f]=c))}}else g=Et(g===o?g.splice(d,g.length):g),i?i(null,o,g,a):D.apply(o,g)})}function xt(e){for(var t,n,i,s=e.length,o=r.relative[e[0].type],u=o||r.relative[" "],a=o?1:0,l=yt(function(e){return e===t},u,!0),c=yt(function(e){return H(t,e)>-1},u,!0),h=[function(e,n,r){var i=!o&&(r||n!==f)||((t=n).nodeType?l(e,n,r):c(e,n,r));return t=null,i}];s>a;a++)if(n=r.relative[e[a].type])h=[yt(bt(h),n)];else{if(n=r.filter[e[a].type].apply(null,e[a].matches),n[w]){for(i=++a;s>i;i++)if(r.relative[e[i].type])break;return St(a>1&&bt(h),a>1&&gt(e.slice(0,a-1).concat({value:" "===e[a-2].type?"*":""})).replace(z,"$1"),n,i>a&&xt(e.slice(a,i)),s>i&&xt(e=e.slice(i)),s>i&&gt(e))}h.push(n)}return bt(h)}function Tt(e,t){var n=t.length>0,i=e.length>0,s=function(s,o,u,a,l){var c,h,d,v=0,m="0",g=s&&[],y=[],b=f,w=s||i&&r.find.TAG("*",l),E=S+=null==b?1:Math.random()||.1,x=w.length;for(l&&(f=o!==p&&o);m!==x&&null!=(c=w[m]);m++){if(i&&c){h=0;while(d=e[h++])if(d(c,o,u)){a.push(c);break}l&&(S=E)}n&&((c=!d&&c)&&v--,s&&g.push(c))}if(v+=m,n&&m!==v){h=0;while(d=t[h++])d(g,y,o,u);if(s){if(v>0)while(m--)g[m]||y[m]||(y[m]=M.call(a));y=Et(y)}D.apply(a,y),l&&!s&&y.length>0&&v+t.length>1&&ot.uniqueSort(a)}return l&&(S=E,f=b),g};return n?at(s):s}var t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w="sizzle"+1*new Date,E=e.document,S=0,x=0,T=ut(),N=ut(),C=ut(),k=function(e,t){return e===t&&(c=!0),0},L=1<<31,A={}.hasOwnProperty,O=[],M=O.pop,_=O.push,D=O.push,P=O.slice,H=function(e,t){for(var n=0,r=e.length;r>n;n++)if(e[n]===t)return n;return-1},B="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",j="[\\x20\\t\\r\\n\\f]",F="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",I=F.replace("w","w#"),q="\\["+j+"*("+F+")(?:"+j+"*([*^$|!~]?=)"+j+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+I+"))|)"+j+"*\\]",R=":("+F+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+q+")*)|.*)\\)|)",U=new RegExp(j+"+","g"),z=new RegExp("^"+j+"+|((?:^|[^\\\\])(?:\\\\.)*)"+j+"+$","g"),W=new RegExp("^"+j+"*,"+j+"*"),X=new RegExp("^"+j+"*([>+~]|"+j+")"+j+"*"),V=new RegExp("="+j+"*([^\\]'\"]*?)"+j+"*\\]","g"),$=new RegExp(R),J=new RegExp("^"+I+"$"),K={ID:new RegExp("^#("+F+")"),CLASS:new RegExp("^\\.("+F+")"),TAG:new RegExp("^("+F.replace("w","w*")+")"),ATTR:new RegExp("^"+q),PSEUDO:new RegExp("^"+R),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+j+"*(even|odd|(([+-]|)(\\d*)n|)"+j+"*(?:([+-]|)"+j+"*(\\d+)|))"+j+"*\\)|)","i"),bool:new RegExp("^(?:"+B+")$","i"),needsContext:new RegExp("^"+j+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+j+"*((?:-\\d)?\\d*)"+j+"*\\)|)(?=[^-]|$)","i")},Q=/^(?:input|select|textarea|button)$/i,G=/^h\d$/i,Y=/^[^{]+\{\s*\[native \w/,Z=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,et=/[+~]/,tt=/'|\\/g,nt=new RegExp("\\\\([\\da-f]{1,6}"+j+"?|("+j+")|.)","ig"),rt=function(e,t,n){var r="0x"+t-65536;return r!==r||n?t:0>r?String.fromCharCode(r+65536):String.fromCharCode(r>>10|55296,1023&r|56320)},it=function(){h()};try{D.apply(O=P.call(E.childNodes),E.childNodes),O[E.childNodes.length].nodeType}catch(st){D={apply:O.length?function(e,t){_.apply(e,P.call(t))}:function(e,t){var n=e.length,r=0;while(e[n++]=t[r++]);e.length=n-1}}}n=ot.support={},s=ot.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return t?"HTML"!==t.nodeName:!1},h=ot.setDocument=function(e){var t,i,o=e?e.ownerDocument||e:E;return o!==p&&9===o.nodeType&&o.documentElement?(p=o,d=o.documentElement,i=o.defaultView,i&&i!==i.top&&(i.addEventListener?i.addEventListener("unload",it,!1):i.attachEvent&&i.attachEvent("onunload",it)),v=!s(o),n.attributes=ft(function(e){return e.className="i",!e.getAttribute("className")}),n.getElementsByTagName=ft(function(e){return e.appendChild(o.createComment("")),!e.getElementsByTagName("*").length}),n.getElementsByClassName=Y.test(o.getElementsByClassName),n.getById=ft(function(e){return d.appendChild(e).id=w,!o.getElementsByName||!o.getElementsByName(w).length}),n.getById?(r.find.ID=function(e,t){if("undefined"!=typeof t.getElementById&&v){var n=t.getElementById(e);return n&&n.parentNode?[n]:[]}},r.filter.ID=function(e){var t=e.replace(nt,rt);return function(e){return e.getAttribute("id")===t}}):(delete r.find.ID,r.filter.ID=function(e){var t=e.replace(nt,rt);return function(e){var n="undefined"!=typeof e.getAttributeNode&&e.getAttributeNode("id");return n&&n.value===t}}),r.find.TAG=n.getElementsByTagName?function(e,t){return"undefined"!=typeof t.getElementsByTagName?t.getElementsByTagName(e):n.qsa?t.querySelectorAll(e):void 0}:function(e,t){var n,r=[],i=0,s=t.getElementsByTagName(e);if("*"===e){while(n=s[i++])1===n.nodeType&&r.push(n);return r}return s},r.find.CLASS=n.getElementsByClassName&&function(e,t){return v?t.getElementsByClassName(e):void 0},g=[],m=[],(n.qsa=Y.test(o.querySelectorAll))&&(ft(function(e){d.appendChild(e).innerHTML="<a id='"+w+"'></a><select id='"+w+"-\f]' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&m.push("[*^$]="+j+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||m.push("\\["+j+"*(?:value|"+B+")"),e.querySelectorAll("[id~="+w+"-]").length||m.push("~="),e.querySelectorAll(":checked").length||m.push(":checked"),e.querySelectorAll("a#"+w+"+*").length||m.push(".#.+[+~]")}),ft(function(e){var t=o.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&m.push("name"+j+"*[*^$|!~]?="),e.querySelectorAll(":enabled").length||m.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),m.push(",.*:")})),(n.matchesSelector=Y.test(y=d.matches||d.webkitMatchesSelector||d.mozMatchesSelector||d.oMatchesSelector||d.msMatchesSelector))&&ft(function(e){n.disconnectedMatch=y.call(e,"div"),y.call(e,"[s!='']:x"),g.push("!=",R)}),m=m.length&&new RegExp(m.join("|")),g=g.length&&new RegExp(g.join("|")),t=Y.test(d.compareDocumentPosition),b=t||Y.test(d.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,r=t&&t.parentNode;return e===r||!!r&&1===r.nodeType&&!!(n.contains?n.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition(r))}:function(e,t){if(t)while(t=t.parentNode)if(t===e)return!0;return!1},k=t?function(e,t){if(e===t)return c=!0,0;var r=!e.compareDocumentPosition-!t.compareDocumentPosition;return r?r:(r=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1,1&r||!n.sortDetached&&t.compareDocumentPosition(e)===r?e===o||e.ownerDocument===E&&b(E,e)?-1:t===o||t.ownerDocument===E&&b(E,t)?1:l?H(l,e)-H(l,t):0:4&r?-1:1)}:function(e,t){if(e===t)return c=!0,0;var n,r=0,i=e.parentNode,s=t.parentNode,u=[e],a=[t];if(!i||!s)return e===o?-1:t===o?1:i?-1:s?1:l?H(l,e)-H(l,t):0;if(i===s)return ct(e,t);n=e;while(n=n.parentNode)u.unshift(n);n=t;while(n=n.parentNode)a.unshift(n);while(u[r]===a[r])r++;return r?ct(u[r],a[r]):u[r]===E?-1:a[r]===E?1:0},o):p},ot.matches=function(e,t){return ot(e,null,null,t)},ot.matchesSelector=function(e,t){if((e.ownerDocument||e)!==p&&h(e),t=t.replace(V,"='$1']"),!(!n.matchesSelector||!v||g&&g.test(t)||m&&m.test(t)))try{var r=y.call(e,t);if(r||n.disconnectedMatch||e.document&&11!==e.document.nodeType)return r}catch(i){}return ot(t,p,null,[e]).length>0},ot.contains=function(e,t){return(e.ownerDocument||e)!==p&&h(e),b(e,t)},ot.attr=function(e,t){(e.ownerDocument||e)!==p&&h(e);var i=r.attrHandle[t.toLowerCase()],s=i&&A.call(r.attrHandle,t.toLowerCase())?i(e,t,!v):void 0;return void 0!==s?s:n.attributes||!v?e.getAttribute(t):(s=e.getAttributeNode(t))&&s.specified?s.value:null},ot.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},ot.uniqueSort=function(e){var t,r=[],i=0,s=0;if(c=!n.detectDuplicates,l=!n.sortStable&&e.slice(0),e.sort(k),c){while(t=e[s++])t===e[s]&&(i=r.push(s));while(i--)e.splice(r[i],1)}return l=null,e},i=ot.getText=function(e){var t,n="",r=0,s=e.nodeType;if(s){if(1===s||9===s||11===s){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=i(e)}else if(3===s||4===s)return e.nodeValue}else while(t=e[r++])n+=i(t);return n},r=ot.selectors={cacheLength:50,createPseudo:at,match:K,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(nt,rt),e[3]=(e[3]||e[4]||e[5]||"").replace(nt,rt),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||ot.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&ot.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return K.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&$.test(n)&&(t=o(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(nt,rt).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=T[e+" "];return t||(t=new RegExp("(^|"+j+")"+e+"("+j+"|$)"))&&T(e,function(e){return t.test("string"==typeof e.className&&e.className||"undefined"!=typeof e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(e,t,n){return function(r){var i=ot.attr(r,e);return null==i?"!="===t:t?(i+="","="===t?i===n:"!="===t?i!==n:"^="===t?n&&0===i.indexOf(n):"*="===t?n&&i.indexOf(n)>-1:"$="===t?n&&i.slice(-n.length)===n:"~="===t?(" "+i.replace(U," ")+" ").indexOf(n)>-1:"|="===t?i===n||i.slice(0,n.length+1)===n+"-":!1):!0}},CHILD:function(e,t,n,r,i){var s="nth"!==e.slice(0,3),o="last"!==e.slice(-4),u="of-type"===t;return 1===r&&0===i?function(e){return!!e.parentNode}:function(t,n,a){var f,l,c,h,p,d,v=s!==o?"nextSibling":"previousSibling",m=t.parentNode,g=u&&t.nodeName.toLowerCase(),y=!a&&!u;if(m){if(s){while(v){c=t;while(c=c[v])if(u?c.nodeName.toLowerCase()===g:1===c.nodeType)return!1;d=v="only"===e&&!d&&"nextSibling"}return!0}if(d=[o?m.firstChild:m.lastChild],o&&y){l=m[w]||(m[w]={}),f=l[e]||[],p=f[0]===S&&f[1],h=f[0]===S&&f[2],c=p&&m.childNodes[p];while(c=++p&&c&&c[v]||(h=p=0)||d.pop())if(1===c.nodeType&&++h&&c===t){l[e]=[S,p,h];break}}else if(y&&(f=(t[w]||(t[w]={}))[e])&&f[0]===S)h=f[1];else while(c=++p&&c&&c[v]||(h=p=0)||d.pop())if((u?c.nodeName.toLowerCase()===g:1===c.nodeType)&&++h&&(y&&((c[w]||(c[w]={}))[e]=[S,h]),c===t))break;return h-=i,h===r||h%r===0&&h/r>=0}}},PSEUDO:function(e,t){var n,i=r.pseudos[e]||r.setFilters[e.toLowerCase()]||ot.error("unsupported pseudo: "+e);return i[w]?i(t):i.length>1?(n=[e,e,"",t],r.setFilters.hasOwnProperty(e.toLowerCase())?at(function(e,n){var r,s=i(e,t),o=s.length;while(o--)r=H(e,s[o]),e[r]=!(n[r]=s[o])}):function(e){return i(e,0,n)}):i}},pseudos:{not:at(function(e){var t=[],n=[],r=u(e.replace(z,"$1"));return r[w]?at(function(e,t,n,i){var s,o=r(e,null,i,[]),u=e.length;while(u--)(s=o[u])&&(e[u]=!(t[u]=s))}):function(e,i,s){return t[0]=e,r(t,null,s,n),t[0]=null,!n.pop()}}),has:at(function(e){return function(t){return ot(e,t).length>0}}),contains:at(function(e){return e=e.replace(nt,rt),function(t){return(t.textContent||t.innerText||i(t)).indexOf(e)>-1}}),lang:at(function(e){return J.test(e||"")||ot.error("unsupported lang: "+e),e=e.replace(nt,rt).toLowerCase(),function(t){var n;do if(n=v?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return n=n.toLowerCase(),n===e||0===n.indexOf(e+"-");while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===d},focus:function(e){return e===p.activeElement&&(!p.hasFocus||p.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return e.disabled===!1},disabled:function(e){return e.disabled===!0},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!r.pseudos.empty(e)},header:function(e){return G.test(e.nodeName)},input:function(e){return Q.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:dt(function(){return[0]}),last:dt(function(e,t){return[t-1]}),eq:dt(function(e,t,n){return[0>n?n+t:n]}),even:dt(function(e,t){for(var n=0;t>n;n+=2)e.push(n);return e}),odd:dt(function(e,t){for(var n=1;t>n;n+=2)e.push(n);return e}),lt:dt(function(e,t,n){for(var r=0>n?n+t:n;--r>=0;)e.push(r);return e}),gt:dt(function(e,t,n){for(var r=0>n?n+t:n;++r<t;)e.push(r);return e})}},r.pseudos.nth=r.pseudos.eq;for(t in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})r.pseudos[t]=ht(t);for(t in{submit:!0,reset:!0})r.pseudos[t]=pt(t);return mt.prototype=r.filters=r.pseudos,r.setFilters=new mt,o=ot.tokenize=function(e,t){var n,i,s,o,u,a,f,l=N[e+" "];if(l)return t?0:l.slice(0);u=e,a=[],f=r.preFilter;while(u){(!n||(i=W.exec(u)))&&(i&&(u=u.slice(i[0].length)||u),a.push(s=[])),n=!1,(i=X.exec(u))&&(n=i.shift(),s.push({value:n,type:i[0].replace(z," ")}),u=u.slice(n.length));for(o in r.filter)!(i=K[o].exec(u))||f[o]&&!(i=f[o](i))||(n=i.shift(),s.push({value:n,type:o,matches:i}),u=u.slice(n.length));if(!n)break}return t?u.length:u?ot.error(e):N(e,a).slice(0)},u=ot.compile=function(e,t){var n,r=[],i=[],s=C[e+" "];if(!s){t||(t=o(e)),n=t.length;while(n--)s=xt(t[n]),s[w]?r.push(s):i.push(s);s=C(e,Tt(i,r)),s.selector=e}return s},a=ot.select=function(e,t,i,s){var a,f,l,c,h,p="function"==typeof e&&e,d=!s&&o(e=p.selector||e);if(i=i||[],1===d.length){if(f=d[0]=d[0].slice(0),f.length>2&&"ID"===(l=f[0]).type&&n.getById&&9===t.nodeType&&v&&r.relative[f[1].type]){if(t=(r.find.ID(l.matches[0].replace(nt,rt),t)||[])[0],!t)return i;p&&(t=t.parentNode),e=e.slice(f.shift().value.length)}a=K.needsContext.test(e)?0:f.length;while(a--){if(l=f[a],r.relative[c=l.type])break;if((h=r.find[c])&&(s=h(l.matches[0].replace(nt,rt),et.test(f[0].type)&&vt(t.parentNode)||t))){if(f.splice(a,1),e=s.length&&gt(f),!e)return D.apply(i,s),i;break}}}return(p||u(e,d))(s,t,!v,i,et.test(e)&&vt(t.parentNode)||t),i},n.sortStable=w.split("").sort(k).join("")===w,n.detectDuplicates=!!c,h(),n.sortDetached=ft(function(e){return 1&e.compareDocumentPosition(p.createElement("div"))}),ft(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||lt("type|href|height|width",function(e,t,n){return n?void 0:e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),n.attributes&&ft(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||lt("value",function(e,t,n){return n||"input"!==e.nodeName.toLowerCase()?void 0:e.defaultValue}),ft(function(e){return null==e.getAttribute("disabled")})||lt(B,function(e,t,n){var r;return n?void 0:e[t]===!0?t.toLowerCase():(r=e.getAttributeNode(t))&&r.specified?r.value:null}),ot}(a);n.find=t,n.expr=t.selectors,n.expr[":"]=n.expr.pseudos,n.unique=t.uniqueSort,n.text=t.getText,n.isXMLDoc=t.isXML,n.contains=t.contains;var u=n.expr.match.needsContext,v=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,w=/^.[^:#\[\.,]*$/;n.filter=function(e,t,r){var i=t[0];return r&&(e=":not("+e+")"),1===t.length&&1===i.nodeType?n.find.matchesSelector(i,e)?[i]:[]:n.find.matches(e,n.grep(t,function(e){return 1===e.nodeType}))},n.fn.extend({find:function(e){var t,r=this.length,i=[],s=this;if("string"!=typeof e)return this.pushStack(n(e).filter(function(){for(t=0;r>t;t++)if(n.contains(s[t],this))return!0}));for(t=0;r>t;t++)n.find(e,s[t],i);return i=this.pushStack(r>1?n.unique(i):i),i.selector=this.selector?this.selector+" "+e:e,i},filter:function(e){return this.pushStack(x(this,e||[],!1))},not:function(e){return this.pushStack(x(this,e||[],!0))},is:function(e){return!!x(this,"string"==typeof e&&u.test(e)?n(e):e||[],!1).length}});var y,z=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,A=n.fn.init=function(e,t){var r,i;if(!e)return this;if("string"==typeof e){if(r="<"===e[0]&&">"===e[e.length-1]&&e.length>=3?[null,e,null]:z.exec(e),!r||!r[1]&&t)return!t||t.jquery?(t||y).find(e):this.constructor(t).find(e);if(r[1]){if(t=t instanceof n?t[0]:t,n.merge(this,n.parseHTML(r[1],t&&t.nodeType?t.ownerDocument||t:l,!0)),v.test(r[1])&&n.isPlainObject(t))for(r in t)n.isFunction(this[r])?this[r](t[r]):this.attr(r,t[r]);return this}return i=l.getElementById(r[2]),i&&i.parentNode&&(this.length=1,this[0]=i),this.context=l,this.selector=e,this}return e.nodeType?(this.context=this[0]=e,this.length=1,this):n.isFunction(e)?"undefined"!=typeof y.ready?y.ready(e):e(n):(void 0!==e.selector&&(this.selector=e.selector,this.context=e.context),n.makeArray(e,this))};A.prototype=n.fn,y=n(l);var B=/^(?:parents|prev(?:Until|All))/,C={children:!0,contents:!0,next:!0,prev:!0};n.extend({dir:function(e,t,r){var i=[],s=void 0!==r;while((e=e[t])&&9!==e.nodeType)if(1===e.nodeType){if(s&&n(e).is(r))break;i.push(e)}return i},sibling:function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n}}),n.fn.extend({has:function(e){var t=n(e,this),r=t.length;return this.filter(function(){for(var e=0;r>e;e++)if(n.contains(this,t[e]))return!0})},closest:function(e,t){for(var r,i=0,s=this.length,o=[],a=u.test(e)||"string"!=typeof e?n(e,t||this.context):0;s>i;i++)for(r=this[i];r&&r!==t;r=r.parentNode)if(r.nodeType<11&&(a?a.index(r)>-1:1===r.nodeType&&n.find.matchesSelector(r,e))){o.push(r);break}return this.pushStack(o.length>1?n.unique(o):o)},index:function(e){return e?"string"==typeof e?g.call(n(e),this[0]):g.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(n.unique(n.merge(this.get(),n(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),n.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return n.dir(e,"parentNode")},parentsUntil:function(e,t,r){return n.dir(e,"parentNode",r)},next:function(e){return D(e,"nextSibling")},prev:function(e){return D(e,"previousSibling")},nextAll:function(e){return n.dir(e,"nextSibling")},prevAll:function(e){return n.dir(e,"previousSibling")},nextUntil:function(e,t,r){return n.dir(e,"nextSibling",r)},prevUntil:function(e,t,r){return n.dir(e,"previousSibling",r)},siblings:function(e){return n.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return n.sibling(e.firstChild)},contents:function(e){return e.contentDocument||n.merge([],e.childNodes)}},function(e,t){n.fn[e]=function(r,i){var s=n.map(this,t,r);return"Until"!==e.slice(-5)&&(i=r),i&&"string"==typeof i&&(s=n.filter(i,s)),this.length>1&&(C[e]||n.unique(s),B.test(e)&&s.reverse()),this.pushStack(s)}});var E=/\S+/g,F={};n.Callbacks=function(e){e="string"==typeof e?F[e]||G(e):n.extend({},e);var t,r,i,s,o,u,a=[],f=!e.once&&[],l=function(n){for(t=e.memory&&n,r=!0,u=s||0,s=0,o=a.length,i=!0;a&&o>u;u++)if(a[u].apply(n[0],n[1])===!1&&e.stopOnFalse){t=!1;break}i=!1,a&&(f?f.length&&l(f.shift()):t?a=[]:c.disable())},c={add:function(){if(a){var r=a.length;!function u(t){n.each(t,function(t,r){var i=n.type(r);"function"===i?e.unique&&c.has(r)||a.push(r):r&&r.length&&"string"!==i&&u(r)})}(arguments),i?o=a.length:t&&(s=r,l(t))}return this},remove:function(){return a&&n.each(arguments,function(e,t){var r;while((r=n.inArray(t,a,r))>-1)a.splice(r,1),i&&(o>=r&&o--,u>=r&&u--)}),this},has:function(e){return e?n.inArray(e,a)>-1:!!a&&!!a.length},empty:function(){return a=[],o=0,this},disable:function(){return a=f=t=void 0,this},disabled:function(){return!a},lock:function(){return f=void 0,t||c.disable(),this},locked:function(){return!f},fireWith:function(e,t){return!a||r&&!f||(t=t||[],t=[e,t.slice?t.slice():t],i?f.push(t):l(t)),this},fire:function(){return c.fireWith(this,arguments),this},fired:function(){return!!r}};return c},n.extend({Deferred:function(e){var t=[["resolve","done",n.Callbacks("once memory"),"resolved"],["reject","fail",n.Callbacks("once memory"),"rejected"],["notify","progress",n.Callbacks("memory")]],r="pending",i={state:function(){return r},always:function(){return s.done(arguments).fail(arguments),this},then:function(){var e=arguments;return n.Deferred(function(r){n.each(t,function(t,o){var u=n.isFunction(e[t])&&e[t];s[o[1]](function(){var e=u&&u.apply(this,arguments);e&&n.isFunction(e.promise)?e.promise().done(r.resolve).fail(r.reject).progress(r.notify):r[o[0]+"With"](this===i?r.promise():this,u?[e]:arguments)})}),e=null}).promise()},promise:function(e){return null!=e?n.extend(e,i):i}},s={};return i.pipe=i.then,n.each(t,function(e,n){var o=n[2],u=n[3];i[n[1]]=o.add,u&&o.add(function(){r=u},t[1^e][2].disable,t[2][2].lock),s[n[0]]=function(){return s[n[0]+"With"](this===s?i:this,arguments),this},s[n[0]+"With"]=o.fireWith}),i.promise(s),e&&e.call(s,s),s},when:function(e){var t=0,r=d.call(arguments),i=r.length,s=1!==i||e&&n.isFunction(e.promise)?i:0,o=1===s?e:n.Deferred(),u=function(e,t,n){return function(r){t[e]=this,n[e]=arguments.length>1?d.call(arguments):r,n===a?o.notifyWith(t,n):--s||o.resolveWith(t,n)}},a,f,l;if(i>1)for(a=new Array(i),f=new Array(i),l=new Array(i);i>t;t++)r[t]&&n.isFunction(r[t].promise)?r[t].promise().done(u(t,l,r)).fail(o.reject).progress(u(t,f,a)):--s;return s||o.resolveWith(l,r),o.promise()}});var H;n.fn.ready=function(e){return n.ready.promise().done(e),this},n.extend({isReady:!1,readyWait:1,holdReady:function(e){e?n.readyWait++:n.ready(!0)},ready:function(e){(e===!0?--n.readyWait:n.isReady)||(n.isReady=!0,e!==!0&&--n.readyWait>0||(H.resolveWith(l,[n]),n.fn.triggerHandler&&(n(l).triggerHandler("ready"),n(l).off("ready"))))}}),n.ready.promise=function(e){return H||(H=n.Deferred(),"complete"===l.readyState?setTimeout(n.ready):(l.addEventListener("DOMContentLoaded",I,!1),a.addEventListener("load",I,!1))),H.promise(e)},n.ready.promise();var J=n.access=function(e,t,r,i,s,o,u){var a=0,f=e.length,l=null==r;if("object"===n.type(r)){s=!0;for(a in r)n.access(e,t,a,r[a],!0,o,u)}else if(void 0!==i&&(s=!0,n.isFunction(i)||(u=!0),l&&(u?(t.call(e,i),t=null):(l=t,t=function(e,t,r){return l.call(n(e),r)})),t))for(;f>a;a++)t(e[a],r,u?i:i.call(e[a],a,t(e[a],r)));return s?e:l?t.call(e):f?t(e[0],r):o};n.acceptData=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType},K.uid=1,K.accepts=n.acceptData,K.prototype={key:function(e){if(!K.accepts(e))return 0;var t={},r=e[this.expando];if(!r){r=K.uid++;try{t[this.expando]={value:r},Object.defineProperties(e,t)}catch(i){t[this.expando]=r,n.extend(e,t)}}return this.cache[r]||(this.cache[r]={}),r},set:function(e,t,r){var i,s=this.key(e),o=this.cache[s];if("string"==typeof t)o[t]=r;else if(n.isEmptyObject(o))n.extend(this.cache[s],t);else for(i in t)o[i]=t[i];return o},get:function(e,t){var n=this.cache[this.key(e)];return void 0===t?n:n[t]},access:function(e,t,r){var i;return void 0===t||t&&"string"==typeof t&&void 0===r?(i=this.get(e,t),void 0!==i?i:this.get(e,n.camelCase(t))):(this.set(e,t,r),void 0!==r?r:t)},remove:function(e,t){var r,i,s,o=this.key(e),u=this.cache[o];if(void 0===t)this.cache[o]={};else{n.isArray(t)?i=t.concat(t.map(n.camelCase)):(s=n.camelCase(t),t in u?i=[t,s]:(i=s,i=i in u?[i]:i.match(E)||[])),r=i.length;while(r--)delete u[i[r]]}},hasData:function(e){return!n.isEmptyObject(this.cache[e[this.expando]]||{})},discard:function(e){e[this.expando]&&delete this.cache[e[this.expando]]}};var L=new K,M=new K,N=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,O=/([A-Z])/g;n.extend({hasData:function(e){return M.hasData(e)||L.hasData(e)},data:function(e,t,n){return M.access(e,t,n)},removeData:function(e,t){M.remove(e,t)},_data:function(e,t,n){return L.access(e,t,n)},_removeData:function(e,t){L.remove(e,t)}}),n.fn.extend({data:function(e,t){var r,i,s,o=this[0],u=o&&o.attributes;if(void 0===e){if(this.length&&(s=M.get(o),1===o.nodeType&&!L.get(o,"hasDataAttrs"))){r=u.length;while(r--)u[r]&&(i=u[r].name,0===i.indexOf("data-")&&(i=n.camelCase(i.slice(5)),P(o,i,s[i])));L.set(o,"hasDataAttrs",!0)}return s}return"object"==typeof e?this.each(function(){M.set(this,e)}):J(this,function(t){var r,i=n.camelCase(e);if(o&&void 0===t){if(r=M.get(o,e),void 0!==r)return r;if(r=M.get(o,i),void 0!==r)return r;if(r=P(o,i,void 0),void 0!==r)return r}else this.each(function(){var n=M.get(this,i);M.set(this,i,t),-1!==e.indexOf("-")&&void 0!==n&&M.set(this,e,t)})},null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each(function(){M.remove(this,e)})}}),n.extend({queue:function(e,t,r){var i;return e?(t=(t||"fx")+"queue",i=L.get(e,t),r&&(!i||n.isArray(r)?i=L.access(e,t,n.makeArray(r)):i.push(r)),i||[]):void 0},dequeue:function(e,t){t=t||"fx";var r=n.queue(e,t),i=r.length,s=r.shift(),o=n._queueHooks(e,t),u=function(){n.dequeue(e,t)};"inprogress"===s&&(s=r.shift(),i--),s&&("fx"===t&&r.unshift("inprogress"),delete o.stop,s.call(e,u,o)),!i&&o&&o.empty.fire()},_queueHooks:function(e,t){var r=t+"queueHooks";return L.get(e,r)||L.access(e,r,{empty:n.Callbacks("once memory").add(function(){L.remove(e,[t+"queue",r])})})}}),n.fn.extend({queue:function(e,t){var r=2;return"string"!=typeof e&&(t=e,e="fx",r--),arguments.length<r?n.queue(this[0],e):void 0===t?this:this.each(function(){var r=n.queue(this,e,t);n._queueHooks(this,e),"fx"===e&&"inprogress"!==r[0]&&n.dequeue(this,e)})},dequeue:function(e){return this.each(function(){n.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var r,i=1,s=n.Deferred(),o=this,u=this.length,a=function(){--i||s.resolveWith(o,[o])};"string"!=typeof e&&(t=e,e=void 0),e=e||"fx";while(u--)r=L.get(o[u],e+"queueHooks"),r&&r.empty&&(i++,r.empty.add(a));return a(),s.promise(t)}});var Q=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,R=["Top","Right","Bottom","Left"],S=function(e,t){return e=t||e,"none"===n.css(e,"display")||!n.contains(e.ownerDocument,e)},T=/^(?:checkbox|radio)$/i;!function(){var e=l.createDocumentFragment(),t=e.appendChild(l.createElement("div")),n=l.createElement("input");n.setAttribute("type","radio"),n.setAttribute("checked","checked"),n.setAttribute("name","t"),t.appendChild(n),k.checkClone=t.cloneNode(!0).cloneNode(!0).lastChild.checked,t.innerHTML="<textarea>x</textarea>",k.noCloneChecked=!!t.cloneNode(!0).lastChild.defaultValue}();var U="undefined";k.focusinBubbles="onfocusin"in a;var V=/^key/,W=/^(?:mouse|pointer|contextmenu)|click/,X=/^(?:focusinfocus|focusoutblur)$/,Y=/^([^.]*)(?:\.(.+)|)$/;n.event={global:{},add:function(e,t,r,i,s){var o,u,a,f,l,c,h,p,d,v,m,g=L.get(e);if(g){r.handler&&(o=r,r=o.handler,s=o.selector),r.guid||(r.guid=n.guid++),(f=g.events)||(f=g.events={}),(u=g.handle)||(u=g.handle=function(t){return typeof n!==U&&n.event.triggered!==t.type?n.event.dispatch.apply(e,arguments):void 0}),t=(t||"").match(E)||[""],l=t.length;while(l--)a=Y.exec(t[l])||[],d=m=a[1],v=(a[2]||"").split(".").sort(),d&&(h=n.event.special[d]||{},d=(s?h.delegateType:h.bindType)||d,h=n.event.special[d]||{},c=n.extend({type:d,origType:m,data:i,handler:r,guid:r.guid,selector:s,needsContext:s&&n.expr.match.needsContext.test(s),namespace:v.join(".")},o),(p=f[d])||(p=f[d]=[],p.delegateCount=0,h.setup&&h.setup.call(e,i,v,u)!==!1||e.addEventListener&&e.addEventListener(d,u,!1)),h.add&&(h.add.call(e,c),c.handler.guid||(c.handler.guid=r.guid)),s?p.splice(p.delegateCount++,0,c):p.push(c),n.event.global[d]=!0)}},remove:function(e,t,r,i,s){var o,u,a,f,l,c,h,p,d,v,m,g=L.hasData(e)&&L.get(e);if(g&&(f=g.events)){t=(t||"").match(E)||[""],l=t.length;while(l--)if(a=Y.exec(t[l])||[],d=m=a[1],v=(a[2]||"").split(".").sort(),d){h=n.event.special[d]||{},d=(i?h.delegateType:h.bindType)||d,p=f[d]||[],a=a[2]&&new RegExp("(^|\\.)"+v.join("\\.(?:.*\\.|)")+"(\\.|$)"),u=o=p.length;while(o--)c=p[o],!s&&m!==c.origType||r&&r.guid!==c.guid||a&&!a.test(c.namespace)||i&&i!==c.selector&&("**"!==i||!c.selector)||(p.splice(o,1),c.selector&&p.delegateCount--,h.remove&&h.remove.call(e,c));u&&!p.length&&(h.teardown&&h.teardown.call(e,v,g.handle)!==!1||n.removeEvent(e,d,g.handle),delete f[d])}else for(d in f)n.event.remove(e,d+t[l],r,i,!0);n.isEmptyObject(f)&&(delete g.handle,L.remove(e,"events"))}},trigger:function(e,t,r,i){var s,o,u,f,c,h,p,d=[r||l],v=j.call(e,"type")?e.type:e,m=j.call(e,"namespace")?e.namespace.split("."):[];if(o=u=r=r||l,3!==r.nodeType&&8!==r.nodeType&&!X.test(v+n.event.triggered)&&(v.indexOf(".")>=0&&(m=v.split("."),v=m.shift(),m.sort()),c=v.indexOf(":")<0&&"on"+v,e=e[n.expando]?e:new n.Event(v,"object"==typeof e&&e),e.isTrigger=i?2:3,e.namespace=m.join("."),e.namespace_re=e.namespace?new RegExp("(^|\\.)"+m.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=r),t=null==t?[e]:n.makeArray(t,[e]),p=n.event.special[v]||{},i||!p.trigger||p.trigger.apply(r,t)!==!1)){if(!i&&!p.noBubble&&!n.isWindow(r)){for(f=p.delegateType||v,X.test(f+v)||(o=o.parentNode);o;o=o.parentNode)d.push(o),u=o;u===(r.ownerDocument||l)&&d.push(u.defaultView||u.parentWindow||a)}s=0;while((o=d[s++])&&!e.isPropagationStopped())e.type=s>1?f:p.bindType||v,h=(L.get(o,"events")||{})[e.type]&&L.get(o,"handle"),h&&h.apply(o,t),h=c&&o[c],h&&h.apply&&n.acceptData(o)&&(e.result=h.apply(o,t),e.result===!1&&e.preventDefault());return e.type=v,i||e.isDefaultPrevented()||p._default&&p._default.apply(d.pop(),t)!==!1||!n.acceptData(r)||c&&n.isFunction(r[v])&&!n.isWindow(r)&&(u=r[c],u&&(r[c]=null),n.event.triggered=v,r[v](),n.event.triggered=void 0,u&&(r[c]=u)),e.result}},dispatch:function(e){e=n.event.fix(e);var t,r,i,s,o,u=[],a=d.call(arguments),f=(L.get(this,"events")||{})[e.type]||[],l=n.event.special[e.type]||{};if(a[0]=e,e.delegateTarget=this,!l.preDispatch||l.preDispatch.call(this,e)!==!1){u=n.event.handlers.call(this,e,f),t=0;while((s=u[t++])&&!e.isPropagationStopped()){e.currentTarget=s.elem,r=0;while((o=s.handlers[r++])&&!e.isImmediatePropagationStopped())(!e.namespace_re||e.namespace_re.test(o.namespace))&&(e.handleObj=o,e.data=o.data,i=((n.event.special[o.origType]||{}).handle||o.handler).apply(s.elem,a),void 0!==i&&(e.result=i)===!1&&(e.preventDefault(),e.stopPropagation()))}return l.postDispatch&&l.postDispatch.call(this,e),e.result}},handlers:function(e,t){var r,i,s,o,u=[],a=t.delegateCount,f=e.target;if(a&&f.nodeType&&(!e.button||"click"!==e.type))for(;f!==this;f=f.parentNode||this)if(f.disabled!==!0||"click"!==e.type){for(i=[],r=0;a>r;r++)o=t[r],s=o.selector+" ",void 0===i[s]&&(i[s]=o.needsContext?n(s,this).index(f)>=0:n.find(s,this,null,[f]).length),i[s]&&i.push(o);i.length&&u.push({elem:f,handlers:i})}return a<t.length&&u.push({elem:this,handlers:t.slice(a)}),u},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,t){var n,r,i,s=t.button;return null==e.pageX&&null!=t.clientX&&(n=e.target.ownerDocument||l,r=n.documentElement,i=n.body,e.pageX=t.clientX+(r&&r.scrollLeft||i&&i.scrollLeft||0)-(r&&r.clientLeft||i&&i.clientLeft||0),e.pageY=t.clientY+(r&&r.scrollTop||i&&i.scrollTop||0)-(r&&r.clientTop||i&&i.clientTop||0)),e.which||void 0===s||(e.which=1&s?1:2&s?3:4&s?2:0),e}},fix:function(e){if(e[n.expando])return e;var t,r,i,s=e.type,o=e,u=this.fixHooks[s];u||(this.fixHooks[s]=u=W.test(s)?this.mouseHooks:V.test(s)?this.keyHooks:{}),i=u.props?this.props.concat(u.props):this.props,e=new n.Event(o),t=i.length;while(t--)r=i[t],e[r]=o[r];return e.target||(e.target=l),3===e.target.nodeType&&(e.target=e.target.parentNode),u.filter?u.filter(e,o):e},special:{load:{noBubble:!0},focus:{trigger:function(){return this!==_()&&this.focus?(this.focus(),!1):void 0},delegateType:"focusin"},blur:{trigger:function(){return this===_()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return"checkbox"===this.type&&this.click&&n.nodeName(this,"input")?(this.click(),!1):void 0},_default:function(e){return n.nodeName(e.target,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}},simulate:function(e,t,r,i){var s=n.extend(new n.Event,r,{type:e,isSimulated:!0,originalEvent:{}});i?n.event.trigger(s,null,t):n.event.dispatch.call(t,s),s.isDefaultPrevented()&&r.preventDefault()}},n.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n,!1)},n.Event=function(e,t){return this instanceof n.Event?(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&e.returnValue===!1?Z:$):this.type=e,t&&n.extend(this,t),this.timeStamp=e&&e.timeStamp||n.now(),void (this[n.expando]=!0)):new n.Event(e,t)},n.Event.prototype={isDefaultPrevented:$,isPropagationStopped:$,isImmediatePropagationStopped:$,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=Z,e&&e.preventDefault&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=Z,e&&e.stopPropagation&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=Z,e&&e.stopImmediatePropagation&&e.stopImmediatePropagation(),this.stopPropagation()}},n.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,t){n.event.special[e]={delegateType:t,bindType:t,handle:function(e){var r,i=this,s=e.relatedTarget,o=e.handleObj;return(!s||s!==i&&!n.contains(i,s))&&(e.type=o.origType,r=o.handler.apply(this,arguments),e.type=t),r}}}),k.focusinBubbles||n.each({focus:"focusin",blur:"focusout"},function(e,t){var r=function(e){n.event.simulate(t,e.target,n.event.fix(e),!0)};n.event.special[t]={setup:function(){var n=this.ownerDocument||this,i=L.access(n,t);i||n.addEventListener(e,r,!0),L.access(n,t,(i||0)+1)},teardown:function(){var n=this.ownerDocument||this,i=L.access(n,t)-1;i?L.access(n,t,i):(n.removeEventListener(e,r,!0),L.remove(n,t))}}}),n.fn.extend({on:function(e,t,r,i,s){var o,u;if("object"==typeof e){"string"!=typeof t&&(r=r||t,t=void 0);for(u in e)this.on(u,t,r,e[u],s);return this}if(null==r&&null==i?(i=t,r=t=void 0):null==i&&("string"==typeof t?(i=r,r=void 0):(i=r,r=t,t=void 0)),i===!1)i=$;else if(!i)return this;return 1===s&&(o=i,i=function(e){return n().off(e),o.apply(this,arguments)},i.guid=o.guid||(o.guid=n.guid++)),this.each(function(){n.event.add(this,e,i,r,t)})},one:function(e,t,n,r){return this.on(e,t,n,r,1)},off:function(e,t,r){var i,s;if(e&&e.preventDefault&&e.handleObj)return i=e.handleObj,n(e.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if("object"==typeof e){for(s in e)this.off(s,t,e[s]);return this}return(t===!1||"function"==typeof t)&&(r=t,t=void 0),r===!1&&(r=$),this.each(function(){n.event.remove(this,e,r,t)})},trigger:function(e,t){return this.each(function(){n.event.trigger(e,t,this)})},triggerHandler:function(e,t){var r=this[0];return r?n.event.trigger(e,t,r,!0):void 0}});var ab=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,bb=/<([\w:]+)/,cb=/<|&#?\w+;/,db=/<(?:script|style|link)/i,eb=/checked\s*(?:[^=]|=\s*.checked.)/i,fb=/^$|\/(?:java|ecma)script/i,gb=/^true\/(.*)/,hb=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,ib={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};ib.optgroup=ib.option,ib.tbody=ib.tfoot=ib.colgroup=ib.caption=ib.thead,ib.th=ib.td,n.extend({clone:function(e,t,r){var i,s,o,u,a=e.cloneNode(!0),f=n.contains(e.ownerDocument,e);if(!(k.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||n.isXMLDoc(e)))for(u=ob(a),o=ob(e),i=0,s=o.length;s>i;i++)pb(o[i],u[i]);if(t)if(r)for(o=o||ob(e),u=u||ob(a),i=0,s=o.length;s>i;i++)nb(o[i],u[i]);else nb(e,a);return u=ob(a,"script"),u.length>0&&mb(u,!f&&ob(e,"script")),a},buildFragment:function(e,t,r,i){for(var s,o,u,a,f,l,c=t.createDocumentFragment(),h=[],p=0,d=e.length;d>p;p++)if(s=e[p],s||0===s)if("object"===n.type(s))n.merge(h,s.nodeType?[s]:s);else if(cb.test(s)){o=o||c.appendChild(t.createElement("div")),u=(bb.exec(s)||["",""])[1].toLowerCase(),a=ib[u]||ib._default,o.innerHTML=a[1]+s.replace(ab,"<$1></$2>")+a[2],l=a[0];while(l--)o=o.lastChild;n.merge(h,o.childNodes),o=c.firstChild,o.textContent=""}else h.push(t.createTextNode(s));c.textContent="",p=0;while(s=h[p++])if((!i||-1===n.inArray(s,i))&&(f=n.contains(s.ownerDocument,s),o=ob(c.appendChild(s),"script"),f&&mb(o),r)){l=0;while(s=o[l++])fb.test(s.type||"")&&r.push(s)}return c},cleanData:function(e){for(var t,r,i,s,o=n.event.special,u=0;void 0!==(r=e[u]);u++){if(n.acceptData(r)&&(s=r[L.expando],s&&(t=L.cache[s]))){if(t.events)for(i in t.events)o[i]?n.event.remove(r,i):n.removeEvent(r,i,t.handle);L.cache[s]&&delete L.cache[s]}delete M.cache[r[M.expando]]}}}),n.fn.extend({text:function(e){return J(this,function(e){return void 0===e?n.text(this):this.empty().each(function(){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&(this.textContent=e)})},null,e,arguments.length)},append:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=jb(this,e);t.appendChild(e)}})},prepend:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=jb(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},remove:function(e,t){for(var r,i=e?n.filter(e,this):this,s=0;null!=(r=i[s]);s++)t||1!==r.nodeType||n.cleanData(ob(r)),r.parentNode&&(t&&n.contains(r.ownerDocument,r)&&mb(ob(r,"script")),r.parentNode.removeChild(r));return this},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(n.cleanData(ob(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null==e?!1:e,t=null==t?e:t,this.map(function(){return n.clone(this,e,t)})},html:function(e){return J(this,function(e){var t=this[0]||{},r=0,i=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!db.test(e)&&!ib[(bb.exec(e)||["",""])[1].toLowerCase()]){e=e.replace(ab,"<$1></$2>");try{for(;i>r;r++)t=this[r]||{},1===t.nodeType&&(n.cleanData(ob(t,!1)),t.innerHTML=e);t=0}catch(s){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=arguments[0];return this.domManip(arguments,function(t){e=this.parentNode,n.cleanData(ob(this)),e&&e.replaceChild(t,this)}),e&&(e.length||e.nodeType)?this:this.remove()},detach:function(e){return this.remove(e,!0)},domManip:function(t,r){t=e.apply([],t);var i,s,o,u,a,f,l=0,c=this.length,h=this,p=c-1,d=t[0],v=n.isFunction(d);if(v||c>1&&"string"==typeof d&&!k.checkClone&&eb.test(d))return this.each(function(e){var n=h.eq(e);v&&(t[0]=d.call(this,e,n.html())),n.domManip(t,r)});if(c&&(i=n.buildFragment(t,this[0].ownerDocument,!1,this),s=i.firstChild,1===i.childNodes.length&&(i=s),s)){for(o=n.map(ob(i,"script"),kb),u=o.length;c>l;l++)a=i,l!==p&&(a=n.clone(a,!0,!0),u&&n.merge(o,ob(a,"script"))),r.call(this[l],a,l);if(u)for(f=o[o.length-1].ownerDocument,n.map(o,lb),l=0;u>l;l++)a=o[l],fb.test(a.type||"")&&!L.access(a,"globalEval")&&n.contains(f,a)&&(a.src?n._evalUrl&&n._evalUrl(a.src):n.globalEval(a.textContent.replace(hb,"")))}return this}}),n.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){n.fn[e]=function(e){for(var r,i=[],s=n(e),o=s.length-1,u=0;o>=u;u++)r=u===o?this:this.clone(!0),n(s[u])[t](r),f.apply(i,r.get());return this.pushStack(i)}});var qb,rb={},ub=/^margin/,vb=new RegExp("^("+Q+")(?!px)[a-z%]+$","i"),wb=function(e){return e.ownerDocument.defaultView.opener?e.ownerDocument.defaultView.getComputedStyle(e,null):a.getComputedStyle(e,null)};!function(){var e,t,r=l.documentElement,i=l.createElement("div"),s=l.createElement("div");if(s.style){s.style.backgroundClip="content-box",s.cloneNode(!0).style.backgroundClip="",k.clearCloneStyle="content-box"===s.style.backgroundClip,i.style.cssText="border:0;width:0;height:0;top:0;left:-9999px;margin-top:1px;position:absolute",i.appendChild(s);function o(){s.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute",s.innerHTML="",r.appendChild(i);var n=a.getComputedStyle(s,null);e="1%"!==n.top,t="4px"===n.width,r.removeChild(i)}a.getComputedStyle&&n.extend(k,{pixelPosition:function(){return o(),e},boxSizingReliable:function(){return null==t&&o(),t},reliableMarginRight:function(){var e,t=s.appendChild(l.createElement("div"));return t.style.cssText=s.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",t.style.marginRight=t.style.width="0",s.style.width="1px",r.appendChild(i),e=!parseFloat(a.getComputedStyle(t,null).marginRight),r.removeChild(i),s.removeChild(t),e}})}}(),n.swap=function(e,t,n,r){var i,s,o={};for(s in t)o[s]=e.style[s],e.style[s]=t[s];i=n.apply(e,r||[]);for(s in t)e.style[s]=o[s];return i};var zb=/^(none|table(?!-c[ea]).+)/,Ab=new RegExp("^("+Q+")(.*)$","i"),Bb=new RegExp("^([+-])=("+Q+")","i"),Cb={position:"absolute",visibility:"hidden",display:"block"},Db={letterSpacing:"0",fontWeight:"400"},Eb=["Webkit","O","Moz","ms"];n.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=xb(e,"opacity");return""===n?"1":n}}}},cssNumber:{columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":"cssFloat"},style:function(e,t,r,i){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var s,o,u,a=n.camelCase(t),f=e.style;return t=n.cssProps[a]||(n.cssProps[a]=Fb(f,a)),u=n.cssHooks[t]||n.cssHooks[a],void 0===r?u&&"get"in u&&void 0!==(s=u.get(e,!1,i))?s:f[t]:(o=typeof r,"string"===o&&(s=Bb.exec(r))&&(r=(s[1]+1)*s[2]+parseFloat(n.css(e,t)),o="number"),null!=r&&r===r&&("number"!==o||n.cssNumber[a]||(r+="px"),k.clearCloneStyle||""!==r||0!==t.indexOf("background")||(f[t]="inherit"),u&&"set"in u&&void 0===(r=u.set(e,r,i))||(f[t]=r)),void 0)}},css:function(e,t,r,i){var s,o,u,a=n.camelCase(t);return t=n.cssProps[a]||(n.cssProps[a]=Fb(e.style,a)),u=n.cssHooks[t]||n.cssHooks[a],u&&"get"in u&&(s=u.get(e,!0,r)),void 0===s&&(s=xb(e,t,i)),"normal"===s&&t in Db&&(s=Db[t]),""===r||r?(o=parseFloat(s),r===!0||n.isNumeric(o)?o||0:s):s}}),n.each(["height","width"],function(e,t){n.cssHooks[t]={get:function(e,r,i){return r?zb.test(n.css(e,"display"))&&0===e.offsetWidth?n.swap(e,Cb,function(){return Ib(e,t,i)}):Ib(e,t,i):void 0},set:function(e,r,i){var s=i&&wb(e);return Gb(e,r,i?Hb(e,t,i,"border-box"===n.css(e,"boxSizing",!1,s),s):0)}}}),n.cssHooks.marginRight=yb(k.reliableMarginRight,function(e,t){return t?n.swap(e,{display:"inline-block"},xb,[e,"marginRight"]):void 0}),n.each({margin:"",padding:"",border:"Width"},function(e,t){n.cssHooks[e+t]={expand:function(n){for(var r=0,i={},s="string"==typeof n?n.split(" "):[n];4>r;r++)i[e+R[r]+t]=s[r]||s[r-2]||s[0];return i}},ub.test(e)||(n.cssHooks[e+t].set=Gb)}),n.fn.extend({css:function(e,t){return J(this,function(e,t,r){var i,s,o={},u=0;if(n.isArray(t)){for(i=wb(e),s=t.length;s>u;u++)o[t[u]]=n.css(e,t[u],!1,i);return o}return void 0!==r?n.style(e,t,r):n.css(e,t)},e,t,arguments.length>1)},show:function(){return Jb(this,!0)},hide:function(){return Jb(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){S(this)?n(this).show():n(this).hide()})}}),n.Tween=Kb,Kb.prototype={constructor:Kb,init:function(e,t,r,i,s,o){this.elem=e,this.prop=r,this.easing=s||"swing",this.options=t,this.start=this.now=this.cur(),this.end=i,this.unit=o||(n.cssNumber[r]?"":"px")},cur:function(){var e=Kb.propHooks[this.prop];return e&&e.get?e.get(this):Kb.propHooks._default.get(this)},run:function(e){var t,r=Kb.propHooks[this.prop];return this.pos=t=this.options.duration?n.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),r&&r.set?r.set(this):Kb.propHooks._default.set(this),this}},Kb.prototype.init.prototype=Kb.prototype,Kb.propHooks={_default:{get:function(e){var t;return null==e.elem[e.prop]||e.elem.style&&null!=e.elem.style[e.prop]?(t=n.css(e.elem,e.prop,""),t&&"auto"!==t?t:0):e.elem[e.prop]},set:function(e){n.fx.step[e.prop]?n.fx.step[e.prop](e):e.elem.style&&(null!=e.elem.style[n.cssProps[e.prop]]||n.cssHooks[e.prop])?n.style(e.elem,e.prop,e.now+e.unit):e.elem[e.prop]=e.now}}},Kb.propHooks.scrollTop=Kb.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},n.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2}},n.fx=Kb.prototype.init,n.fx.step={};var Lb,Mb,Nb=/^(?:toggle|show|hide)$/,Ob=new RegExp("^(?:([+-])=|)("+Q+")([a-z%]*)$","i"),Pb=/queueHooks$/,Qb=[Vb],Rb={"*":[function(e,t){var r=this.createTween(e,t),i=r.cur(),s=Ob.exec(t),o=s&&s[3]||(n.cssNumber[e]?"":"px"),u=(n.cssNumber[e]||"px"!==o&&+i)&&Ob.exec(n.css(r.elem,e)),a=1,f=20;if(u&&u[3]!==o){o=o||u[3],s=s||[],u=+i||1;do a=a||".5",u/=a,n.style(r.elem,e,u+o);while(a!==(a=r.cur()/i)&&1!==a&&--f)}return s&&(u=r.start=+u||+i||0,r.unit=o,r.end=s[1]?u+(s[1]+1)*s[2]:+s[2]),r}]};n.Animation=n.extend(Xb,{tweener:function(e,t){n.isFunction(e)?(t=e,e=["*"]):e=e.split(" ");for(var r,i=0,s=e.length;s>i;i++)r=e[i],Rb[r]=Rb[r]||[],Rb[r].unshift(t)},prefilter:function(e,t){t?Qb.unshift(e):Qb.push(e)}}),n.speed=function(e,t,r){var i=e&&"object"==typeof e?n.extend({},e):{complete:r||!r&&t||n.isFunction(e)&&e,duration:e,easing:r&&t||t&&!n.isFunction(t)&&t};return i.duration=n.fx.off?0:"number"==typeof i.duration?i.duration:i.duration in n.fx.speeds?n.fx.speeds[i.duration]:n.fx.speeds._default,(null==i.queue||i.queue===!0)&&(i.queue="fx"),i.old=i.complete,i.complete=function(){n.isFunction(i.old)&&i.old.call(this),i.queue&&n.dequeue(this,i.queue)},i},n.fn.extend({fadeTo:function(e,t,n,r){return this.filter(S).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(e,t,r,i){var s=n.isEmptyObject(e),o=n.speed(t,r,i),u=function(){var t=Xb(this,n.extend({},e),o);(s||L.get(this,"finish"))&&t.stop(!0)};return u.finish=u,s||o.queue===!1?this.each(u):this.queue(o.queue,u)},stop:function(e,t,r){var i=function(e){var t=e.stop;delete e.stop,t(r)};return"string"!=typeof e&&(r=t,t=e,e=void 0),t&&e!==!1&&this.queue(e||"fx",[]),this.each(function(){var t=!0,s=null!=e&&e+"queueHooks",o=n.timers,u=L.get(this);if(s)u[s]&&u[s].stop&&i(u[s]);else for(s in u)u[s]&&u[s].stop&&Pb.test(s)&&i(u[s]);for(s=o.length;s--;)o[s].elem!==this||null!=e&&o[s].queue!==e||(o[s].anim.stop(r),t=!1,o.splice(s,1));(t||!r)&&n.dequeue(this,e)})},finish:function(e){return e!==!1&&(e=e||"fx"),this.each(function(){var t,r=L.get(this),i=r[e+"queue"],s=r[e+"queueHooks"],o=n.timers,u=i?i.length:0;for(r.finish=!0,n.queue(this,e,[]),s&&s.stop&&s.stop.call(this,!0),t=o.length;t--;)o[t].elem===this&&o[t].queue===e&&(o[t].anim.stop(!0),o.splice(t,1));for(t=0;u>t;t++)i[t]&&i[t].finish&&i[t].finish.call(this);delete r.finish})}}),n.each(["toggle","show","hide"],function(e,t){var r=n.fn[t];n.fn[t]=function(e,n,i){return null==e||"boolean"==typeof e?r.apply(this,arguments):this.animate(Tb(t,!0),e,n,i)}}),n.each({slideDown:Tb("show"),slideUp:Tb("hide"),slideToggle:Tb("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){n.fn[e]=function(e,n,r){return this.animate(t,e,n,r)}}),n.timers=[],n.fx.tick=function(){var e,t=0,r=n.timers;for(Lb=n.now();t<r.length;t++)e=r[t],e()||r[t]!==e||r.splice(t--,1);r.length||n.fx.stop(),Lb=void 0},n.fx.timer=function(e){n.timers.push(e),e()?n.fx.start():n.timers.pop()},n.fx.interval=13,n.fx.start=function(){Mb||(Mb=setInterval(n.fx.tick,n.fx.interval))},n.fx.stop=function(){clearInterval(Mb),Mb=null},n.fx.speeds={slow:600,fast:200,_default:400},n.fn.delay=function(e,t){return e=n.fx?n.fx.speeds[e]||e:e,t=t||"fx",this.queue(t,function(t,n){var r=setTimeout(t,e);n.stop=function(){clearTimeout(r)}})},function(){var e=l.createElement("input"),t=l.createElement("select"),n=t.appendChild(l.createElement("option"));e.type="checkbox",k.checkOn=""!==e.value,k.optSelected=n.selected,t.disabled=!0,k.optDisabled=!n.disabled,e=l.createElement("input"),e.value="t",e.type="radio",k.radioValue="t"===e.value}();var Yb,Zb,$b=n.expr.attrHandle;n.fn.extend({attr:function(e,t){return J(this,n.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){n.removeAttr(this,e)})}}),n.extend({attr:function(e,t,r){var i,s,o=e.nodeType;if(e&&3!==o&&8!==o&&2!==o)return typeof e.getAttribute===U?n.prop(e,t,r):(1===o&&n.isXMLDoc(e)||(t=t.toLowerCase(),i=n.attrHooks[t]||(n.expr.match.bool.test(t)?Zb:Yb)),void 0===r?i&&"get"in i&&null!==(s=i.get(e,t))?s:(s=n.find.attr(e,t),null==s?void 0:s):null!==r?i&&"set"in i&&void 0!==(s=i.set(e,r,t))?s:(e.setAttribute(t,r+""),r):void n.removeAttr(e,t))},removeAttr:function(e,t){var r,i,s=0,o=t&&t.match(E);if(o&&1===e.nodeType)while(r=o[s++])i=n.propFix[r]||r,n.expr.match.bool.test(r)&&(e[i]=!1),e.removeAttribute(r)},attrHooks:{type:{set:function(e,t){if(!k.radioValue&&"radio"===t&&n.nodeName(e,"input")){var r=e.value;return e.setAttribute("type",t),r&&(e.value=r),t}}}}}),Zb={set:function(e,t,r){return t===!1?n.removeAttr(e,r):e.setAttribute(r,r),r}},n.each(n.expr.match.bool.source.match(/\w+/g),function(e,t){var r=$b[t]||n.find.attr;$b[t]=function(e,t,n){var i,s;return n||(s=$b[t],$b[t]=i,i=null!=r(e,t,n)?t.toLowerCase():null,$b[t]=s),i}});var _b=/^(?:input|select|textarea|button)$/i;n.fn.extend({prop:function(e,t){return J(this,n.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each(function(){delete this[n.propFix[e]||e]})}}),n.extend({propFix:{"for":"htmlFor","class":"className"},prop:function(e,t,r){var i,s,o,u=e.nodeType;if(e&&3!==u&&8!==u&&2!==u)return o=1!==u||!n.isXMLDoc(e),o&&(t=n.propFix[t]||t,s=n.propHooks[t]),void 0!==r?s&&"set"in s&&void 0!==(i=s.set(e,r,t))?i:e[t]=r:s&&"get"in s&&null!==(i=s.get(e,t))?i:e[t]},propHooks:{tabIndex:{get:function(e){return e.hasAttribute("tabindex")||_b.test(e.nodeName)||e.href?e.tabIndex:-1}}}}),k.optSelected||(n.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null}}),n.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){n.propFix[this.toLowerCase()]=this});var ac=/[\t\r\n\f]/g;n.fn.extend({addClass:function(e){var t,r,i,s,o,u,a="string"==typeof e&&e,f=0,l=this.length;if(n.isFunction(e))return this.each(function(t){n(this).addClass(e.call(this,t,this.className))});if(a)for(t=(e||"").match(E)||[];l>f;f++)if(r=this[f],i=1===r.nodeType&&(r.className?(" "+r.className+" ").replace(ac," "):" ")){o=0;while(s=t[o++])i.indexOf(" "+s+" ")<0&&(i+=s+" ");u=n.trim(i),r.className!==u&&(r.className=u)}return this},removeClass:function(e){var t,r,i,s,o,u,a=0===arguments.length||"string"==typeof e&&e,f=0,l=this.length;if(n.isFunction(e))return this.each(function(t){n(this).removeClass(e.call(this,t,this.className))});if(a)for(t=(e||"").match(E)||[];l>f;f++)if(r=this[f],i=1===r.nodeType&&(r.className?(" "+r.className+" ").replace(ac," "):"")){o=0;while(s=t[o++])while(i.indexOf(" "+s+" ")>=0)i=i.replace(" "+s+" "," ");u=e?n.trim(i):"",r.className!==u&&(r.className=u)}return this},toggleClass:function(e,t){var r=typeof e;return"boolean"==typeof t&&"string"===r?t?this.addClass(e):this.removeClass(e):this.each(n.isFunction(e)?function(r){n(this).toggleClass(e.call(this,r,this.className,t),t)}:function(){if("string"===r){var t,i=0,s=n(this),o=e.match(E)||[];while(t=o[i++])s.hasClass(t)?s.removeClass(t):s.addClass(t)}else(r===U||"boolean"===r)&&(this.className&&L.set(this,"__className__",this.className),this.className=this.className||e===!1?"":L.get(this,"__className__")||"")})},hasClass:function(e){for(var t=" "+e+" ",n=0,r=this.length;r>n;n++)if(1===this[n].nodeType&&(" "+this[n].className+" ").replace(ac," ").indexOf(t)>=0)return!0;return!1}});var bc=/\r/g;n.fn.extend({val:function(e){var t,r,i,s=this[0];if(arguments.length)return i=n.isFunction(e),this.each(function(r){var s;1===this.nodeType&&(s=i?e.call(this,r,n(this).val()):e,null==s?s="":"number"==typeof s?s+="":n.isArray(s)&&(s=n.map(s,function(e){return null==e?"":e+""})),t=n.valHooks[this.type]||n.valHooks[this.nodeName.toLowerCase()],t&&"set"in t&&void 0!==t.set(this,s,"value")||(this.value=s))});if(s)return t=n.valHooks[s.type]||n.valHooks[s.nodeName.toLowerCase()],t&&"get"in t&&void 0!==(r=t.get(s,"value"))?r:(r=s.value,"string"==typeof r?r.replace(bc,""):null==r?"":r)}}),n.extend({valHooks:{option:{get:function(e){var t=n.find.attr(e,"value");return null!=t?t:n.trim(n.text(e))}},select:{get:function(e){for(var t,r,i=e.options,s=e.selectedIndex,o="select-one"===e.type||0>s,u=o?null:[],a=o?s+1:i.length,f=0>s?a:o?s:0;a>f;f++)if(r=i[f],!(!r.selected&&f!==s||(k.optDisabled?r.disabled:null!==r.getAttribute("disabled"))||r.parentNode.disabled&&n.nodeName(r.parentNode,"optgroup"))){if(t=n(r).val(),o)return t;u.push(t)}return u},set:function(e,t){var r,i,s=e.options,o=n.makeArray(t),u=s.length;while(u--)i=s[u],(i.selected=n.inArray(i.value,o)>=0)&&(r=!0);return r||(e.selectedIndex=-1),o}}}}),n.each(["radio","checkbox"],function(){n.valHooks[this]={set:function(e,t){return n.isArray(t)?e.checked=n.inArray(n(e).val(),t)>=0:void 0}},k.checkOn||(n.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})}),n.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){n.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}),n.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)},bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)}});var cc=n.now(),dc=/\?/;n.parseJSON=function(e){return JSON.parse(e+"")},n.parseXML=function(e){var t,r;if(!e||"string"!=typeof e)return null;try{r=new DOMParser,t=r.parseFromString(e,"text/xml")}catch(i){t=void 0}return(!t||t.getElementsByTagName("parsererror").length)&&n.error("Invalid XML: "+e),t};var ec=/#.*$/,fc=/([?&])_=[^&]*/,gc=/^(.*?):[ \t]*([^\r\n]*)$/gm,hc=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,ic=/^(?:GET|HEAD)$/,jc=/^\/\//,kc=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,lc={},mc={},nc="*/".concat("*"),oc=a.location.href,pc=kc.exec(oc.toLowerCase())||[];n.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:oc,type:"GET",isLocal:hc.test(pc[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":nc,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":n.parseJSON,"text xml":n.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?sc(sc(e,n.ajaxSettings),t):sc(n.ajaxSettings,e)},ajaxPrefilter:qc(lc),ajaxTransport:qc(mc),ajax:function(e,t){function T(e,t,o,a){var l,g,y,w,E,x=t;2!==b&&(b=2,u&&clearTimeout(u),r=void 0,s=a||"",S.readyState=e>0?4:0,l=e>=200&&300>e||304===e,o&&(w=tc(c,S,o)),w=uc(c,w,S,l),l?(c.ifModified&&(E=S.getResponseHeader("Last-Modified"),E&&(n.lastModified[i]=E),E=S.getResponseHeader("etag"),E&&(n.etag[i]=E)),204===e||"HEAD"===c.type?x="nocontent":304===e?x="notmodified":(x=w.state,g=w.data,y=w.error,l=!y)):(y=x,(e||!x)&&(x="error",0>e&&(e=0))),S.status=e,S.statusText=(t||x)+"",l?d.resolveWith(h,[g,x,S]):d.rejectWith(h,[S,x,y]),S.statusCode(m),m=void 0,f&&p.trigger(l?"ajaxSuccess":"ajaxError",[S,c,l?g:y]),v.fireWith(h,[S,x]),f&&(p.trigger("ajaxComplete",[S,c]),--n.active||n.event.trigger("ajaxStop")))}"object"==typeof e&&(t=e,e=void 0),t=t||{};var r,i,s,o,u,a,f,l,c=n.ajaxSetup({},t),h=c.context||c,p=c.context&&(h.nodeType||h.jquery)?n(h):n.event,d=n.Deferred(),v=n.Callbacks("once memory"),m=c.statusCode||{},g={},y={},b=0,w="canceled",S={readyState:0,getResponseHeader:function(e){var t;if(2===b){if(!o){o={};while(t=gc.exec(s))o[t[1].toLowerCase()]=t[2]}t=o[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return 2===b?s:null},setRequestHeader:function(e,t){var n=e.toLowerCase();return b||(e=y[n]=y[n]||e,g[e]=t),this},overrideMimeType:function(e){return b||(c.mimeType=e),this},statusCode:function(e){var t;if(e)if(2>b)for(t in e)m[t]=[m[t],e[t]];else S.always(e[S.status]);return this},abort:function(e){var t=e||w;return r&&r.abort(t),T(0,t),this}};if(d.promise(S).complete=v.add,S.success=S.done,S.error=S.fail,c.url=((e||c.url||oc)+"").replace(ec,"").replace(jc,pc[1]+"//"),c.type=t.method||t.type||c.method||c.type,c.dataTypes=n.trim(c.dataType||"*").toLowerCase().match(E)||[""],null==c.crossDomain&&(a=kc.exec(c.url.toLowerCase()),c.crossDomain=!(!a||a[1]===pc[1]&&a[2]===pc[2]&&(a[3]||("http:"===a[1]?"80":"443"))===(pc[3]||("http:"===pc[1]?"80":"443")))),c.data&&c.processData&&"string"!=typeof c.data&&(c.data=n.param(c.data,c.traditional)),rc(lc,c,t,S),2===b)return S;f=n.event&&c.global,f&&0===n.active++&&n.event.trigger("ajaxStart"),c.type=c.type.toUpperCase(),c.hasContent=!ic.test(c.type),i=c.url,c.hasContent||(c.data&&(i=c.url+=(dc.test(i)?"&":"?")+c.data,delete c.data),c.cache===!1&&(c.url=fc.test(i)?i.replace(fc,"$1_="+cc++):i+(dc.test(i)?"&":"?")+"_="+cc++)),c.ifModified&&(n.lastModified[i]&&S.setRequestHeader("If-Modified-Since",n.lastModified[i]),n.etag[i]&&S.setRequestHeader("If-None-Match",n.etag[i])),(c.data&&c.hasContent&&c.contentType!==!1||t.contentType)&&S.setRequestHeader("Content-Type",c.contentType),S.setRequestHeader("Accept",c.dataTypes[0]&&c.accepts[c.dataTypes[0]]?c.accepts[c.dataTypes[0]]+("*"!==c.dataTypes[0]?", "+nc+"; q=0.01":""):c.accepts["*"]);for(l in c.headers)S.setRequestHeader(l,c.headers[l]);if(!c.beforeSend||c.beforeSend.call(h,S,c)!==!1&&2!==b){w="abort";for(l in{success:1,error:1,complete:1})S[l](c[l]);if(r=rc(mc,c,t,S)){S.readyState=1,f&&p.trigger("ajaxSend",[S,c]),c.async&&c.timeout>0&&(u=setTimeout(function(){S.abort("timeout")},c.timeout));try{b=1,r.send(g,T)}catch(x){if(!(2>b))throw x;T(-1,x)}}else T(-1,"No Transport");return S}return S.abort()},getJSON:function(e,t,r){return n.get(e,t,r,"json")},getScript:function(e,t){return n.get(e,void 0,t,"script")}}),n.each(["get","post"],function(e,t){n[t]=function(e,r,i,s){return n.isFunction(r)&&(s=s||i,i=r,r=void 0),n.ajax({url:e,type:t,dataType:s,data:r,success:i})}}),n._evalUrl=function(e){return n.ajax({url:e,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})},n.fn.extend({wrapAll:function(e){var t;return n.isFunction(e)?this.each(function(t){n(this).wrapAll(e.call(this,t))}):(this[0]&&(t=n(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){var e=this;while(e.firstElementChild)e=e.firstElementChild;return e}).append(this)),this)},wrapInner:function(e){return this.each(n.isFunction(e)?function(t){n(this).wrapInner(e.call(this,t))}:function(){var t=n(this),r=t.contents();r.length?r.wrapAll(e):t.append(e)})},wrap:function(e){var t=n.isFunction(e);return this.each(function(r){n(this).wrapAll(t?e.call(this,r):e)})},unwrap:function(){return this.parent().each(function(){n.nodeName(this,"body")||n(this).replaceWith(this.childNodes)}).end()}}),n.expr.filters.hidden=function(e){return e.offsetWidth<=0&&e.offsetHeight<=0},n.expr.filters.visible=function(e){return!n.expr.filters.hidden(e)};var vc=/%20/g,wc=/\[\]$/,xc=/\r?\n/g,yc=/^(?:submit|button|image|reset|file)$/i,zc=/^(?:input|select|textarea|keygen)/i;n.param=function(e,t){var r,i=[],s=function(e,t){t=n.isFunction(t)?t():null==t?"":t,i[i.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(void 0===t&&(t=n.ajaxSettings&&n.ajaxSettings.traditional),n.isArray(e)||e.jquery&&!n.isPlainObject(e))n.each(e,function(){s(this.name,this.value)});else for(r in e)Ac(r,e[r],t,s);return i.join("&").replace(vc,"+")},n.fn.extend({serialize:function(){return n.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=n.prop(this,"elements");return e?n.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!n(this).is(":disabled")&&zc.test(this.nodeName)&&!yc.test(e)&&(this.checked||!T.test(e))}).map(function(e,t){var r=n(this).val();return null==r?null:n.isArray(r)?n.map(r,function(e){return{name:t.name,value:e.replace(xc,"\r\n")}}):{name:t.name,value:r.replace(xc,"\r\n")}}).get()}}),n.ajaxSettings.xhr=function(){try{return new XMLHttpRequest}catch(e){}};var Bc=0,Cc={},Dc={0:200,1223:204},Ec=n.ajaxSettings.xhr();a.attachEvent&&a.attachEvent("onunload",function(){for(var e in Cc)Cc[e]()}),k.cors=!!Ec&&"withCredentials"in Ec,k.ajax=Ec=!!Ec,n.ajaxTransport(function(e){var t;return k.cors||Ec&&!e.crossDomain?{send:function(n,r){var i,s=e.xhr(),o=++Bc;if(s.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(i in e.xhrFields)s[i]=e.xhrFields[i];e.mimeType&&s.overrideMimeType&&s.overrideMimeType(e.mimeType),e.crossDomain||n["X-Requested-With"]||(n["X-Requested-With"]="XMLHttpRequest");for(i in n)s.setRequestHeader(i,n[i]);t=function(e){return function(){t&&(delete Cc[o],t=s.onload=s.onerror=null,"abort"===e?s.abort():"error"===e?r(s.status,s.statusText):r(Dc[s.status]||s.status,s.statusText,"string"==typeof s.responseText?{text:s.responseText}:void 0,s.getAllResponseHeaders()))}},s.onload=t(),s.onerror=t("error"),t=Cc[o]=t("abort");try{s.send(e.hasContent&&e.data||null)}catch(u){if(t)throw u}},abort:function(){t&&t()}}:void 0}),n.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(e){return n.globalEval(e),e}}}),n.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),n.ajaxTransport("script",function(e){if(e.crossDomain){var t,r;return{send:function(i,s){t=n("<script>").prop({async:!0,charset:e.scriptCharset,src:e.url}).on("load error",r=function(e){t.remove(),r=null,e&&s("error"===e.type?404:200,e.type)}),l.head.appendChild(t[0])},abort:function(){r&&r()}}}});var Fc=[],Gc=/(=)\?(?=&|$)|\?\?/;n.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Fc.pop()||n.expando+"_"+cc++;return this[e]=!0,e}}),n.ajaxPrefilter("json jsonp",function(e,t,r){var i,s,o,u=e.jsonp!==!1&&(Gc.test(e.url)?"url":"string"==typeof e.data&&!(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&Gc.test(e.data)&&"data");return u||"jsonp"===e.dataTypes[0]?(i=e.jsonpCallback=n.isFunction(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,u?e[u]=e[u].replace(Gc,"$1"+i):e.jsonp!==!1&&(e.url+=(dc.test(e.url)?"&":"?")+e.jsonp+"="+i),e.converters["script json"]=function(){return o||n.error(i+" was not called"),o[0]},e.dataTypes[0]="json",s=a[i],a[i]=function(){o=arguments},r.always(function(){a[i]=s,e[i]&&(e.jsonpCallback=t.jsonpCallback,Fc.push(i)),o&&n.isFunction(s)&&s(o[0]),o=s=void 0}),"script"):void 0}),n.parseHTML=function(e,t,r){if(!e||"string"!=typeof e)return null;"boolean"==typeof t&&(r=t,t=!1),t=t||l;var i=v.exec(e),s=!r&&[];return i?[t.createElement(i[1])]:(i=n.buildFragment([e],t,s),s&&s.length&&n(s).remove(),n.merge([],i.childNodes))};var Hc=n.fn.load;n.fn.load=function(e,t,r){if("string"!=typeof e&&Hc)return Hc.apply(this,arguments);var i,s,o,u=this,a=e.indexOf(" ");return a>=0&&(i=n.trim(e.slice(a)),e=e.slice(0,a)),n.isFunction(t)?(r=t,t=void 0):t&&"object"==typeof t&&(s="POST"),u.length>0&&n.ajax({url:e,type:s,dataType:"html",data:t}).done(function(e){o=arguments,u.html(i?n("<div>").append(n.parseHTML(e)).find(i):e)}).complete(r&&function(e,t){u.each(r,o||[e.responseText,t,e])}),this},n.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){n.fn[t]=function(e){return this.on(t,e)}}),n.expr.filters.animated=function(e){return n.grep(n.timers,function(t){return e===t.elem}).length};var Ic=a.document.documentElement;n.offset={setOffset:function(e,t,r){var i,s,o,u,a,f,l,c=n.css(e,"position"),h=n(e),p={};"static"===c&&(e.style.position="relative"),a=h.offset(),o=n.css(e,"top"),f=n.css(e,"left"),l=("absolute"===c||"fixed"===c)&&(o+f).indexOf("auto")>-1,l?(i=h.position(),u=i.top,s=i.left):(u=parseFloat(o)||0,s=parseFloat(f)||0),n.isFunction(t)&&(t=t.call(e,r,a)),null!=t.top&&(p.top=t.top-a.top+u),null!=t.left&&(p.left=t.left-a.left+s),"using"in t?t.using.call(e,p):h.css(p)}},n.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each(function(t){n.offset.setOffset(this,e,t)});var t,r,i=this[0],s={top:0,left:0},o=i&&i.ownerDocument;if(o)return t=o.documentElement,n.contains(t,i)?(typeof i.getBoundingClientRect!==U&&(s=i.getBoundingClientRect()),r=Jc(o),{top:s.top+r.pageYOffset-t.clientTop,left:s.left+r.pageXOffset-t.clientLeft}):s},position:function(){if(this[0]){var e,t,r=this[0],i={top:0,left:0};return"fixed"===n.css(r,"position")?t=r.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),n.nodeName(e[0],"html")||(i=e.offset()),i.top+=n.css(e[0],"borderTopWidth",!0),i.left+=n.css(e[0],"borderLeftWidth",!0)),{top:t.top-i.top-n.css(r,"marginTop",!0),left:t.left-i.left-n.css(r,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){var e=this.offsetParent||Ic;while(e&&!n.nodeName(e,"html")&&"static"===n.css(e,"position"))e=e.offsetParent;return e||Ic})}}),n.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,t){var r="pageYOffset"===t;n.fn[e]=function(n){return J(this,function(e,n,i){var s=Jc(e);return void 0===i?s?s[t]:e[n]:void (s?s.scrollTo(r?a.pageXOffset:i,r?i:a.pageYOffset):e[n]=i)},e,n,arguments.length,null)}}),n.each(["top","left"],function(e,t){n.cssHooks[t]=yb(k.pixelPosition,function(e,r){return r?(r=xb(e,t),vb.test(r)?n(e).position()[t]+"px":r):void 0})}),n.each({Height:"height",Width:"width"},function(e,t){n.each({padding:"inner"+e,content:t,"":"outer"+e},function(r,i){n.fn[i]=function(i,s){var o=arguments.length&&(r||"boolean"!=typeof i),u=r||(i===!0||s===!0?"margin":"border");return J(this,function(t,r,i){var s;return n.isWindow(t)?t.document.documentElement["client"+e]:9===t.nodeType?(s=t.documentElement,Math.max(t.body["scroll"+e],s["scroll"+e],t.body["offset"+e],s["offset"+e],s["client"+e])):void 0===i?n.css(t,r,u):n.style(t,r,i,u)},t,o?i:void 0,o,null)}})}),n.fn.size=function(){return this.length},n.fn.andSelf=n.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return n});var Kc=a.jQuery,Lc=a.$;return n.noConflict=function(e){return a.$===n&&(a.$=Lc),e&&a.jQuery===n&&(a.jQuery=Kc),n},typeof b===U&&(a.jQuery=a.$=n),n}),function(){var e=this,t=e._,n={},r=Array.prototype,i=Object.prototype,s=Function.prototype,o=r.push,u=r.slice,a=r.concat,f=i.toString,l=i.hasOwnProperty,c=r.forEach,h=r.map,p=r.reduce,d=r.reduceRight,v=r.filter,m=r.every,g=r.some,y=r.indexOf,b=r.lastIndexOf,w=Array.isArray,E=Object.keys,S=s.bind,x=function(e){if(e instanceof x)return e;if(!(this instanceof x))return new x(e);this._wrapped=e};typeof exports!="undefined"?(typeof module!="undefined"&&module.exports&&(exports=module.exports=x),exports._=x):e._=x,x.VERSION="1.6.0";var T=x.each=x.forEach=function(e,t,r){if(e==null)return e;if(c&&e.forEach===c)e.forEach(t,r);else if(e.length===+e.length){for(var i=0,s=e.length;i<s;i++)if(t.call(r,e[i],i,e)===n)return}else{var o=x.keys(e);for(var i=0,s=o.length;i<s;i++)if(t.call(r,e[o[i]],o[i],e)===n)return}return e};x.map=x.collect=function(e,t,n){var r=[];return e==null?r:h&&e.map===h?e.map(t,n):(T(e,function(e,i,s){r.push(t.call(n,e,i,s))}),r)};var N="Reduce of empty array with no initial value";x.reduce=x.foldl=x.inject=function(e,t,n,r){var i=arguments.length>2;e==null&&(e=[]);if(p&&e.reduce===p)return r&&(t=x.bind(t,r)),i?e.reduce(t,n):e.reduce(t);T(e,function(e,s,o){i?n=t.call(r,n,e,s,o):(n=e,i=!0)});if(!i)throw new TypeError(N);return n},x.reduceRight=x.foldr=function(e,t,n,r){var i=arguments.length>2;e==null&&(e=[]);if(d&&e.reduceRight===d)return r&&(t=x.bind(t,r)),i?e.reduceRight(t,n):e.reduceRight(t);var s=e.length;if(s!==+s){var o=x.keys(e);s=o.length}T(e,function(u,a,f){a=o?o[--s]:--s,i?n=t.call(r,n,e[a],a,f):(n=e[a],i=!0)});if(!i)throw new TypeError(N);return n},x.find=x.detect=function(e,t,n){var r;return C(e,function(e,i,s){if(t.call(n,e,i,s))return r=e,!0}),r},x.filter=x.select=function(e,t,n){var r=[];return e==null?r:v&&e.filter===v?e.filter(t,n):(T(e,function(e,i,s){t.call(n,e,i,s)&&r.push(e)}),r)},x.reject=function(e,t,n){return x.filter(e,function(e,r,i){return!t.call(n,e,r,i)},n)},x.every=x.all=function(e,t,r){t||(t=x.identity);var i=!0;return e==null?i:m&&e.every===m?e.every(t,r):(T(e,function(e,s,o){if(!(i=i&&t.call(r,e,s,o)))return n}),!!i)};var C=x.some=x.any=function(e,t,r){t||(t=x.identity);var i=!1;return e==null?i:g&&e.some===g?e.some(t,r):(T(e,function(e,s,o){if(i||(i=t.call(r,e,s,o)))return n}),!!i)};x.contains=x.include=function(e,t){return e==null?!1:y&&e.indexOf===y?e.indexOf(t)!=-1:C(e,function(e){return e===t})},x.invoke=function(e,t){var n=u.call(arguments,2),r=x.isFunction(t);return x.map(e,function(e){return(r?t:e[t]).apply(e,n)})},x.pluck=function(e,t){return x.map(e,x.property(t))},x.where=function(e,t){return x.filter(e,x.matches(t))},x.findWhere=function(e,t){return x.find(e,x.matches(t))},x.max=function(e,t,n){if(!t&&x.isArray(e)&&e[0]===+e[0]&&e.length<65535)return Math.max.apply(Math,e);var r=-Infinity,i=-Infinity;return T(e,function(e,s,o){var u=t?t.call(n,e,s,o):e;u>i&&(r=e,i=u)}),r},x.min=function(e,t,n){if(!t&&x.isArray(e)&&e[0]===+e[0]&&e.length<65535)return Math.min.apply(Math,e);var r=Infinity,i=Infinity;return T(e,function(e,s,o){var u=t?t.call(n,e,s,o):e;u<i&&(r=e,i=u)}),r},x.shuffle=function(e){var t,n=0,r=[];return T(e,function(e){t=x.random(n++),r[n-1]=r[t],r[t]=e}),r},x.sample=function(e,t,n){return t==null||n?(e.length!==+e.length&&(e=x.values(e)),e[x.random(e.length-1)]):x.shuffle(e).slice(0,Math.max(0,t))};var k=function(e){return e==null?x.identity:x.isFunction(e)?e:x.property(e)};x.sortBy=function(e,t,n){return t=k(t),x.pluck(x.map(e,function(e,r,i){return{value:e,index:r,criteria:t.call(n,e,r,i)}}).sort(function(e,t){var n=e.criteria,r=t.criteria;if(n!==r){if(n>r||n===void 0)return 1;if(n<r||r===void 0)return-1}return e.index-t.index}),"value")};var L=function(e){return function(t,n,r){var i={};return n=k(n),T(t,function(s,o){var u=n.call(r,s,o,t);e(i,u,s)}),i}};x.groupBy=L(function(e,t,n){x.has(e,t)?e[t].push(n):e[t]=[n]}),x.indexBy=L(function(e,t,n){e[t]=n}),x.countBy=L(function(e,t){x.has(e,t)?e[t]++:e[t]=1}),x.sortedIndex=function(e,t,n,r){n=k(n);var i=n.call(r,t),s=0,o=e.length;while(s<o){var u=s+o>>>1;n.call(r,e[u])<i?s=u+1:o=u}return s},x.toArray=function(e){return e?x.isArray(e)?u.call(e):e.length===+e.length?x.map(e,x.identity):x.values(e):[]},x.size=function(e){return e==null?0:e.length===+e.length?e.length:x.keys(e).length},x.first=x.head=x.take=function(e,t,n){return e==null?void 0:t==null||n?e[0]:t<0?[]:u.call(e,0,t)},x.initial=function(e,t,n){return u.call(e,0,e.length-(t==null||n?1:t))},x.last=function(e,t,n){return e==null?void 0:t==null||n?e[e.length-1]:u.call(e,Math.max(e.length-t,0))},x.rest=x.tail=x.drop=function(e,t,n){return u.call(e,t==null||n?1:t)},x.compact=function(e){return x.filter(e,x.identity)};var A=function(e,t,n){return t&&x.every(e,x.isArray)?a.apply(n,e):(T(e,function(e){x.isArray(e)||x.isArguments(e)?t?o.apply(n,e):A(e,t,n):n.push(e)}),n)};x.flatten=function(e,t){return A(e,t,[])},x.without=function(e){return x.difference(e,u.call(arguments,1))},x.partition=function(e,t,n){t=k(t);var r=[],i=[];return T(e,function(e){(t.call(n,e)?r:i).push(e)}),[r,i]},x.uniq=x.unique=function(e,t,n,r){x.isFunction(t)&&(r=n,n=t,t=!1);var i=n?x.map(e,n,r):e,s=[],o=[];return T(i,function(n,r){if(t?!r||o[o.length-1]!==n:!x.contains(o,n))o.push(n),s.push(e[r])}),s},x.union=function(){return x.uniq(x.flatten(arguments,!0))},x.intersection=function(e){var t=u.call(arguments,1);return x.filter(x.uniq(e),function(e){return x.every(t,function(t){return x.contains(t,e)})})},x.difference=function(e){var t=a.apply(r,u.call(arguments,1));return x.filter(e,function(e){return!x.contains(t,e)})},x.zip=function(){var e=x.max(x.pluck(arguments,"length").concat(0)),t=new Array(e);for(var n=0;n<e;n++)t[n]=x.pluck(arguments,""+n);return t},x.object=function(e,t){if(e==null)return{};var n={};for(var r=0,i=e.length;r<i;r++)t?n[e[r]]=t[r]:n[e[r][0]]=e[r][1];return n},x.indexOf=function(e,t,n){if(e==null)return-1;var r=0,i=e.length;if(n){if(typeof n!="number")return r=x.sortedIndex(e,t),e[r]===t?r:-1;r=n<0?Math.max(0,i+n):n}if(y&&e.indexOf===y)return e.indexOf(t,n);for(;r<i;r++)if(e[r]===t)return r;return-1},x.lastIndexOf=function(e,t,n){if(e==null)return-1;var r=n!=null;if(b&&e.lastIndexOf===b)return r?e.lastIndexOf(t,n):e.lastIndexOf(t);var i=r?n:e.length;while(i--)if(e[i]===t)return i;return-1},x.range=function(e,t,n){arguments.length<=1&&(t=e||0,e=0),n=arguments[2]||1;var r=Math.max(Math.ceil((t-e)/n),0),i=0,s=new Array(r);while(i<r)s[i++]=e,e+=n;return s};var O=function(){};x.bind=function(e,t){var n,r;if(S&&e.bind===S)return S.apply(e,u.call(arguments,1));if(!x.isFunction(e))throw new TypeError;return n=u.call(arguments,2),r=function(){if(this instanceof r){O.prototype=e.prototype;var i=new O;O.prototype=null;var s=e.apply(i,n.concat(u.call(arguments)));return Object(s)===s?s:i}return e.apply(t,n.concat(u.call(arguments)))}},x.partial=function(e){var t=u.call(arguments,1);return function(){var n=0,r=t.slice();for(var i=0,s=r.length;i<s;i++)r[i]===x&&(r[i]=arguments[n++]);while(n<arguments.length)r.push(arguments[n++]);return e.apply(this,r)}},x.bindAll=function(e){var t=u.call(arguments,1);if(t.length===0)throw new Error("bindAll must be passed function names");return T(t,function(t){e[t]=x.bind(e[t],e)}),e},x.memoize=function(e,t){var n={};return t||(t=x.identity),function(){var r=t.apply(this,arguments);return x.has(n,r)?n[r]:n[r]=e.apply(this,arguments)}},x.delay=function(e,t){var n=u.call(arguments,2);return setTimeout(function(){return e.apply(null,n)},t)},x.defer=function(e){return x.delay.apply(x,[e,1].concat(u.call(arguments,1)))},x.throttle=function(e,t,n){var r,i,s,o=null,u=0;n||(n={});var a=function(){u=n.leading===!1?0:x.now(),o=null,s=e.apply(r,i),r=i=null};return function(){var f=x.now();!u&&n.leading===!1&&(u=f);var l=t-(f-u);return r=this,i=arguments,l<=0?(clearTimeout(o),o=null,u=f,s=e.apply(r,i),r=i=null):!o&&n.trailing!==!1&&(o=setTimeout(a,l)),s}},x.debounce=function(e,t,n){var r,i,s,o,u,a=function(){var f=x.now()-o;f<t?r=setTimeout(a,t-f):(r=null,n||(u=e.apply(s,i),s=i=null))};return function(){s=this,i=arguments,o=x.now();var f=n&&!r;return r||(r=setTimeout(a,t)),f&&(u=e.apply(s,i),s=i=null),u}},x.once=function(e){var t=!1,n;return function(){return t?n:(t=!0,n=e.apply(this,arguments),e=null,n)}},x.wrap=function(e,t){return x.partial(t,e)},x.compose=function(){var e=arguments;return function(){var t=arguments;for(var n=e.length-1;n>=0;n--)t=[e[n].apply(this,t)];return t[0]}},x.after=function(e,t){return function(){if(--e<1)return t.apply(this,arguments)}},x.keys=function(e){if(!x.isObject(e))return[];if(E)return E(e);var t=[];for(var n in e)x.has(e,n)&&t.push(n);return t},x.values=function(e){var t=x.keys(e),n=t.length,r=new Array(n);for(var i=0;i<n;i++)r[i]=e[t[i]];return r},x.pairs=function(e){var t=x.keys(e),n=t.length,r=new Array(n);for(var i=0;i<n;i++)r[i]=[t[i],e[t[i]]];return r},x.invert=function(e){var t={},n=x.keys(e);for(var r=0,i=n.length;r<i;r++)t[e[n[r]]]=n[r];return t},x.functions=x.methods=function(e){var t=[];for(var n in e)x.isFunction(e[n])&&t.push(n);return t.sort()},x.extend=function(e){return T(u.call(arguments,1),function(t){if(t)for(var n in t)e[n]=t[n]}),e},x.pick=function(e){var t={},n=a.apply(r,u.call(arguments,1));return T(n,function(n){n in e&&(t[n]=e[n])}),t},x.omit=function(e){var t={},n=a.apply(r,u.call(arguments,1));for(var i in e)x.contains(n,i)||(t[i]=e[i]);return t},x.defaults=function(e){return T(u.call(arguments,1),function(t){if(t)for(var n in t)e[n]===void 0&&(e[n]=t[n])}),e},x.clone=function(e){return x.isObject(e)?x.isArray(e)?e.slice():x.extend({},e):e},x.tap=function(e,t){return t(e),e};var M=function(e,t,n,r){if(e===t)return e!==0||1/e==1/t;if(e==null||t==null)return e===t;e instanceof x&&(e=e._wrapped),t instanceof x&&(t=t._wrapped);var i=f.call(e);if(i!=f.call(t))return!1;switch(i){case"[object String]":return e==String(t);case"[object Number]":return e!=+e?t!=+t:e==0?1/e==1/t:e==+t;case"[object Date]":case"[object Boolean]":return+e==+t;case"[object RegExp]":return e.source==t.source&&e.global==t.global&&e.multiline==t.multiline&&e.ignoreCase==t.ignoreCase}if(typeof e!="object"||typeof t!="object")return!1;var s=n.length;while(s--)if(n[s]==e)return r[s]==t;var o=e.constructor,u=t.constructor;if(o!==u&&!(x.isFunction(o)&&o instanceof o&&x.isFunction(u)&&u instanceof u)&&"constructor"in e&&"constructor"in t)return!1;n.push(e),r.push(t);var a=0,l=!0;if(i=="[object Array]"){a=e.length,l=a==t.length;if(l)while(a--)if(!(l=M(e[a],t[a],n,r)))break}else{for(var c in e)if(x.has(e,c)){a++;if(!(l=x.has(t,c)&&M(e[c],t[c],n,r)))break}if(l){for(c in t)if(x.has(t,c)&&!(a--))break;l=!a}}return n.pop(),r.pop(),l};x.isEqual=function(e,t){return M(e,t,[],[])},x.isEmpty=function(e){if(e==null)return!0;if(x.isArray(e)||x.isString(e))return e.length===0;for(var t in e)if(x.has(e,t))return!1;return!0},x.isElement=function(e){return!!e&&e.nodeType===1},x.isArray=w||function(e){return f.call(e)=="[object Array]"},x.isObject=function(e){return e===Object(e)},T(["Arguments","Function","String","Number","Date","RegExp"],function(e){x["is"+e]=function(t){return f.call(t)=="[object "+e+"]"}}),x.isArguments(arguments)||(x.isArguments=function(e){return!!e&&!!x.has(e,"callee")}),typeof /./!="function"&&(x.isFunction=function(e){return typeof e=="function"}),x.isFinite=function(e){return isFinite(e)&&!isNaN(parseFloat(e))},x.isNaN=function(e){return x.isNumber(e)&&e!=+e},x.isBoolean=function(e){return e===!0||e===!1||f.call(e)=="[object Boolean]"},x.isNull=function(e){return e===null},x.isUndefined=function(e){return e===void 0},x.has=function(e,t){return l.call(e,t)},x.noConflict=function(){return e._=t,this},x.identity=function(e){return e},x.constant=function(e){return function(){return e}},x.property=function(e){return function(t){return t[e]}},x.matches=function(e){return function(t){if(t===e)return!0;for(var n in e)if(e[n]!==t[n])return!1;return!0}},x.times=function(e,t,n){var r=Array(Math.max(0,e));for(var i=0;i<e;i++)r[i]=t.call(n,i);return r},x.random=function(e,t){return t==null&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))},x.now=Date.now||function(){return(new Date).getTime()};var _={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"}};_.unescape=x.invert(_.escape);var D={escape:new RegExp("["+x.keys(_.escape).join("")+"]","g"),unescape:new RegExp("("+x.keys(_.unescape).join("|")+")","g")};x.each(["escape","unescape"],function(e){x[e]=function(t){return t==null?"":(""+t).replace(D[e],function(t){return _[e][t]})}}),x.result=function(e,t){if(e==null)return void 0;var n=e[t];return x.isFunction(n)?n.call(e):n},x.mixin=function(e){T(x.functions(e),function(t){var n=x[t]=e[t];x.prototype[t]=function(){var e=[this._wrapped];return o.apply(e,arguments),F.call(this,n.apply(x,e))}})};var P=0;x.uniqueId=function(e){var t=++P+"";return e?e+t:t},x.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var H=/(.)^/,B={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},j=/\\|'|\r|\n|\t|\u2028|\u2029/g;x.template=function(e,t,n){var r;n=x.defaults({},n,x.templateSettings);var i=new RegExp([(n.escape||H).source,(n.interpolate||H).source,(n.evaluate||H).source].join("|")+"|$","g"),s=0,o="__p+='";e.replace(i,function(t,n,r,i,u){return o+=e.slice(s,u).replace(j,function(e){return"\\"+B[e]}),n&&(o+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'"),r&&(o+="'+\n((__t=("+r+"))==null?'':__t)+\n'"),i&&(o+="';\n"+i+"\n__p+='"),s=u+t.length,t}),o+="';\n",n.variable||(o="with(obj||{}){\n"+o+"}\n"),o="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+o+"return __p;\n";try{r=new Function(n.variable||"obj","_",o)}catch(u){throw u.source=o,u}if(t)return r(t,x);var a=function(e){return r.call(this,e,x)};return a.source="function("+(n.variable||"obj")+"){\n"+o+"}",a},x.chain=function(e){return x(e).chain()};var F=function(e){return this._chain?x(e).chain():e};x.mixin(x),T(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=r[e];x.prototype[e]=function(){var n=this._wrapped;return t.apply(n,arguments),(e=="shift"||e=="splice")&&n.length===0&&delete n[0],F.call(this,n)}}),T(["concat","join","slice"],function(e){var t=r[e];x.prototype[e]=function(){return F.call(this,t.apply(this._wrapped,arguments))}}),x.extend(x.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}}),typeof define=="function"&&define.amd&&define("underscore",[],function(){return x})}.call(this),function(){var e=this,t=e.Backbone,n;typeof exports!="undefined"?n=exports:n=e.Backbone={},n.VERSION="0.5.3";var r=e._;!r&&typeof require!="undefined"&&(r=require("underscore")._);var i=e.jQuery||e.Zepto;n.noConflict=function(){return e.Backbone=t,this},n.emulateHTTP=!1,n.emulateJSON=!1,n.Events={bind:function(e,t,n){var r=this._callbacks||(this._callbacks={}),i=r[e]||(r[e]=[]);return i.push([t,n]),this},unbind:function(e,t){var n;if(!e)this._callbacks={};else if(n=this._callbacks)if(!t)n[e]=[];else{var r=n[e];if(!r)return this;for(var i=0,s=r.length;i<s;i++)if(r[i]&&t===r[i][0]){r[i]=null;break}}return this},trigger:function(e){var t,n,r,i,s,o=2;if(!(n=this._callbacks))return this;while(o--){r=o?e:"all";if(t=n[r])for(var u=0,a=t.length;u<a;u++)(i=t[u])?(s=o?Array.prototype.slice.call(arguments,1):arguments,i[0].apply(i[1]||this,s)):(t.splice(u,1),u--,a--)}return this}},n.Model=function(e,t){var n;e||(e={});if(n=this.defaults)r.isFunction(n)&&(n=n.call(this)),e=r.extend({},n,e);this.attributes={},this._escapedAttributes={},this.cid=r.uniqueId("c"),this.set(e,{silent:!0}),this._changed=!1,this._previousAttributes=r.clone(this.attributes),t&&t.collection&&(this.collection=t.collection),this.initialize(e,t)},r.extend(n.Model.prototype,n.Events,{_previousAttributes:null,_changed:!1,idAttribute:"id",initialize:function(){},toJSON:function(){return r.clone(this.attributes)},get:function(e){return this.attributes[e]},escape:function(e){var t;if(t=this._escapedAttributes[e])return t;var n=this.attributes[e];return this._escapedAttributes[e]=S(n==null?"":""+n)},has:function(e){return this.attributes[e]!=null},set:function(e,t){t||(t={});if(!e)return this;e.attributes&&(e=e.attributes);var n=this.attributes,i=this._escapedAttributes;if(!t.silent&&this.validate&&!this._performValidation(e,t))return!1;this.idAttribute in e&&(this.id=e[this.idAttribute]);var s=this._changing;this._changing=!0;for(var o in e){var u=e[o];r.isEqual(n[o],u)||(n[o]=u,delete i[o],this._changed=!0,t.silent||this.trigger("change:"+o,this,u,t))}return!s&&!t.silent&&this._changed&&this.change(t),this._changing=!1,this},unset:function(e,t){if(e in this.attributes){t||(t={});var n=this.attributes[e],r={};return r[e]=void 0,!t.silent&&this.validate&&!this._performValidation(r,t)?!1:(delete this.attributes[e],delete this._escapedAttributes[e],e==this.idAttribute&&delete this.id,this._changed=!0,t.silent||(this.trigger("change:"+e,this,void 0,t),this.change(t)),this)}return this},clear:function(e){e||(e={});var t,n=this.attributes,r={};for(t in n)r[t]=void 0;if(!e.silent&&this.validate&&!this._performValidation(r,e))return!1;this.attributes={},this._escapedAttributes={},this._changed=!0;if(!e.silent){for(t in n)this.trigger("change:"+t,this,void 0,e);this.change(e)}return this},fetch:function(e){e||(e={});var t=this,r=e.success;return e.success=function(n,i,s){if(!t.set(t.parse(n,s),e))return!1;r&&r(t,n)},e.error=E(e.error,t,e),(this.sync||n.sync).call(this,"read",this,e)},save:function(e,t){t||(t={});if(e&&!this.set(e,t))return!1;var r=this,i=t.success;t.success=function(e,n,s){if(!r.set(r.parse(e,s),t))return!1;i&&i(r,e,s)},t.error=E(t.error,r,t);var s=this.isNew()?"create":"update";return(this.sync||n.sync).call(this,s,this,t)},destroy:function(e){e||(e={});if(this.isNew())return this.trigger("destroy",this,this.collection,e);var t=this,r=e.success;return e.success=function(n){t.trigger("destroy",t,t.collection,e),r&&r(t,n)},e.error=E(e.error,t,e),(this.sync||n.sync).call(this,"delete",this,e)},url:function(){var e=b(this.collection)||this.urlRoot||w();return this.isNew()?e:e+(e.charAt(e.length-1)=="/"?"":"/")+encodeURIComponent(this.id)},parse:function(e,t){return e},clone:function(){return new this.constructor(this)},isNew:function(){return this.id==null},change:function(e){this.trigger("change",this,e),this._previousAttributes=r.clone(this.attributes),this._changed=!1},hasChanged:function(e){return e?this._previousAttributes[e]!=this.attributes[e]:this._changed},changedAttributes:function(e){e||(e=this.attributes);var t=this._previousAttributes,n=!1;for(var i in e)r.isEqual(t[i],e[i])||(n=n||{},n[i]=e[i]);return n},previous:function(e){return!e||!this._previousAttributes?null:this._previousAttributes[e]},previousAttributes:function(){return r.clone(this._previousAttributes)},_performValidation:function(e,t){var n=this.validate(e);return n?(t.error?t.error(this,n,t):this.trigger("error",this,n,t),!1):!0}}),n.Collection=function(e,t){t||(t={}),t.comparator&&(this.comparator=t.comparator),r.bindAll(this,"_onModelEvent","_removeReference"),this._reset(),e&&this.reset(e,{silent:!0}),this.initialize.apply(this,arguments)},r.extend(n.Collection.prototype,n.Events,{model:n.Model,initialize:function(){},toJSON:function(){return this.map(function(e){return e.toJSON()})},add:function(e,t){if(r.isArray(e))for(var n=0,i=e.length;n<i;n++)this._add(e[n],t);else this._add(e,t);return this},remove:function(e,t){if(r.isArray(e))for(var n=0,i=e.length;n<i;n++)this._remove(e[n],t);else this._remove(e,t);return this},get:function(e){return e==null?null:this._byId[e.id!=null?e.id:e]},getByCid:function(e){return e&&this._byCid[e.cid||e]},at:function(e){return this.models[e]},sort:function(e){e||(e={});if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return this.models=this.sortBy(this.comparator),e.silent||this.trigger("reset",this,e),this},pluck:function(e){return r.map(this.models,function(t){return t.get(e)})},reset:function(e,t){return e||(e=[]),t||(t={}),this.each(this._removeReference),this._reset(),this.add(e,{silent:!0}),t.silent||this.trigger("reset",this,t),this},fetch:function(e){e||(e={});var t=this,r=e.success;return e.success=function(n,i,s){t[e.add?"add":"reset"](t.parse(n,s),e),r&&r(t,n)},e.error=E(e.error,t,e),(this.sync||n.sync).call(this,"read",this,e)},create:function(e,t){var n=this;t||(t={}),e=this._prepareModel(e,t);if(!e)return!1;var r=t.success;return t.success=function(e,i,s){n.add(e,t),r&&r(e,i,s)},e.save(null,t),e},parse:function(e,t){return e},chain:function(){return r(this.models).chain()},_reset:function(e){this.length=0,this.models=[],this._byId={},this._byCid={}},_prepareModel:function(e,t){if(e instanceof n.Model)e.collection||(e.collection=this);else{var r=e;e=new this.model(r,{collection:this}),e.validate&&!e._performValidation(r,t)&&(e=!1)}return e},_add:function(e,t){t||(t={}),e=this._prepareModel(e,t);if(!e)return!1;var n=this.getByCid(e);if(n)throw new Error(["Can't add the same model to a set twice",n.id]);this._byId[e.id]=e,this._byCid[e.cid]=e;var r=t.at!=null?t.at:this.comparator?this.sortedIndex(e,this.comparator):this.length;return this.models.splice(r,0,e),e.bind("all",this._onModelEvent),this.length++,t.silent||e.trigger("add",e,this,t),e},_remove:function(e,t){return t||(t={}),e=this.getByCid(e)||this.get(e),e?(delete this._byId[e.id],delete this._byCid[e.cid],this.models.splice(this.indexOf(e),1),this.length--,t.silent||e.trigger("remove",e,this,t),this._removeReference(e),e):null},_removeReference:function(e){this==e.collection&&delete e.collection,e.unbind("all",this._onModelEvent)},_onModelEvent:function(e,t,n,r){if((e=="add"||e=="remove")&&n!=this)return;e=="destroy"&&this._remove(t,r),t&&e==="change:"+t.idAttribute&&(delete this._byId[t.previous(t.idAttribute)],this._byId[t.id]=t),this.trigger.apply(this,arguments)}});var s=["forEach","each","map","reduce","reduceRight","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","sortBy","sortedIndex","toArray","size","first","rest","last","without","indexOf","lastIndexOf","isEmpty","groupBy"];r.each(s,function(e){n.Collection.prototype[e]=function(){return r[e].apply(r,[this.models].concat(r.toArray(arguments)))}}),n.Router=function(e){e||(e={}),e.routes&&(this.routes=e.routes),this._bindRoutes(),this.initialize.apply(this,arguments)};var o=/:([\w\d]+)/g,u=/\*([\w\d]+)/g,a=/[-[\]{}()+?.,\\^$|#\s]/g;r.extend(n.Router.prototype,n.Events,{initialize:function(){},route:function(e,t,i){n.history||(n.history=new n.History),r.isRegExp(e)||(e=this._routeToRegExp(e)),n.history.route(e,r.bind(function(n){var r=this._extractParameters(e,n);i.apply(this,r),this.trigger.apply(this,["route:"+t].concat(r))},this))},navigate:function(e,t){n.history.navigate(e,t)},_bindRoutes:function(){if(!this.routes)return;var e=[];for(var t in this.routes)e.unshift([t,this.routes[t]]);for(var n=0,r=e.length;n<r;n++)this.route(e[n][0],e[n][1],this[e[n][1]])},_routeToRegExp:function(e){return e=e.replace(a,"\\$&").replace(o,"([^/]*)").replace(u,"(.*?)"),new RegExp("^"+e+"$")},_extractParameters:function(e,t){return e.exec(t).slice(1)}}),n.History=function(){this.handlers=[],r.bindAll(this,"checkUrl")};var f=/^#*/,l=/msie [\w.]+/,c=!1;r.extend(n.History.prototype,{interval:50,getFragment:function(e,t){if(e==null)if(this._hasPushState||t){e=window.location.pathname;var n=window.location.search;n&&(e+=n),e.indexOf(this.options.root)==0&&(e=e.substr(this.options.root.length))}else e=window.location.hash;return decodeURIComponent(e.replace(f,""))},start:function(e){if(c)throw new Error("Backbone.history has already been started");this.options=r.extend({},{root:"/"},this.options,e),this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&window.history&&window.history.pushState);var t=this.getFragment(),n=document.documentMode,s=l.exec(navigator.userAgent.toLowerCase())&&(!n||n<=7);s&&(this.iframe=i('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow,this.navigate(t)),this._hasPushState?i(window).bind("popstate",this.checkUrl):"onhashchange"in window&&!s?i(window).bind("hashchange",this.checkUrl):setInterval(this.checkUrl,this.interval),this.fragment=t,c=!0;var o=window.location,u=o.pathname==this.options.root;if(this._wantsPushState&&!this._hasPushState&&!u)return this.fragment=this.getFragment(null,!0),window.location.replace(this.options.root+"#"+this.fragment),!0;this._wantsPushState&&this._hasPushState&&u&&o.hash&&(this.fragment=o.hash.replace(f,""),window.history.replaceState({},document.title,o.protocol+"//"+o.host+this.options.root+this.fragment));if(!this.options.silent)return this.loadUrl()},route:function(e,t){this.handlers.unshift({route:e,callback:t})},checkUrl:function(e){var t=this.getFragment();t==this.fragment&&this.iframe&&(t=this.getFragment(this.iframe.location.hash));if(t==this.fragment||t==decodeURIComponent(this.fragment))return!1;this.iframe&&this.navigate(t),this.loadUrl()||this.loadUrl(window.location.hash)},loadUrl:function(e){var t=this.fragment=this.getFragment(e),n=r.any(this.handlers,function(e){if(e.route.test(t))return e.callback(t),!0});return n},navigate:function(e,t){var n=(e||"").replace(f,"");if(this.fragment==n||this.fragment==decodeURIComponent(n))return;if(this._hasPushState){var r=window.location;n.indexOf(this.options.root)!=0&&(n=this.options.root+n),this.fragment=n,window.history.pushState({},document.title,r.protocol+"//"+r.host+n)}else window.location.hash=this.fragment=n,this.iframe&&n!=this.getFragment(this.iframe.location.hash)&&(this.iframe.document.open().close(),this.iframe.location.hash=n);t&&this.loadUrl(e)}}),n.View=function(e){this.cid=r.uniqueId("view"),this._configure(e||{}),this._ensureElement(),this.delegateEvents(),this.initialize.apply(this,arguments)};var h=function(e){return i(e,this.el)},p=/^(\S+)\s*(.*)$/,d=["model","collection","el","id","attributes","className","tagName"];r.extend(n.View.prototype,n.Events,{tagName:"div",$:h,initialize:function(){},render:function(){return this},remove:function(){return i(this.el).remove(),this},make:function(e,t,n){var r=document.createElement(e);return t&&i(r).attr(t),n&&i(r).html(n),r},delegateEvents:function(e){if(!e&&!(e=this.events))return;r.isFunction(e)&&(e=e.call(this)),i(this.el).unbind(".delegateEvents"+this.cid);for(var t in e){var n=this[e[t]];if(!n)throw new Error('Event "'+e[t]+'" does not exist');var s=t.match(p),o=s[1],u=s[2];n=r.bind(n,this),o+=".delegateEvents"+this.cid,u===""?i(this.el).bind(o,n):i(this.el).delegate(u,o,n)}},_configure:function(e){this.options&&(e=r.extend({},this.options,e));for(var t=0,n=d.length;t<n;t++){var i=d[t];e[i]&&(this[i]=e[i])}this.options=e},_ensureElement:function(){if(!this.el){var e=this.attributes||{};this.id&&(e.id=this.id),this.className&&(e["class"]=this.className),this.el=this.make(this.tagName,e)}else r.isString(this.el)&&(this.el=i(this.el).get(0))}});var v=function(e,t){var n=y(this,e,t);return n.extend=this.extend,n};n.Model.extend=n.Collection.extend=n.Router.extend=n.View.extend=v;var m={create:"POST",update:"PUT","delete":"DELETE",read:"GET"};n.sync=function(e,t,s){var o=m[e],u=r.extend({type:o,dataType:"json"},s);return u.url||(u.url=b(t)||w()),!u.data&&t&&(e=="create"||e=="update")&&(u.contentType="application/json",u.data=JSON.stringify(t.toJSON())),n.emulateJSON&&(u.contentType="application/x-www-form-urlencoded",u.data=u.data?{model:u.data}:{}),n.emulateHTTP&&(o==="PUT"||o==="DELETE")&&(n.emulateJSON&&(u.data._method=o),u.type="POST",u.beforeSend=function(e){e.setRequestHeader("X-HTTP-Method-Override",o)}),u.type!=="GET"&&!n.emulateJSON&&(u.processData=!1),i.ajax(u)};var g=function(){},y=function(e,t,n){var i;return t&&t.hasOwnProperty("constructor")?i=t.constructor:i=function(){return e.apply(this,arguments)},r.extend(i,e),g.prototype=e.prototype,i.prototype=new g,t&&r.extend(i.prototype,t),n&&r.extend(i,n),i.prototype.constructor=i,i.__super__=e.prototype,i},b=function(e){return!e||!e.url?null:r.isFunction(e.url)?e.url():e.url},w=function(){throw new Error('A "url" property or function must be specified')},E=function(e,t,n){return function(r){e?e(t,r,n):t.trigger("error",t,r,n)}},S=function(e){return e.replace(/&(?!\w+;|#\d+;|#x[\da-f]+;)/gi,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2F;")}}.call(this),define("backbone",["jquery","underscore"],function(e){return function(){var t,n;return t||e.Backbone}}(this)),define("text",["module"],function(e){function v(e,t){return e===undefined||e===""?t:e}function m(e,t,n,r){if(t===r)return!0;if(e===n){if(e==="http")return v(t,"80")===v(r,"80");if(e==="https")return v(t,"443")===v(r,"443")}return!1}var t,n,r,i,s,o=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],u=/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,a=/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,f=typeof location!="undefined"&&location.href,l=f&&location.protocol&&location.protocol.replace(/\:/,""),c=f&&location.hostname,h=f&&(location.port||undefined),p={},d=e.config&&e.config()||{};t={version:"2.0.15",strip:function(e){if(e){e=e.replace(u,"");var t=e.match(a);t&&(e=t[1])}else e="";return e},jsEscape:function(e){return e.replace(/(['\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r").replace(/[\u2028]/g,"\\u2028").replace(/[\u2029]/g,"\\u2029")},createXhr:d.createXhr||function(){var e,t,n;if(typeof XMLHttpRequest!="undefined")return new XMLHttpRequest;if(typeof ActiveXObject!="undefined")for(t=0;t<3;t+=1){n=o[t];try{e=new ActiveXObject(n)}catch(r){}if(e){o=[n];break}}return e},parseName:function(e){var t,n,r,i=!1,s=e.lastIndexOf("."),o=e.indexOf("./")===0||e.indexOf("../")===0;return s!==-1&&(!o||s>1)?(t=e.substring(0,s),n=e.substring(s+1)):t=e,r=n||t,s=r.indexOf("!"),s!==-1&&(i=r.substring(s+1)==="strip",r=r.substring(0,s),n?n=r:t=r),{moduleName:t,ext:n,strip:i}},xdRegExp:/^((\w+)\:)?\/\/([^\/\\]+)/,useXhr:function(e,n,r,i){var s,o,u,a=t.xdRegExp.exec(e);return a?(s=a[2],o=a[3],o=o.split(":"),u=o[1],o=o[0],(!s||s===n)&&(!o||o.toLowerCase()===r.toLowerCase())&&(!u&&!o||m(s,u,n,i))):!0},finishLoad:function(e,n,r,i){r=n?t.strip(r):r,d.isBuild&&(p[e]=r),i(r)},load:function(e,n,r,i){if(i&&i.isBuild&&!i.inlineText){r();return}d.isBuild=i&&i.isBuild;var s=t.parseName(e),o=s.moduleName+(s.ext?"."+s.ext:""),u=n.toUrl(o),a=d.useXhr||t.useXhr;if(u.indexOf("empty:")===0){r();return}!f||a(u,l,c,h)?t.get(u,function(n){t.finishLoad(e,s.strip,n,r)},function(e){r.error&&r.error(e)}):n([o],function(e){t.finishLoad(s.moduleName+"."+s.ext,s.strip,e,r)})},write:function(e,n,r,i){if(p.hasOwnProperty(n)){var s=t.jsEscape(p[n]);r.asModule(e+"!"+n,"define(function () { return '"+s+"';});\n")}},writeFile:function(e,n,r,i,s){var o=t.parseName(n),u=o.ext?"."+o.ext:"",a=o.moduleName+u,f=r.toUrl(o.moduleName+u)+".js";t.load(a,r,function(n){var r=function(e){return i(f,e)};r.asModule=function(e,t){return i.asModule(e,f,t)},t.write(e,a,r,s)},s)}};if(d.env==="node"||!d.env&&typeof process!="undefined"&&process.versions&&!!process.versions.node&&!process.versions["node-webkit"]&&!process.versions["atom-shell"])n=require.nodeRequire("fs"),t.get=function(e,t,r){try{var i=n.readFileSync(e,"utf8");i[0]==="﻿"&&(i=i.substring(1)),t(i)}catch(s){r&&r(s)}};else if(d.env==="xhr"||!d.env&&t.createXhr())t.get=function(e,n,r,i){var s=t.createXhr(),o;s.open("GET",e,!0);if(i)for(o in i)i.hasOwnProperty(o)&&s.setRequestHeader(o.toLowerCase(),i[o]);d.onXhr&&d.onXhr(s,e),s.onreadystatechange=function(t){var i,o;s.readyState===4&&(i=s.status||0,i>399&&i<600?(o=new Error(e+" HTTP status: "+i),o.xhr=s,r&&r(o)):n(s.responseText),d.onXhrComplete&&d.onXhrComplete(s,e))},s.send(null)};else if(d.env==="rhino"||!d.env&&typeof Packages!="undefined"&&typeof java!="undefined")t.get=function(e,t){var n,r,i="utf-8",s=new java.io.File(e),o=java.lang.System.getProperty("line.separator"),u=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(s),i)),a="";try{n=new java.lang.StringBuffer,r=u.readLine(),r&&r.length()&&r.charAt(0)===65279&&(r=r.substring(1)),r!==null&&n.append(r);while((r=u.readLine())!==null)n.append(o),n.append(r);a=String(n.toString())}finally{u.close()}t(a)};else if(d.env==="xpconnect"||!d.env&&typeof Components!="undefined"&&Components.classes&&Components.interfaces)r=Components.classes,i=Components.interfaces,Components.utils["import"]("resource://gre/modules/FileUtils.jsm"),s="@mozilla.org/windows-registry-key;1"in r,t.get=function(e,t){var n,o,u,a={};s&&(e=e.replace(/\//g,"\\")),u=new FileUtils.File(e);try{n=r["@mozilla.org/network/file-input-stream;1"].createInstance(i.nsIFileInputStream),n.init(u,1,0,!1),o=r["@mozilla.org/intl/converter-input-stream;1"].createInstance(i.nsIConverterInputStream),o.init(n,"utf-8",n.available(),i.nsIConverterInputStream.DEFAULT_REPLACEMENT_CHARACTER),o.readString(n.available(),a),o.close(),n.close(),t(a.value)}catch(f){throw new Error((u&&u.path||"")+": "+f)}};return t}),define("text!template/login.html",[],function(){return'\n<div class="login_container">\n	<form id="login">\n		<h1 class="login_heading"><%= messages("login.sign") %> <span></h1>\n		<div class="form-group">\n			<label for="login_username"><%= messages("email") %></label>\n			<input type="text" class="form-control input-lg" value="" id="loginEmail">\n		</div>\n		<div class="form-group">\n			<label for="login_password"><%= messages("password") %></label>\n			<input type="password" class="form-control input-lg" value="" id="loginPassword">\n		</div>\n		<div class="submit_section">\n			<button class="btn btn-lg btn-success btn-block"><%= messages("login") %></button>\n		</div>\n		<span class="help-block"><a id="forgot" data-toggle="modal" data-target="#forgot-dialog"><%= messages("forgot_password") %>?</a></span>\n		<div class="form-group" id="login-messages"> </div>\n		\n	</form>\n</div>\n\n<div class="modal fade" id="forgot-dialog" tabindex="-1" role="dialog" aria-labelledby="" aria-hidden="true">\n  <div class="modal-dialog">\n    <div class="modal-content">\n      <form id="forgotForm">\n      <div class="modal-header">\n        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>\n        <h4 class="modal-title"><%= messages("forgot_password") %></h4>\n      </div>\n      <div class="modal-body">\n      	<div class="row">\n      	<div class="form-group">\n			<p><%= messages("login.forgot_dialog") %></p>\n		</div>\n		</div>\n		<div class="row">\n		<div class="col-lg-12">\n			<label><%= messages("email") %></label>\n			<input type="text" id="email">\n		</div>\n		</div>\n      </div>\n      <div class="modal-footer">\n        <button type="button" class="btn btn-default" data-dismiss="modal"><%= messages("cancel") %></button>\n        <button type="button" class="btn btn-primary">OK</button>\n      </div>\n      </form>\n    </div>\n  </div>\n</div>\n\n\n\n\n\n'}),define("text!template/locale.html",[],function(){return'<a href="#" class="dropdown-toggle" data-toggle="dropdown">\n	<i class="fa fa-language"></i> <span ><%= messages("language") %> <i class="fa fa-caret-down"></i></span>\n</a>\n<ul class="dropdown-menu dropdown-menu-right">\n    <li><a onclick="Heiduc.changeLanguageCall(\'zh_CN\')">中文(简体)</a></li>\n    <li><a onclick="Heiduc.changeLanguageCall(\'zh_TW\')">中文(繁體)</a></li>\n	<li><a onclick="Heiduc.changeLanguageCall(\'en\')">English</a></li>\n    <li><a onclick="Heiduc.changeLanguageCall(\'de\')">Deutsch</a></li>\n    <li><a onclick="Heiduc.changeLanguageCall(\'es\')">Español</a></li>\n    <li><a onclick="Heiduc.changeLanguageCall(\'sv\')">Swedish</a></li>\n    <li><a onclick="Heiduc.changeLanguageCall(\'ru\')">Русский</a></li>\n    <li><a onclick="Heiduc.changeLanguageCall(\'cs\')">Česky</a></li>\n    <li><a onclick="Heiduc.changeLanguageCall(\'tr\')">Türkçe</a></li>\n    <li><a onclick="Heiduc.changeLanguageCall(\'pt_BR\')">Brazilian Portuguese</a></li>\n    <li><a onclick="Heiduc.changeLanguageCall(\'ja\')">日本語</a></li>\n</ul>'}),define("text!template/login-topbar.html",[],function(){return'<!-- HEADER -->\n<nav class="header-navbar">\n    <div class="navbar-header clearfix">\n	<a class="navbar-toggle collapsed" data-toggle="collapse" data-target="#mini-navbar-collapse">\n	    <span class="sr-only">Toggle navigation</span>\n	    <i class="fa fa-plus"></i>\n	</a>\n	\n	<a class="logo pull-left" href="#">\n	    <img src="/static/assets/img/logo.png" width="110" alt="Heiduc Logo">\n	</a>\n	\n    </div>\n  \n    <div class="collapse navbar-collapse" id="mini-navbar-collapse">\n	\n	<ul class="nav navbar-nav navbar-right">\n		<li>\n			<%= locale %>\n		</li>\n	</ul>\n    </div><!-- navbar-collapse -->\n</nav>\n<!-- HEADER -->\n\n\n	\n'}),define("view/LoginView",["text!template/login.html","text!template/locale.html","text!template/login-topbar.html"],function(e,t,n){function r(e){e.preventDefault();var t=$("#email").val();return t?($("#loading").show(),Heiduc.jsonrpc.loginFrontService.forgotPassword(function(t){$("#loading").hide(),t.result=="success"?Heiduc.info(messages("login.password_letter_success")):Heiduc.error(e.message),$("#forgot-dialog").dialog("close")},t.toLowerCase()),!1):(Heiduc.error(messages("email_is_empty")),!1)}return Backbone.View.extend({el:$("#content"),events:{"click #forgot":"forgot_click","submit form#login":"login_submit"},css:"/static/css/login.css",forgot_click:function(){this.$("#email").val("")},login_submit:function(e){e.preventDefault();if(Heiduc.app.loggedIn)return Heiduc.app.trigger("login"),!1;var t=this.$("#loginEmail").val(),n=this.$("#loginPassword").val();return t==""?Heiduc.errorMessage("#login-messages",messages("email_is_empty")):Heiduc.jsonrpc.loginFrontService.login(function(e,t){if(Heiduc.serviceFailed(t))return!1;if(e.result=="success"){if(e.data=="siteUser")return Heiduc.error(messages("permission_denied")),!1;Heiduc.infoMessage("#login-messages",messages("success_logging_in")),Heiduc.app.loggedIn=!0,Heiduc.app.trigger("login")}else Heiduc.errorMessage("#login-messages",e.message)},t,n),!1},render:function(){Heiduc.addCSSFile(this.css),this.el.html($.jqote(e,{messages:messages})),$("#forgotForm").submit(r),$("#forgotCancelButton").click(function(){$("#forgot-dialog").dialog("close")});var i=_.template(t,{messages:messages});return $("#topbar").html(_.template(n,{messages:messages,locale:i})),this},remove:function(){this.el.html(""),Heiduc.removeCSSFile(this.css)}})}),define("text!template/pages.html",[],function(){return'\n<div class="row">\n	<div class="col-lg-12">\n		<div class="panel panel-default">\n			<div class="panel-body">\n				<div class="row">\n					<div class="col-md-12">\n						<ul class="nav nav-tabs" id="tabs_a">\n							<li class="active"><a data-toggle="tab" href="#tab-1"><%= messages("pages") %></a></li>\n							<li><a href="#structures"><%= messages("structures") %></a></li>\n						</ul>\n						<div class="tab-content" id="tabs_content_a">\n							<div id="tab-1" class="tab-pane fade in active">\n								<div id="pageSearch"></div>\n						        <div style="float:left">\n						          <div id="showTitleDiv">\n						            <a id="showTitle"><%= messages(\'show_names\') %></a>\n						            <a id="invertOrder"><%= messages(\'invert_order\') %></a>\n						          </div>\n						          <ul id="pages-tree"><img src="/static/images/ajax-loader.gif" /></ul>\n						        </div>\n								\n							</div>\n						</div>\n					</div>\n				</div>\n			</div>\n		</div>\n	</div>\n</div>\n\n<div class="modal fade" id="page-dialog" tabindex="-1" role="dialog" aria-labelledby="" aria-hidden="true">\n  <div class="modal-dialog">\n    <div class="modal-content">\n      <div class="modal-header">\n        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>\n        <h4 class="modal-title"><%= messages("pages.new_page") %></h4>\n      </div>\n      <div class="modal-body">\n      	<form id="pageForm">\n		    <div class="form-row">\n		        <label><%= messages("pages.page_title") %></label>\n		        <input id="title"/>\n		    </div>\n		    <div class="form-row">\n		        <label><%= messages("pages.page_url") %></label>\n		        <span id="parentURL"></span> <input id="url"/>\n		    </div>\n		    <div id="pageMessages"></div>\n		    <div class="modal-footer">\n		        <button id="cancelDlgButton" type="button" class="btn btn-default" data-dismiss="modal"><%= messages("cancel") %></button>\n		        <button type="submit" class="btn btn-primary"><%= messages("save") %></button>\n		    </div>\n		  </form>\n      </div>	\n    </div>\n  </div>\n</div>\n\n\n\n'}),function(e){e.extend(e.fn,{swapClass:function(e,t){var n=this.filter("."+e);return this.filter("."+t).removeClass(t).addClass(e),n.removeClass(e).addClass(t),this},replaceClass:function(e,t){return this.filter("."+e).removeClass(e).addClass(t).end()},hoverClass:function(t){return t=t||"hover",this.hover(function(){e(this).addClass(t)},function(){e(this).removeClass(t)})},heightToggle:function(e,t){e?this.animate({height:"toggle"},e,t):this.each(function(){jQuery(this)[jQuery(this).is(":hidden")?"show":"hide"](),t&&t.apply(this,arguments)})},heightHide:function(e,t){e?this.animate({height:"hide"},e,t):(this.hide(),t&&this.each(t))},prepareBranches:function(e){return e.prerendered||(this.filter(":last-child:not(ul)").addClass(t.last),this.filter((e.collapsed?"":"."+t.closed)+":not(."+t.open+")").find(">ul").hide()),this.filter(":has(>ul)")},applyClasses:function(n,r){this.filter(":has(>ul):not(:has(>a))").find(">span").unbind("click.treeview").bind("click.treeview",function(t){this==t.target&&r.apply(e(this).next())}).add(e("a",this)).hoverClass();if(!n.prerendered){this.filter(":has(>ul:hidden)").addClass(t.expandable).replaceClass(t.last,t.lastExpandable),this.not(":has(>ul:hidden)").addClass(t.collapsable).replaceClass(t.last,t.lastCollapsable);var i=this.find("div."+t.hitarea);i.length||(i=this.prepend('<div class="'+t.hitarea+'"/>').find("div."+t.hitarea)),i.removeClass().addClass(t.hitarea).each(function(){var t="";e.each(e(this).parent().attr("class").split(" "),function(){t+=this+"-hitarea "}),e(this).addClass(t)})}this.find("div."+t.hitarea).click(r)},treeview:function(n){function i(n,r){function i(r){return function(){return s.apply(e("div."+t.hitarea,n).filter(function(){return r?e(this).parent("."+r).length:!0})),!1}}e("a:eq(0)",r).click(i(t.collapsable)),e("a:eq(1)",r).click(i(t.expandable)),e("a:eq(2)",r).click(i())}function s(){e(this).parent().find(">.hitarea").swapClass(t.collapsableHitarea,t.expandableHitarea).swapClass(t.lastCollapsableHitarea,t.lastExpandableHitarea).end().swapClass(t.collapsable,t.expandable).swapClass(t.lastCollapsable,t.lastExpandable).find(">ul").heightToggle(n.animated,n.toggle),n.unique&&e(this).parent().siblings().find(">.hitarea").replaceClass(t.collapsableHitarea,t.expandableHitarea).replaceClass(t.lastCollapsableHitarea,t.lastExpandableHitarea).end().replaceClass(t.collapsable,t.expandable).replaceClass(t.lastCollapsable,t.lastExpandable).find(">ul").heightHide(n.animated,n.toggle)}function o(){function t(e){return e?1:0}var r=[];a.each(function(t,n){r[t]=e(n).is(":has(>ul:visible)")?1:0}),e.cookie(n.cookieId,r.join(""),n.cookieOptions)}function u(){var t=e.cookie(n.cookieId);if(t){var r=t.split("");a.each(function(t,n){e(n).find(">ul")[parseInt(r[t])?"show":"hide"]()})}}n=e.extend({cookieId:"treeview"},n);if(n.toggle){var r=n.toggle;n.toggle=function(){return r.apply(e(this).parent()[0],arguments)}}this.data("toggler",s),this.addClass("treeview");var a=this.find("li").prepareBranches(n);switch(n.persist){case"cookie":var f=n.toggle;n.toggle=function(){o(),f&&f.apply(this,arguments)},u();break;case"location":var l=this.find("a").filter(function(){return this.href.toLowerCase()==location.href.toLowerCase()});if(l.length){var c=l.addClass("selected").parents("ul, li").add(l.next()).show();n.prerendered&&c.filter("li").swapClass(t.collapsable,t.expandable).swapClass(t.lastCollapsable,t.lastExpandable).find(">.hitarea").swapClass(t.collapsableHitarea,t.expandableHitarea).swapClass(t.lastCollapsableHitarea,t.lastExpandableHitarea)}}return a.applyClasses(n,s),n.control&&(i(this,n.control),e(n.control).show()),this}}),e.treeview={};var t=e.treeview.classes={open:"open",closed:"closed",expandable:"expandable",expandableHitarea:"expandable-hitarea",lastExpandableHitarea:"lastExpandable-hitarea",collapsable:"collapsable",collapsableHitarea:"collapsable-hitarea",lastCollapsableHitarea:"lastCollapsable-hitarea",lastCollapsable:"lastCollapsable",lastExpandable:"lastExpandable",last:"last",hitarea:"hitarea"}}(jQuery),define("jquery.treeview",function(){}),Heiduc.PageSearchComponent=function(div){function onSearch(){$(div+" #pageSearchResult").html(""),$(div+" #progress").html('<img src="/static/images/ajax-loader.gif" />');var e={};e.query=$(div+" input[name=query]").val(),e.published=$(div+" #publishedSearch:checked").size()>0,e.unpublished=$(div+" #unpublishedSearch:checked").size()>0,e.fromDate=$(div+" input[name=from]").val(),e.toDate=$(div+" input[name=to]").val(),Heiduc.sendChannelCommand("pageSearch",e)}function onEnhancedSearch(){$(div+" #enhancedDiv").slideToggle();var e=messages("enhanced");$(div+" #enhancedSearch").text()==messages("enhanced")&&(e=messages("simple")),$(div+" #enhancedSearch").text(e)}function onChannelOpened(){$(div+" #search").toggle()}function onChannelMessage(message){var m=eval(message.responseBody);if(m.end){$(div+" #progress").html("");return}var h='<div><a href="/cms/page/content.vm?id='+m.id+'">'+m.title+"</a> "+messages("version")+": "+m.version+"<br>"+m.content;$(div+" #pageSearchResult").append(h)}function onChannelError(e){Heiduc.error(e.code+" "+e.description)}function onChannelClose(){}var h=messages("pages.search_pages")+' : <input name="query" type="text" /> '+'<input id="search" type="button" value="'+messages("search")+'"/> '+'<input id="clear" type="button" value="'+messages("clear")+'"/> '+'<span id="progress"></span> '+'<a id="enhancedSearch" href="#">'+messages("enhanced")+"</a>"+'<div id="enhancedDiv">'+' <div class="form-row">'+'  <input id="publishedSearch" type="checkbox" checked="checked"/>'+'   <label for="publishedSearch">'+messages("published")+"</label>"+'  <input id="unpublishedSearch" type="checkbox" checked="checked" />'+'   <label for="unpublishedSearch">'+messages("unpublished")+"</label><br/>"+" </div>"+' <div class="form-row">'+messages("change_date")+' <input class="datepicker" type="input" name="from" size="10"/> '+messages("to")+' <input class="datepicker" type="input" name="to" size="10"/>'+" </div>"+"</div>"+'<div id="pageSearchResult"></div>';return $(div).html(h),$(div+" #search").click(onSearch),$(div+" #clear").click(function(){$(div+" #pageSearchResult").html(""),$(div+" input[name=query]").val("")}),$(div+" #enhancedSearch").click(onEnhancedSearch),$(div+" #search").hide(),Heiduc.initChannel(onChannelOpened,onChannelMessage,onChannelError,onChannelClose),$(div+" input[name=query]").keypress(function(e){var t=e.keyCode?e.keyCode:e.which;if(t==13||t==10)onSearch(),e.preventDefault()}),this},define("view/pages/PageSearchComponent",function(){}),define("view/PagesView",["text!template/pages.html","jquery.treeview","view/pages/PageSearchComponent"],function(e){function u(){f(),c(),o=Heiduc.PageSearchComponent("#pageSearch")}function a(){return r&&r.friendlyURL=="/"}function f(){Heiduc.jsonrpc.pageService.getTree(function(e){n=e,s&&b(e),$("#pages-tree").html(l(e)),$("#pages-tree").treeview({animated:"fast",collapsed:!0,unique:!0,persist:"cookie",cookieId:"pageTree"}),$(".content-link").each(function(){$(this).mouseover(function(e){$(".page_edit").hide(),$(e.target).siblings(".page_edit").show()})}),$("#pages-tree li").each(function(){$(this).hover(function(e){$(".page_edit").hide(),$("> .page_edit",e.target).show()},function(e){})})})}function l(e){var t=encodeURIComponent(e.entity.friendlyURL),n=i?e.entity.title:e.entity.pageFriendlyURL;n||(n="/");var r=e.entity.hasPublishedVersion?"published":"unpublished",s=messages(r),o=' <img src="/static/images/'+r+'.png" title="'+s+'" width="16px" />';e.entity.hasPublishedVersion||(o=' <a onclick="Heiduc.app.pagesView.onPagePublish('+e.entity.id+')">'+'<img src="/static/images/'+r+'.png" title="'+s+'" width="16px" /></a>');var u="<li> "+o+' <a href="#page/content/'+e.entity.id+'" title="'+messages("page.edit_content")+'" class="content-link">'+n+"</a> "+'<span class="page_edit" style="display:none">'+'<a title="'+messages("add_child")+'" onclick="Heiduc.app.pagesView.onPageAdd(\''+e.entity.friendlyURL+'\')"><img src="/static/images/add.png"/></a> '+'<a title="'+messages("remove")+'" onclick="Heiduc.app.pagesView.onPageRemove(\''+e.entity.friendlyURL+"')\">"+'<img src="/static/images/02_x.png" /></a> '+'<a href="#page/'+e.entity.id+'" title="'+messages("page.edit_properties")+'">'+'<img src="/static/images/pencil.png" /></a> '+'<a onclick="Heiduc.app.pagesView.onChangeTitle('+e.entity.id+')" title="'+messages("page.edit_url_title")+'">'+'<img src="/static/images/globe.png" /></a>'+"</span>";return e.children.list.length>0&&(u+="<ul>",$.each(e.children.list,function(e,t){u+=l(t)}),u+="</ul>"),u+"</li>"}function c(){Heiduc.app.user.admin||$("#structuresTab").hide()}function h(e){if(e.title=="")return messages("title_is_empty");if(e.title.indexOf(",")!=-1)return messages("pages.coma_not_allowed");if(e.url==""&&(!r||r.friendlyURL!="/"))return messages("pages.url_is_empty");if(e.url.indexOf("/")!=-1)return messages("pages.slash_not_allowed")}function p(){var e={id:r==null?"":String(r.id),title:$("#title").val(),url:$("#url").val(),friendlyUrl:a()?"/":t+"/"+$("#url").val()},n=h(e);n?d(n):Heiduc.jsonrpc.pageService.savePage(function(e){e.result=="success"?(Heiduc.info(messages("pages.success_created")),$("#page-dialog").modal("hide"),u()):d(e.message)},Heiduc.javaMap(e))}function d(e){Heiduc.errorMessage("#pageMessages",e)}function v(e){return m(n,e)}function m(e,t){if(e.entity.id==t)return e;var n=null;return e.children.list.length>0&&$.each(e.children.list,function(e,r){var i=m(r,t);i!=null&&(n=i)}),n}function g(){i?$("#showTitle").html('<a href="#" onclick="Heiduc.app.pagesView.onShowTitle(false)">'+messages("show_names")+"</a>"):$("#showTitle").html('<a href="#" onclick="Heiduc.app.pagesView.onShowTitle(true)">'+messages("show_titles")+"</a>")}function y(){s?$("#invertOrder").html('<a href="#" onclick="Heiduc.app.pagesView.onInvertOrder(false)">'+messages("restore_order")+"</a>"):$("#invertOrder").html('<a href="#" onclick="Heiduc.app.pagesView.onInvertOrder(true)">'+messages("invert_order")+"</a>")}function b(e){e.children.list.reverse(),e.hasChildren&&$.each(e.children.list,function(e,t){b(t)})}var t=null,n=null,r=null,i=$.cookie("pages.showTitle")!="names",s=$.cookie("pages.invertOrder")=="true",o=null;return Backbone.View.extend({css:["/static/css/jquery.treeview.css","/static/css/pages.css"],el:$("#content"),events:{},initialize:function(){},render:function(){Heiduc.addCSSFiles(this.css),this.el.html(_.template(e,{messages:messages})),Heiduc.initJSONRpc(u),$("#pageForm").submit(function(){return p(),!1}),$("#title").change(this.onTitleChange),g(),y()},remove:function(){this.el.html(""),Heiduc.removeCSSFiles(this.css)},onPageRemove:function(e){if(e=="/")return;confirm(messages("are_you_sure"))&&Heiduc.jsonrpc.pageService.remove(function(e){Heiduc.showServiceMessages(e),u()},e)},onPageAdd:function(e){$("#ui-dialog-title-page-dialog").text(messages("pages.new_page")),t=e=="/"?"":e,$("#page-dialog").modal({show:!0}),$("#parentURL").html(t+"/"),$("#title").val(""),$("#url").val(""),$("#url").removeAttr("disabled"),$("#title").focus(),r=null},onTitleChange:function(){var e=$("#url").val(),t=$("#title").val();e==""&&!a()&&$("#url").val(Heiduc.urlFromTitle(t))},onInvertOrder:function(e){s=e,y(),s?$.cookie("pages.invertOrder","true",{path:"/",expires:10}):$.cookie("pages.invertOrder","false",{path:"/",expires:10}),u()},onPagePublish:function(e){confirm(messages("are_you_sure"))&&Heiduc.jsonrpc.pageService.approve(function(e){Heiduc.showServiceMessages(e),u()},e)},onShowTitle:function(e){i=e,g(),i?$.cookie("pages.showTitle","titles",{path:"/",expires:10}):$.cookie("pages.showTitle","names",{path:"/",expires:10}),u()},onChangeTitle:function(e){var n=v(e);r=n.entity,$("#ui-dialog-title-page-dialog").text(messages("pages.change_page")),t=r.parentUrl=="/"?"":r.parentUrl,$("#page-dialog").modal({show:!0}),$("#parentURL").html(t+"/"),$("#title").val(r.title),$("#url").val(r.pageFriendlyURL),$("#url").attr("disabled",a()),$("#title").focus()}})}),define("text!template/index.html",[],function(){return'<% if (!user.admin) { %>\n<div class="row">\n		<div class="col-md-12">\n			<div class="panel panel-default">\n				<div class="panel-body">\n			       	 欢迎使用\n			    </div>\n		    </div>\n		</div>\n</div>\n<% } %> \n<% if (user.admin) { %>\n<div class="row">\n		<div class="col-md-12">\n			<div class="panel panel-default">\n				<div class="panel-body">\n			        <img src="/static/images/pages.png" />\n			        <a href="#pages">\n			            <%= messages("index.content_pages") %>\n			        </a>\n			        <p><%= messages("index.content_pages.description") %></p>\n			    </div>\n		    </div>\n		</div>\n</div>\n<div class="row">\n		<div class="col-md-12">\n			<div class="panel panel-default">\n				<div class="panel-body">\n			        <img src="/static/images/templates.png" />\n			        <a href="#templates">\n			            <%= messages("index.design_templates") %>\n			        </a>\n			        <p><%= messages("index.design_templates.description") %></p>\n			    </div>\n		    </div>\n		</div>\n</div>\n<div class="row">\n		<div class="col-md-12">\n			<div class="panel panel-default">\n				<div class="panel-body">\n			        <img src="/static/images/folders.png" />\n			        <a href="#folders">\n			            <%= messages("index.file_resources_storage") %>\n			        </a>\n			        <p><%= messages("index.file_resources_storage.description") %></p>\n			    </div>\n		    </div>\n		</div>\n</div>\n<div class="row">\n		<div class="col-md-12">\n			<div class="panel panel-default">\n				<div class="panel-body">\n			        <img src="/static/images/config.png" />\n			        <a href="#config">\n			            <%= messages("index.site_configuration") %>\n			        </a>\n			        <p><%= messages("index.site_configuration.description") %></p>\n			    </div>\n		    </div>\n		</div>\n</div>\n<div class="row">\n		<div class="col-md-12">\n			<div class="panel panel-default">\n				<div class="panel-body">\n			        <img src="/static/images/plugins.png" />\n			        <a href="#plugins"><%= messages("index.plugins") %></a>\n			        <p><%= messages("index.plugins.description") %></p>\n			    </div>\n		    </div>\n		</div>\n</div>\n<% } %> \n'}),define("view/IndexView",["text!template/index.html"],function(e){return console.log("Loading IndexView.js"),Backbone.View.extend({el:$("#content"),render:function(){this.el.html(_.template(e,{user:Heiduc.app.user,messages:messages}))},remove:function(){this.el.html("")}})}),define("text!template/structures.html",[],function(){return'<div class="row">\n	<div class="col-lg-12">\n		<div class="panel panel-default">\n			<div class="panel-body">\n				<div class="row">\n					<div class="col-md-9">\n						<ul class="nav nav-tabs" id="tabs_a">\n							<li><a href="#pages"><%= messages("pages") %></a></li>\n							<li data-toggle="tab" class="active"><a href="#structures"><%= messages("structures") %></a></li>\n						</ul>\n						<div class="tab-content" id="tabs_content_a">\n							<div id="home_a" class="tab-pane fade in active">\n								<div class="form-group">\n									<div id="structures"><img src="/static/images/ajax-loader.gif" /></div>\n								</div>\n								\n						        <div class="form-sep">\n						            <input id="addButton" class="btn" type="button" value="<%= messages("add") %>"/>\n						            <input id="deleteButton" class="btn" type="button" value="<%= messages("delete") %>"/>\n								</div>\n								\n							</div>\n						</div>\n					</div>\n				</div>\n			</div>\n		</div>\n	</div>\n</div>\n\n'}),define("view/StructuresView",["text!template/structures.html"],function(e){function t(){Heiduc.jsonrpc.structureService.select(function(e){var t='<table class="table table-striped"><tr><th></th><th>'+messages("title")+"</th></tr>";$.each(e.list,function(e,n){t+='<tr><td><input type="checkbox" value="'+n.id+'" /></td><td><a href="#structure/'+n.id+'">'+n.title+"</a></td></tr>"}),$("#structures").html(t+"</table>"),$("#structures tr:even").addClass("even")})}function n(){location.href="#structure"}function r(){var e=new Array;$("#structures input:checked").each(function(){e.push(this.value)});if(e.length==0){Heiduc.info(messages("nothing_selected"));return}confirm(messages("are_you_sure"))&&Heiduc.jsonrpc.structureService.remove(function(e){Heiduc.showServiceMessages(e),t()},Heiduc.javaList(e))}return console.log("Loading StructuresView.js"),Backbone.View.extend({el:$("#content"),render:function(){this.el.html(_.template(e,{messages:messages})),t(),$("#addButton").click(n),$("#deleteButton").click(r)},remove:function(){this.el.html("")}})}),define("text!template/structure.html",[],function(){return'\n\n\n<div class="row">\n	<div class="col-lg-12">\n		<div class="panel panel-default">\n			<div class="panel-body">\n				<div class="row">\n					<div class="col-md-12">\n						<ul class="nav nav-tabs">\n							<li class="active"><a data-toggle="tab" href="#tab-1"><%= messages("structure") %></a></li>\n						    <li><a id="_structureXML" data-toggle="tab" href="#tab-2"><%= messages("structure.as_xml") %></a></li>\n						    <li><a data-toggle="tab" href="#tab-3"><%= messages("structure.templates") %></a></li>\n						</ul>\n						<div class="tab-content" id="tabs_content_a">\n							<div id="tab-1" class="tab-pane fade in active">\n								<div class="form-group">\n									<div class="row">\n										<div class="col-lg-9">\n											<label><%= messages("title") %></label>\n											<input type="text" id="title" class="form-control">\n										</div>\n									</div>\n									<div class="row">\n										<div class="col-lg-9">\n											<label><%= messages("fields") %></label>\n											<div id="fields"></div>\n										</div>\n									</div>\n									<div class="row">\n										<div class="col-lg-3">\n											<label><%= messages("structure.field_title") %></label>\n											<input type="text" id="fieldTitle" class="form-control">\n										</div>\n										<div class="col-lg-3">\n											<label><%= messages("structure.tag_name") %></label>\n											<input type="text" id="fieldName" class="form-control">\n										</div>\n										<div class="col-lg-3">\n											<label>Type</label>\n											<select id="fieldType" class="form-control">\n									            <option value="TEXT"><%= messages("text") %></option>\n									            <option value="TEXTAREA"><%= messages("text_area") %></option>\n									            <option value="RESOURCE"><%= messages("resource_link") %></option>\n									            <option value="DATE"><%= messages("date") %></option>\n									        </select>\n										</div>\n										<div class="col-lg-3">\n											<label>Action</label>\n											<a id="addField"> <%= messages("add_field") %></a>\n										</div>\n									</div>\n								</div>\n								<div class="form-sep">\n									<input id="saveContinueButton" class="btn" type="button" value="<%= messages("save_continue")%>" />\n							        <input id="saveButton" class="btn" type="button" value="<%= messages("save")%>" />\n							        <input id="cancelButton" class="btn" type="button" value="<%= messages("cancel")%>" />\n								</div>\n							</div>\n							<div id="tab-2" class="tab-pane fade">\n								<div class="form-group">\n									<div class="row">\n									<div class="col-md-9">\n										<label class="checkbox-inline">\n											<input type="checkbox" id="autosave"> <%= messages("autosave")%>\n										</label>\n									</div>\n									</div>\n									<div class="row">\n									<div class="col-md-9">\n										<textarea id="xmlContent" rows="20" cols="80"></textarea>\n									</div>\n									</div>\n								</div>\n								<div class="form-sep">\n									<div class="row">\n									<div class="col-md-9">\n									<input id="saveContinueXMLButton" class="btn" type="button" value="<%= messages("save_continue")%>" />\n							        <input id="saveXMLButton" class="btn" type="button" value="<%= messages("save")%>" />\n							        <input id="cancelXMLButton" class="btn" type="button" value="<%= messages("cancel")%>" />\n							        </div>\n									</div>\n								</div>\n							</div>\n							<div id="tab-3" class="tab-pane fade">\n								<div class="form-group">\n									<div class="row">\n									<div class="col-md-9">\n										<div id="templates"><img src="/static/images/ajax-loader.gif" /></div>\n									</div>\n									</div>\n								</div>\n								<div class="form-sep">\n									<div class="row">\n									<div class="col-md-9">\n									<input id="addTemplateButton" class="btn" type="button" value="<%= messages("add")%>"/>\n        							<input id="deleteTemplateButton" class="btn" type="button" value="<%= messages("delete")%>"/>\n        							</div>\n									</div>\n								</div>\n							</div>\n						</div>\n					</div>\n				</div>\n			</div>\n		</div>\n	</div>\n</div>\n\n\n\n\n'}),window.CodeMirror=function(){function e(r,i){function hn(e){if(s.onDragEvent&&s.onDragEvent(mn,Y(e)))return;tt(e)}function vn(e){return e>=0&&e<Pt.size}function gn(e){return V(Pt,e)}function yn(e,t){Gt=!0;var n=t-e.height;for(var r=e;r;r=r.parent)r.height+=n}function bn(e,t){return e.styles||e.highlight(Dt,e.stateAfter=fi($(e)),s.tabSize),e.getContent(s.tabSize,t,s.lineWrapping)}function wn(e){var t={line:0,ch:0};Fn(t,{line:Pt.size-1,ch:gn(Pt.size-1).text.length},At(e),t,t),Vt=!0}function En(e){var t=[];return Pt.iter(0,Pt.size,function(e){t.push(e.text)}),t.join(e||"\n")}function Sn(e){Math.abs(O.scrollTop-Rt)>1&&(Rt=ct.scrollTop=O.scrollTop,ar([]))}function xn(e){s.fixedGutter&&et.style.left!=ct.scrollLeft+"px"&&(et.style.left=ct.scrollLeft+"px"),Math.abs(ct.scrollTop-Rt)>1&&(Rt=ct.scrollTop,O.scrollTop!=Rt&&(O.scrollTop=Rt),ar([])),s.onScroll&&s.onScroll(mn)}function Tn(e){function u(t){b&&(ct.draggable=!1),Ut=!1,l(),c(),Math.abs(e.clientX-t.clientX)+Math.abs(e.clientY-t.clientY)<10&&(Z(t),gr(n.line,n.ch,!0),nr())}function m(e){if(i=="single"){dr(br(n),e);return}h=br(h),p=br(p);if(i=="double"){var t=Tr(e);bt(e,h)?dr(t.from,p):dr(h,t.to)}else i=="triple"&&(bt(e,h)?dr(p,br({line:e.line,ch:0})):dr(h,br({line:e.line+1,ch:0})))}function g(e){var t=ni(e,!0);if(t&&!yt(t,a)){Bt||Bn(),a=t,m(t),Vt=!1;var n=ur();if(t.line>=n.to||t.line<n.from)f=setTimeout(vi(function(){g(e)}),150)}}function y(e){clearTimeout(f);var t=ni(e);t&&m(t),Z(e),nr(),Vt=!0,w(),l()}pr(it(e,"shiftKey"));for(var t=nt(e);t!=dt;t=t.parentNode)if(t.parentNode==lt&&t!=ft)return;for(var t=nt(e);t!=dt;t=t.parentNode)if(t.parentNode==G)return s.onGutterClick&&s.onGutterClick(mn,Ct(G.childNodes,t)+en,e),Z(e);var n=ni(e);switch(rt(e)){case 3:d&&ii(e);return;case 2:n&&gr(n.line,n.ch,!0),setTimeout(nr,20),Z(e);return}if(!n){nt(e)==ct&&Z(e);return}Bt||Bn();var r=+(new Date),i="single";if(qt&&qt.time>r-400&&yt(qt.pos,n))i="triple",Z(e),setTimeout(nr,20),Nr(n.line);else if(It&&It.time>r-400&&yt(It.pos,n)){i="double",qt={time:r,pos:n},Z(e);var o=Tr(n);dr(o.from,o.to)}else It={time:r,pos:n};var a=n,f;if(s.dragDrop&&at&&!s.readOnly&&!yt(jt.from,jt.to)&&!bt(n,jt.from)&&!bt(jt.to,n)&&i=="single"){b&&(ct.draggable=!0);var l=st(document,"mouseup",vi(u),!0),c=st(ct,"drop",vi(u),!0);Ut=!0,ct.dragDrop&&ct.dragDrop();return}Z(e),i=="single"&&gr(n.line,n.ch,!0);var h=jt.from,p=jt.to,w=st(document,"mousemove",vi(function(e){clearTimeout(f),Z(e),!v&&!rt(e)?y(e):g(e)}),!0),l=st(document,"mouseup",vi(y),!0)}function Nn(e){for(var t=nt(e);t!=dt;t=t.parentNode)if(t.parentNode==G)return Z(e);Z(e)}function Cn(e){if(s.onDragEvent&&s.onDragEvent(mn,Y(e)))return;Z(e);var t=ni(e,!0),n=e.dataTransfer.files;if(!t||s.readOnly)return;if(n&&n.length&&window.FileReader&&window.File){var r=n.length,i=Array(r),o=0,u=function(e,n){var s=new FileReader;s.onload=function(){i[n]=s.result,++o==r&&(t=br(t),vi(function(){var e=Vn(i.join(""),t,t);dr(t,e)})())},s.readAsText(e)};for(var a=0;a<r;++a)u(n[a],a)}else{if(Ut&&!bt(t,jt.from)&&!bt(jt.to,t))return;try{var i=e.dataTransfer.getData("Text");i&&mi(function(){var e=jt.from,n=jt.to;dr(t,t),Ut&&Vn("",e,n),$n(i),nr()})}catch(e){}}}function kn(e){var t=Qn();e.dataTransfer.setData("Text",t),e.dataTransfer.setDragImage&&e.dataTransfer.setDragImage(Et("img"),0,0)}function Ln(e,t){if(typeof e=="string"){e=f[e];if(!e)return!1}var n=Ft;try{s.readOnly&&(Wt=!0),t&&(Ft=null),e(mn)}catch(r){if(r!=ut)throw r;return!1}finally{Ft=n,Wt=!1}return!0}function On(e){function u(){o=!0}var t=c(s.keyMap),n=t.auto;clearTimeout(An),n&&!p(e)&&(An=setTimeout(function(){c(s.keyMap)==t&&(s.keyMap=n.call?n.call(null,mn):n)},50));var r=Mt[it(e,"keyCode")],i=!1;if(r==null||e.altGraphKey)return!1;it(e,"altKey")&&(r="Alt-"+r),it(e,k?"metaKey":"ctrlKey")&&(r="Ctrl-"+r),it(e,k?"ctrlKey":"metaKey")&&(r="Cmd-"+r);var o=!1;return it(e,"shiftKey")?i=h("Shift-"+r,s.extraKeys,s.keyMap,function(e){return Ln(e,!0)},u)||h(r,s.extraKeys,s.keyMap,function(e){if(typeof e=="string"&&/^go[A-Z]/.test(e))return Ln(e)},u):i=h(r,s.extraKeys,s.keyMap,Ln,u),o&&(i=!1),i&&(Z(e),si(),g&&(e.oldKeyCode=e.keyCode,e.keyCode=0)),i}function Mn(e,t){var n=h("'"+t+"'",s.extraKeys,s.keyMap,function(e){return Ln(e,!0)});return n&&(Z(e),si()),n}function Dn(e){Bt||Bn(),v&&e.keyCode==27&&(e.returnValue=!1),an&&er()&&(an=!1);if(s.onKeyEvent&&s.onKeyEvent(mn,Y(e)))return;var t=it(e,"keyCode");pr(t==16||it(e,"shiftKey"));var r=On(e);S&&(_n=r?t:null,!r&&t==88&&it(e,n?"metaKey":"ctrlKey")&&$n(""))}function Pn(e){an&&er();if(s.onKeyEvent&&s.onKeyEvent(mn,Y(e)))return;var t=it(e,"keyCode"),n=it(e,"charCode");if(S&&t==_n){_n=null,Z(e);return}if((S&&(!e.which||e.which<10)||T)&&On(e))return;var r=String.fromCharCode(n==null?t:n);s.electricChars&&Dt.electricChars&&s.smartIndent&&!s.readOnly&&Dt.electricChars.indexOf(r)>-1&&setTimeout(vi(function(){kr(jt.to.line,"smart")}),75);if(Mn(e,r))return;Yn()}function Hn(e){if(s.onKeyEvent&&s.onKeyEvent(mn,Y(e)))return;it(e,"keyCode")==16&&(Ft=null)}function Bn(){if(s.readOnly=="nocursor")return;Bt||(s.onFocus&&s.onFocus(mn),Bt=!0,ct.className.search(/\bCodeMirror-focused\b/)==-1&&(ct.className+=" CodeMirror-focused")),Gn(),si()}function jn(){Bt&&(s.onBlur&&s.onBlur(mn),Bt=!1,rn&&vi(function(){rn&&(rn(),rn=null)})(),ct.className=ct.className.replace(" CodeMirror-focused","")),clearInterval(_t),setTimeout(function(){Bt||(Ft=null)},150)}function Fn(e,t,n,r,i){if(Wt)return;var o=[];Pt.iter(e.line,t.line+1,function(e){o.push(I(e.text,e.markedSpans))});if(ln){ln.addChange(e.line,n.length,o);while(ln.done.length>s.undoDepth)ln.done.shift()}var u=B(F(o[0]),F(mt(o)),e.ch,t.ch,n);Un(e,t,u,r,i)}function In(e,t){if(!e.length)return;var n=e.pop(),r=[];for(var i=n.length-1;i>=0;i-=1){var s=n[i],o=[],u=s.start+s.added;Pt.iter(s.start,u,function(e){o.push(I(e.text,e.markedSpans))}),r.push({start:s.start,added:s.old.length,old:o});var a={line:s.start+s.old.length-1,ch:Nt(j(mt(o)),j(mt(s.old)))};Un({line:s.start,ch:0},{line:u-1,ch:gn(u-1).text.length},s.old,a,a)}Vt=!0,t.push(r)}function qn(){In(ln.done,ln.undone)}function Rn(){In(ln.undone,ln.done)}function Un(e,t,n,r,i){function w(e){return e<=Math.min(t.line,t.line+g)?e:e+g}if(Wt)return;var o=!1,u=sn.text.length;s.lineWrapping||Pt.iter(e.line,t.line+1,function(e){if(!e.hidden&&e.text.length==u)return o=!0,!0});if(e.line!=t.line||n.length>1)Gt=!0;var a=t.line-e.line,f=gn(e.line),l=gn(t.line),c=mt(n);if(e.ch==0&&t.ch==0&&j(c)==""){var h=[],p=null;for(var d=0,v=n.length-1;d<v;++d)h.push(new z(j(n[d]),F(n[d])));l.update(l.text,F(c)),a&&Pt.remove(e.line,a,Yt),h.length&&Pt.insert(e.line,h)}else if(f==l)if(n.length==1)f.update(f.text.slice(0,e.ch)+j(n[0])+f.text.slice(t.ch),F(n[0]));else{for(var h=[],d=1,v=n.length-1;d<v;++d)h.push(new z(j(n[d]),F(n[d])));h.push(new z(j(c)+f.text.slice(t.ch),F(c))),f.update(f.text.slice(0,e.ch)+j(n[0]),F(n[0])),Pt.insert(e.line+1,h)}else if(n.length==1)f.update(f.text.slice(0,e.ch)+j(n[0])+l.text.slice(t.ch),F(n[0])),Pt.remove(e.line+1,a,Yt);else{var h=[];f.update(f.text.slice(0,e.ch)+j(n[0]),F(n[0])),l.update(j(c)+l.text.slice(t.ch),F(c));for(var d=1,v=n.length-1;d<v;++d)h.push(new z(j(n[d]),F(n[d])));a>1&&Pt.remove(e.line+1,a-1,Yt),Pt.insert(e.line+1,h)}if(s.lineWrapping){var m=Math.max(5,ct.clientWidth/Zr()-3);Pt.iter(e.line,e.line+n.length,function(e){if(e.hidden)return;var t=Math.ceil(e.text.length/m)||1;t!=e.height&&yn(e,t)})}else Pt.iter(e.line,e.line+n.length,function(e){var t=e.text;!e.hidden&&t.length>u&&(sn=e,u=t.length,un=!0,o=!1)}),o&&(on=!0);Ht=Math.min(Ht,e.line),ci(400);var g=n.length-a-1;Jt.push({from:e.line,to:t.line+1,diff:g});if(s.onChange){for(var d=0;d<n.length;++d)typeof n[d]!="string"&&(n[d]=n[d].text);var y={from:e,to:t,text:n};if(Kt){for(var b=Kt;b.next;b=b.next);b.next=y}else Kt=y}vr(br(r),br(i),w(jt.from.line),w(jt.to.line))}function zn(){var e=Pt.height*Qr()+2*ei();return e*.99>ct.offsetHeight?e:!1}function Wn(e){var t=zn();O.style.display=t?"block":"none",t?(C.style.height=lt.style.minHeight=t+"px",O.style.height=ct.clientHeight+"px",e!=null&&(O.scrollTop=ct.scrollTop=e,b&&setTimeout(function(){if(O.scrollTop!=e)return;O.scrollTop=e+(e?-1:1),O.scrollTop=e},0))):lt.style.minHeight="",ft.style.top=Zt*Qr()+"px"}function Xn(){sn=gn(0),un=!0;var e=sn.text.length;Pt.iter(1,Pt.size,function(t){var n=t.text;!t.hidden&&n.length>e&&(e=n.length,sn=t)}),on=!1}function Vn(e,t,n){function r(r){if(bt(r,t))return r;if(!bt(n,r))return i;var s=r.line+e.length-(n.line-t.line)-1,o=r.ch;return r.line==n.line&&(o+=mt(e).length-(n.ch-(n.line==t.line?t.ch:0))),{line:s,ch:o}}t=br(t),n?n=br(n):n=t,e=At(e);var i;return Jn(e,t,n,function(e){return i=e,{from:r(jt.from),to:r(jt.to)}}),i}function $n(e,t){Jn(At(e),jt.from,jt.to,function(e){return t=="end"?{from:e,to:e}:t=="start"?{from:jt.from,to:jt.from}:{from:jt.from,to:e}})}function Jn(e,t,n,r){var i=e.length==1?e[0].length+t.ch:mt(e).length,s=r({line:t.line+e.length-1,ch:i});Fn(t,n,e,s.from,s.to)}function Kn(e,t,n){var r=e.line,i=t.line;if(r==i)return gn(r).text.slice(e.ch,t.ch);var s=[gn(r).text.slice(e.ch)];return Pt.iter(r+1,i,function(e){s.push(e.text)}),s.push(gn(i).text.slice(0,t.ch)),s.join(n||"\n")}function Qn(e){return Kn(jt.from,jt.to,e)}function Gn(){if(an)return;Tt.set(s.pollInterval,function(){er(),Bt&&Gn()})}function Yn(){function t(){var n=er();!n&&!e?(e=!0,Tt.set(60,t)):(an=!1,Gn())}var e=!1;an=!0,Tt.set(20,t)}function er(){if(!Bt||Ot(E)||s.readOnly)return!1;var e=E.value;if(e==Zn)return!1;di||hi(),Ft=null;var t=0,n=Math.min(Zn.length,e.length);while(t<n&&Zn[t]==e[t])++t;return t<Zn.length?jt.from={line:jt.from.line,ch:jt.from.ch-(Zn.length-t)}:zt&&yt(jt.from,jt.to)&&!Xt&&(jt.to={line:jt.to.line,ch:Math.min(gn(jt.to.line).text.length,jt.to.ch+(e.length-t))}),$n(e.slice(t),"end"),e.length>1e3?E.value=Zn="":Zn=e,di||pi(),Xt=!1,!0}function tr(e){yt(jt.from,jt.to)?e&&(Zn=E.value=""):(Zn="",E.value=Qn(),Bt&&gt(E))}function nr(){s.readOnly!="nocursor"&&(g||document.activeElement!=E)&&E.focus()}function rr(){var e=ir();sr(e.x,e.y,e.x,e.yBot);if(!Bt)return;var t=lt.getBoundingClientRect(),n=null;e.y+t.top<0?n=!0:e.y+t.top+Qr()>(window.innerHeight||document.documentElement.clientHeight)&&(n=!1);if(n!=null){var r=H.style.display=="none";r&&(H.style.display="",H.style.left=e.x+"px",H.style.top=e.y-Zt+"px"),H.scrollIntoView(n),r&&(H.style.display="none")}}function ir(){var e=Wr(jt.inverted?jt.from:jt.to),t=s.lineWrapping?Math.min(e.x,U.offsetWidth):e.x;return{x:t,y:e.y,yBot:e.yBot}}function sr(e,t,n,r){var i=or(e,t,n,r);i.scrollLeft!=null&&(ct.scrollLeft=i.scrollLeft),i.scrollTop!=null&&(O.scrollTop=ct.scrollTop=i.scrollTop)}function or(e,t,n,r){var i=ti(),o=ei();t+=o,r+=o,e+=i,n+=i;var u=ct.clientHeight,a=O.scrollTop,f={},l=zn()||Infinity,c=t<o+10,h=r+o>l-10;t<a?f.scrollTop=c?0:Math.max(0,t):r>a+u&&(f.scrollTop=(h?l:r)-u);var p=ct.clientWidth,d=ct.scrollLeft,v=s.fixedGutter?et.clientWidth:0,m=e<v+i+10;return e<d+v||m?(m&&(e=0),f.scrollLeft=Math.max(0,e-10-v)):n>p+d-3&&(f.scrollLeft=n+10-p),f}function ur(e){var t=Qr(),n=(e!=null?e:O.scrollTop)-ei(),r=Math.max(0,Math.floor(n/t)),i=Math.ceil((n+ct.clientHeight)/t);return{from:J(Pt,r),to:J(Pt,i)}}function ar(e,t,n){function d(){var e=M.firstChild,t=!1;return Pt.iter(en,tn,function(n){if(!e)return;if(!n.hidden){var r=Math.round(e.offsetHeight/c)||1;n.height!=r&&(yn(n,r),Gt=t=!0)}e=e.nextSibling}),t}if(!ct.clientWidth){en=tn=Zt=0;return}var r=ur(n);if(e!==!0&&e.length==0&&r.from>en&&r.to<tn){Wn(n);return}var i=Math.max(r.from-100,0),o=Math.min(Pt.size,r.to+100);en<i&&i-en<20&&(i=en),tn>o&&tn-o<20&&(o=Math.min(Pt.size,tn));var u=e===!0?[]:fr([{from:en,to:tn,domStart:0}],e),a=0;for(var f=0;f<u.length;++f){var l=u[f];l.from<i&&(l.domStart+=i-l.from,l.from=i),l.to>o&&(l.to=o),l.from>=l.to?u.splice(f--,1):a+=l.to-l.from}if(a==o-i&&i==en&&o==tn){Wn(n);return}u.sort(function(e,t){return e.domStart-t.domStart});var c=Qr(),h=et.style.display;M.style.display="none",lr(i,o,u),M.style.display=et.style.display="";var p=i!=en||o!=tn||nn!=ct.clientHeight+c;p&&(nn=ct.clientHeight+c),(i!=en||o!=tn&&s.onViewportChange)&&setTimeout(function(){s.onViewportChange&&s.onViewportChange(mn,i,o)}),en=i,tn=o,Zt=K(Pt,i),ci(100);if(M.childNodes.length!=tn-en)throw new Error("BAD PATCH! "+JSON.stringify(u)+" size="+(tn-en)+" nodes="+M.childNodes.length);return s.lineWrapping&&d(),et.style.display=h,(p||Gt)&&cr()&&s.lineWrapping&&d()&&cr(),Wn(n),hr(),!t&&s.onUpdate&&s.onUpdate(mn),!0}function fr(e,t){for(var n=0,r=t.length||0;n<r;++n){var i=t[n],s=[],o=i.diff||0;for(var u=0,a=e.length;u<a;++u){var f=e[u];i.to<=f.from&&i.diff?s.push({from:f.from+o,to:f.to+o,domStart:f.domStart}):i.to<=f.from||i.from>=f.to?s.push(f):(i.from>f.from&&s.push({from:f.from,to:i.from,domStart:f.domStart}),i.to<f.to&&s.push({from:i.to+o,to:f.to+o,domStart:f.domStart+(i.to-f.from)}))}e=s}return e}function lr(e,t,n){function r(e){var t=e.nextSibling;return e.parentNode.removeChild(e),t}if(!n.length)St(M);else{var i=0,s=M.firstChild,o;for(var u=0;u<n.length;++u){var a=n[u];while(a.domStart>i)s=r(s),i++;for(var f=0,l=a.to-a.from;f<l;++f)s=s.nextSibling,i++}while(s)s=r(s)}var c=n.shift(),s=M.firstChild,f=e;Pt.iter(e,t,function(e){c&&c.to==f&&(c=n.shift());if(!c||c.from>f){if(e.hidden)var t=Et("pre");else{var t=bn(e);e.className&&(t.className=e.className);if(e.bgClassName){var r=Et("pre"," ",e.bgClassName,"position: absolute; left: 0; right: 0; top: 0; bottom: 0; z-index: -2");t=Et("div",[r,t],null,"position: relative")}}M.insertBefore(t,s)}else s=s.nextSibling;++f})}function cr(){if(!s.gutter&&!s.lineNumbers)return;var e=ft.offsetHeight,t=ct.clientHeight;et.style.height=(e-t<2?t:e)+"px";var n=document.createDocumentFragment(),r=en,i;Pt.iter(en,Math.max(tn,en+1),function(e){if(e.hidden)n.appendChild(Et("pre"));else{var t=e.gutterMarker,o=s.lineNumbers?s.lineNumberFormatter(r+s.firstLineNumber):null;t&&t.text?o=t.text.replace("%N%",o!=null?o:""):o==null&&(o=" ");var u=n.appendChild(Et("pre",null,t&&t.style));u.innerHTML=o;for(var a=1;a<e.height;++a)u.appendChild(Et("br")),u.appendChild(document.createTextNode(" "));t||(i=r)}++r}),et.style.display="none",xt(G,n);if(i!=null&&s.lineNumbers){var o=G.childNodes[i-en],u=String(Pt.size).length,a=pt(o.firstChild),f="";while(a.length+f.length<u)f+=" ";f&&o.insertBefore(document.createTextNode(f),o.firstChild)}et.style.display="";var l=Math.abs((parseInt(U.style.marginLeft)||0)-et.offsetWidth)>2;return U.style.marginLeft=et.offsetWidth+"px",Gt=!1,l}function hr(){var e=yt(jt.from,jt.to),t=Wr(jt.from,!0),n=e?t:Wr(jt.to,!0),r=jt.inverted?t:n,i=Qr(),o=ht(dt),u=ht(M);x.style.top=Math.max(0,Math.min(ct.offsetHeight,r.y+u.top-o.top))+"px",x.style.left=Math.max(0,Math.min(ct.offsetWidth,r.x+u.left-o.left))+"px",e||s.showCursorWhenSelecting?(H.style.top=r.y+"px",H.style.left=(s.lineWrapping?Math.min(r.x,U.offsetWidth):r.x)+"px",H.style.display=""):H.style.display="none";if(!e){var a=t.y==n.y,f=document.createDocumentFragment(),l=U.clientWidth||U.offsetWidth,c=U.clientHeight||U.offsetHeight,h=function(e,t,n,r){var i=y?"width: "+(n?l-n-e:l)+"px":"right: "+(n-1)+"px";f.appendChild(Et("div",null,"CodeMirror-selected","position: absolute; left: "+e+"px; top: "+t+"px; "+i+"; height: "+r+"px"))};if(jt.from.ch&&t.y>=0){var p=a?l-n.x:0;h(t.x,t.y,p,i)}var d=Math.max(0,t.y+(jt.from.ch?i:0)),v=Math.min(n.y,c)-d;v>.2*i&&h(0,d,0,v),(!a||!jt.from.ch)&&n.y<c-.5*i&&h(0,n.y,l-n.x,i),xt(P,f),P.style.display=""}else P.style.display="none"}function pr(e){e?Ft=Ft||(jt.inverted?jt.to:jt.from):Ft=null}function dr(e,t){var n=Ft&&br(Ft);n&&(bt(n,e)?e=n:bt(t,n)&&(t=n)),vr(e,t),$t=!0}function vr(e,t,n,r){fn=null,n==null&&(n=jt.from.line,r=jt.to.line);if(yt(jt.from,e)&&yt(jt.to,t))return;if(bt(t,e)){var i=t;t=e,e=i}if(e.line!=n){var o=mr(e,n,jt.from.ch);o?e=o:Rr(e.line,!1)}t.line!=r&&(t=mr(t,r,jt.to.ch)),yt(e,t)?jt.inverted=!1:yt(e,jt.to)?jt.inverted=!1:yt(t,jt.from)&&(jt.inverted=!0);if(s.autoClearEmptyLines&&yt(jt.from,jt.to)){var u=jt.inverted?e:t;if(u.line!=jt.from.line&&jt.from.line<Pt.size){var a=gn(jt.from.line);/^\s+$/.test(a.text)&&setTimeout(vi(function(){if(a.parent&&/^\s+$/.test(a.text)){var e=$(a);Vn("",{line:e,ch:0},{line:e,ch:a.text.length})}},10))}}jt.from=e,jt.to=t,Qt=!0}function mr(e,t,n){function r(t){var r=e.line+t,i=t==1?Pt.size:-1;while(r!=i){var o=gn(r);if(!o.hidden){var u=e.ch;if(s||u>n||u>o.text.length)u=o.text.length;return{line:r,ch:u}}r+=t}}var i=gn(e.line),s=e.ch==i.text.length&&e.ch!=n;return i.hidden?e.line>=t?r(1)||r(-1):r(-1)||r(1):e}function gr(e,t,n){var r=br({line:e,ch:t||0});(n?dr:vr)(r,r)}function yr(e){return Math.max(0,Math.min(e,Pt.size-1))}function br(e){if(e.line<0)return{line:0,ch:0};if(e.line>=Pt.size)return{line:Pt.size-1,ch:gn(Pt.size-1).text.length};var t=e.ch,n=gn(e.line).text.length;return t==null||t>n?{line:e.line,ch:n}:t<0?{line:e.line,ch:0}:e}function wr(e,t){function o(){for(var t=r+e,n=e<0?-1:Pt.size;t!=n;t+=e){var i=gn(t);if(!i.hidden)return r=t,s=i,!0}}function u(t){if(i==(e<0?0:s.text.length)){if(!!t||!o())return!1;i=e<0?s.text.length:0}else i+=e;return!0}var n=jt.inverted?jt.from:jt.to,r=n.line,i=n.ch,s=gn(r);if(t=="char")u();else if(t=="column")u(!0);else if(t=="word"){var a=!1;for(;;){if(e<0&&!u())break;if(Lt(s.text.charAt(i)))a=!0;else if(a){e<0&&(e=1,u());break}if(e>0&&!u())break}}return{line:r,ch:i}}function Er(e,t){var n=e<0?jt.from:jt.to;if(Ft||yt(jt.from,jt.to))n=wr(e,t);gr(n.line,n.ch,!0)}function Sr(e,t){yt(jt.from,jt.to)?e<0?Vn("",wr(e,t),jt.to):Vn("",jt.from,wr(e,t)):Vn("",jt.from,jt.to),$t=!0}function xr(e,t){var n=0,r=Wr(jt.inverted?jt.from:jt.to,!0);fn!=null&&(r.x=fn);if(t=="page")var i=Math.min(ct.clientHeight,window.innerHeight||document.documentElement.clientHeight),s=Xr(r.x,r.y+i*e);else if(t=="line")var o=Qr(),s=Xr(r.x,r.y+.5*o+e*o);t=="page"&&(O.scrollTop+=Wr(s,!0).y-r.y),gr(s.line,s.ch,!0),fn=r.x}function Tr(e){var t=gn(e.line).text,n=e.ch,r=e.ch;if(t){e.after===!1||r==t.length?--n:++r;var i=t.charAt(n),s=Lt(i)?Lt:/\s/.test(i)?function(e){return/\s/.test(e)}:function(e){return!/\s/.test(e)&&Lt(e)};while(n>0&&s(t.charAt(n-1)))--n;while(r<t.length&&s(t.charAt(r)))++r}return{from:{line:e.line,ch:n},to:{line:e.line,ch:r}}}function Nr(e){dr({line:e,ch:0},br({line:e+1,ch:0}))}function Cr(e){if(yt(jt.from,jt.to))return kr(jt.from.line,e);var t=jt.to.line-(jt.to.ch?0:1);for(var n=jt.from.line;n<=t;++n)kr(n,e)}function kr(e,t){t||(t="add");if(t=="smart")if(!Dt.indent)t="prev";else var n=fi(e);var r=gn(e),i=r.indentation(s.tabSize),o=r.text.match(/^\s*/)[0],u;t=="smart"&&(u=Dt.indent(n,r.text.slice(o.length),r.text),u==ut&&(t="prev")),t=="prev"?e?u=gn(e-1).indentation(s.tabSize):u=0:t=="add"?u=i+s.indentUnit:t=="subtract"&&(u=i-s.indentUnit),u=Math.max(0,u);var a=u-i,f="",l=0;if(s.indentWithTabs)for(var c=Math.floor(u/s.tabSize);c;--c)l+=s.tabSize,f+="	";l<u&&(f+=vt(u-l)),f!=o&&Vn(f,{line:e,ch:0},{line:e,ch:o.length}),r.stateAfter=null}function Lr(){Dt=e.getMode(s,s.mode),Pt.iter(0,Pt.size,function(e){e.stateAfter=null}),Ht=0,ci(100)}function Ar(){var e=s.gutter||s.lineNumbers;et.style.display=e?"":"none",e?Gt=!0:M.parentNode.style.marginLeft=0}function Or(e,t){if(s.lineWrapping){dt.className+=" CodeMirror-wrap";var n=ct.clientWidth/Zr()-3;Pt.iter(0,Pt.size,function(e){if(e.hidden)return;var t=Math.ceil(e.text.length/n)||1;t!=1&&yn(e,t)}),U.style.minWidth=q.style.left=""}else dt.className=dt.className.replace(" CodeMirror-wrap",""),Xn(),Pt.iter(0,Pt.size,function(e){e.height!=1&&!e.hidden&&yn(e,1)});Jt.push({from:0,to:Pt.size})}function Mr(){ct.className=ct.className.replace(/\s*cm-s-\S+/g,"")+s.theme.replace(/(^|\s)\s*/g," cm-s-")}function _r(){var e=l[s.keyMap].style;dt.className=dt.className.replace(/\s*cm-keymap-\S+/g,"")+(e?" cm-keymap-"+e:"")}function Dr(e,t){this.lines=[],this.type=e,t&&(this.style=t)}function Pr(e,t,n,r){e=br(e),t=br(t);var i=new Dr("range",n);if(r)for(var s in r)r.hasOwnProperty(s)&&(i[s]=r[s]);var o=e.line;return Pt.iter(o,t.line+1,function(n){var r={from:o==e.line?e.ch:null,to:o==t.line?t.ch:null,marker:i};n.markedSpans=(n.markedSpans||[]).concat([r]),i.lines.push(n),++o}),Jt.push({from:e.line,to:t.line+1}),i}function Hr(e){e=br(e);var t=new Dr("bookmark"),n=gn(e.line);ln.addChange(e.line,1,[I(n.text,n.markedSpans)],!0);var r={from:e.ch,to:e.ch,marker:t};return n.markedSpans=(n.markedSpans||[]).concat([r]),t.lines.push(n),t}function Br(e){e=br(e);var t=[],n=gn(e.line).markedSpans;if(n)for(var r=0;r<n.length;++r){var i=n[r];(i.from==null||i.from<=e.ch)&&(i.to==null||i.to>=e.ch)&&t.push(i.marker)}return t}function jr(e,t,n){return typeof e=="number"&&(e=gn(yr(e))),e.gutterMarker={text:t,style:n},Gt=!0,e}function Fr(e){typeof e=="number"&&(e=gn(yr(e))),e.gutterMarker=null,Gt=!0}function Ir(e,t){var n=e,r=e;return typeof e=="number"?r=gn(yr(e)):n=$(e),n==null?null:t(r,n)?(Jt.push({from:n,to:n+1}),r):null}function qr(e,t,n){return Ir(e,function(e){if(e.className!=t||e.bgClassName!=n)return e.className=t,e.bgClassName=n,!0})}function Rr(e,t){return Ir(e,function(e,n){if(e.hidden!=t){e.hidden=t,s.lineWrapping||(t&&e.text.length==sn.text.length?on=!0:!t&&e.text.length>sn.text.length&&(sn=e,on=!1)),yn(e,t?0:1);var r=jt.from.line,i=jt.to.line;if(t&&(r==n||i==n)){var o=r==n?mr({line:r,ch:0},r,0):jt.from,u=i==n?mr({line:i,ch:0},i,0):jt.to;if(!u)return;vr(o,u)}return Gt=!0}})}function Ur(e){if(typeof e=="number"){if(!vn(e))return null;var t=e;e=gn(e);if(!e)return null}else{var t=$(e);if(t==null)return null}var n=e.gutterMarker;return{line:t,handle:e,text:e.text,markerText:n&&n.text,markerClass:n&&n.style,lineClass:e.className,bgClass:e.bgClassName}}function zr(e,t){if(t==0)return{top:0,left:0};var n=bn(e,t);xt(R,n);var r=n.anchor,i=r.offsetTop,s=r.offsetLeft;if(v&&i==0&&s==0){var o=Et("span","x");r.parentNode.insertBefore(o,r.nextSibling),i=o.offsetTop}return{top:i,left:s}}function Wr(e,t){var n,r=Qr(),i=r*(K(Pt,e.line)-(t?Zt:0));if(e.ch==0)n=0;else{var o=zr(gn(e.line),e.ch);n=o.left,s.lineWrapping&&(i+=Math.max(0,o.top))}return{x:n,y:i,yBot:i+r}}function Xr(e,t){function h(e){var t=zr(u,e);if(f){var r=Math.round(t.top/n);return c=r!=l,Math.max(0,t.left+(r-l)*ct.clientWidth)}return t.left}var n=Qr(),r=Zr(),i=Zt+Math.floor(t/n);if(i<0)return{line:0,ch:0};var o=J(Pt,i);if(o>=Pt.size)return{line:Pt.size-1,ch:gn(Pt.size-1).text.length};var u=gn(o),a=u.text,f=s.lineWrapping,l=f?i-K(Pt,o):0;if(e<=0&&l==0)return{line:o,ch:0};var c=!1,p=0,d=0,v=a.length,m,g=Math.min(v,Math.ceil((e+l*ct.clientWidth*.9)/r));for(;;){var y=h(g);if(!(y<=e&&g<v)){m=y,v=g;break}g=Math.min(v,Math.ceil(g*1.2))}if(e>m)return{line:o,ch:v};g=Math.floor(v*.8),y=h(g),y<e&&(p=g,d=y);for(;;){if(v-p<=1){var b=e-d<m-e;return{line:o,ch:b?p:v,after:b}}var w=Math.ceil((p+v)/2),E=h(w);E>e?(v=w,m=E,c&&(m+=1e3)):(p=w,d=E)}}function Vr(e){var t=Wr(e,!0),n=ht(U);return{x:n.left+t.x,y:n.top+t.y,yBot:n.top+t.yBot}}function Qr(){if(Kr==null){Kr=Et("pre");for(var e=0;e<49;++e)Kr.appendChild(document.createTextNode("x")),Kr.appendChild(Et("br"));Kr.appendChild(document.createTextNode("x"))}var t=M.clientHeight;return t==Jr?$r:(Jr=t,xt(R,Kr.cloneNode(!0)),$r=R.firstChild.offsetHeight/50||1,St(R),$r)}function Zr(){if(ct.clientWidth==Yr)return Gr;Yr=ct.clientWidth;var e=Et("span","x"),t=Et("pre",[e]);return xt(R,t),Gr=e.offsetWidth||10}function ei(){return U.offsetTop}function ti(){return U.offsetLeft}function ni(e,t){var n=ht(ct,!0),r,i;try{r=e.clientX,i=e.clientY}catch(e){return null}if(!t&&(r-n.left>ct.clientWidth||i-n.top>ct.clientHeight))return null;var s=ht(U,!0);return Xr(r-s.left,i-s.top)}function ii(e){function i(){x.style.position="relative",E.style.cssText=r,g&&(O.scrollTop=n),Gn();if(E.selectionStart!=null){clearTimeout(ri);var e=E.value=" "+(yt(jt.from,jt.to)?"":E.value),t=0;Zn=" ",E.selectionStart=1,E.selectionEnd=e.length,ri=setTimeout(function i(){Zn==" "&&E.selectionStart==0?vi(f.selectAll)(mn):t++<10?ri=setTimeout(i,500):tr()},200)}}var t=ni(e),n=O.scrollTop;if(!t||S)return;(yt(jt.from,jt.to)||bt(t,jt.from)||!bt(t,jt.to))&&vi(gr)(t.line,t.ch);var r=E.style.cssText;x.style.position="absolute",E.style.cssText="position: fixed; width: 30px; height: 30px; top: "+(e.clientY-5)+"px; left: "+(e.clientX-5)+"px; z-index: 1000; background: white; "+"border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);",nr(),tr(!0),yt(jt.from,jt.to)&&(E.value=Zn=" ");if(d){tt(e);var s=st(window,"mouseup",function(){s(),setTimeout(i,20)},!0)}else setTimeout(i,50)}function si(){clearInterval(_t);var e=!0;H.style.visibility="",_t=setInterval(function(){H.style.visibility=(e=!e)?"":"hidden"},s.cursorBlinkRate)}function ui(e){function v(e,t,n){if(!e.text)return;var r=e.styles,i=o?0:e.text.length-1,s;for(var a=o?0:r.length-2,f=o?r.length:-2;a!=f;a+=2*u){var l=r[a];if(r[a+1]!=h){i+=u*l.length;continue}for(var c=o?0:l.length-1,v=o?l.length:-1;c!=v;c+=u,i+=u)if(i>=t&&i<n&&d.test(s=l.charAt(c))){var m=oi[s];if(m.charAt(1)==">"==o)p.push(s);else{if(p.pop()!=m.charAt(0))return{pos:i,match:!1};if(!p.length)return{pos:i,match:!0}}}}}var t=jt.inverted?jt.from:jt.to,n=gn(t.line),r=t.ch-1,i=r>=0&&oi[n.text.charAt(r)]||oi[n.text.charAt(++r)];if(!i)return;var s=i.charAt(0),o=i.charAt(1)==">",u=o?1:-1,a=n.styles;for(var f=r+1,l=0,c=a.length;l<c;l+=2)if((f-=a[l].length)<=0){var h=a[l+1];break}var p=[n.text.charAt(r)],d=/[(){}[\]]/;for(var l=t.line,c=o?Math.min(l+100,Pt.size):Math.max(-1,l-100);l!=c;l+=u){var n=gn(l),m=l==t.line,g=v(n,m&&o?r+1:0,m&&!o?r:n.text.length);if(g)break}g||(g={pos:null,match:!1});var h=g.match?"CodeMirror-matchingbracket":"CodeMirror-nonmatchingbracket",y=Pr({line:t.line,ch:r},{line:t.line,ch:r+1},h),b=g.pos!=null&&Pr({line:l,ch:g.pos},{line:l,ch:g.pos+1},h),w=vi(function(){y.clear(),b&&b.clear()});e?setTimeout(w,800):rn=w}function ai(e){var t,n;for(var r=e,i=e-40;r>i;--r){if(r==0)return 0;var o=gn(r-1);if(o.stateAfter)return r;var u=o.indentation(s.tabSize);if(n==null||t>u)n=r-1,t=u}return n}function fi(e){var t=ai(e),n=t&&gn(t-1).stateAfter;return n?n=L(Dt,n):n=A(Dt),Pt.iter(t,e,function(r){r.process(Dt,n,s.tabSize),r.stateAfter=t==e-1||t%5==0?L(Dt,n):null}),n}function li(){if(Ht>=tn)return;var e=+(new Date)+s.workTime,t=L(Dt,fi(Ht)),n=Ht;Pt.iter(Ht,tn,function(n){Ht>=en?(n.highlight(Dt,t,s.tabSize),n.stateAfter=L(Dt,t)):(n.process(Dt,t,s.tabSize),n.stateAfter=Ht%5==0?L(Dt,t):null),++Ht;if(+(new Date)>e)return ci(s.workDelay),!0}),tn>n&&Ht>=en&&vi(function(){Jt.push({from:n,to:Ht})})()}function ci(e){Ht<tn&&kt.set(e,li)}function hi(){Vt=$t=Kt=null,Jt=[],Qt=!1,Yt=[]}function pi(){on&&Xn();if(un&&!s.lineWrapping){var e=q.offsetWidth,t=zr(sn,sn.text.length).left;m||(q.style.left=t+"px",U.style.minWidth=t+e+"px"),un=!1}var n,r;if(Qt){var i=ir();n=or(i.x,i.y,i.x,i.yBot)}if(Jt.length||n&&n.scrollTop!=null)r=ar(Jt,!0,n&&n.scrollTop);r||(Qt&&hr(),Gt&&cr()),n&&rr(),Qt&&si(),Bt&&(Vt===!0||Vt!==!1&&Qt)&&tr($t),Qt&&s.matchBrackets&&setTimeout(vi(function(){rn&&(rn(),rn=null),yt(jt.from,jt.to)&&ui(!1)}),20);var o=Qt,u=Yt;Kt&&s.onChange&&mn&&s.onChange(mn,Kt),o&&s.onCursorActivity&&s.onCursorActivity(mn);for(var a=0;a<u.length;++a)u[a](mn);r&&s.onUpdate&&s.onUpdate(mn)}function vi(e){return function(){di++||hi();try{var t=e.apply(this,arguments)}finally{--di||pi()}return t}}function mi(e){ln.startCompound();try{return e()}finally{ln.endCompound()}}var s={},a=e.defaults;for(var w in a)a.hasOwnProperty(w)&&(s[w]=(i&&i.hasOwnProperty(w)?i:a)[w]);var E=Et("textarea",null,null,"position: absolute; padding: 0; width: 1px; height: 1em");E.setAttribute("wrap","off"),E.setAttribute("autocorrect","off"),E.setAttribute("autocapitalize","off");var x=Et("div",[E],null,"overflow: hidden; position: relative; width: 3px; height: 0px;"),C=Et("div",null,"CodeMirror-scrollbar-inner"),O=Et("div",[C],"CodeMirror-scrollbar"),M=Et("div"),P=Et("div",null,null,"position: relative; z-index: -1"),H=Et("pre"," ","CodeMirror-cursor"),q=Et("pre"," ","CodeMirror-cursor","visibility: hidden"),R=Et("div",null,null,"position: absolute; width: 100%; height: 0px; overflow: hidden; visibility: hidden;"),U=Et("div",[R,H,q,P,M],null,"position: relative; z-index: 0"),G=Et("div",null,"CodeMirror-gutter-text"),et=Et("div",[G],"CodeMirror-gutter"),ft=Et("div",[et,Et("div",[U],"CodeMirror-lines")],null,"position: relative"),lt=Et("div",[ft],null,"position: relative"),ct=Et("div",[lt],"CodeMirror-scroll");ct.setAttribute("tabIndex","-1");var dt=Et("div",[x,O,ct],"CodeMirror"+(s.lineWrapping?" CodeMirror-wrap":""));r.appendChild?r.appendChild(dt):r(dt),Mr(),_r(),t&&(E.style.width="0px"),b||(ct.draggable=!0),U.style.outline="none",s.tabindex!=null&&(E.tabIndex=s.tabindex),s.autofocus&&nr(),!s.gutter&&!s.lineNumbers&&(et.style.display="none"),T&&(x.style.height="1px",x.style.position="absolute"),N?(O.style.zIndex=-2,O.style.visibility="hidden"):m&&(O.style.minWidth="18px");var Tt=new ot,kt=new ot,_t,Dt,Pt=new X([new W([new z("")])]),Ht=0,Bt;Lr();var jt={from:{line:0,ch:0},to:{line:0,ch:0},inverted:!1},Ft,It,qt,Rt=0,Ut,zt=!1,Wt=!1,Xt=!1,Vt,$t,Jt,Kt,Qt,Gt,Yt,Zt=0,en=0,tn=0,nn=0,rn,sn=gn(0),on=!1,un=!0,an=!1,fn=null;vi(function(){wn(s.value||""),Vt=!1})();var ln=new Q;st(ct,"mousedown",vi(Tn)),st(ct,"dblclick",vi(Nn)),st(U,"selectstart",Z),d||st(ct,"contextmenu",ii),st(ct,"scroll",xn),st(O,"scroll",Sn),st(O,"mousedown",function(){Bt&&setTimeout(nr,0)});var cn=st(window,"resize",function(){dt.parentNode?ar(!0):cn()},!0);st(E,"keyup",vi(Hn)),st(E,"input",Yn),st(E,"keydown",vi(Dn)),st(E,"keypress",vi(Pn)),st(E,"focus",Bn),st(E,"blur",jn),s.dragDrop&&(st(ct,"dragstart",kn),st(ct,"dragenter",hn),st(ct,"dragover",hn),st(ct,"drop",vi(Cn))),st(ct,"paste",function(){nr(),Yn()}),st(E,"paste",function(){Xt=!0,Yn()}),st(E,"cut",vi(function(){s.readOnly||$n("")})),T&&st(lt,"mouseup",function(){document.activeElement==E&&E.blur(),nr()});var pn;try{pn=document.activeElement==E}catch(dn){}pn||s.autofocus?setTimeout(Bn,20):jn();var mn=dt.CodeMirror={getValue:En,setValue:vi(wn),getSelection:Qn,replaceSelection:vi($n),focus:function(){window.focus(),nr(),Bn(),Yn()},setOption:function(e,t){var n=s[e];s[e]=t,e=="mode"||e=="indentUnit"?Lr():e=="readOnly"&&t=="nocursor"?(jn(),E.blur()):e=="readOnly"&&!t?tr(!0):e=="theme"?Mr():e=="lineWrapping"&&n!=t?vi(Or)():e=="tabSize"?ar(!0):e=="keyMap"?_r():e=="tabindex"?E.tabIndex=t:e=="showCursorWhenSelecting"&&hr();if(e=="lineNumbers"||e=="gutter"||e=="firstLineNumber"||e=="theme"||e=="lineNumberFormatter")Ar(),ar(!0)},getOption:function(e){return s[e]},getMode:function(){return Dt},undo:vi(qn),redo:vi(Rn),indentLine:vi(function(e,t){typeof t!="string"&&(t==null?t=s.smartIndent?"smart":"prev":t=t?"add":"subtract"),vn(e)&&kr(e,t)}),indentSelection:vi(Cr),historySize:function(){return{undo:ln.done.length,redo:ln.undone.length}},clearHistory:function(){ln=new Q},setHistory:function(e){ln=new Q,ln.done=e.done,ln.undone=e.undone},getHistory:function(){function e(e){for(var t=0,n=[],r;t<e.length;++t){n.push(r=[]);for(var i=0,s=e[t];i<s.length;++i){var o=[],u=s[i];r.push({start:u.start,added:u.added,old:o});for(var a=0;a<u.old.length;++a)o.push(j(u.old[a]))}}return n}return{done:e(ln.done),undone:e(ln.undone)}},matchBrackets:vi(function(){ui(!0)}),getTokenAt:vi(function(e){return e=br(e),gn(e.line).getTokenAt(Dt,fi(e.line),s.tabSize,e.ch)}),getStateAfter:function(e){return e=yr(e==null?Pt.size-1:e),fi(e+1)},cursorCoords:function(e,t){return e==null&&(e=jt.inverted),this.charCoords(e?jt.from:jt.to,t)},charCoords:function(e,t){return e=br(e),t=="local"?Wr(e,!1):t=="div"?Wr(e,!0):Vr(e)},coordsChar:function(e){var t=ht(U);return Xr(e.x-t.left,e.y-t.top)},defaultTextHeight:function(){return Qr()},markText:vi(Pr),setBookmark:Hr,findMarksAt:Br,setMarker:vi(jr),clearMarker:vi(Fr),setLineClass:vi(qr),hideLine:vi(function(e){return Rr(e,!0)}),showLine:vi(function(e){return Rr(e,!1)}),onDeleteLine:function(e,t){if(typeof e=="number"){if(!vn(e))return null;e=gn(e)}return(e.handlers||(e.handlers=[])).push(t),e},lineInfo:Ur,getViewport:function(){return{from:en,to:tn}},addWidget:function(e,t,n,r,i){e=Wr(br(e));var s=e.yBot,o=e.x;t.style.position="absolute",lt.appendChild(t);if(r=="over")s=e.y;else if(r=="near"){var u=Math.max(ct.offsetHeight,Pt.height*Qr()),a=Math.max(lt.clientWidth,U.clientWidth)-ti();e.yBot+t.offsetHeight>u&&e.y>t.offsetHeight&&(s=e.y-t.offsetHeight),o+t.offsetWidth>a&&(o=a-t.offsetWidth)}t.style.top=s+ei()+"px",t.style.left=t.style.right="",i=="right"?(o=lt.clientWidth-t.offsetWidth,t.style.right="0px"):(i=="left"?o=0:i=="middle"&&(o=(lt.clientWidth-t.offsetWidth)/2),t.style.left=o+ti()+"px"),n&&sr(o,s,o+t.offsetWidth,s+t.offsetHeight)},lineCount:function(){return Pt.size},clipPos:br,getCursor:function(e){if(e==null||e=="head")e=jt.inverted;return e=="anchor"&&(e=!jt.inverted),e=="end"&&(e=!1),wt(e?jt.from:jt.to)},somethingSelected:function(){return!yt(jt.from,jt.to)},setCursor:vi(function(e,t,n){t==null&&typeof e.line=="number"?gr(e.line,e.ch,n):gr(e,t,n)}),setSelection:vi(function(e,t,n){(n?dr:vr)(br(e),br(t||e))}),getLine:function(e){if(vn(e))return gn(e).text},getLineHandle:function(e){if(vn(e))return gn(e)},setLine:vi(function(e,t){vn(e)&&Vn(t,{line:e,ch:0},{line:e,ch:gn(e).text.length})}),removeLine:vi(function(e){vn(e)&&Vn("",{line:e,ch:0},br({line:e+1,ch:0}))}),replaceRange:vi(Vn),getRange:function(e,t,n){return Kn(br(e),br(t),n)},triggerOnKeyDown:vi(Dn),execCommand:function(e){return f[e](mn)},moveH:vi(Er),deleteH:vi(Sr),moveV:vi(xr),toggleOverwrite:function(){zt?(zt=!1,H.className=H.className.replace(" CodeMirror-overwrite","")):(zt=!0,H.className+=" CodeMirror-overwrite")},posFromIndex:function(e){var t=0,n;return Pt.iter(0,Pt.size,function(r){var i=r.text.length+1;if(i>e)return n=e,!0;e-=i,++t}),br({line:t,ch:n})},indexFromPos:function(e){if(e.line<0||e.ch<0)return 0;var t=e.ch;return Pt.iter(0,e.line,function(e){t+=e.text.length+1}),t},scrollTo:function(e,t){e!=null&&(ct.scrollLeft=e),t!=null&&(O.scrollTop=ct.scrollTop=t),ar([])},getScrollInfo:function(){return{x:ct.scrollLeft,y:O.scrollTop,height:O.scrollHeight,width:ct.scrollWidth}},scrollIntoView:function(e){var t=Wr(e?br(e):jt.inverted?jt.from:jt.to);sr(t.x,t.y,t.x,t.yBot)},setSize:function(e,t){function n(e){return e=String(e),/^\d+$/.test(e)?e+"px":e}e!=null&&(dt.style.width=n(e)),t!=null&&(ct.style.height=n(t)),mn.refresh()},operation:function(e){return vi(e)()},compoundChange:function(e){return mi(e)},refresh:function(){ar(!0,null,Rt),O.scrollHeight>Rt&&(O.scrollTop=Rt)},getInputField:function(){return E},getWrapperElement:function(){return dt},getScrollerElement:function(){return ct},getGutterElement:function(){return et}},An,_n=null,Zn="";Dr.prototype.clear=vi(function(){var e,t;for(var n=0;n<this.lines.length;++n){var r=this.lines[n],i=_(r.markedSpans,this);i.from!=null&&(e=$(r)),i.to!=null&&(t=$(r)),r.markedSpans=D(r.markedSpans,i)}e!=null&&Jt.push({from:e,to:t+1}),this.lines.length=0,this.explicitlyCleared=!0}),Dr.prototype.find=function(){var e,t;for(var n=0;n<this.lines.length;++n){var r=this.lines[n],i=_(r.markedSpans,this);if(i.from!=null||i.to!=null){var s=$(r);i.from!=null&&(e={line:s,ch:i.from}),i.to!=null&&(t={line:s,ch:i.to})}}return this.type=="bookmark"?e:e&&{from:e,to:t}};var $r,Jr,Kr,Gr,Yr=0,ri,oi={"(":")>",")":"(<","[":"]>","]":"[<","{":"}>","}":"{<"},di=0;for(var gi in o)o.propertyIsEnumerable(gi)&&!mn.propertyIsEnumerable(gi)&&(mn[gi]=o[gi]);for(var yi=0;yi<u.length;++yi)u[yi](mn);return mn}function c(e){return typeof e=="string"?l[e]:e}function h(e,t,n,r,i){function s(t){t=c(t);var n=t[e];if(n===!1)return i&&i(),!0;if(n!=null&&r(n))return!0;if(t.nofallthrough)return i&&i(),!0;var o=t.fallthrough;if(o==null)return!1;if(Object.prototype.toString.call(o)!="[object Array]")return s(o);for(var u=0,a=o.length;u<a;++u)if(s(o[u]))return!0;return!1}return t&&s(t)?!0:s(n)}function p(e){var t=Mt[it(e,"keyCode")];return t=="Ctrl"||t=="Alt"||t=="Shift"||t=="Mod"}function L(e,t){if(t===!0)return t;if(e.copyState)return e.copyState(t);var n={};for(var r in t){var i=t[r];i instanceof Array&&(i=i.concat([])),n[r]=i}return n}function A(e,t,n){return e.startState?e.startState(t,n):!0}function O(e,t){this.pos=this.start=0,this.string=e,this.tabSize=t||8}function M(e,t,n){this.from=e,this.to=t,this.marker=n}function _(e,t){if(e)for(var n=0;n<e.length;++n){var r=e[n];if(r.marker==t)return r}}function D(e,t){var n;for(var r=0;r<e.length;++r)e[r]!=t&&(n||(n=[])).push(e[r]);return n}function P(e,t,n){if(e)for(var r=0,i;r<e.length;++r){var s=e[r],o=s.marker,u=s.from==null||(o.inclusiveLeft?s.from<=t:s.from<t);if(u||o.type=="bookmark"&&s.from==t&&s.from!=n){var a=s.to==null||(o.inclusiveRight?s.to>=t:s.to>t);(i||(i=[])).push({from:s.from,to:a?null:s.to,marker:o})}}return i}function H(e,t){if(e)for(var n=0,r;n<e.length;++n){var i=e[n],s=i.marker,o=i.to==null||(s.inclusiveRight?i.to>=t:i.to>t);if(o||s.type=="bookmark"&&i.from==t){var u=i.from==null||(s.inclusiveLeft?i.from<=t:i.from<t);(r||(r=[])).push({from:u?null:i.from-t,to:i.to==null?null:i.to-t,marker:s})}}return r}function B(e,t,n,r,i){if(!e&&!t)return i;var s=P(e,n),o=H(t,r),u=i.length==1,a=mt(i).length+(u?n:0);if(s)for(var f=0;f<s.length;++f){var l=s[f];if(l.to==null){var c=_(o,l.marker);c?u&&(l.to=c.to==null?null:c.to+a):l.to=n}}if(o)for(var f=0;f<o.length;++f){var l=o[f];l.to!=null&&(l.to+=a);if(l.from==null){var c=_(s,l.marker);c||(l.from=a,u&&(s||(s=[])).push(l))}else l.from+=a,u&&(s||(s=[])).push(l)}var h=[I(i[0],s)];if(!u){var p=i.length-2,d;if(p>0&&s)for(var f=0;f<s.length;++f)s[f].to==null&&(d||(d=[])).push({from:null,to:null,marker:s[f].marker});for(var f=0;f<p;++f)h.push(I(i[f+1],d));h.push(I(mt(i),o))}return h}function j(e){return typeof e=="string"?e:e.text}function F(e){if(typeof e=="string")return null;var t=e.markedSpans,n=null;for(var r=0;r<t.length;++r)t[r].marker.explicitlyCleared?n||(n=t.slice(0,r)):n&&n.push(t[r]);return n?n.length?n:null:t}function I(e,t){return t?{text:e,markedSpans:t}:e}function q(e){var t=e.markedSpans;if(!t)return;for(var n=0;n<t.length;++n){var r=t[n].marker.lines,i=Ct(r,e);r.splice(i,1)}e.markedSpans=null}function R(e,t){if(!t)return;for(var n=0;n<t.length;++n)var r=t[n].marker.lines.push(e);e.markedSpans=t}function z(e,t){this.text=e,this.height=1,R(this,t)}function W(e){this.lines=e,this.parent=null;for(var t=0,n=e.length,r=0;t<n;++t)e[t].parent=this,r+=e[t].height;this.height=r}function X(e){this.children=e;var t=0,n=0;for(var r=0,i=e.length;r<i;++r){var s=e[r];t+=s.chunkSize(),n+=s.height,s.parent=this}this.size=t,this.height=n,this.parent=null}function V(e,t){while(!e.lines)for(var n=0;;++n){var r=e.children[n],i=r.chunkSize();if(t<i){e=r;break}t-=i}return e.lines[t]}function $(e){if(e.parent==null)return null;var t=e.parent,n=Ct(t.lines,e);for(var r=t.parent;r;t=r,r=r.parent)for(var i=0;;++i){if(r.children[i]==t)break;n+=r.children[i].chunkSize()}return n}function J(e,t){var n=0;e:do{for(var r=0,i=e.children.length;r<i;++r){var s=e.children[r],o=s.height;if(t<o){e=s;continue e}t-=o,n+=s.chunkSize()}return n}while(!e.lines);for(var r=0,i=e.lines.length;r<i;++r){var u=e.lines[r],a=u.height;if(t<a)break;t-=a}return n+r}function K(e,t){var n=0;e:do{for(var r=0,i=e.children.length;r<i;++r){var s=e.children[r],o=s.chunkSize();if(t<o){e=s;continue e}t-=o,n+=s.height}return n}while(!e.lines);for(var r=0;r<t;++r)n+=e.lines[r].height;return n}function Q(){this.time=0,this.done=[],this.undone=[],this.compound=0,this.closed=!1}function G(){tt(this)}function Y(e){return e.stop||(e.stop=G),e}function Z(e){e.preventDefault?e.preventDefault():e.returnValue=!1}function et(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0}function tt(e){Z(e),et(e)}function nt(e){return e.target||e.srcElement}function rt(e){var t=e.which;return t==null&&(e.button&1?t=1:e.button&2?t=3:e.button&4&&(t=2)),n&&e.ctrlKey&&t==1&&(t=3),t}function it(e,t){var n=e.override&&e.override.hasOwnProperty(t);return n?e.override[t]:e[t]}function st(e,t,n,r){if(typeof e.addEventListener=="function"){e.addEventListener(t,n,!1);if(r)return function(){e.removeEventListener(t,n,!1)}}else{var i=function(e){n(e||window.event)};e.attachEvent("on"+t,i);if(r)return function(){e.detachEvent("on"+t,i)}}}function ot(){this.id=null}function ct(e,t,n){t==null&&(t=e.search(/[^\s\u00a0]/),t==-1&&(t=e.length));for(var r=0,i=0;r<t;++r)e.charAt(r)=="	"?i+=n-i%n:++i;return i}function ht(e,t){try{var n=e.getBoundingClientRect();n={top:n.top,left:n.left}}catch(r){n={top:0,left:0}}if(!t)if(window.pageYOffset==null){var i=document.documentElement||document.body.parentNode;i.scrollTop==null&&(i=document.body),n.top+=i.scrollTop,n.left+=i.scrollLeft}else n.top+=window.pageYOffset,n.left+=window.pageXOffset;return n}function pt(e){return e.textContent||e.innerText||e.nodeValue||""}function vt(e){while(dt.length<=e)dt.push(mt(dt)+" ");return dt[e]}function mt(e){return e[e.length-1]}function gt(e){t?(e.selectionStart=0,e.selectionEnd=e.value.length):e.select()}function yt(e,t){return e.line==t.line&&e.ch==t.ch}function bt(e,t){return e.line<t.line||e.line==t.line&&e.ch<t.ch}function wt(e){return{line:e.line,ch:e.ch}}function Et(e,t,n,r){var i=document.createElement(e);n&&(i.className=n),r&&(i.style.cssText=r);if(typeof t=="string")Tt(i,t);else if(t)for(var s=0;s<t.length;++s)i.appendChild(t[s]);return i}function St(e){return e.innerHTML="",e}function xt(e,t){St(e).appendChild(t)}function Tt(e,t){g?(e.innerHTML="",e.appendChild(document.createTextNode(t))):e.textContent=t}function Nt(e,t){if(!t)return 0;if(!e)return t.length;for(var n=e.length,r=t.length;n>=0&&r>=0;--n,--r)if(e.charAt(n)!=t.charAt(r))break;return r+1}function Ct(e,t){if(e.indexOf)return e.indexOf(t);for(var n=0,r=e.length;n<r;++n)if(e[n]==t)return n;return-1}function Lt(e){return/\w/.test(e)||e>""&&(e.toUpperCase()!=e.toLowerCase()||kt.test(e))}e.defaults={value:"",mode:null,theme:"default",indentUnit:2,indentWithTabs:!1,smartIndent:!0,tabSize:4,keyMap:"default",extraKeys:null,electricChars:!0,autoClearEmptyLines:!1,onKeyEvent:null,onDragEvent:null,lineWrapping:!1,lineNumbers:!1,gutter:!1,fixedGutter:!1,firstLineNumber:1,showCursorWhenSelecting:!1,readOnly:!1,dragDrop:!0,onChange:null,onCursorActivity:null,onViewportChange:null,onGutterClick:null,onUpdate:null,onFocus:null,onBlur:null,onScroll:null,matchBrackets:!1,cursorBlinkRate:530,workTime:100,workDelay:200,pollInterval:100,undoDepth:40,tabindex:null,autofocus:null,lineNumberFormatter:function(e){return e}};var t=/AppleWebKit/.test(navigator.userAgent)&&/Mobile\/\w+/.test(navigator.userAgent),n=t||/Mac/.test(navigator.platform),r=/Win/.test(navigator.platform),i=e.modes={},s=e.mimeModes={};e.defineMode=function(t,n){!e.defaults.mode&&t!="null"&&(e.defaults.mode=t);if(arguments.length>2){n.dependencies=[];for(var r=2;r<arguments.length;++r)n.dependencies.push(arguments[r])}i[t]=n},e.defineMIME=function(e,t){s[e]=t},e.resolveMode=function(t){if(typeof t=="string"&&s.hasOwnProperty(t))t=s[t];else if(typeof t=="string"&&/^[\w\-]+\/[\w\-]+\+xml$/.test(t))return e.resolveMode("application/xml");return typeof t=="string"?{name:t}:t||{name:"null"}},e.getMode=function(t,n){var n=e.resolveMode(n),r=i[n.name];if(!r)return e.getMode(t,"text/plain");var s=r(t,n);if(a.hasOwnProperty(n.name)){var o=a[n.name];for(var u in o){if(!o.hasOwnProperty(u))continue;s.hasOwnProperty(u)&&(s["_"+u]=s[u]),s[u]=o[u]}}return s.name=n.name,s},e.listModes=function(){var e=[];for(var t in i)i.propertyIsEnumerable(t)&&e.push(t);return e},e.listMIMEs=function(){var e=[];for(var t in s)s.propertyIsEnumerable(t)&&e.push({mime:t,mode:s[t]});return e};var o=e.extensions={};e.defineExtension=function(e,t){o[e]=t};var u=[];e.defineInitHook=function(e){u.push(e)};var a=e.modeExtensions={};e.extendMode=function(e,t){var n=a.hasOwnProperty(e)?a[e]:a[e]={};for(var r in t)t.hasOwnProperty(r)&&(n[r]=t[r])};var f=e.commands={selectAll:function(e){e.setSelection({line:0,ch:0},{line:e.lineCount()-1})},killLine:function(e){var t=e.getCursor(!0),n=e.getCursor(!1),r=!yt(t,n);!r&&e.getLine(t.line).length==t.ch?e.replaceRange("",t,{line:t.line+1,ch:0}):e.replaceRange("",t,r?n:{line:t.line})},deleteLine:function(e){var t=e.getCursor().line;e.replaceRange("",{line:t,ch:0},{line:t})},undo:function(e){e.undo()},redo:function(e){e.redo()},goDocStart:function(e){e.setCursor(0,0,!0)},goDocEnd:function(e){e.setSelection({line:e.lineCount()-1},null,!0)},goLineStart:function(e){e.setCursor(e.getCursor().line,0,!0)},goLineStartSmart:function(e){var t=e.getCursor(),n=e.getLine(t.line),r=Math.max(0,n.search(/\S/));e.setCursor(t.line,t.ch<=r&&t.ch?0:r,!0)},goLineEnd:function(e){e.setSelection({line:e.getCursor().line},null,!0)},goLineUp:function(e){e.moveV(-1,"line")},goLineDown:function(e){e.moveV(1,"line")},goPageUp:function(e){e.moveV(-1,"page")},goPageDown:function(e){e.moveV(1,"page")},goCharLeft:function(e){e.moveH(-1,"char")},goCharRight:function(e){e.moveH(1,"char")},goColumnLeft:function(e){e.moveH(-1,"column")},goColumnRight:function(e){e.moveH(1,"column")},goWordLeft:function(e){e.moveH(-1,"word")},goWordRight:function(e){e.moveH(1,"word")},delCharLeft:function(e){e.deleteH(-1,"char")},delCharRight:function(e){e.deleteH(1,"char")},delWordLeft:function(e){e.deleteH(-1,"word")},delWordRight:function(e){e.deleteH(1,"word")},indentAuto:function(e){e.indentSelection("smart")},indentMore:function(e){e.indentSelection("add")},indentLess:function(e){e.indentSelection("subtract")},insertTab:function(e){e.replaceSelection("	","end")},defaultTab:function(e){e.somethingSelected()?e.indentSelection("add"):e.replaceSelection("	","end")},transposeChars:function(e){var t=e.getCursor(),n=e.getLine(t.line);t.ch>0&&t.ch<n.length-1&&e.replaceRange(n.charAt(t.ch)+n.charAt(t.ch-1),{line:t.line,ch:t.ch-1},{line:t.line,ch:t.ch+1})},newlineAndIndent:function(e){e.replaceSelection("\n","end"),e.indentLine(e.getCursor().line)},toggleOverwrite:function(e){e.toggleOverwrite()}},l=e.keyMap={};l.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharRight",Backspace:"delCharLeft",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite"},l.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Alt-Up":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Down":"goDocEnd","Ctrl-Left":"goWordLeft","Ctrl-Right":"goWordRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delWordLeft","Ctrl-Delete":"delWordRight","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore",fallthrough:"basic"},l.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goWordLeft","Alt-Right":"goWordRight","Cmd-Left":"goLineStart","Cmd-Right":"goLineEnd","Alt-Backspace":"delWordLeft","Ctrl-Alt-Backspace":"delWordRight","Alt-Delete":"delWordRight","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore",fallthrough:["basic","emacsy"]},l["default"]=n?l.macDefault:l.pcDefault,l.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Alt-F":"goWordRight","Alt-B":"goWordLeft","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharRight","Ctrl-H":"delCharLeft","Alt-D":"delWordRight","Alt-Backspace":"delWordLeft","Ctrl-K":"killLine","Ctrl-T":"transposeChars"},e.isModifierKey=p,e.fromTextArea=function(t,n){function s(){t.value=f.getValue()}n||(n={}),n.value=t.value,!n.tabindex&&t.tabindex&&(n.tabindex=t.tabindex);if(n.autofocus==null){var r=document.body;try{r=document.activeElement}catch(i){}n.autofocus=r==t||t.getAttribute("autofocus")!=null&&r==document.body}if(t.form){var o=st(t.form,"submit",s,!0),u=t.form,a=u.submit;t.form.submit=function l(){s(),u.submit=a,u.submit(),u.submit=l}}t.style.display="none";var f=e(function(e){t.parentNode.insertBefore(e,t.nextSibling)},n);return f.save=s,f.getTextArea=function(){return t},f.toTextArea=function(){s(),t.parentNode.removeChild(f.getWrapperElement()),t.style.display="",t.form&&(o(),typeof t.form.submit=="function"&&(t.form.submit=a))},f};var d=/gecko\/\d/i.test(navigator.userAgent),v=/MSIE \d/.test(navigator.userAgent),m=/MSIE [1-7]\b/.test(navigator.userAgent),g=/MSIE [1-8]\b/.test(navigator.userAgent),y=v&&document.documentMode==5,b=/WebKit\//.test(navigator.userAgent),w=b&&/Qt\/\d+\.\d+/.test(navigator.userAgent),E=/Chrome\//.test(navigator.userAgent),S=/Opera\//.test(navigator.userAgent),x=/Apple Computer/.test(navigator.vendor),T=/KHTML\//.test(navigator.userAgent),N=/Mac OS X 10\D([7-9]|\d\d)\D/.test(navigator.userAgent),C=S&&navigator.userAgent.match(/Version\/(\d*\.\d*)/);C&&(C=Number(C[1]));var k=n&&(w||S&&(C==null||C<12.11));e.copyState=L,e.startState=A,e.innerMode=function(e,t){while(e.innerMode){var n=e.innerMode(t);t=n.state,e=n.mode}return n||{mode:e,state:t}},O.prototype={eol:function(){return this.pos>=this.string.length},sol:function(){return this.pos==0},peek:function(){return this.string.charAt(this.pos)||undefined},next:function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},eat:function(e){var t=this.string.charAt(this.pos);if(typeof e=="string")var n=t==e;else var n=t&&(e.test?e.test(t):e(t));if(n)return++this.pos,t},eatWhile:function(e){var t=this.pos;while(this.eat(e));return this.pos>t},eatSpace:function(){var e=this.pos;while(/[\s\u00a0]/.test(this.string.charAt(this.pos)))++this.pos;return this.pos>e},skipToEnd:function(){this.pos=this.string.length},skipTo:function(e){var t=this.string.indexOf(e,this.pos);if(t>-1)return this.pos=t,!0},backUp:function(e){this.pos-=e},column:function(){return ct(this.string,this.start,this.tabSize)},indentation:function(){return ct(this.string,null,this.tabSize)},match:function(e,t,n){if(typeof e!="string"){var i=this.string.slice(this.pos).match(e);return i&&i.index>0?null:(i&&t!==!1&&(this.pos+=i[0].length),i)}var r=function(e){return n?e.toLowerCase():e};if(r(this.string).indexOf(r(e),this.pos)==this.pos)return t!==!1&&(this.pos+=e.length),!0},current:function(){return this.string.slice(this.start,this.pos)}},e.StringStream=O;var U=" ";d||v&&!m?U="​":S&&(U=""),z.prototype={update:function(e,t){this.text=e,this.stateAfter=this.styles=null,q(this),R(this,t)},highlight:function(e,t,n){var r=new O(this.text,n),i=this.styles||(this.styles=[]),s=i.length=0;this.text==""&&e.blankLine&&e.blankLine(t);while(!r.eol()){var o=e.token(r,t),u=r.current();r.start=r.pos,s&&i[s-1]==o?i[s-2]+=u:u&&(i[s++]=u,i[s++]=o);if(r.pos>5e3){i[s++]=this.text.slice(r.pos),i[s++]=null;break}}},process:function(e,t,n){var r=new O(this.text,n);this.text==""&&e.blankLine&&e.blankLine(t);while(!r.eol()&&r.pos<=5e3)e.token(r,t),r.start=r.pos},getTokenAt:function(e,t,n,r){var i=this.text,s=new O(i,n);while(s.pos<r&&!s.eol()){s.start=s.pos;var o=e.token(s,t)}return{start:s.start,end:s.pos,string:s.current(),className:o||null,state:t}},indentation:function(e){return ct(this.text,null,e)},getContent:function(e,t,n){function u(t,n,o){if(!n)return;r&&v&&n.charAt(0)==" "&&(n=" "+n.slice(1)),r=!1;if(!s.test(n)){i+=n.length;var u=document.createTextNode(n)}else{var u=document.createDocumentFragment(),a=0;for(;;){s.lastIndex=a;var f=s.exec(n),l=f?f.index-a:n.length-a;l&&(u.appendChild(document.createTextNode(n.slice(a,a+l))),i+=l);if(!f)break;a+=l+1;if(f[0]=="	"){var c=e-i%e;u.appendChild(Et("span",vt(c),"cm-tab")),i+=c}else{var h=Et("span","•","cm-invalidchar");h.title="\\u"+f[0].charCodeAt(0).toString(16),u.appendChild(h),i+=1}}}o?t.appendChild(Et("span",[u],o)):t.appendChild(u)}function g(e){return e?"cm-"+e.replace(/ +/g," cm-"):null}var r=!0,i=0,s=/[\t\u0000-\u0019\u200b\u2028\u2029\uFEFF]/g,o=Et("pre"),a=u;if(t!=null){var f=0,l=o.anchor=Et("span");a=function(e,r,i){var s=r.length;if(t>=f&&t<f+s){var o=t-f;if(o){u(e,r.slice(0,o),i);if(n){var c=r.slice(o-1,o+1);lt.test(c)?e.appendChild(Et("wbr")):!m&&/\w\w/.test(c)&&e.appendChild(document.createTextNode("‍"))}}e.appendChild(l),u(l,S?r.slice(o,o+1):r.slice(o),i),S&&u(e,r.slice(o+1),i),t--,f+=s}else f+=s,u(e,r,i),f==t&&f==d?(Tt(l,U),e.appendChild(l)):f>t+10&&/\s/.test(r)&&(a=function(){})}}var c=this.styles,h=this.text,p=this.markedSpans,d=h.length;if(!h&&t==null)a(o," ");else if(!p||!p.length)for(var y=0,b=0;b<d;y+=2){var w=c[y],E=c[y+1],x=w.length;b+x>d&&(w=w.slice(0,d-b)),b+=x,a(o,w,g(E))}else{p.sort(function(e,t){return e.from-t.from});var T=0,y=0,N="",E,C=0,k=p[0].from||0,L=[],A=0,O=function(){var e;while(A<p.length&&((e=p[A]).from==T||e.from==null))e.marker.type=="range"&&L.push(e),++A;k=A<p.length?p[A].from:Infinity;for(var t=0;t<L.length;++t){var n=L[t].to;n==null&&(n=Infinity),n==T?L.splice(t--,1):k=Math.min(n,k)}},M=0;while(T<d){k==T&&O();var _=Math.min(d,k);for(;;){if(N){var D=T+N.length,P=E;for(var H=0;H<L.length;++H){var B=L[H];P=(P?P+" ":"")+B.marker.style,B.marker.endStyle&&B.to===Math.min(D,_)&&(P+=" "+B.marker.endStyle),B.marker.startStyle&&B.from===T&&(P+=" "+B.marker.startStyle)}a(o,D>_?N.slice(0,_-T):N,P);if(D>=_){N=N.slice(_-T),T=_;break}T=D}N=c[y++],E=g(c[y++])}}}return o},cleanUp:function(){this.parent=null,q(this)}},W.prototype={chunkSize:function(){return this.lines.length},remove:function(e,t,n){for(var r=e,i=e+t;r<i;++r){var s=this.lines[r];this.height-=s.height,s.cleanUp();if(s.handlers)for(var o=0;o<s.handlers.length;++o)n.push(s.handlers[o])}this.lines.splice(e,t)},collapse:function(e){e.splice.apply(e,[e.length,0].concat(this.lines))},insertHeight:function(e,t,n){this.height+=n,this.lines=this.lines.slice(0,e).concat(t).concat(this.lines.slice(e));for(var r=0,i=t.length;r<i;++r)t[r].parent=this},iterN:function(e,t,n){for(var r=e+t;e<r;++e)if(n(this.lines[e]))return!0}},X.prototype={chunkSize:function(){return this.size},remove:function(e,t,n){this.size-=t;for(var r=0;r<this.children.length;++r){var i=this.children[r],s=i.chunkSize();if(e<s){var o=Math.min(t,s-e),u=i.height;i.remove(e,o,n),this.height-=u-i.height,s==o&&(this.children.splice(r--,1),i.parent=null);if((t-=o)==0)break;e=0}else e-=s}if(this.size-t<25){var a=[];this.collapse(a),this.children=[new W(a)],this.children[0].parent=this}},collapse:function(e){for(var t=0,n=this.children.length;t<n;++t)this.children[t].collapse(e)},insert:function(e,t){var n=0;for(var r=0,i=t.length;r<i;++r)n+=t[r].height;this.insertHeight(e,t,n)},insertHeight:function(e,t,n){this.size+=t.length,this.height+=n;for(var r=0,i=this.children.length;r<i;++r){var s=this.children[r],o=s.chunkSize();if(e<=o){s.insertHeight(e,t,n);if(s.lines&&s.lines.length>50){while(s.lines.length>50){var u=s.lines.splice(s.lines.length-25,25),a=new W(u);s.height-=a.height,this.children.splice(r+1,0,a),a.parent=this}this.maybeSpill()}break}e-=o}},maybeSpill:function(){if(this.children.length<=10)return;var e=this;do{var t=e.children.splice(e.children.length-5,5),n=new X(t);if(!e.parent){var r=new X(e.children);r.parent=e,e.children=[r,n],e=r}else{e.size-=n.size,e.height-=n.height;var i=Ct(e.parent.children,e);e.parent.children.splice(i+1,0,n)}n.parent=e.parent}while(e.children.length>10);e.parent.maybeSpill()},iter:function(e,t,n){this.iterN(e,t-e,n)},iterN:function(e,t,n){for(var r=0,i=this.children.length;r<i;++r){var s=this.children[r],o=s.chunkSize();if(e<o){var u=Math.min(t,o-e);if(s.iterN(e,u,n))return!0;if((t-=u)==0)break;e=0}else e-=o}}},Q.prototype={addChange:function(e,t,n){this.undone.length=0;var r=+(new Date),i=mt(this.done),s=i&&mt(i),o=r-this.time;if(i&&!this.closed&&this.compound)i.push({start:e,added:t,old:n});else if(o>400||!s||this.closed||s.start>e+n.length||s.start+s.added<e)this.done.push([{start:e,added:t,old:n}]),this.closed=!1;else{var u=Math.max(0,s.start-e),a=Math.max(0,e+n.length-(s.start+s.added));for(var f=u;f>0;--f)s.old.unshift(n[f-1]);for(var f=a;f>0;--f)s.old.push(n[n.length-f]);u&&(s.start=e),s.added+=t-(n.length-u-a)}this.time=r},startCompound:function(){this.compound++||(this.closed=!0)},endCompound:function(){--this.compound||(this.closed=!0)}},e.e_stop=tt,e.e_preventDefault=Z,e.e_stopPropagation=et,e.connect=st,ot.prototype={set:function(e,t){clearTimeout(this.id),this.id=setTimeout(t,e)}};var ut=e.Pass={toString:function(){return"CodeMirror.Pass"}},at=function(){if(g)return!1;var e=Et("div");return"draggable"in e||"dragDrop"in e}(),ft=function(){var e=Et("textarea");return e.value="foo\nbar",e.value.indexOf("\r")>-1?"\r\n":"\n"}(),lt=/^$/;d?lt=/$'/:x?lt=/\-[^ \-?]|\?[^ !'\"\),.\-\/:;\?\]\}]/:E&&(lt=/\-[^ \-\.?]|\?[^ \-\.?\]\}:;!'\"\),\/]|[\.!\"#&%\)*+,:;=>\]|\}~][\(\{\[<]|\$'/);var dt=[""],kt=/[\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc]/,At="\n\nb".split(/\n/).length!=3?function(e){var t=0,n=[],r=e.length;while(t<=r){var i=e.indexOf("\n",t);i==-1&&(i=e.length);var s=e.slice(t,e.charAt(i-1)=="\r"?i-1:i),o=s.indexOf("\r");o!=-1?(n.push(s.slice(0,o)),t+=o+1):(n.push(s),t=i+1)}return n}:function(e){return e.split(/\r\n?|\n/)};e.splitLines=At;var Ot=window.getSelection?function(e){try{return e.selectionStart!=e.selectionEnd}catch(t){return!1}}:function(e){try{var t=e.ownerDocument.selection.createRange()}catch(n){}return!t||t.parentElement()!=e?!1:t.compareEndPoints("StartToEnd",t)!=0};e.defineMode("null",function(){return{token:function(e){e.skipToEnd()}}}),e.defineMIME("text/plain","null");var Mt={3:"Enter",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",91:"Mod",92:"Mod",93:"Mod",109:"-",107:"=",127:"Delete",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",63276:"PageUp",63277:"PageDown",63275:"End",63273:"Home",63234:"Left",63232:"Up",63235:"Right",63233:"Down",63302:"Insert",63272:"Delete"};return e.keyNames=Mt,function(){for(var e=0;e<10;e++)Mt[e+48]=String(e);for(var e=65;e<=90;e++)Mt[e]=String.fromCharCode(e);for(var e=1;e<=12;e++)Mt[e+111]=Mt[e+63235]="F"+e}(),e.version="2.38 +",e}(),define("cm",function(){}),CodeMirror.defineMode("css",function(e){function a(e){var t={};for(var n=0;n<e.length;++n)t[e[n]]=!0;return t}function f(e,t){return n=t,e}function l(e,t){var r=e.next();if(r=="@")return e.eatWhile(/[\w\\\-]/),f("def",e.current());if(r=="/"&&e.eat("*"))return t.tokenize=c,c(e,t);if(r=="<"&&e.eat("!"))return t.tokenize=h,h(e,t);if(r=="=")f(null,"compare");else{if(!(r!="~"&&r!="|"||!e.eat("=")))return f(null,"compare");if(r=='"'||r=="'")return t.tokenize=p(r),t.tokenize(e,t);if(r=="#")return e.eatWhile(/[\w\\\-]/),f("atom","hash");if(r=="!")return e.match(/^\s*\w*/),f("keyword","important");if(/\d/.test(r))return e.eatWhile(/[\w.%]/),f("number","unit");if(r!=="-")return/[,+>*\/]/.test(r)?f(null,"select-op"):r=="."&&e.match(/^-?[_a-z][_a-z0-9-]*/i)?f("qualifier",n):r==":"?f("operator",r):/[;{}\[\]\(\)]/.test(r)?f(null,r):r=="u"&&e.match("rl(")?(e.backUp(1),t.tokenize=d,f("property","variable")):(e.eatWhile(/[\w\\\-]/),f("property","variable"));if(/\d/.test(e.peek()))return e.eatWhile(/[\w.%]/),f("number","unit");if(e.match(/^[^-]+-/))return f("meta",n)}}function c(e,t){var n=!1,r;while((r=e.next())!=null){if(n&&r=="/"){t.tokenize=l;break}n=r=="*"}return f("comment","comment")}function h(e,t){var n=0,r;while((r=e.next())!=null){if(n>=2&&r==">"){t.tokenize=l;break}n=r=="-"?n+1:0}return f("comment","comment")}function p(e,t){return function(n,r){var i=!1,s;while((s=n.next())!=null){if(s==e&&!i)break;i=!i&&s=="\\"}return i||(t&&n.backUp(1),r.tokenize=l),f("string","string")}}function d(e,t){return e.next(),e.match(/\s*[\"\']/,!1)?t.tokenize=l:t.tokenize=p(")",!0),f(null,"(")}var t=e.indentUnit,n,r=a(["all","aural","braille","handheld","print","projection","screen","tty","tv","embossed"]),i=a(["width","min-width","max-width","height","min-height","max-height","device-width","min-device-width","max-device-width","device-height","min-device-height","max-device-height","aspect-ratio","min-aspect-ratio","max-aspect-ratio","device-aspect-ratio","min-device-aspect-ratio","max-device-aspect-ratio","color","min-color","max-color","color-index","min-color-index","max-color-index","monochrome","min-monochrome","max-monochrome","resolution","min-resolution","max-resolution","scan","grid"]),s=a(["align-content","align-items","align-self","alignment-adjust","alignment-baseline","anchor-point","animation","animation-delay","animation-direction","animation-duration","animation-iteration-count","animation-name","animation-play-state","animation-timing-function","appearance","azimuth","backface-visibility","background","background-attachment","background-clip","background-color","background-image","background-origin","background-position","background-repeat","background-size","baseline-shift","binding","bleed","bookmark-label","bookmark-level","bookmark-state","bookmark-target","border","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-image","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-right-color","border-right-style","border-right-width","border-spacing","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","bottom","box-decoration-break","box-shadow","box-sizing","break-after","break-before","break-inside","caption-side","clear","clip","color","color-profile","column-count","column-fill","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","columns","content","counter-increment","counter-reset","crop","cue","cue-after","cue-before","cursor","direction","display","dominant-baseline","drop-initial-after-adjust","drop-initial-after-align","drop-initial-before-adjust","drop-initial-before-align","drop-initial-size","drop-initial-value","elevation","empty-cells","fit","fit-position","flex","flex-basis","flex-direction","flex-flow","flex-grow","flex-shrink","flex-wrap","float","float-offset","font","font-feature-settings","font-family","font-kerning","font-language-override","font-size","font-size-adjust","font-stretch","font-style","font-synthesis","font-variant","font-variant-alternates","font-variant-caps","font-variant-east-asian","font-variant-ligatures","font-variant-numeric","font-variant-position","font-weight","grid-cell","grid-column","grid-column-align","grid-column-sizing","grid-column-span","grid-columns","grid-flow","grid-row","grid-row-align","grid-row-sizing","grid-row-span","grid-rows","grid-template","hanging-punctuation","height","hyphens","icon","image-orientation","image-rendering","image-resolution","inline-box-align","justify-content","left","letter-spacing","line-break","line-height","line-stacking","line-stacking-ruby","line-stacking-shift","line-stacking-strategy","list-style","list-style-image","list-style-position","list-style-type","margin","margin-bottom","margin-left","margin-right","margin-top","marker-offset","marks","marquee-direction","marquee-loop","marquee-play-count","marquee-speed","marquee-style","max-height","max-width","min-height","min-width","move-to","nav-down","nav-index","nav-left","nav-right","nav-up","opacity","order","orphans","outline","outline-color","outline-offset","outline-style","outline-width","overflow","overflow-style","overflow-wrap","overflow-x","overflow-y","padding","padding-bottom","padding-left","padding-right","padding-top","page","page-break-after","page-break-before","page-break-inside","page-policy","pause","pause-after","pause-before","perspective","perspective-origin","pitch","pitch-range","play-during","position","presentation-level","punctuation-trim","quotes","rendering-intent","resize","rest","rest-after","rest-before","richness","right","rotation","rotation-point","ruby-align","ruby-overhang","ruby-position","ruby-span","size","speak","speak-as","speak-header","speak-numeral","speak-punctuation","speech-rate","stress","string-set","tab-size","table-layout","target","target-name","target-new","target-position","text-align","text-align-last","text-decoration","text-decoration-color","text-decoration-line","text-decoration-skip","text-decoration-style","text-emphasis","text-emphasis-color","text-emphasis-position","text-emphasis-style","text-height","text-indent","text-justify","text-outline","text-shadow","text-space-collapse","text-transform","text-underline-position","text-wrap","top","transform","transform-origin","transform-style","transition","transition-delay","transition-duration","transition-property","transition-timing-function","unicode-bidi","vertical-align","visibility","voice-balance","voice-duration","voice-family","voice-pitch","voice-range","voice-rate","voice-stress","voice-volume","volume","white-space","widows","width","word-break","word-spacing","word-wrap","z-index"]),o=a(["black","silver","gray","white","maroon","red","purple","fuchsia","green","lime","olive","yellow","navy","blue","teal","aqua"]),u=a(["above","absolute","activeborder","activecaption","afar","after-white-space","ahead","alias","all","all-scroll","alternate","always","amharic","amharic-abegede","antialiased","appworkspace","arabic-indic","armenian","asterisks","auto","avoid","background","backwards","baseline","below","bidi-override","binary","bengali","blink","block","block-axis","bold","bolder","border","border-box","both","bottom","break-all","break-word","button","button-bevel","buttonface","buttonhighlight","buttonshadow","buttontext","cambodian","capitalize","caps-lock-indicator","caption","captiontext","caret","cell","center","checkbox","circle","cjk-earthly-branch","cjk-heavenly-stem","cjk-ideographic","clear","clip","close-quote","col-resize","collapse","compact","condensed","contain","content","content-box","context-menu","continuous","copy","cover","crop","cross","crosshair","currentcolor","cursive","dashed","decimal","decimal-leading-zero","default","default-button","destination-atop","destination-in","destination-out","destination-over","devanagari","disc","discard","document","dot-dash","dot-dot-dash","dotted","double","down","e-resize","ease","ease-in","ease-in-out","ease-out","element","ellipsis","embed","end","ethiopic","ethiopic-abegede","ethiopic-abegede-am-et","ethiopic-abegede-gez","ethiopic-abegede-ti-er","ethiopic-abegede-ti-et","ethiopic-halehame-aa-er","ethiopic-halehame-aa-et","ethiopic-halehame-am-et","ethiopic-halehame-gez","ethiopic-halehame-om-et","ethiopic-halehame-sid-et","ethiopic-halehame-so-et","ethiopic-halehame-ti-er","ethiopic-halehame-ti-et","ethiopic-halehame-tig","ew-resize","expanded","extra-condensed","extra-expanded","fantasy","fast","fill","fixed","flat","footnotes","forwards","from","geometricPrecision","georgian","graytext","groove","gujarati","gurmukhi","hand","hangul","hangul-consonant","hebrew","help","hidden","hide","higher","highlight","highlighttext","hiragana","hiragana-iroha","horizontal","hsl","hsla","icon","ignore","inactiveborder","inactivecaption","inactivecaptiontext","infinite","infobackground","infotext","inherit","initial","inline","inline-axis","inline-block","inline-table","inset","inside","intrinsic","invert","italic","justify","kannada","katakana","katakana-iroha","khmer","landscape","lao","large","larger","left","level","lighter","line-through","linear","lines","list-item","listbox","listitem","local","logical","loud","lower","lower-alpha","lower-armenian","lower-greek","lower-hexadecimal","lower-latin","lower-norwegian","lower-roman","lowercase","ltr","malayalam","match","media-controls-background","media-current-time-display","media-fullscreen-button","media-mute-button","media-play-button","media-return-to-realtime-button","media-rewind-button","media-seek-back-button","media-seek-forward-button","media-slider","media-sliderthumb","media-time-remaining-display","media-volume-slider","media-volume-slider-container","media-volume-sliderthumb","medium","menu","menulist","menulist-button","menulist-text","menulist-textfield","menutext","message-box","middle","min-intrinsic","mix","mongolian","monospace","move","multiple","myanmar","n-resize","narrower","navy","ne-resize","nesw-resize","no-close-quote","no-drop","no-open-quote","no-repeat","none","normal","not-allowed","nowrap","ns-resize","nw-resize","nwse-resize","oblique","octal","open-quote","optimizeLegibility","optimizeSpeed","oriya","oromo","outset","outside","overlay","overline","padding","padding-box","painted","paused","persian","plus-darker","plus-lighter","pointer","portrait","pre","pre-line","pre-wrap","preserve-3d","progress","push-button","radio","read-only","read-write","read-write-plaintext-only","relative","repeat","repeat-x","repeat-y","reset","reverse","rgb","rgba","ridge","right","round","row-resize","rtl","run-in","running","s-resize","sans-serif","scroll","scrollbar","se-resize","searchfield","searchfield-cancel-button","searchfield-decoration","searchfield-results-button","searchfield-results-decoration","semi-condensed","semi-expanded","separate","serif","show","sidama","single","skip-white-space","slide","slider-horizontal","slider-vertical","sliderthumb-horizontal","sliderthumb-vertical","slow","small","small-caps","small-caption","smaller","solid","somali","source-atop","source-in","source-out","source-over","space","square","square-button","start","static","status-bar","stretch","stroke","sub","subpixel-antialiased","super","sw-resize","table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row","table-row-group","telugu","text","text-bottom","text-top","textarea","textfield","thai","thick","thin","threeddarkshadow","threedface","threedhighlight","threedlightshadow","threedshadow","tibetan","tigre","tigrinya-er","tigrinya-er-abegede","tigrinya-et","tigrinya-et-abegede","to","top","transparent","ultra-condensed","ultra-expanded","underline","up","upper-alpha","upper-armenian","upper-greek","upper-hexadecimal","upper-latin","upper-norwegian","upper-roman","uppercase","urdu","url","vertical","vertical-text","visible","visibleFill","visiblePainted","visibleStroke","visual","w-resize","wait","wave","white","wider","window","windowframe","windowtext","x-large","x-small","xor","xx-large","xx-small","yellow"]);return{startState:function(e){return{tokenize:l,baseIndent:e||0,stack:[]}},token:function(e,t){if(t.tokenize==l&&e.eatSpace())return null;var a=t.tokenize(e,t),f=t.stack[t.stack.length-1];return a=="property"?f=="propertyValue"?u[e.current()]?a="string-2":o[e.current()]?a="keyword":a="variable-2":f=="rule"?s[e.current()]||(a+=" error"):!f||f=="@media{"?a="tag":f=="@media"?r[e.current()]?a="attribute":/^(only|not)$/i.test(e.current())?a="keyword":e.current().toLowerCase()=="and"?a="error":i[e.current()]?a="error":a="attribute error":f=="@mediaType"?r[e.current()]?a="attribute":e.current().toLowerCase()=="and"?a="operator":/^(only|not)$/i.test(e.current())?a="error":i[e.current()]?a="error":a="error":f=="@mediaType("?s[e.current()]||(r[e.current()]?a="error":e.current().toLowerCase()=="and"?a="operator":/^(only|not)$/i.test(e.current())?a="error":a+=" error"):a="error":a=="atom"?!f||f=="@media{"?a="builtin":f=="propertyValue"?/^#([0-9a-fA-f]{3}|[0-9a-fA-f]{6})$/.test(e.current())||(a+=" error"):a="error":f=="@media"&&n=="{"&&(a="error"),n=="{"?f=="@media"||f=="@mediaType"?(t.stack.pop(),t.stack[t.stack.length-1]="@media{"):t.stack.push("rule"):n=="}"?(t.stack.pop(),f=="propertyValue"&&t.stack.pop()):n=="@media"?t.stack.push("@media"):f=="@media"&&/\b(keyword|attribute)\b/.test(a)?t.stack.push("@mediaType"):f=="@mediaType"&&e.current()==","?t.stack.pop():f=="@mediaType"&&n=="("?t.stack.push("@mediaType("):f=="@mediaType("&&n==")"?t.stack.pop():f=="rule"&&n==":"?t.stack.push("propertyValue"):f=="propertyValue"&&n==";"&&t.stack.pop(),a},indent:function(e,n){var r=e.stack.length;return/^\}/.test(n)&&(r-=e.stack[e.stack.length-1]=="propertyValue"?2:1),e.baseIndent+r*t},electricChars:"}"}}),CodeMirror.defineMIME("text/css","css"),define("cm-css",function(){}),CodeMirror.defineMode("javascript",function(e,t){function u(e,t,n){return t.tokenize=n,n(e,t)}function a(e,t){var n=!1,r;while((r=e.next())!=null){if(r==t&&!n)return!1;n=!n&&r=="\\"}return n}function c(e,t,n){return f=e,l=n,t}function h(e,t){var n=e.next();if(n=='"'||n=="'")return u(e,t,p(n));if(/[\[\]{}\(\),;\:\.]/.test(n))return c(n);if(n=="0"&&e.eat(/x/i))return e.eatWhile(/[\da-f]/i),c("number","number");if(/\d/.test(n)||n=="-"&&e.eat(/\d/))return e.match(/^\d*(?:\.\d*)?(?:[eE][+\-]?\d+)?/),c("number","number");if(n=="/")return e.eat("*")?u(e,t,d):e.eat("/")?(e.skipToEnd(),c("comment","comment")):t.lastType=="operator"||t.lastType=="keyword c"||/^[\[{}\(,;:]$/.test(t.lastType)?(a(e,"/"),e.eatWhile(/[gimy]/),c("regexp","string-2")):(e.eatWhile(o),c("operator",null,e.current()));if(n=="#")return e.skipToEnd(),c("error","error");if(o.test(n))return e.eatWhile(o),c("operator",null,e.current());e.eatWhile(/[\w\$_]/);var r=e.current(),i=s.propertyIsEnumerable(r)&&s[r];return i&&t.lastType!="."?c(i.type,i.style,r):c("variable","variable",r)}function p(e){return function(t,n){return a(t,e)||(n.tokenize=h),c("string","string")}}function d(e,t){var n=!1,r;while(r=e.next()){if(r=="/"&&n){t.tokenize=h;break}n=r=="*"}return c("comment","comment")}function m(e,t,n,r,i,s){this.indented=e,this.column=t,this.type=n,this.prev=i,this.info=s,r!=null&&(this.align=r)}function g(e,t){for(var n=e.localVars;n;n=n.next)if(n.name==t)return!0}function y(e,t,n,i,s){var o=e.cc;b.state=e,b.stream=s,b.marked=null,b.cc=o,e.lexical.hasOwnProperty("align")||(e.lexical.align=!0);for(;;){var u=o.length?o.pop():r?O:A;if(u(n,i)){while(o.length&&o[o.length-1].lex)o.pop()();return b.marked?b.marked:n=="variable"&&g(e,i)?"variable-2":t}}}function w(){for(var e=arguments.length-1;e>=0;e--)b.cc.push(arguments[e])}function E(){return w.apply(null,arguments),!0}function S(e){function t(t){for(var n=t;n;n=n.next)if(n.name==e)return!0;return!1}var n=b.state;if(n.context){b.marked="def";if(t(n.localVars))return;n.localVars={name:e,next:n.localVars}}else{if(t(n.globalVars))return;n.globalVars={name:e,next:n.globalVars}}}function T(){b.state.context={prev:b.state.context,vars:b.state.localVars},b.state.localVars=x}function N(){b.state.localVars=b.state.context.vars,b.state.context=b.state.context.prev}function C(e,t){var n=function(){var n=b.state;n.lexical=new m(n.indented,b.stream.column(),e,null,n.lexical,t)};return n.lex=!0,n}function k(){var e=b.state;e.lexical.prev&&(e.lexical.type==")"&&(e.indented=e.lexical.indented),e.lexical=e.lexical.prev)}function L(e){return function(n){return n==e?E():e==";"?w():E(arguments.callee)}}function A(e){return e=="var"?E(C("vardef"),q,L(";"),k):e=="keyword a"?E(C("form"),O,A,k):e=="keyword b"?E(C("form"),A,k):e=="{"?E(C("}"),j,k):e==";"?E():e=="function"?E(V):e=="for"?E(C("form"),L("("),C(")"),U,L(")"),k,A,k):e=="variable"?E(C("stat"),D):e=="switch"?E(C("form"),O,C("}","switch"),L("{"),j,k,k):e=="case"?E(O,L(":")):e=="default"?E(L(":")):e=="catch"?E(C("form"),T,L("("),$,L(")"),A,k,N):w(C("stat"),O,L(";"),k)}function O(e){return v.hasOwnProperty(e)?E(_):e=="function"?E(V):e=="keyword c"?E(M):e=="("?E(C(")"),M,L(")"),k,_):e=="operator"?E(O):e=="["?E(C("]"),B(O,"]"),k,_):e=="{"?E(C("}"),B(H,"}"),k,_):E()}function M(e){return e.match(/[;\}\)\],]/)?w():w(O)}function _(e,t){if(e=="operator"&&/\+\+|--/.test(t))return E(_);if(e=="operator"&&t=="?")return E(O,L(":"),O);if(e==";")return;if(e=="(")return E(C(")"),B(O,")"),k,_);if(e==".")return E(P,_);if(e=="[")return E(C("]"),O,L("]"),k,_)}function D(e){return e==":"?E(k,A):w(_,L(";"),k)}function P(e){if(e=="variable")return b.marked="property",E()}function H(e){e=="variable"&&(b.marked="property");if(v.hasOwnProperty(e))return E(L(":"),O)}function B(e,t){function n(r){return r==","?E(e,n):r==t?E():E(L(t))}return function(i){return i==t?E():w(e,n)}}function j(e){return e=="}"?E():w(A,j)}function F(e){return e==":"?E(I):w()}function I(e){return e=="variable"?(b.marked="variable-3",E()):w()}function q(e,t){return e=="variable"?(S(t),i?E(F,R):E(R)):w()}function R(e,t){if(t=="=")return E(O,R);if(e==",")return E(q)}function U(e){return e=="var"?E(q,L(";"),W):e==";"?E(W):e=="variable"?E(z):E(W)}function z(e,t){return t=="in"?E(O):E(_,W)}function W(e,t){return e==";"?E(X):t=="in"?E(O):E(O,L(";"),X)}function X(e){e!=")"&&E(O)}function V(e,t){if(e=="variable")return S(t),E(V);if(e=="(")return E(C(")"),T,B($,")"),k,A,N)}function $(e,t){if(e=="variable")return S(t),i?E(F):E()}var n=e.indentUnit,r=t.json,i=t.typescript,s=function(){function e(e){return{type:e,style:"keyword"}}var t=e("keyword a"),n=e("keyword b"),r=e("keyword c"),s=e("operator"),o={type:"atom",style:"atom"},u={"if":t,"while":t,"with":t,"else":n,"do":n,"try":n,"finally":n,"return":r,"break":r,"continue":r,"new":r,"delete":r,"throw":r,"var":e("var"),"const":e("var"),let:e("var"),"function":e("function"),"catch":e("catch"),"for":e("for"),"switch":e("switch"),"case":e("case"),"default":e("default"),"in":s,"typeof":s,"instanceof":s,"true":o,"false":o,"null":o,"undefined":o,NaN:o,Infinity:o};if(i){var a={type:"variable",style:"variable-3"},f={"interface":e("interface"),"class":e("class"),"extends":e("extends"),constructor:e("constructor"),"public":e("public"),"private":e("private"),"protected":e("protected"),"static":e("static"),"super":e("super"),string:a,number:a,bool:a,any:a};for(var l in f)u[l]=f[l]}return u}(),o=/[+\-*&%=<>!?|]/,f,l,v={atom:!0,number:!0,variable:!0,string:!0,regexp:!0},b={state:null,column:null,marked:null,cc:null},x={name:"this",next:{name:"arguments"}};return k.lex=!0,{startState:function(e){return{tokenize:h,lastType:null,cc:[],lexical:new m((e||0)-n,0,"block",!1),localVars:t.localVars,globalVars:t.globalVars,context:t.localVars&&{vars:t.localVars},indented:0}},token:function(e,t){e.sol()&&(t.lexical.hasOwnProperty("align")||(t.lexical.align=!1),t.indented=e.indentation());if(e.eatSpace())return null;var n=t.tokenize(e,t);return f=="comment"?n:(t.lastType=f,y(t,n,f,l,e))},indent:function(e,t){if(e.tokenize==d)return CodeMirror.Pass;if(e.tokenize!=h)return 0;var r=t&&t.charAt(0),i=e.lexical;i.type=="stat"&&r=="}"&&(i=i.prev);var s=i.type,o=r==s;return s=="vardef"?i.indented+(e.lastType=="operator"||e.lastType==","?4:0):s=="form"&&r=="{"?i.indented:s=="form"?i.indented+n:s=="stat"?i.indented+(e.lastType=="operator"||e.lastType==","?n:0):i.info=="switch"&&!o?i.indented+(/^(?:case|default)\b/.test(t)?n:2*n):i.align?i.column+(o?0:1):i.indented+(o?0:n)},electricChars:":{}",jsonMode:r}}),CodeMirror.defineMIME("text/javascript","javascript"),CodeMirror.defineMIME("text/ecmascript","javascript"),CodeMirror.defineMIME("application/javascript","javascript"),CodeMirror.defineMIME("application/ecmascript","javascript"),CodeMirror.defineMIME("application/json",{name:"javascript",json:!0}),CodeMirror.defineMIME("text/typescript",{name:"javascript",typescript:!0}),CodeMirror.defineMIME("application/typescript",{name:"javascript",typescript:!0}),define("cm-js",function(){}),CodeMirror.defineMode("xml",function(e,t){function u(e,t){function n(n){return t.tokenize=n,n(e,t)}var r=e.next();if(r=="<"){if(e.eat("!"))return e.eat("[")?e.match("CDATA[")?n(l("atom","]]>")):null:e.match("--")?n(l("comment","-->")):e.match("DOCTYPE",!0,!0)?(e.eatWhile(/[\w\._\-]/),n(c(1))):null;if(e.eat("?"))return e.eatWhile(/[\w\._\-]/),t.tokenize=l("meta","?>"),"meta";var i=e.eat("/");s="";var u;while(u=e.eat(/[^\s\u00a0=<>\"\'\/?]/))s+=u;return s?(o=i?"closeTag":"openTag",t.tokenize=a,"tag"):"error"}if(r=="&"){var f;return e.eat("#")?e.eat("x")?f=e.eatWhile(/[a-fA-F\d]/)&&e.eat(";"):f=e.eatWhile(/[\d]/)&&e.eat(";"):f=e.eatWhile(/[\w\.\-:]/)&&e.eat(";"),f?"atom":"error"}return e.eatWhile(/[^&<]/),null}function a(e,t){var n=e.next();return n==">"||n=="/"&&e.eat(">")?(t.tokenize=u,o=n==">"?"endTag":"selfcloseTag","tag"):n=="="?(o="equals",null):/[\'\"]/.test(n)?(t.tokenize=f(n),t.tokenize(e,t)):(e.eatWhile(/[^\s\u00a0=<>\"\']/),"word")}function f(e){return function(t,n){while(!t.eol())if(t.next()==e){n.tokenize=a;break}return"string"}}function l(e,t){return function(n,r){while(!n.eol()){if(n.match(t)){r.tokenize=u;break}n.next()}return e}}function c(e){return function(t,n){var r;while((r=t.next())!=null){if(r=="<")return n.tokenize=c(e+1),n.tokenize(t,n);if(r==">"){if(e==1){n.tokenize=u;break}return n.tokenize=c(e-1),n.tokenize(t,n)}}return"meta"}}function d(){for(var e=arguments.length-1;e>=0;e--)h.cc.push(arguments[e])}function v(){return d.apply(null,arguments),!0}function m(e,t){var n=r.doNotIndent.hasOwnProperty(e)||h.context&&h.context.noIndent;h.context={prev:h.context,tagName:e,indent:h.indented,startOfLine:t,noIndent:n}}function g(){h.context&&(h.context=h.context.prev)}function y(e){if(e=="openTag")return h.tagName=s,v(S,b(h.startOfLine));if(e=="closeTag"){var t=!1;return h.context?h.context.tagName!=s&&(r.implicitlyClosed.hasOwnProperty(h.context.tagName.toLowerCase())&&g(),t=!h.context||h.context.tagName!=s):t=!0,t&&(p="error"),v(w(t))}return v()}function b(e){return function(t){return t=="selfcloseTag"||t=="endTag"&&r.autoSelfClosers.hasOwnProperty(h.tagName.toLowerCase())?(E(h.tagName.toLowerCase()),v()):t=="endTag"?(E(h.tagName.toLowerCase()),m(h.tagName,e),v()):v()}}function w(e){return function(t){return e&&(p="error"),t=="endTag"?(g(),v()):(p="error",v(arguments.callee))}}function E(e){var t;for(;;){if(!h.context)return;t=h.context.tagName.toLowerCase();if(!r.contextGrabbers.hasOwnProperty(t)||!r.contextGrabbers[t].hasOwnProperty(e))return;g()}}function S(e){return e=="word"?(p="attribute",v(x,S)):e=="endTag"||e=="selfcloseTag"?d():(p="error",v(S))}function x(e){return e=="equals"?v(T,S):(r.allowMissing?e=="word"&&(p="attribute"):p="error",e=="endTag"||e=="selfcloseTag"?d():v())}function T(e){return e=="string"?v(N):e=="word"&&r.allowUnquoted?(p="string",v()):(p="error",e=="endTag"||e=="selfCloseTag"?d():v())}function N(e){return e=="string"?v(N):d()}var n=e.indentUnit,r=t.htmlMode?{autoSelfClosers:{area:!0,base:!0,br:!0,col:!0,command:!0,embed:!0,frame:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0},implicitlyClosed:{dd:!0,li:!0,optgroup:!0,option:!0,p:!0,rp:!0,rt:!0,tbody:!0,td:!0,tfoot:!0,th:!0,tr:!0},contextGrabbers:{dd:{dd:!0,dt:!0},dt:{dd:!0,dt:!0},li:{li:!0},option:{option:!0,optgroup:!0},optgroup:{optgroup:!0},p:{address:!0,article:!0,aside:!0,blockquote:!0,dir:!0,div:!0,dl:!0,fieldset:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,menu:!0,nav:!0,ol:!0,p:!0,pre:!0,section:!0,table:!0,ul:!0},rp:{rp:!0,rt:!0},rt:{rp:!0,rt:!0},tbody:{tbody:!0,tfoot:!0},td:{td:!0,th:!0},tfoot:{tbody:!0},th:{td:!0,th:!0},thead:{tbody:!0,tfoot:!0},tr:{tr:!0}},doNotIndent:{pre:!0},allowUnquoted:!0,allowMissing:!0}:{autoSelfClosers:{},implicitlyClosed:{},contextGrabbers:{},doNotIndent:{},allowUnquoted:!1,allowMissing:!1},i=t.alignCDATA,s,o,h,p;return{startState:function(){return{tokenize:u,cc:[],indented:0,startOfLine:!0,tagName:null,context:null}},token:function(e,t){e.sol()&&(t.startOfLine=!0,t.indented=e.indentation());if(e.eatSpace())return null;p=o=s=null;var n=t.tokenize(e,t);t.type=o;if((n||o)&&n!="comment"){h=t;for(;;){var r=t.cc.pop()||y;if(r(o||n))break}}return t.startOfLine=!1,p||n},indent:function(e,t,r){var s=e.context;if(e.tokenize!=a&&e.tokenize!=u||s&&s.noIndent)return r?r.match(/^(\s*)/)[0].length:0;if(i&&/<!\[CDATA\[/.test(t))return 0;s&&/^<\//.test(t)&&(s=s.prev);while(s&&!s.startOfLine)s=s.prev;return s?s.indent+n:0},electricChars:"/",configuration:t.htmlMode?"html":"xml"}}),CodeMirror.defineMIME("text/xml","xml"),CodeMirror.defineMIME("application/xml","xml"),CodeMirror.mimeModes.hasOwnProperty("text/html")||CodeMirror.defineMIME("text/html",{name:"xml",htmlMode:!0}),define("cm-xml",function(){}),CodeMirror.defineMode("htmlmixed",function(e){function i(e,i){var s=t.token(e,i.htmlState);return/(?:^|\s)tag(?:\s|$)/.test(s)&&e.current()==">"&&i.htmlState.context&&(/^script$/i.test(i.htmlState.context.tagName)?(i.token=o,i.localState=n.startState(t.indent(i.htmlState,""))):/^style$/i.test(i.htmlState.context.tagName)&&(i.token=u,i.localState=r.startState(t.indent(i.htmlState,"")))),s}function s(e,t,n){var r=e.current(),i=r.search(t),s;if(i>-1)e.backUp(r.length-i);else if(s=r.match(/<\/?$/))e.backUp(r.length),e.match(t,!1)||e.match(r[0]);return n}function o(e,t){return e.match(/^<\/\s*script\s*>/i,!1)?(t.token=i,t.localState=null,i(e,t)):s(e,/<\/\s*script\s*>/,n.token(e,t.localState))}function u(e,t){return e.match(/^<\/\s*style\s*>/i,!1)?(t.token=i,t.localState=null,i(e,t)):s(e,/<\/\s*style\s*>/,r.token(e,t.localState))}var t=CodeMirror.getMode(e,{name:"xml",htmlMode:!0}),n=CodeMirror.getMode(e,"javascript"),r=CodeMirror.getMode(e,"css");return{startState:function(){var e=t.startState();return{token:i,localState:null,mode:"html",htmlState:e}},copyState:function(e){if(e.localState)var i=CodeMirror.copyState(e.token==u?r:n,e.localState);return{token:e.token,localState:i,mode:e.mode,htmlState:CodeMirror.copyState(t,e.htmlState)}},token:function(e,t){return t.token(e,t)},indent:function(e,s){return e.token==i||/^\s*<\//.test(s)?t.indent(e.htmlState,s):e.token==o?n.indent(e.localState,s):r.indent(e.localState,s)},electricChars:"/{}:",innerMode:function(e){var s=e.token==i?t:e.token==o?n:r;return{state:e.localState||e.htmlState,mode:s}}}},"xml","javascript","css"),CodeMirror.defineMIME("text/html","htmlmixed"),define("cm-html",function(){}),define("view/StructureView",["text!template/structure.html","cm","cm-css","cm-js","cm-xml","cm-html"],function(e){function a(){m(),E(),M()}function f(){b(!0)}function l(){b(!1)}function c(){t!="null"&&i==""&&(i=setInterval(p,Heiduc.AUTOSAVE_TIMEOUT*1e3))}function h(){i!=""&&(clearInterval(i),i="")}function p(){b(!0)}function d(){return $("#autosave:checked").length>0}function v(){d()?c():h()}function m(){r=t!="",r||(n=null,g()),Heiduc.jsonrpc.structureService.getById(function(e){n=e,g()},t)}function g(){n!=null?($("#title").val(n.title),$("#xmlContent").val(n.content)):($("#title").val(""),$("#xmlContent").val("")),u=CodeMirror.fromTextArea(document.getElementById("xmlContent"),{lineNumbers:!0,lineWrapping:!0,theme:"eclipse",mode:"xml"}),u.focus(),$(u.getScrollerElement()).css("height",.6*$(window).height()+"px").css("border","1px solid silver"),u.refresh()}function y(){location.href="#structures"}function b(e){u.save();var n=Heiduc.javaMap({id:t,title:$("#title").val(),content:$("#xmlContent").val()});Heiduc.jsonrpc.structureService.save(function(n){n.result=="success"?(Heiduc.info(messages("structure.success_save")),e?r||(t=n.message,m(),M()):location.href="#structures"):Heiduc.showServiceMessages(n)},n)}function w(){var e=$("#fieldName").val(),t=$("#fieldTitle").val();e==""&&$("#fieldName").val(Heiduc.nameFromTitle(t))}function E(){r&&Heiduc.jsonrpc.structureService.getFields(function(e){s=e.list,x()},t)}function S(e){return e=="TEXT"?messages("text"):e=="TEXTAREA"?messages("text_area"):e=="RESOURCE"?messages("resource_link"):e=="DATE"?messages("date"):"Unknown"}function x(){var e='<table class="table"><tr><th>'+messages("title")+"</th><th>"+messages("structure.tag_name")+"</th><th>"+messages("type")+"</th><th></th></tr>";$.each(s,function(t,n){e+="<tr><td>"+n.title+"</td>"+"<td>"+n.name+"</td>"+"<td>"+S(n.type)+"</td>"+'<td><a href="#" onclick="Heiduc.app.structureView.onFieldRemove('+t+')"><img src="/static/images/02_x.png"/></a> '+'<a href="#" onclick="Heiduc.app.structureView.onFieldUp('+t+')"><img src="/static/images/02_up.png"/></a> '+'<a href="#" onclick="Heiduc.app.structureView.onFieldDown('+t+')"><img src="/static/images/02_down.png"/></a> '+"</td></tr>"}),$("#fields").html(e+"</table>"),$("#fields tr:even").addClass("even")}function T(e){var t=!0;return e.name==""?(Heiduc.error(messages("structure.field_tag_name_empty")),t=!1):$(s,function(n,r){r.name==e.name&&(Heiduc.error(messages("structure.field_exists")),t=!1)}),Heiduc.isValidIdentifier(e.name)||(Heiduc.error(messages("structure.field_tag_name")+" "+e.name+" "+messages("structure.must_valid_identifier")),t=!1),e.title==""&&(Heiduc.error(messages("structure.field_title_empty")),t=!1),t}function N(){$("#fieldTitle").focus();var e={title:Heiduc.strip($("#fieldTitle").val()),name:Heiduc.strip($("#fieldName").val()),type:$("#fieldType").val()};T(e)&&(s.push(e),x(),$("#fieldTitle").val("").focus(),$("#fieldName").val(""),Heiduc.info(messages("structure.field_success_add")))}function C(e,t){var n=s[e];s[e]=s[t],s[t]=n}function k(){var e="<structure>\n";return $.each(s,function(t,n){e+="  <field>\n    <title>"+n.title+"</title>\n"+"    <name>"+n.name+"</name>\n"+"    <type>"+n.type+"</type>\n  </field>\n"}),e+"</structure>"}function L(){O(!1)}function A(){O(!0)}function O(e){u.setValue(k()),b(e)}function M(){r&&Heiduc.jsonrpc.structureTemplateService.selectByStructure(function(e){o=e.list,D()},t)}function D(){var e='<table class="table"><tr><th></th><th>'+messages("title")+"</th>"+"<th>"+messages("name")+"</th>"+"<th>"+messages("type")+"</th></tr>";$.each(o,function(t,n){e+='<tr><td><input type="checkbox" value="'+n.id+'"></td>'+'<td><a href="#structureTemplate/'+n.id+'">'+n.title+"</a></td>"+"<td>"+n.name+"</td>"+"<td>"+P(n.typeString)+"</td></tr>"}),$("#templates").html(e+"</table>"),$("#templates tr:even").addClass("even")}function P(e){return e=="VELOCITY"?"Velocity":e=="XSLT"?"XSLT":"Undefined"}function H(){location.href="#addStructureTemplate/"+t}function B(){var e=new Array;$("#templates input:checked").each(function(){e.push(this.value)});if(e.length==0){Heiduc.info(messages("nothing_selected"));return}confirm(messages("are_you_sure"))&&Heiduc.jsonrpc.structureTemplateService.remove(function(e){Heiduc.showServiceMessages(e),M()},Heiduc.javaList(e))}function j(e){e.target.id==="_structureXML"?(d()&&c(),u&&(u.focus(),$(u.getScrollerElement()).css("height",.6*$(window).height()+"px").css("border","1px solid silver"),u.refresh())):h()}console.log("Loading StructureView.js");var t="",n="",r=!1,i="",s=[],o=[],u=null;return Backbone.View.extend({css:["/static/js/codemirror/codemirror.css","/static/js/codemirror/eclipse.css"],el:$("#content"),render:function(){Heiduc.addCSSFiles(this.css),this.el.html(_.template(e,{messages:messages})),a(),$('a[data-toggle="tab"]').on("shown.bs.tab",j),$("#autosave").change(v),$("#saveContinueXMLButton").click(f),$("#saveXMLButton").click(l),$("#cancelXMLButton").click(y),$("#saveContinueButton").click(A),$("#saveButton").click(L),$("#cancelButton").click(y),$("#addField").click(N),$("#addTemplateButton").click(H),$("#deleteTemplateButton").click(B),$("#fieldTitle").change(w)},setId:function(e){t=e,r=t!="",r||(n="",s=[],o=[])},remove:function(){this.el.html(""),Heiduc.removeCSSFiles(this.css)},onFieldUp:function(e){if(e==0)return;C(e,e-1),x()},onFieldDown:function(e){if(e+1>=s.length)return;C(e,e+1),x()},onFieldRemove:function(e){confirm(messages("are_you_sure"))&&(s.splice(e,1),x())}})}),define("text!template/structureTemplate.html",[],function(){return'\n<div class="row">\n	<div class="col-lg-12">\n		<div class="panel panel-default">\n			<div class="panel-body">\n				<div class="row">\n					<div class="col-md-12">\n						<ul class="nav nav-tabs" id="tabs_a">\n							<li class="active"><a data-toggle="tab" href="#home_a"><%= messages("structureTemplate.title") %></a></li>\n						</ul>\n						<div class="tab-content" id="tabs_content_a">\n							<div id="home_a" class="tab-pane fade in active">\n								<div class="form-row">\n        <label><%= messages("title") %></label>\n        <input id="title" type="text" />\n    </div>\n    <div class="form-row">\n        <label><%= messages("name") %></label>\n        <input id="name" type="text" />\n    </div>\n    <div class="form-row">\n        <label><%= messages("structureTemplate.content") %></label>\n        <input id="autosave" type="checkbox" /> <label for="autosave"><%= messages("autosave") %></label>\n    </div>    \n    <div class="form-row">\n        <textarea id="vcontent" rows="20" cols="80"></textarea>\n    </div>\n    <div class="form-row">\n        <label><%= messages("structureTemplate.head_content") %></label>\n    </div>    \n    <div class="form-row">\n        <textarea id="headContent" rows="8" cols="80"></textarea>\n    </div>\n    <div class="form-sep">\n        <input id="saveContinueButton" class="btn btn-primary" type="button" value="<%= messages("save_continue") %>" />\n        <input id="saveButton" type="button" class="btn btn-default" value="<%= messages("save") %>" />\n        <input id="cancelButton" type="button" class="btn btn-default" value="<%= messages("cancel") %>" />\n    </div>\n								\n							</div>\n						</div>\n					</div>\n				</div>\n			</div>\n		</div>\n	</div>\n</div>\n'}),define("view/StructureTemplateView",["text!template/structureTemplate.html","cm","cm-css","cm-js","cm-xml","cm-html"],function(e){function a(){if(i)return;var e=$("#name").val(),t=$("#title").val();e==""&&$("#name").val(Heiduc.urlFromTitle(t))}function f(){b(!0)}function l(){b(!1)}function c(){t!="null"&&s==""&&(s=setInterval(p,Heiduc.AUTOSAVE_TIMEOUT*1e3))}function h(){s!=""&&(clearInterval(s),s="")}function p(){b(!0)}function d(){$("#autosave:checked").length>0?c():h()}function v(){i=t!="",i?Heiduc.jsonrpc.structureTemplateService.getById(function(e){r=e,i&&(n=r.structureId),m()},t):(r=null,m())}function m(){r!=null?($("#name").val(r.name),$("#title").val(r.title),$("#vcontent").val(r.content),$("#headContent").val(r.headContent)):($("#name").val(""),$("#title").val(""),$("#vcontent").val(""),$("#headContent").val("")),o?o.refresh():o=g("vcontent"),u?u.refresh():u=g("headContent")}function g(e){var t=CodeMirror.fromTextArea(document.getElementById(e),{lineNumbers:!0,theme:"eclipse",mode:"htmlmixed"});return $(t.getScrollerElement()).css("height",.6*$(window).height()+"px").css("border","1px solid silver"),t}function y(){location.href="#structure/"+n}function b(e){o&&o.save(),u&&u.save();var r=Heiduc.javaMap({id:t,name:Heiduc.strip($("#name").val()),title:Heiduc.strip($("#title").val()),type:"VELOCITY",structureId:String(n),content:$("#vcontent").val(),headContent:$("#headContent").val()});Heiduc.jsonrpc.structureTemplateService.save(function(n){n.result=="success"?(Heiduc.info(messages("structureTemplate.success_save")),e?i||(t=n.message,v()):y()):Heiduc.showServiceMessages(n)},r)}console.log("Loading StructureTemplateView.js");var t="",n="",r="",i=t!="",s="",o=null,u=null;return Backbone.View.extend({css:["/static/js/codemirror/codemirror.css","/static/js/codemirror/eclipse.css"],el:$("#content"),render:function(){Heiduc.addCSSFiles(this.css),o=null,u=null,this.el.html(_.template(e,{messages:messages})),v(),$("#autosave").change(d),$("#saveContinueButton").click(f),$("#saveButton").click(l),$("#cancelButton").click(y),$("#title").change(a)},remove:function(){this.el.html(""),Heiduc.removeCSSFiles(this.css)},create:function(e){t="",n=e,r="",i=t!=""},edit:function(e){t=e,n="",r="",i=t!=""}})}),define("text!template/templates.html",[],function(){return'<div class="row">\n	<div class="col-lg-12">\n		<div class="panel panel-default">\n			<div class="panel-body">\n				<div class="row">\n					<div class="col-md-12">\n						<ul class="nav nav-tabs" id="tabs_a">\n							<li class="active"><a data-toggle="tab" href="#tab-1"><%= messages("templates") %></a></li>\n						</ul>\n						<div class="tab-content" id="tabs_content_a">\n							<div id="home-1" class="tab-pane fade in active">\n								<div id="templates"><img src="/static/images/ajax-loader.gif" /></div>\n								\n						        <div class="form-sep">\n						            <input id="addButton" class="btn" type="button" value="<%= messages("add")%>" />\n							        <input id="deleteButton" class="btn" type="button" value="<%= messages("delete")%>" />\n							        <input id="exportButton" class="btn" type="button" value="<%= messages("export")%>" />\n							        <input id="importButton" class="btn" type="button" value="<%= messages("import")%>" />\n								</div>\n								\n							</div>\n							\n						</div>\n					</div>\n				</div>\n			</div>\n		</div>\n	</div>\n</div>\n\n<div class="modal fade" id="import-dialog" tabindex="-1" role="dialog" aria-labelledby="" aria-hidden="true">\n  <div class="modal-dialog">\n    <div class="modal-content">\n      <div class="modal-header">\n        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>\n        <h4 class="modal-title"><%= messages("templates.import_themes")%></h4>\n      </div>\n      <div class="modal-body">\n      	<form id="upload" action="/cms/upload" method="post" enctype="multipart/form-data">\n		    <%= messages("file_upload")%>:\n		    <input type="hidden" name="fileType" value="import" />\n		    <input type="file" name="uploadFile" />\n		    <div class="modal-footer">\n		        <input type="submit" class="btn btn-primary" value="<%= messages("send")%>" />\n		        <input data-dismiss="modal" class="btn btn-default" type="button" value="<%= messages("cancel")%>" />\n		    </div>    \n		</form>\n      </div>	\n    </div>\n  </div>\n</div>\n\n\n<div class="modal fade" id="afterUpload-dialog" tabindex="-1" role="dialog" aria-labelledby="" aria-hidden="true">\n  <div class="modal-dialog">\n    <div class="modal-content">\n      <div class="modal-header">\n        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>\n        <h4 class="modal-title"><%= messages("status_window")%></h4>\n      </div>\n      <div class="modal-body">\n      	<p class="message"></p>\n	    <div class="buttons-dlg">\n	        <input id="okButton" type="button" value="OK" />\n	    </div>\n	    <div class="modal-footer">\n	        <button type="button" class="btn btn-default" data-dismiss="modal"><%= messages("cancel") %></button>\n	        <button type="submit" class="btn btn-primary"><%= messages("save") %></button>\n	    </div>\n      </div>	\n    </div>\n  </div>\n</div>\n\n<div class="modal fade" id="export-dialog" tabindex="-1" role="dialog" aria-labelledby="" aria-hidden="true">\n  <div class="modal-dialog">\n    <div class="modal-content">\n      <div class="modal-header">\n        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>\n        <h4 class="modal-title"><%= messages("export_window")%></h4>\n      </div>\n      <div class="modal-body">\n      	<form id="exportForm">\n		    <p><%= messages("templates.export_info")%></p>\n		    <div id="exportInfo" class="form-row"></div>    \n		    <div id="timer" class="form-row"></div>\n		    <div class="modal-footer">\n		        <input data-dismiss="modal" class="btn btn-default" type="button" value="<%= messages("cancel")%>" />\n		    </div>\n		</form>\n      </div>	\n    </div>\n  </div>\n</div>\n\n<div class="modal fade" id="structures-dialog" tabindex="-1" role="dialog" aria-labelledby="" aria-hidden="true">\n  <div class="modal-dialog">\n    <div class="modal-content">\n      <div class="modal-header">\n        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>\n        <h4 class="modal-title"><%= messages("export_structures")%></h4>\n      </div>\n      <div class="modal-body">\n      	<form id="structuresForm">\n		    <p><%= messages("templates.structures_info")%></p>\n		    <div id="structures"></div>    \n		    <div class="modal-footer">\n		        <input type="submit" class="btn btn-primary" value="<%= messages("export")%>" />\n		        <input data-dismiss="modal" class="btn btn-default" type="button" value="<%= messages("cancel")%>" />\n		    </div>\n		</form>\n      </div>	\n    </div>\n  </div>\n</div>\n\n\n'}),function(e){function t(){if(!e.fn.ajaxSubmit.debug)return;var t="[jquery.form] "+Array.prototype.join.call(arguments,"");window.console&&window.console.log?window.console.log(t):window.opera&&window.opera.postError&&window.opera.postError(t)}e.fn.ajaxSubmit=function(n){function S(t){var r=new FormData;for(var i=0;i<t.length;i++){if(t[i].type=="file")continue;r.append(t[i].name,t[i].value)}o.find("input:file:enabled").each(function(){var t=e(this).attr("name"),n=this.files;if(t)for(var i=0;i<n.length;i++)r.append(t,n[i])});if(n.extraData)for(var s in n.extraData)r.append(s,n.extraData[s]);n.data=null;var u=e.extend(!0,{},e.ajaxSettings,n,{contentType:!1,processData:!1,cache:!1,type:"POST"});u.data=null;var a=u.beforeSend;u.beforeSend=function(e,t){t.data=r,e.upload&&(e.upload.onprogress=function(e){t.progress(e.position,e.total)}),a&&a.call(t,e,n)},e.ajax(u)}function x(i){function S(e){var t=e.contentWindow?e.contentWindow.document:e.contentDocument?e.contentDocument:e.document;return t}function N(){function u(){try{var e=S(p).readyState;t("state = "+e),e.toLowerCase()=="uninitialized"&&setTimeout(u,50)}catch(n){t("Server abort: ",n," (",n.name,")"),O(E),y&&clearTimeout(y),y=undefined}}var n=o.attr("target"),i=o.attr("action");s.setAttribute("target",c),r||s.setAttribute("method","POST"),i!=f.url&&s.setAttribute("action",f.url),!f.skipEncodingOverride&&(!r||/post/i.test(r))&&o.attr({encoding:"multipart/form-data",enctype:"multipart/form-data"}),f.timeout&&(y=setTimeout(function(){g=!0,O(w)},f.timeout));var a=[];try{if(f.extraData)for(var l in f.extraData)a.push(e('<input type="hidden" name="'+l+'">').attr("value",f.extraData[l]).appendTo(s)[0]);f.iframeTarget||(h.appendTo("body"),p.attachEvent?p.attachEvent("onload",O):p.addEventListener("load",O,!1)),setTimeout(u,15),s.submit()}finally{s.setAttribute("action",i),n?s.setAttribute("target",n):o.removeAttr("target"),e(a).remove()}}function O(n){if(d.aborted||A)return;try{k=S(p)}catch(r){t("cannot access response document: ",r),n=E}if(n===w&&d){d.abort("timeout");return}if(n==E&&d){d.abort("server abort");return}if(!k||k.location.href==f.iframeSrc)if(!g)return;p.detachEvent?p.detachEvent("onload",O):p.removeEventListener("load",O,!1);var i="success",s;try{if(g)throw"timeout";var o=f.dataType=="xml"||k.XMLDocument||e.isXMLDoc(k);t("isXml="+o);if(!o&&window.opera&&(k.body==null||k.body.innerHTML=="")&&--L){t("requeing onLoad callback, DOM not available"),setTimeout(O,250);return}var u=k.body?k.body:k.documentElement;d.responseText=u?u.innerHTML:null,d.responseXML=k.XMLDocument?k.XMLDocument:k,o&&(f.dataType="xml"),d.getResponseHeader=function(e){var t={"content-type":f.dataType};return t[e]},u&&(d.status=Number(u.getAttribute("status"))||d.status,d.statusText=u.getAttribute("statusText")||d.statusText);var a=(f.dataType||"").toLowerCase(),c=/(json|script|text)/.test(a);if(c||f.textarea){var v=k.getElementsByTagName("textarea")[0];if(v)d.responseText=v.value,d.status=Number(v.getAttribute("status"))||d.status,d.statusText=v.getAttribute("statusText")||d.statusText;else if(c){var m=k.getElementsByTagName("pre")[0],b=k.getElementsByTagName("body")[0];m?d.responseText=m.textContent?m.textContent:m.innerText:b&&(d.responseText=b.textContent?b.textContent:b.innerText)}}else a=="xml"&&!d.responseXML&&d.responseText!=null&&(d.responseXML=M(d.responseText));try{C=D(d,a,f)}catch(n){i="parsererror",d.error=s=n||i}}catch(n){t("error caught: ",n),i="error",d.error=s=n||i}d.aborted&&(t("upload aborted"),i=null),d.status&&(i=d.status>=200&&d.status<300||d.status===304?"success":"error"),i==="success"?(f.success&&f.success.call(f.context,C,"success",d),l&&e.event.trigger("ajaxSuccess",[d,f])):i&&(s==undefined&&(s=d.statusText),f.error&&f.error.call(f.context,d,i,s),l&&e.event.trigger("ajaxError",[d,f,s])),l&&e.event.trigger("ajaxComplete",[d,f]),l&&!--e.active&&e.event.trigger("ajaxStop"),f.complete&&f.complete.call(f.context,d,i),A=!0,f.timeout&&clearTimeout(y),setTimeout(function(){f.iframeTarget||h.remove(),d.responseXML=null},100)}var s=o[0],u,a,f,l,c,h,p,d,v,m,g,y,b=!!e.fn.prop;if(i)if(b)for(a=0;a<i.length;a++)u=e(s[i[a].name]),u.prop("disabled",!1);else for(a=0;a<i.length;a++)u=e(s[i[a].name]),u.removeAttr("disabled");if(e(":input[name=submit],:input[id=submit]",s).length){alert('Error: Form elements must not have name or id of "submit".');return}f=e.extend(!0,{},e.ajaxSettings,n),f.context=f.context||f,c="jqFormIO"+(new Date).getTime(),f.iframeTarget?(h=e(f.iframeTarget),m=h.attr("name"),m==null?h.attr("name",c):c=m):(h=e('<iframe name="'+c+'" src="'+f.iframeSrc+'" />'),h.css({position:"absolute",top:"-1000px",left:"-1000px"})),p=h[0],d={aborted:0,responseText:null,responseXML:null,status:0,statusText:"n/a",getAllResponseHeaders:function(){},getResponseHeader:function(){},setRequestHeader:function(){},abort:function(n){var r=n==="timeout"?"timeout":"aborted";t("aborting upload... "+r),this.aborted=1,h.attr("src",f.iframeSrc),d.error=r,f.error&&f.error.call(f.context,d,r,n),l&&e.event.trigger("ajaxError",[d,f,r]),f.complete&&f.complete.call(f.context,d,r)}},l=f.global,l&&!(e.active++)&&e.event.trigger("ajaxStart"),l&&e.event.trigger("ajaxSend",[d,f]);if(f.beforeSend&&f.beforeSend.call(f.context,d,f)===!1){f.global&&e.active--;return}if(d.aborted)return;v=s.clk,v&&(m=v.name,m&&!v.disabled&&(f.extraData=f.extraData||{},f.extraData[m]=v.value,v.type=="image"&&(f.extraData[m+".x"]=s.clk_x,f.extraData[m+".y"]=s.clk_y)));var w=1,E=2,x=e("meta[name=csrf-token]").attr("content"),T=e("meta[name=csrf-param]").attr("content");T&&x&&(f.extraData=f.extraData||{},f.extraData[T]=x),f.forceSync?N():setTimeout(N,10);var C,k,L=50,A,M=e.parseXML||function(e,t){return window.ActiveXObject?(t=new ActiveXObject("Microsoft.XMLDOM"),t.async="false",t.loadXML(e)):t=(new DOMParser).parseFromString(e,"text/xml"),t&&t.documentElement&&t.documentElement.nodeName!="parsererror"?t:null},_=e.parseJSON||function(e){return window.eval("("+e+")")},D=function(t,n,r){var i=t.getResponseHeader("content-type")||"",s=n==="xml"||!n&&i.indexOf("xml")>=0,o=s?t.responseXML:t.responseText;return s&&o.documentElement.nodeName==="parsererror"&&e.error&&e.error("parsererror"),r&&r.dataFilter&&(o=r.dataFilter(o,n)),typeof o=="string"&&(n==="json"||!n&&i.indexOf("json")>=0?o=_(o):(n==="script"||!n&&i.indexOf("javascript")>=0)&&e.globalEval(o)),o}}if(!this.length)return t("ajaxSubmit: skipping submit process - no element selected"),this;var r,i,s,o=this;typeof n=="function"&&(n={success:n}),r=this.attr("method"),i=this.attr("action"),s=typeof i=="string"?e.trim(i):"",s=s||window.location.href||"",s&&(s=(s.match(/^([^#]+)/)||[])[1]),n=e.extend(!0,{url:s,success:e.ajaxSettings.success,type:r||"GET",iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank"},n);var u={};this.trigger("form-pre-serialize",[this,n,u]);if(u.veto)return t("ajaxSubmit: submit vetoed via form-pre-serialize trigger"),this;if(n.beforeSerialize&&n.beforeSerialize(this,n)===!1)return t("ajaxSubmit: submit aborted via beforeSerialize callback"),this;var a=n.traditional;a===undefined&&(a=e.ajaxSettings.traditional);var f,l,c,h=this.formToArray(n.semantic);n.data&&(n.extraData=n.data,f=e.param(n.data,a));if(n.beforeSubmit&&n.beforeSubmit(h,this,n)===!1)return t("ajaxSubmit: submit aborted via beforeSubmit callback"),this;this.trigger("form-submit-validate",[h,this,n,u]);if(u.veto)return t("ajaxSubmit: submit vetoed via form-submit-validate trigger"),this;var p=e.param(h,a);f&&(p=p?p+"&"+f:f),n.type.toUpperCase()=="GET"?(n.url+=(n.url.indexOf("?")>=0?"&":"?")+p,n.data=null):n.data=p;var d=[];n.resetForm&&d.push(function(){o.resetForm()}),n.clearForm&&d.push(function(){o.clearForm(n.includeHidden)});if(!n.dataType&&n.target){var v=n.success||function(){};d.push(function(t){var r=n.replaceTarget?"replaceWith":"html";e(n.target)[r](t).each(v,arguments)})}else n.success&&d.push(n.success);n.success=function(e,t,r){var i=n.context||n;for(var s=0,u=d.length;s<u;s++)d[s].apply(i,[e,t,r||o,o])};var m=e("input:file:enabled[value]",this),g=m.length>0,y="multipart/form-data",b=o.attr("enctype")==y||o.attr("encoding")==y,w=!!(g&&m.get(0).files&&window.FormData);t("fileAPI :"+w);var E=(g||b)&&!w;return n.iframe!==!1&&(n.iframe||E)?n.closeKeepAlive?e.get(n.closeKeepAlive,function(){x(h)}):x(h):(g||b)&&w?(n.progress=n.progress||e.noop,S(h)):e.ajax(n),this.trigger("form-submit-notify",[this,n]),this},e.fn.ajaxForm=function(n){if(this.length===0){var r={s:this.selector,c:this.context};return!e.isReady&&r.s?(t("DOM not ready, queuing ajaxForm"),e(function(){e(r.s,r.c).ajaxForm(n)}),this):(t("terminating; zero elements found by selector"+(e.isReady?"":" (DOM not ready)")),this)}return this.ajaxFormUnbind().bind("submit.form-plugin",function(t){t.isDefaultPrevented()||(t.preventDefault(),e(this).ajaxSubmit(n))}).bind("click.form-plugin",function(t){var n=t.target,r=e(n);if(!r.is(":submit,input:image")){var i=r.closest(":submit");if(i.length==0)return;n=i[0]}var s=this;s.clk=n;if(n.type=="image")if(t.offsetX!=undefined)s.clk_x=t.offsetX,s.clk_y=t.offsetY;else if(typeof e.fn.offset=="function"){var o=r.offset();s.clk_x=t.pageX-o.left,s.clk_y=t.pageY-o.top}else s.clk_x=t.pageX-n.offsetLeft,s.clk_y=t.pageY-n.offsetTop;setTimeout(function(){s.clk=s.clk_x=s.clk_y=null},100)})},e.fn.ajaxFormUnbind=function(){return this.unbind("submit.form-plugin click.form-plugin")},e.fn.formToArray=function(t){var n=[];if(this.length===0)return n;var r=this[0],i=t?r.getElementsByTagName("*"):r.elements;if(!i)return n;var s,o,u,a,f,l,c;for(s=0,l=i.length;s<l;s++){f=i[s],u=f.name;if(!u)continue;if(t&&r.clk&&f.type=="image"){!f.disabled&&r.clk==f&&(n.push({name:u,value:e(f).val(),type:f.type}),n.push({name:u+".x",value:r.clk_x},{name:u+".y",value:r.clk_y}));continue}a=e.fieldValue(f,!0);if(a&&a.constructor==Array)for(o=0,c=a.length;o<c;o++)n.push({name:u,value:a[o]});else a!==null&&typeof a!="undefined"&&n.push({name:u,value:a,type:f.type})}if(!t&&r.clk){var h=e(r.clk),p=h[0];u=p.name,u&&!p.disabled&&p.type=="image"&&(n.push({name:u,value:h.val()}),n.push({name:u+".x",value:r.clk_x},{name:u+".y",value:r.clk_y}))}return n},e.fn.formSerialize=function(t){return e.param(this.formToArray(t))},e.fn.fieldSerialize=function(t){var n=[];return this.each(function(){var r=this.name;if(!r)return;var i=e.fieldValue(this,t);if(i&&i.constructor==Array)for(var s=0,o=i.length;s<o;s++)n.push({name:r,value:i[s]});else i!==null&&typeof i!="undefined"&&n.push({name:this.name,value:i})}),e.param(n)},e.fn.fieldValue=function(t){for(var n=[],r=0,i=this.length;r<i;r++){var s=this[r],o=e.fieldValue(s,t);if(o===null||typeof o=="undefined"||o.constructor==Array&&!o.length)continue;o.constructor==Array?e.merge(n,o):n.push(o)}return n},e.fieldValue=function(t,n){var r=t.name,i=t.type,s=t.tagName.toLowerCase();n===undefined&&(n=!0);if(n&&(!r||t.disabled||i=="reset"||i=="button"||(i=="checkbox"||i=="radio")&&!t.checked||(i=="submit"||i=="image")&&t.form&&t.form.clk!=t||s=="select"&&t.selectedIndex==-1))return null;if(s=="select"){var o=t.selectedIndex;if(o<0)return null;var u=[],a=t.options,f=i=="select-one",l=f?o+1:a.length;for(var c=f?o:0;c<l;c++){var h=a[c];if(h.selected){var p=h.value;p||(p=h.attributes&&h.attributes.value&&!h.attributes.value.specified?h.text:h.value);if(f)return p;u.push(p)}}return u}return e(t).val()},e.fn.clearForm=function(t){return this.each(function(){e("input,select,textarea",this).clearFields(t)})},e.fn.clearFields=e.fn.clearInputs=function(e){var t=/^(?:color|date|datetime|email|month|number|password|range|search|tel|text|time|url|week)$/i;return this.each(function(){var n=this.type,r=this.tagName.toLowerCase();t.test(n)||r=="textarea"||e&&/hidden/.test(n)?this.value="":n=="checkbox"||n=="radio"?this.checked=!1:r=="select"&&(this.selectedIndex=-1)})},e.fn.resetForm=function(){return this.each(function(){(typeof this.reset=="function"||typeof this.reset=="object"&&!this.reset.nodeType)&&this.reset()})},e.fn.enable=function(e){return e===undefined&&(e=!0),this.each(function(){this.disabled=!e})},e.fn.selected=function(t){return t===undefined&&(t=!0),this.each(function(){var n=this.type;if(n=="checkbox"||n=="radio")this.checked=t;else if(this.tagName.toLowerCase()=="option"){var r=e(this).parent("select");t&&r[0]&&r[0].type=="select-one"&&r.find("option").selected(!1),this.selected=t}})},e.fn.ajaxSubmit.debug=!1}(jQuery),define("jquery.form",function(){}),define("view/TemplatesView",["text!template/templates.html","jquery.form"],function(e){function s(){l(),c()}function o(e){var t=e.split("::"),n=t[1],r=t[2];n=="success"?r=messages("templates.success_import"):r=messages("error")+". "+r,$("#afterUpload-dialog .message").text(r),$("#afterUpload-dialog").modal({show:!0})}function u(){$("#import-dialog").modal({show:!0})}function a(){}function f(){s()}function l(){Heiduc.jsonrpc.templateService.getTemplates(function(e){var t='<table class="table table-striped"><tr><th></th><th>'+messages("title")+"</th></tr>";$.each(e.list,function(e,n){t+='<tr><td><input type="checkbox" value="'+n.id+'" /></td><td><a href="#template/'+n.id+'">'+n.title+"</a></td></tr>"}),$("#templates").html(t+"</table>"),$("#templates tr:even").addClass("even")})}function c(){Heiduc.jsonrpc.structureService.select(function(e){var t='<table class="table"><tr><th></th><th>'+messages("title")+"</th></tr>";$.each(e.list,function(e,n){t+='<tr><td><input type="checkbox" value="'+n.id+'" /></td><td>'+n.title+"</td></tr>"}),$("#structures").html(t+"</table>"),$("#structures tr:even").addClass("even")})}function h(){location.href="#template"}function p(){var e=new Array;$("#templates input:checked").each(function(){e.push(this.value)});if(e.length==0){Heiduc.info(messages("nothing_selected"));return}confirm(messages("are_you_sure"))&&Heiduc.jsonrpc.templateService.deleteTemplates(function(e){Heiduc.showServiceMessages(e),l()},Heiduc.javaList(e))}function d(){$("#structures input:checked").each(function(){this.checked=!1}),$("#structures-dialog").modal({show:!0})}function v(){r=0,g();var e=[],s=[];$("#templates input:checked").each(function(){e.push(this.value)});if(e.length==0){Heiduc.info(messages("nothing_selected"));return}$("#structures input:checked").each(function(){s.push(this.value)}),$("#export-dialog").modal({show:!0}),Heiduc.jsonrpc.configService.startExportThemeTask(function(e){e.result=="success"?($("#templates input:checked").each(function(){this.checked=!1}),i=e.message,Heiduc.infoMessage("#exportInfo",messages("creating_export_file")),t=setInterval(m,1e4),n=setInterval(g,1e3)):Heiduc.showServiceMessages(e)},Heiduc.javaList(e),Heiduc.javaList(s))}function m(){Heiduc.jsonrpc.configService.isExportTaskFinished(function(e){e&&(clearInterval(t),clearInterval(n),$("#export-dialog").dialog("close"),$("#exportDialogButton").attr("disabled",!1),location.href="/file/tmp/"+i)},"theme")}function g(){$("#timer").html(r++ +" "+messages("sec")+".")}function y(){clearInterval(t),clearInterval(n)}console.log("Loading TemplatesView.js");var t=null,n=null,r=0,i=null;return Backbone.View.extend({el:$("#content"),render:function(){this.el.html(_.template(e,{messages:messages})),$("#upload").ajaxForm(o),s(),$("#addButton").click(h),$("#deleteButton").click(p),$("#exportButton").click(d),$("#exportCancelButton").click(y),$("#importButton").click(u),$("#importCancelButton").click(a),$("#okButton").click(f),$("#structuresForm").submit(function(){return v(),!1}),$("#structuresCancelButton").click(function(){})},remove:function(){this.el.html("")}})}),define("text!template/template.html",[],function(){return'<div class="row">\n	<div class="col-lg-12">\n		<div class="panel panel-default">\n			<div class="panel-body">\n				<div class="row">\n					<div class="col-md-12">\n						<ul class="nav nav-tabs" id="tabs_a">\n							<li class="active"><a data-toggle="tab" href="#"><%= messages("template") %></a></li>\n							<li><a id="resources" href="#"><%= messages("resources") %></a></li>\n						</ul>\n						<div class="tab-content" id="tabs_content_a">\n							<div id="tab-1" class="tab-pane fade in active">\n								<form id="templateForm">\n								<div class="form-group">\n									<div class="row">\n										<div class="col-lg-6">\n											<label><%= messages("title") %></label>\n							        		<input id="title" class="form-control" type="text" />\n										</div>\n										\n									</div>\n								</div>\n								<div class="form-group">\n									<div class="row">\n										<div class="col-lg-6">\n											<label><%= messages("url_name") %></label>\n							        		<input id="url" class="form-control" type="text" />\n										</div>\n										\n									</div>\n								</div>\n							    <div class="form-group">\n									<div class="row">\n										<div class="col-lg-6">\n											<label></label>\n											<label class="checkbox-inline">\n											<input id="autosave" type="checkbox" id="enableCkeditor" value=""> <%= messages("autosave") %>\n											</label>\n										</div>\n									</div>\n								</div>\n							    <div class="form-row">\n							        <textarea id="tcontent" class="form-control" cols="80" rows="20"></textarea>\n							    </div>\n							    \n							    <div class="form-sep">\n							    	<input id="saveContinueButton" class="btn btn-primary" type="button" value="<%= messages("save_continue") %>" />\n							        <input id="saveButton" class="btn btn-default" type="submit" value="<%= messages("save") %>" />\n							        <input id="cancelButton" class="btn btn-default" type="button" value="<%= messages("cancel") %>" />\n							    </div>\n							</form>\n								\n							</div>\n						</div>\n					</div>\n				</div>\n			</div>\n		</div>\n	</div>\n</div>\n\n'}),define("view/TemplateView",["text!template/template.html","jquery.treeview","cm","cm-css","cm-js","cm-xml","cm-html"],function(e){function o(){p()}function u(){m(!0)}function a(){m(!1)}function f(){t!="null"&&i==""&&(i=setInterval(c,Heiduc.AUTOSAVE_TIMEOUT*1e3))}function l(){i!=""&&(clearInterval(i),i="")}function c(){s&&s.save();var e=$("#tcontent").val();Heiduc.jsonrpc.templateService.updateContent(function(e){if(e.result=="success"){var t=new Date;Heiduc.info(e.message+" "+t)}else Heiduc.error(e.message)},t,e)}function h(){$("#autosave:checked").length>0?f():l()}function p(){r=t!="",r||(n=null),Heiduc.jsonrpc.templateService.getTemplate(function(e){n=e,d()},t)}function d(){n!=null?($("#title").val(n.title),$("#url").val(n.url),$("#tcontent").val(n.content)):($("#title").val(""),$("#url").val(""),$("#tcontent").val("")),s=CodeMirror.fromTextArea(document.getElementById("tcontent"),{lineNumbers:!0,theme:"eclipse",mode:"htmlmixed"}),s.focus(),$(s.getScrollerElement()).css("height",.6*$(window).height()+"px").css("border","1px solid silver"),s.refresh()}function v(){location.href="#templates"}function m(e){s&&s.save();var n=Heiduc.javaMap({id:t,title:$("#title").val(),url:$("#url").val(),content:$("#tcontent").val()});Heiduc.jsonrpc.templateService.saveTemplate(function(n){n.result=="success"?(Heiduc.info(messages("template.success_save")),e?r||(t=n.message,p()):location.href="#templates"):Heiduc.showServiceMessages(n)},n)}function g(){$.cookie("folderReturnPath","#template/"+n.id,{path:"/",expires:10}),Heiduc.jsonrpc.folderService.createFolderByPath(function(e){location.href="#folder/"+e.id},"/theme/"+n.url)}console.log("Loading TemplateView.js");var t="",n="",r=t!="",i="",s=null;return Backbone.View.extend({css:["/static/js/codemirror/codemirror.css","/static/js/codemirror/eclipse.css","/static/css/jquery.treeview.css"],el:$("#content"),render:function(){Heiduc.addCSSFiles(this.css),this.el.html(_.template(e,{messages:messages})),o(),$("#autosave").change(h),$("#saveContinueButton").click(u),$("#templateForm").submit(function(){return a(),!1}),$("#cancelButton").click(v),$("#resources").click(g)},remove:function(){this.el.html(""),Heiduc.removeCSSFiles(this.css)},create:function(){t="",n="",r=t!=""},edit:function(e){t=e,n="",r=t!=""}})}),define("text!template/page/page.html",[],function(){return'\n<div class="row">\n	<div class="col-lg-9">\n		<div class="panel panel-default">\n			<div class="panel-heading">\n				<a href="#pages"><%= messages("content") %>:</a>\n				<a id="rootPage">/</a> \n        		<span id="crumbs"></span>\n			</div>\n			<div class="panel-body">\n				<div class="row">\n					<div class="col-md-12">\n						<ul class="nav nav-tabs" id="tabs_a">\n							<li><a href="#page/<%= id %>"><%= messages("page") %></a></li>\n							<li><a href="#page/content/<%= id %>"><%= messages("content") %></a></li>\n							<li><a href="#page/children/<%= id %>"><%= messages("page.children_pages") %></a></li>\n							<li><a href="#page/comments/<%= id %>"><%= messages("comments") %></a></li>\n							<li><a href="#page/security/<%= id %>"><%= messages("security") %></a></li>\n							<li><a href="#page/resources/<%= id %>"><%= messages("resources") %></a></li>\n							<li><a href="#page/attributes/<%= id %>"><%= messages("attributes") %></a></li>\n						</ul>\n						<div class="tab-content" id="tabs_content_a">\n							<div id="tab-1" class="tab-pane fade in active">\n								\n							</div>\n						</div>\n					</div>\n				</div>\n			</div>\n		</div>\n	</div>\n	<div class="col-lg-3">\n		<div class="panel panel-default">\n			<div class="panel-heading">History</div>\n			<div class="panel-body">\n				<div id="versions">\n			    <div class="vertical-buttons-panel"> </div>      \n			    <a id="addVersionLink" class="button ui-state-default ui-corner-all" \n			        href="#">\n			        <span class="ui-icon ui-icon-plus"></span> <%= messages("add_version") %>\n			    </a>\n			    <div id="auditData">\n			        <div><%= messages("page.state") %>: <span id="pageState"> </span></div>\n			        <div><%= messages("page.user_created") %>: <span id="pageCreateUser"> </span></div>\n			        <div><%= messages("creation_date") %>: <span id="pageCreateDate"> </span></div>\n			        <div><%= messages("page.user_modified") %>: <span id="pageModUser"> </span></div>\n			        <div><%= messages("modify_date") %>: <span id="pageModDate"> </span></div>\n			    </div>\n			</div>\n			</div>\n		</div>\n	</div>\n</div>\n\n\n<div class="modal fade" id="version-dialog" tabindex="-1" role="dialog" aria-labelledby="" aria-hidden="true">\n  <div class="modal-dialog">\n    <div class="modal-content">\n      <div class="modal-header">\n        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>\n        <h4 class="modal-title"><%= messages("page.version_title") %></h4>\n      </div>\n      <div class="modal-body">\n      	<form id="versionForm">\n		    <div class="form-row">\n		        <label><%= messages("page.version_title") %></label>\n		        <input id="version-title" type="text" />        \n		    </div>\n		    <div class="modal-footer">\n		        <input id="versionSaveButton" class="btn btn-primary" type="submit" \n		            value="<%= messages("send") %>" />\n		        <input class="btn btn-default" data-dismiss="modal" id="versionCancelButton" type="button" \n		            value="<%= messages("cancel") %>" />\n		    </div>\n		</form>\n      </div>	\n    </div>\n  </div>\n</div>\n'}),define("view/page/context",[],function(){return{pageRequest:null,page:null,pages:{},pageId:"",pageParentUrl:"",editMode:!0,currentLanguage:"",isDefault:!1,loadData:function(){alert("Load data was not initialized!")}}}),define("text!template/page/content.html",[],function(){return'<form id="pageForm">\n	<div class="form-group">\n		<label class="checkbox-inline">\n			<input type="checkbox" id="autosave"> <%= messages("autosave") %>\n		</label>\n	</div>\n	<div class="form-group">\n		<div class="row">\n			<div class="col-lg-6">\n				<label><%= messages("page.friendly_url") %></label>\n				<div id="friendlyUrlDiv" class="input-group">\n					<span class="input-group-addon" id="parentFriendlyUrl"><%= messages("page.friendly_url") %></span>\n					<input class="form-control"  id="friendlyUrl" type="text">\n					<span class="input-group-addon" id="friendlyUrlSpan"></span>\n				</div>\n			</div>\n			<div class="col-lg-6">\n				 <label><%= messages("page.select_language") %></label> \n        		<select id="language" class="form-control"></select>\n			</div>\n		</div>\n	</div>\n	<div class="form-group">\n		<div class="row">\n			<div class="col-lg-12">\n				<label><%= messages("title") %></label>\n				<input type="text" id="titleLocal" class="form-control">\n			</div>\n		</div>\n	</div>\n	<div class="form-group" id="editorButtons">\n		 <a id="ckedit" href="#" ></a>\n	</div>\n	<div class="form-group" id="page-content">\n	</div>\n	<div class="form-sep">\n		<label class="checkbox-inline" id="approveOnContentSaveDiv">\n			<input type="checkbox" id="approveOnContentSave" value=""> <%= messages("page.approve_save") %>\n		</label>\n		<div class="form-sep">\n		<input id="saveContinueContentButton" type="button" class="btn" value="<%= messages("save_continue") %>"/>\n		<input id="saveContentButton" type="submit" class="btn btn-primary" value="<%= messages("save") %>"/>\n		<input id="contentPreviewButton" type="button" class="btn" value="<%= messages("preview") %>"/>\n		<input id="approveButton" type="button" class="btn" value="<%= messages("approve") %>"/>\n		<input id="restoreButton" type="button" class="btn" value="<%= messages("restore") %>"/>\n		<input id="resetCacheButton" type="button" class="btn" value="<%= messages("page.reset_cache") %>"/>\n		<input id="contentCancelButton" type="button" class="btn" value="<%= messages("cancel") %>"/>\n		</div>\n	</div>\n</form>\n\n<div class="modal fade" id="restore-dialog" tabindex="-1" role="dialog" aria-labelledby="" aria-hidden="true">\n  <div class="modal-dialog">\n    <div class="modal-content">\n      <div class="modal-header">\n        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>\n        <h4 class="modal-title"><%= messages("page.restore_content") %></h4>\n      </div>\n      <div class="modal-body">\n      	<form id="restoreForm">\n		    <div class="form-row">\n		        <input name="page" type="radio" value="home" checked="checked"/> \n		            <%= messages("home_page") %> <br/>        \n		        <input name="page" type="radio" value="login" /> \n		            <%= messages("login_page") %> <br/>        \n		        <input name="page" type="radio" value="search" /> \n		            <%= messages("search_page") %>         \n		    </div>\n		    <div class="modal-footer">\n		        <input id="restoreSaveButton" class="btn btn-primary" type="submit" value="OK" />\n		    	<button id="cancelDlgButton" type="button" class="btn btn-default" data-dismiss="modal"><%= messages("cancel") %></button>\n		    </div>\n		</form>\n      </div>	\n    </div>\n  </div>\n</div>\n\n<div class="modal fade" id="file-upload" tabindex="-1" role="dialog" aria-labelledby="" aria-hidden="true">\n  <div class="modal-dialog">\n    <div class="modal-content">\n      <div class="modal-header">\n        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>\n        <h4 class="modal-title"><%= messages("folder.upload_file") %></h4>\n      </div>\n      <div class="modal-body">\n      	<form id="upload" action="/cms/upload" method="post" enctype="multipart/form-data">\n	        <%= messages("file_upload") %>:\n	        <input type="hidden" name="fileType" value="resource" />\n	        <input type="hidden" name="folderId" />\n	        <input type="file" name="uploadFile" multiple="true" />\n	        <div class="buttons-dlg">\n	            <input type="submit" value="<%= messages("send") %>" />\n	            <input id="fileUploadCancelButton" type="button" \n	                value="<%= messages("cancel") %>" />\n	        </div>\n	        <div class="modal-footer">\n	        	<input type="submit" class="btn btn-primary" value="<%= messages("send") %>" />\n	            <input id="fileUploadCancelButton" class="btn btn-primary" type="button" value="<%= messages("cancel") %>" />\n		    </div>\n    	</form>\n      </div>	\n    </div>\n  </div>\n</div>\n\n\n\n	'}),define("view/page/version",["view/page/context"],function(e){function n(){$("#addVersionLink").click(o),$("#versionCancelButton").click(a),$("#versionForm").submit(function(){return u(),!1})}function r(){Heiduc.jsonrpc.pageService.getPageRequest(function(t){e.pageRequest=t,e.page=e.pageRequest.page,i()},e.pageId,e.pageParentUrl)}function i(){var n=e.pageRequest.versions;t=[],e.pages={},$.each(n.list,function(n,r){e.pages[String(r.version)]=r,t.push(String(r.version))}),t.sort();var r="";$.each(t,function(n,i){var s=e.pages[i];r+="<div>",e.pageId!=s.id?r+='<a class="select btn btn-default btn-sm"               title="'+s.versionTitle+'"               data-version="'+i+'">Version '+i+"</a>":r+='<a class="select btn btn-default btn-sm" title="'+s.versionTitle+'" data-version="'+i+'"                ><span class="ui-icon ui-icon-triangle-1-e"></span>                Version '+i+"</a>",t.length>1&&(r+='<img class="delete button" src="/static/images/delete-16.png" data-version="'+i+'"/></div>')}),$("#versions .vertical-buttons-panel").html(r),$("#versions a.select").click(function(){f($(this).attr("data-version"))}),$("#versions img.delete").click(function(){s($(this).attr("data-version"))})}function s(n){if(confirm(messages("are_you_sure"))){var i=e.pages[n];Heiduc.jsonrpc.pageService.deletePageVersion(function(i){if(n==String(e.page.version))if(t.length==1)location.href="#pages";else{var s=t[0];t.indexOf(n)==0?s=t[1]:s=t[t.indexOf(n)-1],e.pageId=e.pages[s].id,e.loadData()}else r()},i.id)}}function o(){$("#version-dialog").modal({show:!0}),$("#version-title").val("")}function u(){Heiduc.jsonrpc.pageService.addVersion(function(t){t.result=="success"?(e.pageId=t.message,e.loadData(),Heiduc.info(messages("page.version_success_add"))):Heiduc.showServiceMessages(t),$("#version-dialog").modal({show:!1})},e.page.friendlyURL,$("#version-title").val())}function a(){}function f(t){var n=e.pages[t];e.pageId=n.id,e.loadData()}function l(){$("#pageState").html(e.page.stateString=="EDIT"?messages("edit"):messages("approved")),$("#pageCreateDate").html(e.page.createDateTimeString),$("#pageModDate").html(e.page.modDateTimeString),$("#pageCreateUser").html(e.page.createUserEmail),$("#pageModUser").html(e.page.modUserEmail)}var t=[];return{initVersionDialog:n,loadVersions:i,showAuditInfo:l}}),define("view/page/breadcrumbs",["view/page/context"],function(e){function t(){var t=e.pageParentUrl;t=e.pageRequest.page.friendlyURL;var r="",i=t.substr(1).split("/");if(i.length>0){var s="";$.each(i,function(t,n){s+="/"+n,i.length-1==t&&e.editMode?r+=" "+i[i.length-1]:r+=' <a data-url="'+s+'">'+n+"</a> /"})}$("#crumbs").html(r),$("#crumbs a").click(function(){var e=$(this).attr("data-url");e&&n(e)}),$("#rootPage").click(function(){n("/")})}function n(e){Heiduc.jsonrpc.pageService.getPageByUrl(function(e){location.href="#page/content/"+e.id},e)}return{breadcrumbsShow:t}}),define("view/page/ContentView",["text!template/page/content.html","view/page/context","view/page/version","view/page/breadcrumbs","jquery.form","cm","cm-css","cm-js","cm-xml","cm-html"],function(e,t,n,r){function p(){t.loadData=d,t.editMode=t.pageId!="",Heiduc.initJSONRpc(d),$("a.button").hover(function(){$(this).addClass("ui-state-hover")},function(){$(this).removeClass("ui-state-hover")}),n.initVersionDialog(),$("#autosave").change(C),$("#language").change(A),$("#saveContinueContentButton").click(function(){b(!0)}),$("#pageForm").submit(function(){return b(!1),!1}),$("#contentPreviewButton").click(k),$("#approveButton").click(M),$("#restoreButton").click(q),$("#contentCancelButton").click(L),$("ul.nav-tabs li:nth-child(2)").addClass("active"),$("#restoreForm").submit(function(){return R(),!1}),$("#resetCacheButton").click(W),$("#upload").ajaxForm({beforeSubmit:Q,success:K}),$("#fileUploadCancelButton").click(J)}function d(){Heiduc.jsonrpc.pageService.getPageRequest(function(e){t.pageRequest=e,t.page=t.pageRequest.page,h=!t.pageRequest.config.enableCkeditor||t.pageRequest.page.wikiProcessing||!t.page.enableCkeditor;var n=t.pageRequest.page.wikiProcessing?' <a href="http://en.wikipedia.org/wiki/Help:Wiki_markup" target="blank">Wiki syntax</a>':"";h?$("#ckedit").text(messages("page.edit_ckeditor")).click(z):$("#ckedit").text(messages("page.edit_textarea")).click(U),$("#editorButtons").append(n),g(),m(),r.breadcrumbsShow()},t.pageId,t.pageParentUrl)}function v(){Heiduc.jsonrpc.pageService.getPageRequest(function(e){t.pageRequest=e,t.page=t.pageRequest.page,t.editMode=t.pageId!=null,m()},t.pageId,t.pageParentUrl)}function m(){t.pageId=t.page.id==null?"":String(t.page.id),t.pageParentUrl=t.page.parentUrl,n.loadVersions(),j(),y(),D(),O()}function g(){var e=t.pageRequest.languages;o={};var n="";$.each(e.list,function(e,t){o[t.code]=t,n+='<option value="'+t.code+'" '+">"+t.title+"</option>"}),$("#language").html(n)}function y(){var e=t.pageParentUrl=="/"?"":"/";t.page.parentUrl==""||t.page.parentUrl==null?($("#friendlyUrl").hide(),$("#friendlyUrl").val(""),$("#parentFriendlyUrl").html("/")):($("#friendlyUrl").show(),$("#friendlyUrl").val(t.page.pageFriendlyURL),$("#parentFriendlyUrl").html(t.page.parentFriendlyURL+e)),t.pageRequest.children.list.length>0&&($("#parentFriendlyUrl").hide(),$("#friendlyUrl").hide(),$("#friendlyUrlSpan").html(t.page.friendlyURL)),$("#pageState").html(t.page.stateString=="EDIT"?messages("edit"):messages("approved")),$("#pageCreateDate").html(t.page.createDateTimeString),$("#pageModDate").html(t.page.modDateTimeString),$("#pageCreateUser").html(t.page.createUserEmail),$("#pageModUser").html(t.page.modUserEmail),t.page.id!=null?($(".pageTab").show(),$(".childrenTab").show(),$(".commentsTab").show(),$(".securityTab").show(),$("#pagePreview").show(),$("#versions").show()):($(".pageTab").hide(),$(".childrenTab").hide(),$(".commentsTab").hide(),$(".securityTab").hide(),$("#pagePreview").hide(),$("#versions").hide()),P(),X()}function b(e){var n=Heiduc.javaMap({id:t.pageId,friendlyUrl:$("#parentFriendlyUrl").text()+$("#friendlyUrl").val(),titles:I(),content:x(),approve:String($("#approveOnPageSave:checked, #approveOnContentSave:checked").size()>0),languageCode:t.currentLanguage});Heiduc.jsonrpc.pageService.savePage(function(t){t.result=="success"?(Heiduc.info(messages("page.success_save")),e?v():location.href="#pages"):Heiduc.showServiceMessages(t)},n)}function w(){t.editMode&&f==""&&(f=setInterval(E,Heiduc.AUTOSAVE_TIMEOUT*1e3))}function E(){b(!0)}function S(){f!=""&&(clearInterval(f),f="")}function x(){if(!t.editMode)return"";if(t.page.simple)return h?(u.save(),$("#pcontent").val()):u.getData();if(t.page.structured){var e='<?xml version="1.0" encoding="utf-8"?>\n<content>\n';return $.each(t.pageRequest.structureFields.list,function(t,n){if(n.type=="TEXT"||n.type=="DATE"||n.type=="RESOURCE")e+="<"+n.name+"><![CDATA["+$("#field"+n.name).val()+"]]></"+n.name+">\n";if(n.type=="TEXTAREA"){var r="";h?(l[n.name].save(),r=$("#field"+n.name).val()):r=l[n.name].getData(),e+="<"+n.name+"><![CDATA["+r.replace("]]>","]]]")+"]]></"+n.name+">\n"}}),e+"</content>"}}function T(e){e=typeof e=="undefined"?"":e,t.page.simple&&(h?u.setValue(e):u.setData(e));if(t.page.structured){var n=$.xmlDOM(e,function(t){e&&Heiduc.error(messages("page.parsing_error")+" "+t)});$.each(t.pageRequest.structureFields.list,function(e,t){(t.type=="TEXT"||t.type=="DATE"||t.type=="RESOURCE")&&$(n).find(t.name).each(function(){$("#field"+t.name).val($(this).text())}),t.type=="TEXTAREA"&&$(n).find(t.name).each(function(){h?l[t.name].setValue($(this).text()):l[t.name].setData($(this).text())})})}}function N(){return i[t.currentLanguage]!=x()}function C(){$("#autosave:checked").length>0?w():S()}function k(){var e=t.page.friendlyURL+"?language="+t.currentLanguage+"&version="+t.page.version;window.open(e,"preview")}function L(){location.href="#pages"}function A(){!N()||confirm(messages("are_you_sure_changes_lost"))?(t.currentLanguage=$("#language").val(),i[t.currentLanguage]==undefined&&(i[t.currentLanguage]=""),T(i[t.currentLanguage]),$("#titleLocal").val(F())):$("#language").val(t.currentLanguage)}function O(){if(t.pageRequest.contents!=null){var e=t.pageRequest.contents;i={},$.each(e.list,function(e,t){i[t.languageCode]=t.content}),t.currentLanguage||(o[Heiduc.ENGLISH_CODE]!=undefined?t.currentLanguage=Heiduc.ENGLISH_CODE:t.currentLanguage=e.list[0].languageCode),$("#language").val(t.currentLanguage),T(i[t.currentLanguage]),$("#titleLocal").val(Heiduc.unescapeHtml(F()))}else T("")}function M(){Heiduc.jsonrpc.pageService.approve(function(e){Heiduc.showServiceMessages(e),d()},t.pageId)}function D(){var e=t.pageRequest.pagePermission;e.publishGranted?($("#approveButton").show(),$("#approveOnPageSaveDiv").show(),$("#approveOnContentSaveDiv").show()):($("#approveButton").hide(),$("#approveOnPageSaveDiv").hide(),$("#approveOnContentSaveDiv").hide()),e.changeGranted?($("#pageSaveButton").show(),$("#saveContinueContentButton").show(),$("#saveContentButton").show()):($("#pageSaveButton").hide(),$("#saveContinueContentButton").hide(),$("#saveContentButton").hide()),e.admin&&t.editMode?$(".securityTab").show():$(".securityTab").hide(),X()}function P(){$.each(CKEDITOR.instances,function(e,t){CKEDITOR.remove(t)}),t.page.simple&&($("#page-content").html('<textarea id="pcontent" rows="20" cols="80"></textarea>'),h?(u=CodeMirror.fromTextArea(document.getElementById("pcontent"),{lineNumbers:!0,lineWrapping:!0,theme:"eclipse",mode:"htmlmixed"}),u.focus(),$(u.getScrollerElement()).css("height",.6*$(window).height()+"px").css("border","1px solid silver")):u=CKEDITOR.replace("pcontent",{height:350,width:"auto",filebrowserUploadUrl:"/cms/upload",filebrowserBrowseUrl:"fileBrowser.html",toolbar:"Heiduc"}));if(t.page.structured){var e="";$.each(t.pageRequest.structureFields.list,function(t,n){e+='<div><div class="label">'+n.title+":</div>",n.type=="TEXT"&&(e+='<input id="field'+n.name+'" size="30"/>'),n.type=="TEXTAREA"&&(e+='<textarea cols="80" rows="20" id="field'+n.name+'"></textarea>'),n.type=="DATE"&&(e+='<input id="field'+n.name+'" class="datepicker" size="8" />'),n.type=="RESOURCE"&&(e+='<input id="field'+n.name+'" size="60"/> '+'<a class="browse" data-name="field'+n.name+'">'+messages("browse")+"</a>"+' <a class="upload" data-name="field'+n.name+'">'+messages("upload")+"</a>"),e+="</div>"}),$("#page-content").html(e),$("#page-content .browse").click(function(){H($(this).attr("data-name"))}),$("#page-content .upload").click(function(){V($(this).attr("data-name"))}),$(".datepicker").datepicker({dateFormat:"dd.mm.yy"}),l={},$.each(t.pageRequest.structureFields.list,function(e,t){if(t.type=="TEXTAREA"&&!l[t.name])if(h){var n=document.getElementById("field"+t.name);l[t.name]=CodeMirror.fromTextArea(n,{lineNumbers:!0,lineWrapping:!0,theme:"eclipse",mode:"htmlmixed"}),$(l[t.name].getScrollerElement()).css("border","1px solid silver")}else l[t.name]=CKEDITOR.replace("field"+t.name,{height:150,width:"auto",filebrowserUploadUrl:"/cms/upload",filebrowserBrowseUrl:"fileBrowser.html",toolbar:"Heiduc"})})}}function H(e){c=e,$.cookie("fileBrowserPath","/page"+t.page.friendlyURL,{path:"/",expires:10}),window.open("fileBrowser.html?mode=page")}function B(e){$("#"+c).val(e)}function j(){s=t.page.titles.map}function F(){return s[t.currentLanguage]==undefined?"":s[t.currentLanguage]}function I(){if(!t.editMode)return"{"+Heiduc.ENGLISH_CODE+':"'+Heiduc.escapeHtml($("#title").val())+'"}';s[t.currentLanguage]=$("#titleLocal").val();var e="{",n=0;return $.each(s,function(t,r){var i=n++==0?"":",";e+=i+t+':"'+Heiduc.escapeHtml(r)+'"'}),e+"}"}function q(){$("#restore-dialog").modal({show:!0})}function R(){var e=$("input[name=page]:checked").val();Heiduc.jsonrpc.pageService.restore(function(e){Heiduc.showServiceMessages(e),e.result=="success"&&($("#restore-dialog").modal("hide"),d())},t.pageId,e,t.currentLanguage)}function U(){h=!0,$("#ckedit").text(messages("page.edit_ckeditor")).click(z),P(),T(i[t.currentLanguage])}function z(){h=!1,$("#ckedit").text(messages("page.edit_textarea")).click(U),P(),T(i[t.currentLanguage])}function W(){t.editMode&&Heiduc.jsonrpc.pageService.resetCache(function(e){Heiduc.showServiceMessages(e)},t.page.friendlyURL)}function X(){t.page.friendlyURL.endsWith("/_default")&&(t.isDefault=!0,$(".securityTab, .commentsTab, .childrenTab, #approveOnContentSaveDiv, #contentPreviewButton, #versions, #resetCacheButton, #restoreButton, #approveButton, #friendlyUrlDiv").hide())}function V(e){c=e,$("#file-upload input[name=folderId]").val(t.pageRequest.folderId),$("#file-upload").modal({show:!0})}function J(){}function K(e){var t=e.split("::"),n=t[1],r=t[2];n=="success"?Heiduc.info(messages("folder.file_success_upload")):Heiduc.error(messages("folder.error_during_upload")+" "+r),$("#file-upload").modal({show:!1})}function Q(e,n,r){var i=Heiduc.getFileName($("#file-upload input[name=uploadFile]").val()),s="/file/page"+t.page.friendlyURL+"/"+i;$("#"+c).val(s)}console.log("Loading ContentView.js");var i=null,s=null,o=null,u=null,a="",f="",l=null,c="",h=!1;return Backbone.View.extend({el:$("#tab-1"),tmpl:_.template(e),render:function(){this.el=$("#tab-1"),this.el.html(this.tmpl({messages:messages})),p()},remove:function(){this.el.html("")},setResource:function(e){B(e)}})}),define("text!template/page/index.html",[],function(){return'<form id="pageForm">\n	<div id="titleDiv" class="form-group">\n		<div class="row">\n			<div class="col-lg-12">\n				<label><%= messages("title") %></label>\n				<input type="text" id="title" class="form-control">\n			</div>\n		</div>\n	</div>\n	<div class="form-group">\n		<div class="row">\n			<div class="col-lg-6">\n				<label><%= messages("page.friendly_url") %></label>\n				<div class="input-group">\n					<span class="input-group-addon" id="parentFriendlyUrl"><%= messages("page.friendly_url") %></span>\n					<input class="form-control"  id="friendlyUrl" type="text">\n					<span class="input-group-addon" id="friendlyUrlSpan"></span>\n				</div>\n			</div>\n			<div class="col-lg-6">\n				<label><%= messages("template") %></label>\n				<select id="templates" class="form-control"></select>\n			</div>\n		</div>\n	</div>\n	<div class="form-group">\n		<div class="row">\n			<div class="col-lg-12">\n				<label class="checkbox-inline">\n					<input id="restful" type="checkbox" /><%= messages("restful") %>\n				</label>\n			</div>\n		</div>\n	</div>\n	<div class="form-group">\n		<div class="row">\n			<div class="col-lg-12">\n				<label><%= messages("page.publication_date") %></label>\n				<div class="form-inline">\n					<input class="form-control datepicker" id="publishDate" type="text">\n					<input class="form-control"  id="publishTime" type="text">\n					-\n					<input class="form-control datepicker" id="endPublishDate" type="text">\n					<input class="form-control" id="endPublishTime" type="text">\n				</div>\n			</div>\n		</div>\n	</div>\n	<div class="form-group">\n		<div class="row">\n			<div class="col-lg-12">\n				<label></label>\n				<label class="checkbox-inline">\n					<input type="checkbox" id="commentsEnabled"> <%= messages("enable_comments") %>\n				</label>\n				<label class="checkbox-inline">\n					<input type="checkbox" id="searchable" value=""> <%= messages("page.include_search") %>\n				</label>\n				<label class="checkbox-inline">\n					<input type="checkbox" id="velocityProcessing" value=""> <%= messages("page.velocity_processing") %>\n				</label>\n				<label class="checkbox-inline">\n					<input type="checkbox" id="wikiProcessing" value=""> <%= messages("page.wiki_processing") %>\n				</label>\n				<label class="checkbox-inline">\n					<input type="checkbox" id="phpProcessing" value=""> <%= messages("page.php_processing") %>\n				</label>\n				<label class="checkbox-inline">\n					<input type="checkbox" id="enableCkeditor" value=""> <%= messages("config.enable_ckeditor") %>\n				</label>\n				<label class="checkbox-inline">\n					<input type="checkbox" id="skipPostProcessing" value=""> <%= messages("page.skip_postprocessing") %>\n				</label>\n				\n			</div>\n		</div>\n	</div>\n	<div class="form-group">\n		<div class="row">\n			<div class="col-lg-12">\n				<label class="checkbox-inline">\n					<input id="cached" type="checkbox" /><%= messages("page.cache_enabled") %>\n				</label>\n			</div>\n		</div>\n	</div>\n	<div id="dependenciesDiv" class="form-group">\n		<div class="row">\n			<div class="col-lg-12">\n				<label><%= messages("cache_dependencies") %></label>\n				<input class="form-control" id="dependencies" type="text">\n			</div>\n		</div>\n	</div>\n	<div class="form-group">\n		<div class="row">\n			<div class="col-lg-6">\n				<label><%= messages("tags") %></label>\n				<div class="input-group">\n					<a id="addTag" href="#"><%= messages("add_tag") %></a>\n			    	<span id="tags"></span>\n				</div>\n			</div>\n			\n			<div class="col-lg-6">\n				<label><%= messages("page.type") %></label>\n				<select id="pageType" class="form-control">\n			        <option value="SIMPLE"><%= messages("simple") %></option>\n			        <option value="STRUCTURED"><%= messages("structured") %></option>\n			    </select>\n			</div>\n		</div>\n	</div>\n	<div id="structuredControls" class="form-group">\n		<div class="row">\n			<div class="col-lg-6">\n				<label><%= messages("structure") %></label>\n				<select id="structure" class="form-control"></select>\n			</div>\n			\n			<div class="col-lg-6">\n				<label><%= messages("page.structure_template") %></label>\n    			<select id="structureTemplate" class="form-control"></select>\n			</div>\n		</div>\n	</div>\n	<div class="form-group">\n		 <a id="metadata" href="#" ><%= messages("page.metadata") %></a>\n		 <div id="meta" class="row" style="display:none;">\n			<div class="col-lg-12">\n				<label><%= messages("page.meta_keywords") %></label>\n    			<textarea id="keywords" class="form-control"></textarea>\n			</div>\n			\n			<div class="col-lg-12">\n			    <label><%= messages("page.meta_description") %></label>\n			    <textarea id="description" class="form-control"></textarea>\n			</div>\n			<div class="col-lg-12">\n			    <label><%= messages("page.head_content") %></label>\n			    <textarea id="headHtml" class="form-control"></textarea>\n			</div>\n			<div class="col-lg-12">\n			    <label><%= messages("content_type") %></label>\n			    <input id="contentType" type="text"  class="form-control" />\n			</div>\n		</div>\n		 \n	</div>\n	<div class="form-sep">\n		<label class="checkbox-inline">\n			<input type="checkbox" id="approveOnPageSave" value=""> <%= messages("page.approve_save") %>\n		</label>\n		<div class="form-sep">\n		<input id="pageSaveButton" type="submit" class="btn btn-primary" value="<%= messages("save") %>"/>\n		<button id="pagePreview" class="btn"><%= messages("preview") %></button>\n		<button id="pageCancelButton" class="btn"><%= messages("cancel") %></button>\n		</div>\n	</div>\n</form>									\n\n						\n<div class="modal fade" id="tag-dialog" tabindex="-1" role="dialog" aria-labelledby="" aria-hidden="true">\n  <div class="modal-dialog">\n    <div class="modal-content">\n      <div class="modal-header">\n        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>\n        <h4 class="modal-title"><%= messages("select_tag") %></h4>\n      </div>\n      <div class="modal-body">\n      	<ul id="tagTree"></ul>\n      </div>	\n    </div>\n  </div>\n</div>\n\n\n'}),define("view/page/IndexView",["text!template/page/index.html","view/page/context","view/page/version","view/page/breadcrumbs","jquery.treeview"],function(e,t,n,r){function s(){t.loadData=o,t.editMode=t.pageId!="",$(".datepicker").datepicker({todayHighlight:!0}),Heiduc.initJSONRpc(o),$("a.button").hover(function(){$(this).addClass("ui-state-hover")},function(){$(this).removeClass("ui-state-hover")}),n.initVersionDialog(),$("#title").change(v),$("#pageType").change(m),$("#structure").change(S),$("#pageForm").submit(function(){return d(),!1}),$("#pagePreview").click(g),$("#pageCancelButton").click(y),$("#approveButton").click(b),$("ul.nav-tabs li:nth-child(1)").addClass("active"),$("#metadata").click(function(){$("#meta").toggle()}),$("#addTag").click(C),$("#cached").click(function(){$("#dependenciesDiv").toggle()})}function o(){Heiduc.jsonrpc.pageService.getPageRequest(function(e){t.pageRequest=e,t.page=t.pageRequest.page,l(),E(),f(),r.breadcrumbsShow()},t.pageId,t.pageParentUrl)}function u(){t.page!=null&&t.page.friendlyURL.endsWith("/_default")&&(t.isDefault=!0,$(".securityTab, .commentsTab, .childrenTab, #approveOnPageSaveDiv, #pagePreview, #versions, #tagsDiv").hide(),$("#title, #friendlyUrl").attr("disabled",!0))}function a(){Heiduc.jsonrpc.pageService.getPageRequest(function(e){t.pageRequest=e,t.page=t.pageRequest.page,t.editMode=t.pageId!=null,f()},t.pageId,t.pageParentUrl)}function f(){t.editMode?(t.pageId=String(t.page.id),t.pageParentUrl=t.page.parentUrl,n.loadVersions(),T(),N(),M()):t.pages[1]=t.page,c(),w()}function l(){var e=t.pageRequest.templates,n="";$.each(e.list,function(e,t){n+='<option value="'+t.id+'">'+t.title+"</option>"}),$("#templates").html(n),t.page.id!=null?$("#templates").val(t.page.template):$("#templates").val($.cookie("page_template"))}function c(){var e=t.pageParentUrl=="/"?"":"/";$("#title").val(t.page.title),$("#titleDiv").hide(),t.page.parentUrl==""||t.page.parentUrl==null?($("#friendlyUrl").hide(),$("#friendlyUrl").val(""),$("#parentFriendlyUrl").html("/")):($("#friendlyUrl").show(),$("#friendlyUrl").val(t.page.pageFriendlyURL),$("#parentFriendlyUrl").html(t.page.parentFriendlyURL+e)),t.pageRequest.children.list.length>0&&($("#parentFriendlyUrl").hide(),$("#friendlyUrl").hide(),$("#friendlyUrlSpan").html(t.page.friendlyURL)),$("#pageType").val(t.page.pageTypeString),$("#publishDate").val(t.page.publishDateString),$("#publishTime").val(t.page.publishTimeString),$("#endPublishDate").val(t.page.endPublishDateString),$("#endPublishTime").val(t.page.endPublishTimeString),$("#commentsEnabled").each(function(){this.checked=t.page.commentsEnabled}),$("#searchable").each(function(){this.checked=t.page.searchable}),$("#velocityProcessing").each(function(){this.checked=t.page.velocityProcessing}),$("#wikiProcessing").each(function(){this.checked=t.page.wikiProcessing}),$("#phpProcessing").each(function(){this.checked=t.page.PHPProcessing}),$("#enableCkeditor").each(function(){this.checked=t.page.enableCkeditor}),$("#skipPostProcessing").each(function(){this.checked=t.page.skipPostProcessing}),$("#cached").each(function(){this.checked=t.page.cached}),$("#restful").each(function(){this.checked=t.page.restful}),$("#templates").val(t.page.template),$("#pageState").html(t.page.stateString=="EDIT"?messages("edit"):messages("approved")),$("#pageCreateDate").html(t.page.createDateTimeString),$("#pageModDate").html(t.page.modDateTimeString),$("#pageCreateUser").html(t.page.createUserEmail),$("#pageModUser").html(t.page.modUserEmail),$("#keywords").val(t.page.keywords),$("#description").val(t.page.description),$("#headHtml").val(t.page.headHtml),$("#dependencies").val(t.pageRequest.dependencies),$("#contentType").val(t.page.contentType),t.page.cached?$("#dependenciesDiv").show():$("#dependenciesDiv").hide(),t.page.id!=null?($(".contentTab").show(),$(".childrenTab").show(),$(".commentsTab").show(),$(".securityTab").show(),$("#pagePreview").show(),$("#versions").show(),$("#tagsDiv").show()):($(".contentTab").hide(),$(".childrenTab").hide(),$(".commentsTab").hide(),$(".securityTab").hide(),$("#pagePreview").hide(),$("#versions").hide(),$("#tagsDiv").hide()),u(),m()}function h(){return Heiduc.strip($("#publishDate").val())+" "+Heiduc.strip($("#publishTime").val())+":00"}function p(){return $("#endPublishDate").val()?Heiduc.strip($("#endPublishDate").val())+" "+Heiduc.strip($("#endPublishTime").val())+":00":""}function d(){var e=Heiduc.javaMap({id:t.pageId,titles:x(),friendlyUrl:$("#parentFriendlyUrl").text()+$("#friendlyUrl").val(),publishDate:h(),endPublishDate:p(),commentsEnabled:String($("#commentsEnabled:checked").size()>0),searchable:String($("#searchable:checked").size()>0),velocityProcessing:String($("#velocityProcessing:checked").size()>0),wikiProcessing:String($("#wikiProcessing:checked").size()>0),phpProcessing:String($("#phpProcessing:checked").size()>0),enableCkeditor:String($("#enableCkeditor:checked").size()>0),skipPostProcessing:String($("#skipPostProcessing:checked").size()>0),cached:String($("#cached:checked").size()>0),restful:String($("#restful:checked").size()>0),template:$("#templates option:selected").val(),approve:String($("#approveOnPageSave:checked, #approveOnContentSave:checked").size()>0),pageType:$("#pageType").val(),structureId:$("#structure").val(),structureTemplateId:$("#structureTemplate").val(),keywords:$("#keywords").val(),description:$("#description").val(),dependencies:$("#dependencies").val(),contentType:$("#contentType").val(),headHtml:$("#headHtml").val()});$.cookie("page_template",e.map.template,{path:"/",expires:10}),Heiduc.jsonrpc.pageService.savePage(function(e){e.result=="success"?(t.editMode&&(location.href="#pages"),t.pageId=e.message,Heiduc.info(messages("page.success_save")),location.href="#page/content/"+t.pageId):Heiduc.showServiceMessages(e)},e)}function v(){if(t.editMode)return;var e=$("#friendlyUrl").val(),n=$("#title").val();e==""&&$("#friendlyUrl").val(Heiduc.urlFromTitle(n))}function m(){$("#pageType").val()=="SIMPLE"&&$("#structuredControls").hide(),$("#pageType").val()=="STRUCTURED"&&($("#structuredControls").show(),t.page!=null&&$("#structure").val(t.page.structureId),S())}function g(){var e=t.page.friendlyURL+"?language="+t.currentLanguage+"&version="+t.page.version;window.open(e,"preview")}function y(){location.href="#pages"}function b(){Heiduc.jsonrpc.pageService.approve(function(e){Heiduc.showServiceMessages(e),a()},t.pageId)}function w(){var e=t.pageRequest.pagePermission;e.publishGranted?($("#approveButton").show(),$("#approveOnPageSaveDiv").show()):($("#approveButton").hide(),$("#approveOnPageSaveDiv").hide()),e.changeGranted?$("#pageSaveButton").show():$("#pageSaveButton").hide(),e.admin&&t.editMode?$(".securityTab").show():$(".securityTab").hide(),u()}function E(){var e="";$.each(t.pageRequest.structures.list,function(t,n){var r=t==0?'selected="selected"':"";e+="<option "+r+' value="'+n.id+'">'+n.title+"</option>"}),$("#structure").html(e)}function S(){var e=$("#structure").val(),n="";Heiduc.jsonrpc.structureTemplateService.selectByStructure(function(e){var n="";$.each(e.list,function(e,t){var r=e==0?'selected="selected"':"";n+="<option "+r+' value="'+t.id+'">'+t.title+"</option>"}),$("#structureTemplate").html(n),t.page!=null&&$("#structureTemplate").val(t.page.structureTemplateId)},e)}function x(){if(!t.editMode)return'{en:"'+$("#title").val()+'"}'}function T(){var e=t.pageRequest.languages;languages={};var n="";$.each(e.list,function(e,t){languages[t.code]=t})}function N(){if(t.editMode){var e=t.pageRequest.contents,n={};t.pageRequest.pagePermission.allLanguages?n=languages:$.each(t.pageRequest.pagePermission.languagesList.list,function(e,t){n[t]=languages[t]}),n[Heiduc.ENGLISH_CODE]!=undefined?t.currentLanguage=Heiduc.ENGLISH_CODE:t.currentLanguage=e.list[0].languageCode}}function C(){Heiduc.jsonrpc.tagService.getTree(function(e){$("#tagTree").html(k(e.list)),$("#tagTree li > a").click(function(){var e=$(this).attr("data-id");e&&A(e)}),$("#tagTree").treeview({animated:"fast",collapsed:!0,unique:!0,persist:"cookie",cookieId:"tagTree"}),$("#tag-dialog").modal({show:!0})})}function k(e){var t="";return $.each(e,function(e,n){t+=L(n)}),t}function L(e){var t='<li><a data-id="'+e.entity.id+'">'+e.entity.name+"</a>";return e.children.list.length>0&&(t+="<ul>",$.each(e.children.list,function(e,n){t+=L(n)}),t+="</ul>"),t+"</li>"}function A(e){Heiduc.jsonrpc.tagService.addTag(function(e){Heiduc.showServiceMessages(e),$("#tag-dialog").modal({show:!1}),O()},t.page.friendlyURL,e)}function O(){Heiduc.jsonrpc.pageService.getPageTags(function(e){t.pageRequest.tags=e,M()},t.page.friendlyURL)}function M(){var e="";$.each(t.pageRequest.tags.list,function(t,n){e+='<span class="tag">'+n.name+' <a data-id="'+n.id+'"><img src="/static/images/02_x.png"/></a></span>'}),$("#tags").html(e),$("#tags .tag > a").click(function(){var e=$(this).attr("data-id");e&&D(e)})}function D(e){Heiduc.jsonrpc.tagService.removeTag(function(e){Heiduc.showServiceMessages(e),O()},t.page.friendlyURL,e)}console.log("Loading IndexView.js");var i=null;return Backbone.View.extend({css:"/static/css/jquery.treeview.css",el:$("#tab-1"),tmpl:_.template(e),render:function(){Heiduc.addCSSFile(this.css),this.el=$("#tab-1"),this.el.html(this.tmpl({messages:messages})),s()},remove:function(){this.el.html(""),Heiduc.removeCSSFile(this.css)}})}),define("text!template/page/children.html",[],function(){return'\n\n<div id="children"> </div>\n<div class="form-sep">\n    <input class="btn btn-primary" id="addChildButton" type="button" value="<%= messages("add_child_page") %>" />\n    <input class="btn btn-default" id="deleteChildButton" type="button" value="<%= messages("delete_pages") %>" />\n    <input class="btn btn-default" id="defaultSettingsButton" type="button" value="<%= messages("default_settings") %>" />\n</div>    \n\n\n<div class="modal fade" id="page-dialog" tabindex="-1" role="dialog" aria-labelledby="" aria-hidden="true">\n  <div class="modal-dialog">\n    <div class="modal-content">\n      <div class="modal-header">\n        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>\n        <h4 class="modal-title"><%= messages("pages.new_page") %></h4>\n      </div>\n      <div class="modal-body">\n      	<form id="pageForm">\n      		<div class="form-group">\n				<div class="row">\n					<div class="col-lg-12">\n		        		<label><%= messages("pages.page_title") %></label>\n		        		<input id="title" type="text" />\n					</div>\n				</div>\n			</div>\n			<div class="form-group">\n				<div class="row">\n					<div class="col-lg-12">\n		        		<label><%= messages("pages.page_url") %></label>\n		        		<span id="parentURL"></span>\n		        		<input id="url" type="text"/>\n					</div>\n				</div>\n			</div>\n		    <div id="pageMessages"></div>\n		    \n		    <div class="modal-footer">\n		        <button id="cancelDlgButton" type="button" class="btn btn-default" data-dismiss="modal"><%= messages("cancel") %></button>\n		        <button type="submit" class="btn btn-primary"><%= messages("save") %></button>\n		    </div>\n		  </form>\n      </div>	\n    </div>\n  </div>\n</div>\n'}),define("view/page/ChildrenView",["text!template/page/children.html","view/page/context","view/page/version","view/page/breadcrumbs"],function(e,t,n,r){function o(){t.loadData=u,Heiduc.initJSONRpc(u),$("a.button").hover(function(){$(this).addClass("ui-state-hover")},function(){$(this).removeClass("ui-state-hover")}),n.initVersionDialog(),$("#addChildButton").click(h),$("#deleteChildButton").click(p),$("#defaultSettingsButton").click(y),$("ul.nav-tabs li:nth-child(3)").addClass("active"),$("#cancelDlgButton").click(b),$("#pageForm").submit(function(){return S(),!1}),$("#title").change(w)}function u(){Heiduc.jsonrpc.pageService.getPageRequest(function(e){t.pageRequest=e,t.page=t.pageRequest.page,f(),r.breadcrumbsShow()},t.pageId,t.pageParentUrl)}function a(){Heiduc.jsonrpc.pageService.getPageRequest(function(e){t.pageRequest=e,t.page=t.pageRequest.page,t.editMode=t.pageId!=null,f()},t.pageId,t.pageParentUrl)}function f(){t.editMode?(pageId=String(t.page.id),pageParentUrl=t.page.parentUrl,c(),n.loadVersions(),n.showAuditInfo()):pages[1]=t.page,d()}function l(){Heiduc.jsonrpc.pageService.getChildren(function(e){t.pageRequest.children=e,c()},t.page.friendlyURL)}function c(){s=t.pageRequest.children.list;var e='<table class="table table-striped"><tr><th></th><th>'+messages("title")+"</th><th>"+messages("page.friendly_url")+"</th><th></th></tr>";$.each(s,function(t,n){e+='<tr><td><input type="checkbox" value="'+n.id+'"/></td><td><a href="#page/content/'+n.id+'">'+n.title+"</a></td><td>"+n.friendlyURL+'</td>			<td><a class="pageup" data-n="'+t+'"><img src="/static/images/02_up.png"/></a>	        <a class="pagedown" data-n="'+t+'"><img src="/static/images/02_down.png"/></a>	        </td></tr>'}),$("#children").html(e+"</table>"),$("#children tr:even").addClass("even"),$("a.pageup").click(function(){v(Number($(this).attr("data-n")))}),$("a.pagedown").click(function(){m(Number($(this).attr("data-n")))})}function h(){$("#ui-dialog-title-page-dialog").text(messages("pages.new_page")),i=t.page.friendlyURL=="/"?"":t.page.friendlyURL,$("#page-dialog").modal({show:!0}),$("#parentURL").html(i+"/"),$("#title").val(""),$("#url").val(""),$("#title").focus()}function p(){var e=[];$("#children input:checked").each(function(){e.push(this.value)});if(e.length==0){Heiduc.info(messages("nothing_selected"));return}confirm(messages("are_you_sure"))&&Heiduc.jsonrpc.pageService.deletePages(function(e){Heiduc.showServiceMessages(e),l()},Heiduc.javaList(e))}function d(){var e=t.pageRequest.pagePermission;e.changeGranted?($("#addChildButton").show(),$("#deleteChildButton").show()):($("#addChildButton").hide(),$("#deleteChildButton").hide()),e.admin&&t.editMode?$(".securityTab").show():$(".securityTab").hide()}function v(e){e-1>=0&&(Heiduc.jsonrpc.pageService.moveUp(function(e){},s[e].id),s[e].sortIndex--,s[e-1].sortIndex++,g(e,e-1),l())}function m(e){e+1<s.length&&(Heiduc.jsonrpc.pageService.moveDown(function(e){},s[e].id),s[e+1].sortIndex--,s[e].sortIndex++,g(e,e+1),l())}function g(e,t){var n=s[t];s[t]=s[e],s[e]=n}function y(){Heiduc.jsonrpc.pageService.getPageDefaultSettings(function(e){location.href="#page/"+e.id},t.page.friendlyURL)}function b(){}function w(){var e=$("#url").val(),t=$("#title").val();e==""&&$("#url").val(Heiduc.urlFromTitle(t))}function E(e){if(e.title=="")return messages("title_is_empty");if(e.title.indexOf(",")!=-1)return messages("pages.coma_not_allowed");if(e.url=="")return messages("pages.url_is_empty");if(e.url.indexOf("/")!=-1)return messages("pages.slash_not_allowed")}function S(){var e={id:"",title:$("#title").val(),url:$("#url").val(),friendlyUrl:i+"/"+$("#url").val()},t=E(e);t?x(t):Heiduc.jsonrpc.pageService.savePage(function(e){e.result=="success"?(Heiduc.info(messages("pages.success_created")),location.href="#page/content/"+e.message):x(e.message)},Heiduc.javaMap(e))}function x(e){Heiduc.errorMessage("#pageMessages",e)}console.log("Loading ChildrenView.js");var i=null,s=null;return Backbone.View.extend({el:$("#tab-1"),tmpl:_.template(e),render:function(){this.el=$("#tab-1"),this.el.html(this.tmpl({messages:messages})),o()},remove:function(){this.el.html(""),Heiduc.removeCSSFile(this.css)}})}),define("text!template/page/comments.html",[],function(){return'\n<div id="comments"> </div>\n<div class="form-sep">\n    <input class="btn btn-primary" id="enableCommentsButton" type="button" \n        value="<%= messages("enable_comments") %>" />\n    <input class="btn btn-default" id="disableCommentsButton" type="button" \n        value="<%= messages("disable_comments") %>" />\n    <input class="btn btn-default" id="deleteCommentsButton" type="button" \n        value="<%= messages("delete_comments") %>" />\n</div>    \n'}),define("view/page/CommentsView",["text!template/page/comments.html","view/page/context","view/page/version","view/page/breadcrumbs"],function(e,t,n,r){function i(){t.loadData=s,t.editMode=t.pageId!="",Heiduc.initJSONRpc(s),$("a.button").hover(function(){$(this).addClass("ui-state-hover")},function(){$(this).removeClass("ui-state-hover")}),n.initVersionDialog(),$("#enableCommentsButton").click(f),$("#disableCommentsButton").click(l),$("#deleteCommentsButton").click(c),$("ul.nav-tabs li:nth-child(4)").addClass("active")}function s(){Heiduc.jsonrpc.pageService.getPageRequest(function(e){t.pageRequest=e,t.page=t.pageRequest.page,u(),r.breadcrumbsShow()},t.pageId,t.pageParentUrl)}function o(){Heiduc.jsonrpc.pageService.getPageRequest(function(e){t.pageRequest=e,t.page=t.pageRequest.page,t.editMode=t.pageId!=null,u()},t.pageId,t.pageParentUrl)}function u(){t.editMode?(t.pageId=String(t.page.id),t.pageParentUrl=t.page.parentUrl,n.loadVersions(),a(),n.showAuditInfo()):t.pages[1]=t.page,h()}function a(){var e=t.pageRequest.comments,n='<table class="table table-striped"><tr><th></th><th>'+messages("state")+"</th><th>"+messages("name")+"</th><th>"+messages("content")+"</th></tr>";$.each(e.list,function(e,t){var r=t.disabled?messages("disabled"):messages("enabled");n+='<tr><td><input type="checkbox" value="'+t.id+'"/></td><td>'+r+"</a></td><td>"+t.name+"</td><td>"+t.content+"</td></tr>"}),$("#comments").html(n+"</table>"),$("#comments tr:even").addClass("even")}function f(){var e=[];$("#comments input:checked").each(function(){e.push(this.value)});if(e.length==0){Heiduc.info(messages("nothing_selected"));return}Heiduc.jsonrpc.commentService.enableComments(function(e){Heiduc.showServiceMessages(e),s()},Heiduc.javaList(e))}function l(){var e=[];$("#comments input:checked").each(function(){e.push(this.value)});if(e.length==0){Heiduc.info(messages("nothing_selected"));return}Heiduc.jsonrpc.commentService.disableComments(function(e){Heiduc.showServiceMessages(e),s()},Heiduc.javaList(e))}function c(){var e=[];$("#comments input:checked").each(function(){e.push(this.value)});if(e.length==0){Heiduc.info(messages("nothing_selected"));return}confirm(messages("are_you_sure"))&&Heiduc.jsonrpc.commentService.deleteComments(function(e){Heiduc.showServiceMessages(e),s()},Heiduc.javaList(e))}function h(){var e=t.pageRequest.pagePermission;e.changeGranted?($("#enableCommentsButton").show(),$("#disableCommentsButton").show(),$("#deleteCommentsButton").show()):($("#enableCommentsButton").hide(),$("#disableCommentsButton").hide(),$("#deleteCommentsButton").hide()),e.admin&&t.editMode?$(".securityTab").show():$(".securityTab").hide()}return console.log("Loading CommentsView.js"),Backbone.View.extend({el:$("#tab-1"),tmpl:_.template(e),render:function(){this.el=$("#tab-1"),this.el.html(this.tmpl({messages:messages})),i()},remove:function(){this.el.html("")}})}),define("text!template/page/security.html",[],function(){return'  \n<div id="permissions"> </div>\n<div class="form-sep">\n    <input class="btn btn-primary" id="addPermissionButton" type="button" \n        value="<%= messages("add_permission") %>" />\n    <input class="btn btn-default" id="deletePermissionButton" type="button" \n        value="<%= messages("delete_permission") %>" />\n</div>    \n\n<div class="modal fade" id="permission-dialog" tabindex="-1" role="dialog" aria-labelledby="" aria-hidden="true">\n  <div class="modal-dialog">\n    <div class="modal-content">\n      <div class="modal-header">\n        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>\n        <h4 class="modal-title"><%= messages("permission_details") %></h4>\n      </div>\n      <div class="modal-body">\n      	<form id="permissionForm">\n		    <div class="form-row">\n		        <label><%= messages("group") %></label>\n		        <select id="groupSelect"></select>\n		        <span id="groupName"></span>        \n		    </div>\n		    <div id="permissionList" class="form-row">\n		        <fieldset>\n		            <legend><%= messages("permission") %></legend>\n		            <input type="radio" name="permission" value="DENIED"/> <%= messages("denied") %> <br />\n		            <input type="radio" name="permission" value="READ" /> <%= messages("read") %> <br />\n		            <input type="radio" name="permission" value="WRITE" /> <%= messages("read_write") %> <br />\n		            <input type="radio" name="permission" value="PUBLISH" /> <%= messages("read_write_publish") %> <br />\n		            <input type="radio" name="permission" value="ADMIN" /> <%= messages("read_write_publish_grant") %> <br />\n		        </fieldset>        \n		    </div>\n		    <div class="form-row">\n		        <label><%= messages("page.all_languages") %></label>\n		        <input id="allLanguages" type="checkbox" checked="checked" />\n		    </div>    \n		    <div id ="permLanguages" class="form-row" style="display:none"> </div>\n		    <div class="modal-footer">\n		        <input class="btn btn-primary" id="permissionSaveButton" type="submit" \n		            value="<%= messages("save") %>" />\n		        <input class="btn btn-default" data-dismiss="modal" id="permissionCancelButton" type="button" \n		            value="<%= messages("cancel") %>" />\n		    </div>\n		  </form>\n      </div>	\n    </div>\n  </div>\n</div>\n\n'}),define("view/page/SecurityView",["text!template/page/security.html","view/page/context","view/page/version","view/page/breadcrumbs"],function(e,t,n,r){function a(){t.loadData=f,t.editMode=t.pageId!="",Heiduc.initJSONRpc(f),$("a.button").hover(function(){$(this).addClass("ui-state-hover")},function(){$(this).removeClass("ui-state-hover")}),n.initVersionDialog(),$("#addPermissionButton").click(E),$("#deletePermissionButton").click(S),$("#permissionForm").submit(function(){return w(),!1}),$("#permissionCancelButton").click(x),$("#allLanguages").change(T),$("ul.nav-tabs li:nth-child(5)").addClass("active")}function f(){Heiduc.jsonrpc.pageService.getPageRequest(function(e){t.pageRequest=e,t.page=t.pageRequest.page,h(),c(),r.breadcrumbsShow()},t.pageId,t.pageParentUrl)}function l(){Heiduc.jsonrpc.pageService.getPageRequest(function(e){t.pageRequest=e,t.page=t.pageRequest.page,t.editMode=t.pageId!=null,c()},t.pageId,t.pageParentUrl)}function c(){t.editMode?(t.pageId=String(t.page.id),t.pageParentUrl=t.page.parentUrl,n.loadVersions(),v(),m()):t.pages[1]=t.page,N()}function h(){var e=t.pageRequest.languages;u={};var n="";$.each(e.list,function(e,t){u[t.code]=t}),g()}function p(e){if(e=="DENIED")return messages("denied");if(e=="READ")return messages("read");if(e=="WRITE")return messages("read_write");if(e=="PUBLISH")return messages("read_write_publish");if(e=="ADMIN")return messages("read_write_publish_grant")}function d(){Heiduc.jsonrpc.contentPermissionService.selectByUrl(function(e){t.pageRequest.permissions=e,v()},t.page.friendlyURL)}function v(){var e=t.pageRequest.permissions;s=Heiduc.idMap(e.list);var n='<table class="table table-striped"><tr><th></th><th>'+messages("group")+"</th><th>"+messages("permission")+"</th><th>"+messages("languages")+"</th></tr>";$.each(s,function(e,t){var r="",i=t.group.name;t.inherited||(r='<input type="checkbox" value="'+t.id+'">',i='<a data-id="'+t.id+'"> '+t.group.name+"</a>");var s=t.allLanguages?messages("page.all_languages"):t.languages;n+="<tr><td>"+r+"</td><td>"+i+"</td><td>"+p(t.permission)+"</td><td>"+s+"</td></tr>"}),$("#permissions").html(n+"</table>"),$("#permissions tr:even").addClass("even"),$("#permissions a").click(function(){var e=$(this).attr("data-id");e&&y(e)})}function m(){var e=t.pageRequest.groups;o=Heiduc.idMap(e.list);var n="";$.each(o,function(e,t){n+='<option value="'+t.id+'">'+t.name+"</option>"}),$("#groupSelect").html(n)}function g(){var e="<fieldset><legend>"+messages("languages")+"</legend>";$.each(u,function(t,n){e+='<input type="checkbox" value="'+n.code+'" /> '+n.title+"<br />"}),$("#permLanguages").html(e+"</fieldset>")}function y(e){i=s[e],b(),$("#permission-dialog").modal({show:!0})}function b(){$("#permission-dialog input[type=radio]").removeAttr("checked"),$("#allLanguages").attr("checked","checked"),$("#permLanguages").hide();if(i==null)$("#permission-dialog input[value=READ]").attr("checked","checked"),$("#groupSelect").show(),$("#groupName").hide();else{$("#permissionList input[value="+i.permission+"]").attr("checked","checked"),$("#groupSelect").hide(),$("#groupName").show(),$("#groupName").text(i.group.name);if(!i.allLanguages){$("#allLanguages").removeAttr("checked"),$("#permLanguages").show();var e=i.languages.split(",");$("#permLanguages input").removeAttr("checked"),$.each(e,function(e,t){$("#permLanguages input[value="+t+"]").attr("checked","checked")})}}}function w(){var e="";$("#permLanguages input:checked").each(function(){e+=(e==""?"":",")+this.value});var n={url:t.page.friendlyURL,groupId:i==null?$("#groupSelect").val():String(i.group.id),permission:$("#permissionList input:checked")[0].value,languages:$("#allLanguages")[0].checked?"":e};Heiduc.jsonrpc.contentPermissionService.save(function(e){Heiduc.showServiceMessages(e),e.result=="success"&&d()},Heiduc.javaMap(n))}function E(){i=null,b(),$("#permission-dialog").modal({show:!0})}function S(){var e=[];$("#permissions input:checked").each(function(){e.push(this.value)});if(e.length==0){Heiduc.info(messages("nothing_selected"));return}confirm(messages("are_you_sure"))&&Heiduc.jsonrpc.contentPermissionService.remove(function(e){Heiduc.showServiceMessages(e),d()},Heiduc.javaList(e))}function x(){}function T(){this.checked?$("#permLanguages").hide():$("#permLanguages").show()}function N(){var e=t.pageRequest.pagePermission;e.admin&&t.editMode?$(".securityTab").show():$(".securityTab").hide()}console.log("Loading SecurityView.js");var i=null,s=null,o=null,u={};return Backbone.View.extend({el:$("#tab-1"),tmpl:_.template(e),render:function(){this.el=$("#tab-1"),this.el.html(this.tmpl({messages:messages})),a()},remove:function(){this.el.html("")}})}),define("text!template/page/attributes.html",[],function(){return'\n<div id="attributes"> </div>\n<div class="form-sep">\n    <input class="btn btn-primary" id="addButton" type="button" \n        value="<%= messages("add_attribute") %>" />\n    <input class="btn btn-default" id="deleteButton" type="button" \n        value="<%= messages("delete_attribute") %>" />\n</div>    \n\n<div class="modal fade" id="attribute-dialog" tabindex="-1" role="dialog" aria-labelledby="" aria-hidden="true">\n  <div class="modal-dialog">\n    <div class="modal-content">\n      <div class="modal-header">\n        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>\n        <h4 class="modal-title"><%= messages("attribute") %></h4>\n      </div>\n      <div class="modal-body">\n      	  <form id="attributeForm">\n		    <div class="form-row">\n		        <label><%= messages("name") %></label>\n		        <input id="name" type="text"/>\n		    </div>\n		    <div class="form-row">\n		        <label><%= messages("title") %></label>\n		        <input id="title" type="text"/>\n		    </div>\n		    <div class="form-row">\n		        <label><%= messages("default_value") %></label>\n		        <input id="defaultValue" type="text"/>\n		    </div>\n		    <div class="form-row">\n		        <label><%= messages("inherited") %></label>\n		        <input type="checkbox" id="inherited" />\n		    </div>\n		    <div class="modal-footer">\n		        <input class="btn btn-primary" id="saveButton" type="submit" value="<%= messages("save") %>" />\n		        <input class="btn btn-default" data-dismiss="modal" id="cancelButton" type="button" value="<%= messages("cancel") %>" />\n		    </div>\n		  </form>\n      </div>	\n    </div>\n  </div>\n</div>\n\n<div class="modal fade" id="attrValue-dialog" tabindex="-1" role="dialog" aria-labelledby="" aria-hidden="true">\n  <div class="modal-dialog">\n    <div class="modal-content">\n      <div class="modal-header">\n        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>\n        <h4 class="modal-title"><%= messages("attribute") %></h4>\n      </div>\n      <div class="modal-body">\n      	<form id="attrValueForm">\n		    <div class="form-row">\n		        <label><%= messages("name") %></label>\n		        <span id="attrName" />\n		    </div>\n		    <div class="form-row">\n		        <label><%= messages("language") %></label>\n		        <select id="language"/>\n		    </div>\n		    <div class="form-row">\n		        <label><%= messages("value") %></label>\n		        <input id="value" type="text"/>\n		    </div>\n		    <div id="applyChildren" class="form-row">\n		        <label><%= messages("page.apply_children") %></label>\n		        <input type="checkbox" id="attrInherited" />\n		    </div>\n		    <div class="modal-footer">\n		        <input class="btn btn-primary" id="saveValueButton" type="submit" value="<%= messages("save") %>" />\n		        <input class="btn btn-default" data-dismiss="modal" id="cancelValueButton" type="button" value="<%= messages("cancel") %>" />\n		    </div>\n		  </form>\n      </div>	\n    </div>\n  </div>\n</div>'}),define("view/page/AttributesView",["text!template/page/attributes.html","view/page/context","view/page/version","view/page/breadcrumbs"],function(attributesHtml,ctx,version,breadcrumbs){function postRender(){ctx.loadData=loadData,ctx.editMode=ctx.pageId!="",Heiduc.initJSONRpc(loadData),$("a.button").hover(function(){$(this).addClass("ui-state-hover")},function(){$(this).removeClass("ui-state-hover")}),version.initVersionDialog(),$("#addButton").click(onAdd),$("#cancelButton").click(function(){}),$("#cancelValueButton").click(function(){}),$("#attributeForm").submit(function(){return onSave(),!1}),$("#attrValueForm").submit(function(){return onSaveValue(),!1}),$("#deleteButton").click(onDelete),$("#language").change(onLanguageChange),$("ul.nav-tabs li:nth-child(7)").addClass("active")}function loadData(){Heiduc.jsonrpc.pageService.getPageRequest(function(e){ctx.pageRequest=e,ctx.page=ctx.pageRequest.page,loadPage(),breadcrumbs.breadcrumbsShow()},ctx.pageId,ctx.pageParentUrl)}function callLoadPage(){Heiduc.jsonrpc.pageService.getPageRequest(function(e){ctx.pageRequest=e,ctx.page=ctx.pageRequest.page,ctx.editMode=ctx.pageId!=null,loadPage()},ctx.pageId,ctx.pageParentUrl)}function loadPage(){ctx.editMode?(ctx.pageId=String(ctx.page.id),ctx.pageParentUrl=ctx.page.parentUrl,version.loadVersions(),loadLanguages(),version.showAuditInfo(),attrValues=ctx.page.attributes?eval("("+ctx.page.attributes+")"):{},loadAttributes()):ctx.pages[1]=ctx.page,loadPagePermission()}function loadLanguages(){var e=ctx.pageRequest.languages;languages={};var t="";$.each(e.list,function(e,n){languages[n.code]=n,t+='<option value="'+n.code+'" '+">"+n.title+"</option>"}),$("#language").html(t),$("#language").val(Heiduc.ENGLISH_CODE)}function loadPagePermission(){var e=ctx.pageRequest.pagePermission;e.changeGranted?($("#enableCommentsButton").show(),$("#disableCommentsButton").show(),$("#deleteCommentsButton").show()):($("#enableCommentsButton").hide(),$("#disableCommentsButton").hide(),$("#deleteCommentsButton").hide()),e.admin&&ctx.editMode?$(".securityTab").show():$(".securityTab").hide()}function loadAttributes(){Heiduc.jsonrpc.pageAttributeService.getByPage(function(e){attributes=e.list,showAttributes()},ctx.page.friendlyURL)}function showAttributes(){var e='<table class="table table-striped"><tr><th></th><th>'+messages("name")+"</th><th>"+messages("value")+"</th><th>"+messages("inherited")+"</th></tr>";$.each(attributes,function(t,n){attributesMap[n.name]=n;var r=n.inherited?messages("inherited"):"";e+='<tr><td><input type="checkbox" value="'+n.id+'"/></td><td><a data-name="'+n.name+'">'+n.name+"</a></td><td>"+getAttributeValue(n.name,Heiduc.ENGLISH_CODE)+"</td><td>"+r+"</td></tr>"}),$("#attributes").html(e+"</table>"),$("#attributes tr:even").addClass("even"),$("#attributes a").click(function(){var e=$(this).attr("data-name");e&&onEditValue(e)})}function onAdd(){$("#name").val(""),$("#title").val(""),$("#defaultValue").val(""),$("#inherited").each(function(){this.checked=!1}),$("#attribute-dialog").modal({show:!0})}function onDelete(){var e=[];$("#attributes input:checked").each(function(){e.push(this.value)});if(e.length==0){Heiduc.info(messages("nothing_selected"));return}confirm(messages("are_you_sure"))&&Heiduc.jsonrpc.pageAttributeService.remove(function(e){Heiduc.showServiceMessages(e),loadData()},Heiduc.javaList(e),ctx.page.id)}function onSave(){var e={id:attrDef==null?"":String(attrDef.id),url:ctx.page.friendlyURL,name:$("#name").val(),title:$("#title").val(),inherited:String($("#inherited:checked").size()>0),defaultValue:$("#defaultValue").val()};Heiduc.jsonrpc.pageAttributeService.save(function(t){t.result=="success"?(Heiduc.info(messages("page.success_save")),loadData(),e.inherited=$("#inherited:checked").size()>0,attributesMap[e.name]=e,e.inherited&&e.defaultValue?loadData():onEditValue(e.name)):Heiduc.showServiceMessages(t)},Heiduc.javaMap(e))}function getAttributeValue(e,t){return attrValues[e]&&attrValues[e][t]?attrValues[e][t]:""}function onEditValue(e){$("#attrValue-dialog").modal({show:!0}),$("#attrName").html(e),$("#attrInherited").each(function(){this.checked=!1}),attributesMap[e].inherited?$("#applyChildren").show():$("#applyChildren").hide();var t=getAttributeValue(e,$("#language").val());!t&&attributesMap[e].defaultValue&&confirm(messages("page.use_default_value"))&&(t=attributesMap[e].defaultValue),$("#value").val(t),$("#language").val(Heiduc.ENGLISH_CODE)}function checkPageAttrValue(e,t){attrValues[e]==undefined&&(attrValues[e]={}),attrValues[e][t]==undefined&&(attrValues[e][t]="")}function setPageAttrValue(e,t,n){checkPageAttrValue(e,t),attrValues[e][t]=n}function getPageAttrValue(e,t){return checkPageAttrValue(e,t),attrValues[e][t]}function onLanguageChange(){var e=$("#attrName").text(),t=$("#language").val(),n=getPageAttrValue(e,t);!n&&attributesMap[e].defaultValue&&confirm(messages("page.use_default_value"))&&(n=attributesMap[e].defaultValue),$("#value").val(n)}function onSaveValue(){var e=$("#attrName").text(),t=$("#language").val(),n=$("#value").val();setPageAttrValue(e,t,n),Heiduc.jsonrpc.pageService.saveAttribute(function(e){e.result=="success"?(Heiduc.info(messages("success")),loadData()):Heiduc.showServiceMessages(e)},ctx.page.id,e,n,t,$("#attrInherited:checked").size()>0)}console.log("Loading AttributesView.js");var attrDef=null,attributes=null,attributesMap={},attrValues={},languages=null;return Backbone.View.extend({el:$("#tab-1"),tmpl:_.template(attributesHtml),render:function(){this.el=$("#tab-1"),this.el.html(this.tmpl({messages:messages})),postRender()},remove:function(){this.el.html("")}})}),define("view/page/PageRouter",["view/page/context","view/page/ContentView","view/page/IndexView","view/page/ChildrenView","view/page/CommentsView","view/page/SecurityView","view/page/AttributesView"],function(e,t,n,r,i,s,o){return console.log("Loading PageRouter.js"),Backbone.Router.extend({pageView:null,currentView:null,contentView:new t,indexView:new n,childrenView:new r,commentsView:new i,securityView:new s,attributesView:new o,initialize:function(e){this.pageView=e.view},show:function(e){Heiduc.app.currentView!=this.pageView&&Heiduc.app.show(this.pageView),this.currentView&&(this.currentView.remove(),this.currentView=null),$("ul.nav-tabs li").removeClass("active"),e.render(),this.currentView=e},routes:{"page/children/:id":"children","page/comments/:id":"comments","page/security/:id":"security","page/attributes/:id":"attributes","page/resources/:id":"resources"},showCmd:function(t){t=="editContent"&&this.editContent(e.pageId),t=="editPage"&&this.editPage(e.pageId)},editContent:function(t){e.pageId=t,this.show(this.contentView)},editPage:function(t){e.pageId=t,this.show(this.indexView)},children:function(t){e.pageId=t,this.show(this.childrenView)},comments:function(t){e.pageId=t,this.show(this.commentsView)},security:function(t){e.pageId=t,this.show(this.securityView)},attributes:function(t){e.pageId=t,this.show(this.attributesView)},resources:function(t){Heiduc.jsonrpc.pageService.getPageRequest(function(n){e.pageRequest=n,e.pageId=t,e.page=e.pageRequest.page,Heiduc.jsonrpc.folderService.createFolderByPath(function(t){jQuery.cookie("folderReturnPath","#page/content/"+e.pageId,{path:"/",expires:10}),location.href="#folder/"+t.id},"/page"+e.page.friendlyURL)},t,"")}})}),define("view/page/PageView",["text!template/page/page.html","view/page/PageRouter","view/page/context"],function(e,t,n){return console.log("Loading PageView.js"),Backbone.View.extend({css:["/static/js/codemirror/codemirror.css","/static/js/codemirror/eclipse.css","/static/css/page.css"],el:$("#content"),tmpl:_.template(e),viewCmd:null,router:null,initialize:function(){this.router=new t({view:this})},render:function(){Heiduc.addCSSFiles(this.css),this.el.html(this.tmpl({messages:messages,id:n.pageId})),this.router.showCmd(this.viewCmd)},remove:function(){this.router.currentView&&this.router.currentView.remove(),this.el.html(""),Heiduc.removeCSSFiles(this.css)},editContent:function(e){n.pageId=e,this.viewCmd="editContent"},editPage:function(e){n.pageId=e,this.viewCmd="editPage"},setResource:function(e){this.router.contentView.setResource(e)}})}),define("text!template/profile.html",[],function(){return'<div class="row">\n	<div class="col-lg-12">\n		<div class="panel panel-default">\n			<div class="panel-heading"><%= messages("profile.title") %></div>\n			<div class="panel-body">\n				<div class="row">\n					<div class="form-group">\n						<label><%= messages("profile.username") %></label>\n						<input type="text" name="name" id="name" class="form-control"/>\n					</div>\n					<div class="form-group">\n						<label><%= messages("profile.user_email") %></label>\n						<input disabled="disabled" type="text" name="email" id="email" class="form-control">\n					</div>\n					<div class="form-group">\n						<label><%= messages("password") %></label>\n						<input type="password" name="password1" id="password1" class="form-control">\n					</div>\n					<div class="form-group">\n						<label><%= messages("profile.retype_password") %></label>\n						<input type="password" name="password2" id="password1" class="form-control">\n					</div>\n					<div class="form-group">\n						<label><%= messages("profile.timezone") %></label>\n						<select id="timezone" class="form-control"></select>\n					</div>\n					<div class="form-sep">\n						<input class="btn btn-primary" id="saveButton" type="button" value="<%= messages("save") %>" />\n					</div>\n				</div>\n			</div>\n		</div>\n	</div>\n</div>\n\n'}),define("view/ProfileView",["text!template/profile.html"],function(e){function r(){Heiduc.initJSONRpc(i),$("#saveButton").click(u)}function i(){Heiduc.jsonrpc.userService.getTimezones(function(e){n=e.list,a(),s()})}function s(){Heiduc.jsonrpc.userService.getLoggedIn(function(e){t=e,$("#name").val(t.name),$("#email").val(t.email),$("#password1").val(""),$("#password2").val(""),$("#timezone").val(t.timezone)})}function o(){var e=$("#password1").val(),t=$("#password2").val();return e||t?e==t?!0:!1:!0}function u(){var e="";if(!o()){Heiduc.error(messages("profile.password_dont_match"));return}e=$("#password1").val();var n={id:String(t.id),name:$("#name").val(),timezone:$("#timezone").val(),password:e};Heiduc.jsonrpc.userService.save(function(e){Heiduc.showServiceMessages(e)},Heiduc.javaMap(n))}function a(){var e="";$.each(n,function(t,n){e+='<option value="'+n+'">'+n+"</option>"}),$("#timezone").html(e)}console.log("Loading ProfileView.js");var t=null,n=null;return Backbone.View.extend({el:$("#content"),render:function(){this.el.html(_.template(e,{messages:messages})),r()},remove:function(){this.el.html("")}})}),define("text!template/plugins/index.html",[],function(){return'\n<div class="row">\n		<div class="col-md-12">\n			<div class="panel panel-default">\n				<div class="panel-body">\n			        <img src="/static/images/config.png" />\n			        <a href="#plugins/config"><%= messages("plugins.config") %></a>\n			        <p><%= messages("plugins.config_info") %></p>\n			    </div>\n		    </div>\n		</div>\n</div>\n<div class="row">\n		<div class="col-md-12">\n			<div class="panel panel-default">\n				<div class="panel-body">\n			        <img src="/static/images/form.png" />\n			        <a href="#plugins/forms"><%= messages("forms") %></a>\n			        <p><%= messages("plugins.forms_info") %></p>\n			    </div>\n		    </div>\n		</div>\n</div>\n<div class="row">\n		<div class="col-md-12">\n			<div class="panel panel-default">\n				<div class="panel-body">\n			        <img src="/static/images/seo_urls.png" />\n			        <a href="#plugins/seo-urls"><%= messages("plugins.seo_urls") %></a>\n			        <p><%= messages("plugins.seo_urls_info") %></p>\n			    </div>\n		    </div>\n		</div>\n</div>\n\n\n'}),define("view/plugins/PluginsView",["text!template/plugins/index.html"],function(e){return console.log("Loading PluginsView.js"),Backbone.View.extend({el:$("#content"),render:function(){this.el.html(_.template(e,{messages:messages}))},remove:function(){this.el.html("")}})}),define("text!template/plugins/plugin.html",[],function(){return'\n<div class="row">\n	<div class="col-lg-12">\n		<div class="panel panel-default">\n			<div class="panel-body">\n				<div class="row">\n					<div class="col-md-12">\n						<ul class="nav nav-tabs" id="tabs_a">\n							<li class="active"><a data-toggle="tab" id="plugin-title" href="#tab-1"><%= messages("plugin") %></a></li>\n						</ul>\n						<div class="tab-content" id="tabs_content_a">\n							<div id="tab-1" class="tab-pane fade in active">\n								<div class="row">\n		                            <div class="col-lg-6">\n		                            	<div id="properties"></div>\n									    <div class="form-sep">\n									        <input id="saveButton"class="btn btn-primary" type="button" value="<%= messages("save") %>" />\n									        <input id="cancelButton" class="btn btn-default" type="button" value="<%= messages("cancel") %>" />\n									    </div>\n		                            </div>\n	                            </div>\n								\n							</div>\n						</div>\n					</div>\n				</div>\n			</div>\n		</div>\n	</div>\n</div>\n\n\n\n'}),define("view/plugins/PluginView",["text!template/plugins/plugin.html"],function(e){function r(){Heiduc.initJSONRpc(i),$("#cancelButton").click(u),$("#saveButton").click(h)}function i(){s(),o()}function s(){Heiduc.jsonrpc.pluginService.getById(function(e){t=e,$("#plugin-title").text(t.name+" "+messages("plugin.config")),f()},pluginId)}function o(){Heiduc.jsonrpc.pluginService.getProperties(function(e){n=e.list,f()},pluginId)}function u(){location.href="#plugins"}function a(e){return e==null?"":e}function f(){if(t==null||n==null)return;var e="",r=l();$.each(n,function(t,n){var i=a(r[n.name.toLowerCase()]?r[n.name.toLowerCase()]:n.defaultValue),s=Heiduc.message(n.title);if(n.type=="String"||n.type=="Integer")e+='<div class="form-group"><label>'+s+"</label>"+'<input class="form-control" id="property-'+n.name+'" value="'+Heiduc.escapeHtml(i)+'"/></div>';n.type=="Date"&&(e+='<div class="form-group"><label>'+s+"</label>"+'<input class="form-control" id="property-'+n.name+'"/></div>'),n.type=="Boolean"&&(e+='<div class="form-group"><label>'+s+"</label>"+'<input class="form-control" type="checkbox" id="property-'+n.name+'"/></div>'),n.type=="Text"&&(e+='<div class="form-group"><label>'+s+"</label>"+'<textarea id="property-'+n.name+'"  class="form-control">'+i+"</textarea></div>")}),$("#properties").html(e),$.each(n,function(e,t){var n="#property-"+t.name,i=r[t.name.toLowerCase()]?r[t.name.toLowerCase()]:"";t.type=="Date"&&(i&&$(n).val(i),$(n).datepicker({dateFormat:"dd.mm.yy"}));if(t.type=="Boolean"){var s=i=="true";$(n).each(function(){this.checked=s})}})}function l(){var e={};if(t.configData!=""){var n=$.xmlDOM(t.configData,function(e){Heiduc.error(messages("plugin.parsing_error")+" "+e)});$(n).find("plugin-config").children().each(function(){e[this.tagName.toLowerCase()]=$(this).text()})}return e}function c(e){$.each(n,function(t,n){var r=e[n.name];if(n.type=="Integer"&&parseInt(r)==NaN)return messages("plugin.integer_expected")+" "+n.name})}function h(){var e={},t="<plugin-config>\n";$.each(n,function(n,r){var i="#property-"+r.name;if(r.type=="String"||r.type=="Integer"||r.type=="Date"||r.type=="Text")e[r.name]=$(i).val(),t+="<"+r.name+">"+Heiduc.escapeHtml(e[r.name])+"</"+r.name+">\n";r.type=="Boolean"&&(e[r.name]=String($(i+":checked").size()>0),t+="<"+r.name+">"+e[r.name]+"</"+r.name+">\n")}),t+="</plugin-config>\n";var r=c(e);r?Heiduc.error(r):Heiduc.jsonrpc.pluginService.savePluginConfig(function(e){Heiduc.showServiceMessages(e)},Number(pluginId),t)}console.log("Loading PluginView.js");var t=null,n=null;return Backbone.View.extend({el:$("#content"),render:function(){this.el.html(_.template(e,{messages:messages})),r()},remove:function(){this.el.html("")},setPluginId:function(e){pluginId=e}})}),define("text!template/plugins/config.html",[],function(){return'\n<div class="row">\n	<div class="col-lg-12">\n		<div class="panel panel-default">\n			<div class="panel-body">\n				<div class="row">\n					<div class="col-md-12">\n						<ul class="nav nav-tabs" id="tabs_a">\n							<li class="active"><a data-toggle="tab" href="#tab-1"><%= messages("plugins") %></a></li>\n						</ul>\n						<div class="tab-content" id="tabs_content_a">\n							<div id="tab-1" class="tab-pane fade in active">\n								<div id="plugins"></div>\n							    <div class="form-sep">\n							        <input class="btn btn-primary" id="installButton" type="button" value="<%= messages("install_update") %>" />\n							    </div>\n								\n							</div>\n						</div>\n					</div>\n				</div>\n			</div>\n		</div>\n	</div>\n</div>\n\n\n<div class="modal fade" id="import-dialog" tabindex="-1" role="dialog" aria-labelledby="" aria-hidden="true">\n  <div class="modal-dialog">\n    <div class="modal-content">\n      <div class="modal-header">\n        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>\n        <h4 class="modal-title"><%= messages("install") %></h4>\n      </div>\n      <div class="modal-body">\n      	<form id="upload" action="/cms/upload" method="post" enctype="multipart/form-data">\n		    <%= messages("file_upload") %>:\n		    <input type="hidden" name="fileType" value="plugin" />\n		    <input type="file" name="uploadFile" />\n		    <div class="modal-footer">\n		        <input type="submit" class="btn btn-default" value="<%= messages("send") %>" />\n		        <input id="importCancelButton" class="btn btn-default" data-dismiss="modal" type="button" value="<%= messages("cancel") %>" />\n		    </div>    \n		</form>\n      </div>	\n    </div>\n  </div>\n</div>\n\n<div class="modal fade" id="afterUpload-dialog" tabindex="-1" role="dialog" aria-labelledby="" aria-hidden="true">\n  <div class="modal-dialog">\n    <div class="modal-content">\n      <div class="modal-header">\n        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>\n        <h4 class="modal-title"><%= messages("status_window") %></h4>\n      </div>\n      <div class="modal-body">\n		    <p class="message"></p>\n		    <div class="modal-footer">\n		        <input class="btn btn-default" id="okButton" type="submit" value="OK" />\n		    </div>\n      </div>	\n    </div>\n  </div>\n</div>\n\n\n\n'}),define("view/plugins/ConfigView",["text!template/plugins/config.html","jquery.form"],function(e){function n(){Heiduc.initJSONRpc(r),$("#upload").ajaxForm(a),$("#installButton").click(o),$("#importCancelButton").click(u),$("#okButton").click(f)}function r(){i()}function i(){Heiduc.jsonrpc.pluginService.select(function(e){t=e.list,s()})}function s(){var e='<table class="table table-striped"><th>'+messages("title")+"</th>	       <th>"+messages("name")+"</th><th>"+messages("version")+"</th><th>"+messages("description")+"</th><th>"+messages("website")+"</th><th>"+messages("state")+"</th><th></th></tr>";$.each(t,function(t,n){var r="#plugin/"+n.id;n.configURL&&(r="#addons/"+n.name);var i=n.disabled?messages("disabled"):messages("enabled"),s=n.disabled?Heiduc.message(n.title):'<a href="'+r+'">'+Heiduc.message(n.title)+"</a>";e+="<tr><td>"+s+"</td>"+"<td>"+n.name+"</td>"+"<td>"+n.version+"</td>"+"<td>"+Heiduc.message(n.description)+"</td>"+"<td>"+n.website+"</td>"+"<td>"+i+"</td>"+'<td><a title="Uninstall" class="removeLink" data-index="'+t+'">'+'<img src="/static/images/02_x.png"/></a></td></tr>'}),$("#plugins").html(e+"</table>"),$("#plugins tr:even").addClass("even"),$("#plugins .removeLink").click(function(){l(Number($(this).attr("data-index")))})}function o(){$("#import-dialog").modal({show:!0})}function u(){$("#import-dialog").modal("hide")}function a(e){var t=e.split("::"),n=t[1],r=t[2];n=="success"?r=messages("plugins.success_install"):r=messages("error")+". "+r,$("#import-dialog").modal("hide"),$("#afterUpload-dialog .message").text(r),$("#afterUpload-dialog").modal("show")}function f(){location.reload()}function l(e){confirm(messages("are_you_sure"))&&Heiduc.jsonrpc.pluginService.remove(function(n){Heiduc.showServiceMessages(n),n.result=="success"&&(t.splice(e,1),s())},t[e].id)}console.log("Loading ConfigView.js");var t="";return Backbone.View.extend({el:$("#content"),render:function(){this.el.html(_.template(e,{messages:messages})),n()},remove:function(){this.el.html("")}})}),define("text!template/plugins/forms.html",[],function(){return'\n<div class="row">\n	<div class="col-lg-12">\n		<div class="panel panel-default">\n			<div class="panel-body">\n				<div class="row">\n					<div class="col-md-12">\n						<ul class="nav nav-tabs" id="tabs_a">\n							<li class="active"><a data-toggle="tab" href="#tab-1"><%= messages("forms") %></a></li>\n							<li><a id="_config" data-toggle="tab" href="#tab-2"><%= messages("config") %></a></li>\n						</ul>\n						<div class="tab-content" id="tabs_content_a">\n							<div id="tab-1" class="tab-pane fade in active">\n								<div id="forms"> </div>\n							    <div class="form-sep">\n							        <input class="btn btn-primary" id="addButton" type="button" value="<%= messages("add") %>" />\n							        <input class="btn btn-default" id="deleteButton" type="button" value="<%= messages("delete") %>" />\n							    </div>\n								\n							</div>\n							<div id="tab-2" class="tab-pane fade">\n								<div class="form-row">\n								    <label><%= messages("forms.form_template") %></label>\n								    <div>\n								        <a id="restoreFormTemplateLink" ><%= messages("restore_default") %></a>\n								    </div>\n								    <div>\n								        <textarea id="formTemplate" rows="20" cols="80"></textarea>\n								    </div>\n								</div>\n								<div class="form-row">\n								    <label><%= messages("forms.letter_template") %></label>\n								    <div>\n								        <a id="restoreFormLetterLink" ><%= messages("restore_default") %></a>\n								    </div>\n								    <div>\n								        <textarea id="letterTemplate" rows="20" cols="80"></textarea>\n								    </div>\n								</div>\n								<div class="buttons">\n								    <input id="saveButton" type="button" value="<%= messages("save") %>" />\n								</div>\n								\n							</div>\n						</div>\n					</div>\n				</div>\n			</div>\n		</div>\n	</div>\n</div>\n\n\n\n\n'}),define("view/plugins/FormsView",["text!template/plugins/forms.html","cm-css","cm-js","cm-xml","cm-html"],function(e){function i(){$('a[data-toggle="tab"]').on("shown.bs.tab",s),Heiduc.initJSONRpc(o),$("#addButton").click(a),$("#deleteButton").click(f),$("#restoreFormTemplateLink").click(h),$("#restoreFormLetterLink").click(p),$("#saveButton").click(c)}function s(e){e.target.id==="_config"&&(n.refresh(),r.refresh())}function o(){u(),l()}function u(){Heiduc.jsonrpc.formService.select(function(e){var t='<table class="table table-striped"><tr><th></th><th>'+messages("title")+"</th><th>"+messages("name")+"</th><th>"+messages("email")+"</th></tr>";$.each(e.list,function(e,n){t+='<tr><td><input type="checkbox" value="'+n.id+'"/></td><td><a href="#plugins/form/'+n.id+'">'+n.title+"</a></td><td>"+n.name+"</td><td>"+n.email+"</td></tr>"}),$("#forms").html(t+"</table>"),$("#forms tr:even").addClass("even")})}function a(){location.href="#plugins/form"}function f(){var e=[];$("#forms input:checked").each(function(){e.push(this.value)});if(e.length==0){Heiduc.info(messages("nothing_selected"));return}confirm(messages("are_you_sure"))&&Heiduc.jsonrpc.formService.deleteForm(function(e){Heiduc.showServiceMessages(e),u()},Heiduc.javaList(e))}function l(){Heiduc.jsonrpc.formService.getFormConfig(function(e){t=e,$("#formTemplate").val(e.formTemplate),$("#letterTemplate").val(e.letterTemplate),n=CodeMirror.fromTextArea(document.getElementById("formTemplate"),{lineNumbers:!0,theme:"eclipse",mode:"htmlmixed"}),$(n.getScrollerElement()).css("border","1px solid silver"),r=CodeMirror.fromTextArea(document.getElementById("letterTemplate"),{lineNumbers:!0,theme:"eclipse",mode:"htmlmixed"}),$(r.getScrollerElement()).css("border","1px solid silver")})}function c(){n.save(),r.save();var e=Heiduc.javaMap({formTemplate:$("#formTemplate").val(),letterTemplate:$("#letterTemplate").val()});Heiduc.jsonrpc.formService.saveFormConfig(function(e){Heiduc.showServiceMessages(e)},e)}function h(){Heiduc.jsonrpc.formService.restoreFormTemplate(function(e){Heiduc.showServiceMessages(e),$(".CodeMirror").remove(),l()})}function p(){Heiduc.jsonrpc.formService.restoreFormLetter(function(e){Heiduc.showServiceMessages(e),$(".CodeMirror").remove(),l()})}console.log("Loading FormsView.js");var t="",n=null,r=null;return Backbone.View.extend({css:["/static/js/codemirror/codemirror.css","/static/js/codemirror/eclipse.css"],el:$("#content"),render:function(){Heiduc.addCSSFiles(this.css),this.el.html(_.template(e,{messages:messages})),i()},remove:function(){this.el.html(""),Heiduc.removeCSSFiles(this.css)}})}),define("text!template/plugins/form.html",[],function(){return'<div class="row">\n	<div class="col-lg-12">\n		<div class="panel panel-default">\n			<div class="panel-body">\n				<div class="row">\n					<div class="col-md-12">\n						<ul class="nav nav-tabs" id="tabs_a">\n							<li class="active"><a data-toggle="tab" href="#tab-1"><%= messages("form") %></a></li>\n							<li><a data-toggle="tab" href="#tab-2"><%= messages("fields") %></a></li>\n							<li><a data-toggle="tab" href="#tab-3"><%= messages("saved_data") %></a></li>\n						</ul>\n						<div class="tab-content" id="tabs_content_a">\n							<div id="tab-1" class="tab-pane fade in active">\n								<form id="form">\n								<div class="form-row">\n								    <label><%= messages("title") %></label>\n								    <input id="title" type="text" />\n								</div>\n								<div class="form-row">\n								    <label><%= messages("form.unique_name") %></label>\n								    <input id="name" type="text" />\n								</div>\n								<div class="form-row">\n								    <label><%= messages("form.email") %></label>\n								    <input id="email" type="text" />\n								</div>\n								<div class="form-row">\n								    <label><%= messages("letter_subject") %></label>\n								    <input id="letterSubject" type="text" />\n								</div>\n								<div class="form-row">\n								    <label><%= messages("form.send_title") %></label>\n								    <input id="sendButtonTitle" type="text"/>\n								</div>\n								<div class="form-row">\n								    <label><%= messages("form.reset_title") %></label>\n								    <input id="resetButtonTitle" type="text"/>\n								</div>\n								<div class="form-row">\n								    <label><%= messages("form.show_reset") %></label>\n								    <input id="showResetButton" type="checkbox"/>\n								</div>\n								<div class="form-row">\n								    <label><%= messages("enable_captcha") %></label>\n								    <input id="enableCaptcha" type="checkbox"/>\n								</div>\n								<div class="form-row">\n								    <label><%= messages("enable_save") %></label>\n								    <input id="enableSave" type="checkbox"/>\n								</div>\n								\n								<div class="buttons">\n								    <input id="saveButton" type="submit" value="<%= messages("save") %>" />\n								    <input id="cancelButton" type="button" value="<%= messages("cancel") %>" />\n								</div>\n								</form>\n								\n							</div>\n							<div id="tab-2" class="tab-pane fade">\n								<div id="fieldsTable"> </div>\n							    <div class="buttons">\n							        <input id="addFieldButton" type="button" value="<%= messages("add_field") %>" />\n							        <input id="deleteFieldButton" type="button" value="<%= messages("delete_fields") %>" />\n							    </div>    \n								\n							</div>\n							<div id="tab-3" class="tab-pane fade">\n								<div id="dataTable"></div>\n							    <div class="buttons">\n							        <input id="deleteDataButton" type="button" value="<%= messages("delete") %>" />\n							    </div> \n								\n							</div>\n						</div>\n					</div>\n				</div>\n			</div>\n		</div>\n	</div>\n</div>\n\n<div id="field-dialog" style="display:none" title="<%= messages("form.field_details") %>">\n<form id="fieldForm">\n    <div id="field-messages" class="messages"> </div>\n    <div class="form-row">\n        <label><%= messages("title") %></label>\n        <input type="text" name="field.title" />\n    </div>\n    <div class="form-row">\n        <label><%= messages("form.unique_name") %></label>\n        <input type="text" name="field.name" />\n    </div>\n    <div class="form-row">\n        <label><%= messages("form.field_type") %></label>\n        <select id="fieldType" name="field.fieldType">\n            <option value="TEXT">Text</option>\n            <option value="CHECKBOX">Checkbox</option>\n            <option value="RADIO">Radiobox</option>\n            <option value="PASSWORD">Password</option>\n            <option value="LISTBOX">Listbox</option>\n            <option value="FILE">File upload</option>\n        </select>\n    </div>\n    <div class="form-row" id="field-width">\n        <label><%= messages("form.width_chars") %></label>\n        <input type="text" name="field.width" />\n    </div>\n    <div class="form-row" id="field-height">\n        <label><%= messages("form.height_chars") %></label>\n        <input type="text" name="field.height" />\n    </div>\n    <div class="form-row">\n        <label><%= messages("mandatory") %></label>\n        <input type="checkbox" name="field.mandatory" />\n    </div>\n    <div class="form-row" id="field-values">\n        <label><%= messages("values") %></label>\n        <textarea name="field.values"></textarea>\n    </div>\n    <div class="form-row" id="field-defaultValue">\n        <label><%= messages("default_value") %></label>\n        <input type="text" name="field.defaultValue"/>\n    </div>\n    <div id="regexDiv">\n    <div class="form-row" id="field-defaultValue">\n        <label><%= messages("form.regex_code") %></label>\n        <input type="text" name="field.regex"/>\n    </div>\n    <div class="form-row" id="field-defaultValue">\n        <label><%= messages("form.regex_message") %></label>\n        <select id="language"></select> \n        <input type="text" name="field.regexMessage"/>\n    </div>\n    </div>\n    <div class="buttons-dlg">\n        <input id="saveAndAddButton" type="submit" value="<%= messages("save_add") %>" />\n        <input id="fieldSaveButton" type="button" value="<%= messages("save") %>" />\n        <input id="fieldCancelButton" type="button" value="<%= messages("cancel") %>" />\n    </div>\n</form>\n</div>\n\n<div id="formData-dialog" style="display:none" title="<%= messages("form.form_data") %>">\n<form id="formDataForm">\n    <div id="formData"></div>\n    <div class="buttons-dlg">\n        <input id="formDataSendButton" type="button" value="<%= messages("send") %>" />\n        <input id="formDataCancelButton" type="button" value="<%= messages("cancel") %>" />\n    </div>\n</form>\n</div>\n'}),define("view/plugins/FormView",["text!template/plugins/form.html"],function(e){function c(){i=t!="",Heiduc.initJSONRpc(h),$("#title").change(B),$("#language").change(z),$('input[name="field.regexMessage"]').change(U),$("#form").submit(function(){return P(),!1}),$("#cancelButton").click(H),$("#addFieldButton").click(g),$("#deleteFieldButton").click(O),$("#fieldType").change(w),$("#fieldForm").submit(function(){return M(),!1}),$("#fieldSaveButton").click(function(){b(!0)}),$("#fieldCancelButton").click(y),$('input[name="field.title"]').change(j),$("#deleteDataButton").click(K),$("#formDataCancelButton").click(function(){$("#formData-dialog").dialog("close")}),$("#formDataSendButton").click(G)}function h(){D(),d(),p()}function p(){Heiduc.jsonrpc.languageService.select(function(e){var t="";$.each(e.list,function(e,n){r[n.code]=n,t+='<option value="'+n.code+'">'+n.title+"</option>"}),$("#language").html(t)})}function d(){if(t=="")return;Heiduc.jsonrpc.fieldService.getByForm(function(e,t){o=e.list,v()},t)}function v(){var e='<table class="table table-striped"><tr><th></th><th>'+messages("title")+"</th><th>"+messages("name")+"</th><th>"+messages("type")+"</th><th></th></tr>";$.each(o,function(t,n){e+='<tr>				<td><input type="checkbox" name="item'+t+'" value="'+n.id+'"/></td>				<td><a class="fieldEdit" data-id="'+n.id+'">'+n.title+"</a></td>				<td>"+n.name+"</td>				<td>"+m(n.fieldType)+'</td>				<td><a class="fieldUp" data-index="'+t+'"><img src="/static/images/02_up.png"/></a>				    <a class="fieldDown" data-index="'+t+'"><img src="/static/images/02_down.png"/></a>				</td>				</tr>'}),$("#fieldsTable").html(e+"</table>"),$("#fieldsTable tr:even").addClass("even"),$("#fieldsTable .fieldEdit").click(function(){A($(this).attr("data-id"))}),$("#fieldsTable .fieldUp").click(function(){F($(this).attr("data-index"))}),$("#fieldsTable .fieldDown").click(function(){I($(this).attr("data-index"))})}function m(e){return e=="TEXT"?"Text":e=="CHECKBOX"?"Checkbox":e=="RADIO"?"Radiobox":e=="PASSWORD"?"Password":e=="LISTBOX"?"Listbox":e=="FILE"?"File upload":"undefined"}function g(){s=null,S(),$("#field-dialog").dialog("open")}function y(){$("#field-dialog").dialog("close")}function b(e){var t=x(),n=T(t);n.length==0?Heiduc.jsonrpc.fieldService.updateField(function(t,n){t.result=="success"?(e&&$("#field-dialog").dialog("close"),d()):C(t.messages.list)},t):C(n)}function w(){E()}function E(){var e=$('select[name="field.fieldType"]').val();e=="TEXT"&&($("#field-values").hide(),$("#field-height").show(),$("#field-width").show(),$("#field-defaultValue").show(),$("#regexDiv").show()),e=="LISTBOX"&&($("#field-values").show(),$("#field-height").hide(),$("#field-width").hide(),$("#field-defaultValue").hide(),$("#regexDiv").hide()),e=="CHECKBOX"&&($("#field-values").show(),$("#field-height").hide(),$("#field-width").hide(),$("#field-defaultValue").hide(),$("#regexDiv").hide()),e=="RADIO"&&($("#field-values").show(),$("#field-height").hide(),$("#field-width").hide(),$("#field-defaultValue").hide(),$("#regexDiv").hide()),e=="PASSWORD"&&($("#field-values").hide(),$("#field-height").hide(),$("#field-width").show(),$("#field-defaultValue").hide(),$("#regexDiv").hide()),e=="FILE"&&($("#field-values").hide(),$("#field-height").hide(),$("#field-width").hide(),$("#field-defaultValue").hide(),$("#regexDiv").hide())}function S(){s==null?(a={},$('input[name="field.name"]').val(""),$('input[name="field.title"]').val(""),$('select[name="field.fieldType"]').val("TEXT"),$('textarea[name="field.values"]').val(""),$('input[name="field.defaultValue"]').val(""),$('input[name="field.height"]').val("1"),$('input[name="field.width"]').val("20"),$('input[name="field.mandatory"]')[0].checked=!1,$('input[name="field.regex"]').val(""),$('input[name="field.regexMessage"]').val("")):($('input[name="field.name"]').val(s.name),$('input[name="field.title"]').val(s.title),$('select[name="field.fieldType"]').val(s.fieldType),$('textarea[name="field.values"]').val(s.values),$('input[name="field.defaultValue"]').val(s.defaultValue),$('input[name="field.height"]').val(s.height),$('input[name="field.width"]').val(s.width),$('input[name="field.mandatory"]')[0].checked=s.optional,$('input[name="field.regex"]').val(s.regex),$('input[name="field.regexMessage"]').val(R())),E(),L()}function x(){var e=s!=null?s.index:o==null?0:o.length;return Heiduc.javaMap({id:s!=null?String(s.id):null,formId:t,name:$('input[name="field.name"]').val(),title:$('input[name="field.title"]').val(),fieldType:$('select[name="field.fieldType"]').val(),values:$('textarea[name="field.values"]').val(),defaultValue:$('input[name="field.defaultValue"]').val(),height:$('input[name="field.height"]').val(),width:$('input[name="field.width"]').val(),index:String(e),regex:$('input[name="field.regex"]').val(),regexMessage:W(),mandatory:String($('input[name="field.mandatory"]:checked').size()>0)})}function T(e){var t=new Array;e.map.name==""&&t.push(messages("name_is_empty")),e.map.title==""&&t.push(messages("title_is_empty"));var n=Number(e.map.height);e.map.fieldType=="TEXT"&&n<=0&&t.push(messages("form.height_zero_error"));var r=Number(e.map.width);return e.map.fieldType=="TEXT"&&r<=0&&t.push(messages("form.width_zero_error")),t}function N(e){Heiduc.infoMessage("#field-messages",e)}function C(e){Heiduc.errorMessages("#field-messages",e)}function k(e){Heiduc.errorMessage("#field-messages",e)}function L(){$("#field-messages").html("")}function A(e){L(),Heiduc.jsonrpc.fieldService.getById(function(e){s=e,X(),S(),$("#field-dialog").dialog("open")},e)}function O(){var e=new Array;$("input:checked").each(function(){e.push(this.value)});if(e.length==0){Heiduc.info(messages("nothing_selected"));return}confirm(messages("are_you_sure"))&&Heiduc.jsonrpc.fieldService.remove(function(t){t.result=="success"?(Heiduc.info(e.length+" "+messages("form.success_field_delete")+"."),d()):Heiduc.showServiceMessages(t)},Heiduc.javaList(e))}function M(){b(!1),g()}function D(){Heiduc.jsonrpc.formService.getForm(function(e){n=e,V(),e!=null?($("#title").val(e.title),$("#name").val(e.name),$("#email").val(e.email),$("#letterSubject").val(e.letterSubject),$("#sendButtonTitle").val(e.sendButtonTitle),$("#resetButtonTitle").val(e.resetButtonTitle),$("#showResetButton").each(function(){this.checked=e.showResetButton}),$("#enableCaptcha").each(function(){this.checked=e.enableCaptcha}),$("#enableSave").each(function(){this.checked=e.enableSave}),$(".fieldsTab").show()):($("#title").val(""),$("#name").val(""),$("#email").val(""),$("#letterSubject").val(""),$("#sendButtonTitle").val(""),$("#resetButtonTitle").val(""),$("#showResetButton").each(function(){this.checked=!1}),$("#enableCaptcha").each(function(){this.checked=!1}),$("#enableSave").each(function(){this.checked=!1}),$(".fieldsTab").hide())},t)}function P(){var e=Heiduc.javaMap({id:t,title:$("#title").val(),name:$("#name").val(),email:$("#email").val(),letterSubject:$("#letterSubject").val(),sendButtonTitle:$("#sendButtonTitle").val(),resetButtonTitle:$("#resetButtonTitle").val(),showResetButton:String($("#showResetButton:checked").size()>0),enableCaptcha:String($("#enableCaptcha:checked").size()>0),enableSave:String($("#enableSave:checked").size()>0)});Heiduc.jsonrpc.formService.saveForm(function(e){e.result=="success"?i?location.href="#plugins/forms":(t=e.message,i=!0,h(),Heiduc.info(messages("form.success_create"))):Heiduc.showServiceMessages(e)},e)}function H(){location.href="#plugins/forms"}function B(){if(i)return;var e=$("#name").val(),t=$("#title").val();e==""&&$("#name").val(Heiduc.urlFromTitle(t))}function j(){if(s!=null)return;var e=$('input[name="field.name"]').val(),t=$('input[name="field.title"]').val();e==""&&$('input[name="field.name"]').val(Heiduc.urlFromTitle(t))}function F(e){e-1>=0&&(Heiduc.jsonrpc.fieldService.moveUp(function(e){},t,o[e].id),o[e].index--,o[e-1].index++,q(e,e-1),v())}function I(e){e+1<o.length&&(Heiduc.jsonrpc.fieldService.moveDown(function(e){},t,o[e].id),o[e+1].index--,o[e].index++,q(e,e+1),v())}function q(e,t){var n=o[t];o[t]=o[e],o[e]=n}function R(){return a[$("#language").val()]?a[$("#language").val()]:""}function U(){a[$("#language").val()]=$('input[name="field.regexMessage"]').val()}function z(){$('input[name="field.regexMessage"]').val(a[$("#language").val()])}function W(){var e="",t=0;return $.each(a,function(n,r){e+=(t++==0?"":"::")+n+r}),e}function X(){s.regexMessage?$.each(s.regexMessage.split("::"),function(e,t){var n=t.substr(0,2),r=t.substr(2);a[n]=r}):a={}}function V(){n==null?(f=[],J()):Heiduc.jsonrpc.formService.getFormData(function(e){f=e.list,J()},n.id)}function J(){var e='<table class="table table-striped"><tr><th></th><th>'+messages("ip_address")+"</th><th>"+messages("date")+"</th></tr>";$.each(f,function(t,n){e+='<tr><td><input type="checkbox" name="item'+t+'" value="'+n.id+'"/></td><td>'+n.ipAddress+"</td>"+'<td><a class="showForm" data-index="'+t+'">'+(new Date(n.modDate.time)).toLocaleString()+"</a></td></tr>"}),$("#dataTable").html(e+"</table>"),$("#dataTable tr:even").addClass("even"),$("#dataTable a.showForm").click(function(){Q($(this).attr("data-index"))})}function K(){var e=new Array;$("#dataTable input:checked").each(function(){e.push(this.value)});if(e.length==0){Heiduc.info(messages("nothing_selected"));return}confirm(messages("are_you_sure"))&&Heiduc.jsonrpc.formService.removeData(function(t){t.result=="success"?(Heiduc.info(e.length+" "+messages("form.success_records_delete")+"."),h()):Heiduc.showServiceMessages(t)},Heiduc.javaList(e))}function Q(e){l=e;var t=f[e],n='<table class="table table-striped"><tr><th>'+messages("name")+"</th><th>"+messages("value")+"</th></tr>";$.each(t.values.map,function(e,t){var r=t;if(r.indexOf("/file/form")==0){var i=r.split("/"),s=i[i.length-1];r='<a href="'+r+'">'+s+"</a>"}n+="<tr><td>"+e+"</td><td>"+r+"</td></tr>"}),$("#formData").html(n+"</table>"),$("#formData tr:even").addClass("even"),$("#formData-dialog").dialog("open")}function G(){confirm(messages("are_you_sure"))&&Heiduc.jsonrpc.formService.sendFormLetter(function(e){Heiduc.showServiceMessages(e)},f[l].id)}console.log("Loading FormView.js");var t="",n=null,r={},i=t!="",s=null,o=null,u=null,a={},f=null,l=0;return Backbone.View.extend({css:"/static/css/form.css",el:$("#content"),tmpl:_.template(e),render:function(){Heiduc.addCSSFile(this.css),this.el.html(this.tmpl({messages:messages})),c()},remove:function(){this.el.html(""),Heiduc.removeCSSFile(this.css)},setId:function(e){t=e}})}),define("text!template/plugins/seo-urls.html",[],function(){return'\n<div class="row">\n	<div class="col-lg-12">\n		<div class="panel panel-default">\n			<div class="panel-body">\n				<div class="row">\n					<div class="col-md-12">\n						<ul class="nav nav-tabs" id="tabs_a">\n							<li class="active"><a data-toggle="tab" href="#tab-1"><%= messages("plugins.seo_urls") %></a></li>\n						</ul>\n						<div class="tab-content" id="tabs_content_a">\n							<div id="tab-1" class="tab-pane fade in active">\n								<div id="urls"><img src="/static/images/ajax-loader.gif" /></div>\n\n								<div class="form-sep">\n								    <input class="btn btn-primary" id="addButton" type="button" value="<%= messages("add") %>" />\n								    <input class="btn btn-default" id="removeButton" type="button" value="<%= messages("remove") %>" />\n								</div>\n								\n							</div>\n						</div>\n					</div>\n				</div>\n			</div>\n		</div>\n	</div>\n</div>\n\n\n<div class="modal fade" id="url-dialog" tabindex="-1" role="dialog" aria-labelledby="" aria-hidden="true">\n  <div class="modal-dialog">\n    <div class="modal-content">\n      <div class="modal-header">\n        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>\n        <h4 class="modal-title"><%= messages("seo_urls.details") %></h4>\n      </div>\n      <div class="modal-body">\n      	\n      	<form id="seoForm">\n		    <div id="url-messages" class="messages"> </div>\n		    <div class="form-row">\n		        <label><%= messages("seo_urls.from_link") %></label>\n		        <input id="fromLink" type="text" />\n		    </div>\n		    <div class="form-row">\n		        <label><%= messages("seo_urls.to_link") %></label>\n		        <input id="toLink" type="text" />\n		    </div>\n		    <div class="modal-footer">\n		        <input id="saveAndAddButton" class="btn btn-default" type="button" value="<%= messages("save_add") %>" />\n		        <input id="saveDlgButton" class="btn btn-default" type="submit" value="<%= messages("save") %>" />\n		        <input id="cancelDlgButton" class="btn btn-default" type="button" value="<%= messages("cancel") %>" />\n		    </div>\n		 </form>\n      </div>	\n    </div>\n  </div>\n</div>\n'}),define("view/plugins/SeoUrlsView",["text!template/plugins/seo-urls.html"],function(e){function n(){Heiduc.initJSONRpc(r),$("#addButton").click(s),$("#removeButton").click(u),$("#saveAndAddButton").click(a),$("#seoForm").submit(function(){return l(!0),!1}),$("#cancelDlgButton").click(c)}function r(){Heiduc.jsonrpc.seoUrlService.select(function(e){var t='<table class="table table-striped"><tr><th></th><th>'+messages("from")+"</th><th>"+messages("to")+"</th></tr>";$.each(e.list,function(e,n){t+='<tr><td><input type="checkbox" value="'+n.id+'"/></td><td><a data-id="'+n.id+'">'+n.fromLink+"</a></td><td>"+n.toLink+"</td></tr>"}),$("#urls").html(t+"</table>"),$("#urls tr:even").addClass("even"),$("#urls a").click(function(){i($(this).attr("data-id"))})})}function i(e){h(),Heiduc.jsonrpc.seoUrlService.getById(function(e){t=e,o(),$("#url-dialog").modal({show:!0})},e)}function s(){t=null,o(),$("#url-dialog").modal({show:!0})}function o(){h(),t==null?($("#fromLink").val(""),$("#toLink").val("")):($("#fromLink").val(t.fromLink),$("#toLink").val(t.toLink))}function u(){var e=new Array;$("#urls input:checked").each(function(){e.push(this.value)});if(e.length==0){Heiduc.info(messages("nothing_selected"));return}confirm(messages("are_you_sure"))&&Heiduc.jsonrpc.seoUrlService.remove(function(e){Heiduc.showServiceMessages(e),r()},Heiduc.javaList(e))}function a(){l(!1,!0)}function f(e){var t=new Array;return e.fromLink==""&&t.push(messages("seo_urls.from_link_empty")),e.toLink==""&&t.push(messages("seo_urls.to_link_empty")),t}function l(e,n){var i={id:t!=null?String(t.id):"",fromLink:$("#fromLink").val(),toLink:$("#toLink").val()},o=f(i);o.length==0?Heiduc.jsonrpc.seoUrlService.save(function(t){t.result=="success"?(e&&$("#url-dialog").modal("hide"),r(),n&&s()):p(t.messages.list)},Heiduc.javaMap(i)):p(o)}function c(){$("#url-dialog").modal("hide")}function h(){$("#url-messages").html("")}function p(e){Heiduc.errorMessages("#url-messages",e)}console.log("Loading SeoUrlsView.js");var t=null;return Backbone.View.extend({css:"/static/css/form.css",el:$("#content"),render:function(){Heiduc.addCSSFile(this.css),this.el.html(_.template(e,{messages:messages})),n()},remove:function(){this.el.html(""),Heiduc.removeCSSFile(this.css)}})}),define("view/plugins/AddonsView",[],function(){function r(){}function i(){Heiduc.jsonrpc.pluginService.getByName(function(e){t=e;var n="/file/plugins/"+t.name+"/"+t.configURL;$("#addons").load(n,function(e,t,n){t=="success"})},e.split("/")[0])}console.log("Loading AddonsView.js");var e=null,t=null,n='<div id="addons" class="row"></div>';return Backbone.View.extend({el:$("#content"),render:function(){this.el.html(_.template(n,{messages:messages})),i()},remove:function(){this.el.html("")},setAddonsId:function(t){e=t}})}),define("text!template/config/config.html",[],function(){return'<div class="row">\n	<div class="col-lg-12">\n		<div class="panel panel-default">\n			<div class="panel-body">\n				<div class="row">\n					<div class="col-md-12">\n						<ul class="nav nav-tabs" id="tabs">\n							<li><a href="#config"><%= messages("config.title") %></a></li>\n						    <li><a href="#config/comments"><%= messages("comments") %></a></li>\n						    <li><a href="#config/languages"><%= messages("languages") %></a></li>\n						    <li><a href="#config/messages"><%= messages("message_bundle") %></a></li>\n						    <li><a href="#config/users"><%= messages("users") %></a>\n						    <li><a href="#config/groups"><%= messages("groups") %></a></li>\n						    <li><a href="#config/tags"><%= messages("tags") %></a></li>\n						    <li><a href="#config/attributes"><%= messages("attributes") %></a></li>\n						</ul>\n						<div class="tab-content" id="tabs_content_a">\n							<div id="tab-1" class="tab-pane fade in active">\n								\n							</div>\n						</div>\n					</div>\n					<div class="col-md-3">\n						\n					</div>\n				</div>\n			</div>\n		</div>\n	</div>\n</div>\n\n\n<div class="modal fade" id="import-dialog" tabindex="-1" role="dialog" aria-labelledby="" aria-hidden="true">\n  <div class="modal-dialog">\n    <div class="modal-content">\n      <div class="modal-header">\n        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>\n        <h4 class="modal-title"><%= messages("config.import_site") %></h4>\n      </div>\n      <div class="modal-body">\n      	<form id="upload" action="/cms/upload" method="post" enctype="multipart/form-data">\n		    <%= messages("file_upload") %>:\n		    <input type="hidden" name="fileType" value="import" />\n		    <input type="file" name="uploadFile" />\n		    <div class="modal-footer">\n		    	<input type="submit" class="btn btn-default" value="<%= messages("send") %>" />\n		        <input id="importCancelButton" data-dismiss="modal" class="btn btn-default" type="button" value="<%= messages("cancel") %>" />\n		    </div>    \n		</form>\n      </div>	\n    </div>\n  </div>\n</div>\n\n<div class="modal fade" id="afterUpload-dialog" tabindex="-1" role="dialog" aria-labelledby="" aria-hidden="true">\n  <div class="modal-dialog">\n    <div class="modal-content">\n      <div class="modal-header">\n        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>\n        <h4 class="modal-title"><%= messages("status_window") %></h4>\n      </div>\n      <div class="modal-body">\n      	<form id="okForm">\n		    <p class="message"></p>\n		    <div class="modal-footer">\n		        <input class="btn btn-default" id="okButton" type="submit" value="OK" />\n		    </div>\n		</form>\n      </div>	\n    </div>\n  </div>\n</div>\n\n<div class="modal fade" id="export-dialog" tabindex="-1" role="dialog" aria-labelledby="" aria-hidden="true">\n  <div class="modal-dialog">\n    <div class="modal-content">\n      <div class="modal-header">\n        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>\n        <h4 class="modal-title"><%= messages("export_window") %></h4>\n      </div>\n      <div class="modal-body">\n      	<form id="exportForm">\n		    <div class="form-row">\n		    <input type="radio" name="exportType" value="full" />\n		        <%= messages("config.full_export") %> <br/>\n		    <input type="radio" name="exportType" value="site" checked="checked"/>\n		        <%= messages("config.export_site") %> <br/>\n		    <input type="radio" name="exportType" value="resources"/>\n		        <%= messages("resources") %> <br/>\n		    </div>\n		    <div id="exportInfo" class="form-row"></div>    \n		    <div id="timer" class="form-row"></div>\n		    <div class="modal-footer">\n		        <input class="btn btn-default" id="exportDialogButton" type="submit" value="<%= messages("export") %>" />\n		        <input class="btn btn-default" data-dismiss="modal" id="exportCancelButton" type="button" value="<%= messages("cancel") %>" />\n		    </div>\n		</form>\n      </div>	\n    </div>\n  </div>\n</div>\n\n<div class="modal fade" id="stat-dialog" tabindex="-1" role="dialog" aria-labelledby="" aria-hidden="true">\n  <div class="modal-dialog">\n    <div class="modal-content">\n      <div class="modal-header">\n        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>\n        <h4 class="modal-title"><%= messages("stat") %></h4>\n      </div>\n      <div class="modal-body">\n      	<div class="form-row">\n	    	<label><%= messages("pages") %>:</label>\n	    	<span id="statPages"></span>\n	    </div>\n	    <div class="form-row">\n	    	<label><%= messages("stat.page_permissions") %>:</label>\n	    	<span id="statPagePermissions"></span>\n	    </div>\n	    <div class="form-row">\n	    	<label><%= messages("structures") %>:</label>\n	    	<span id="statStructures"></span>\n	    </div>\n	    <div class="form-row">\n	    	<label><%= messages("stat.structure_templates") %>:</label>\n	    	<span id="statStructureTemplates"></span>\n	    </div>\n	    <div class="form-row">\n	    	<label><%= messages("templates") %>:</label>\n	    	<span id="statTemplates"></span>\n	    </div>\n	    <div class="form-row">\n	    	<label><%= messages("folders") %>:</label>\n	    	<span id="statFolders"></span>\n	    </div>\n	    <div class="form-row">\n	    	<label><%= messages("stat.folder_permissions") %>:</label>\n	    	<span id="statFolderPermissions"></span>\n	    </div>\n	    <div class="form-row">\n	    	<label><%= messages("files") %>:</label>\n	    	<span id="statFiles"></span>\n	    </div>\n	    <div class="form-row">\n	    	<label><%= messages("languages") %>:</label>\n	    	<span id="statLanguages"></span>\n	    </div>\n	    <div class="form-row">\n	    	<label><%= messages("messages") %>:</label>\n	    	<span id="statMessages"></span>\n	    </div>\n	    <div class="form-row">\n	    	<label><%= messages("users") %>:</label>\n	    	<span id="statUsers"></span>\n	    </div>\n	    <div class="form-row">\n	    	<label><%= messages("groups") %>:</label>\n	    	<span id="statGroups"></span>\n	    </div>\n	    <div class="form-row">\n	    	<label><%= messages("tags") %>:</label>\n	    	<span id="statTags"></span>\n	    </div>\n	    <div class="form-row">\n	    	<label><b><%= messages("stat.total") %>:</b></label>\n	    	<span id="statTotal" style="font-weight:bold;"></span>\n	    </div>\n	    <div class="modal-footer">\n	        <input class="btn btn-default" id="statOKButton" data-dismiss="modal" type="button" value="OK" />\n	    </div>\n      </div>	\n    </div>\n  </div>\n</div>\n\n\n'}),define("text!template/config/index.html",[],function(){return'<form id="configForm">\n	\n	<div class="form-group">\n		<div class="row">\n			<div class="col-lg-12">\n        		<label><%= messages("site_domain") %></label>\n        		<input id="siteDomain" type="text"  class="form-control"/>\n			</div>\n		</div>\n	</div>\n	\n	<div class="form-group">\n		<div class="row">\n			<div class="col-lg-6">\n				<label></label>\n				<label class="checkbox-inline">\n				<input type="checkbox" id="enableCkeditor" value=""> <%= messages("config.enable_ckeditor") %>\n				</label>\n			</div>\n			<div class="col-lg-6">\n				<label></label>\n				<label class="checkbox-inline">\n					<input id="enableRecaptcha" type="checkbox"/> <%= messages("config.enable_recaptcha") %>\n				</label>\n			</div>\n		</div>\n	</div>\n	\n	<div id="recaptcha" class="form-group">\n		<div class="row">\n			<div class="col-lg-6">\n				<label><%= messages("config.recaptcha_public_key") %></label>\n        		<input id="recaptchaPublicKey" type="text" class="form-control" />\n			</div>\n			<div class="col-lg-6">\n        		<label><%= messages("config.recaptcha_private_key") %></label>\n        		<input id="recaptchaPrivateKey" type="text"  class="form-control"/>\n			</div>\n		</div>\n	</div>\n	\n	<div class="form-group">\n		<div class="row">\n			<div class="col-lg-12">\n				<label><%= messages("config.edit_extension") %></label>\n        		<input id="editExt" class="form-control" type="text" />\n			</div>\n		</div>\n	</div>\n	\n	<div class="form-group">\n		<div class="row">\n			<div class="col-lg-6">\n				<label><%= messages("config.login_url") %></label>\n        		<input id="siteUserLoginUrl" class="form-control" type="text" />\n			</div>\n			<div class="col-lg-6">\n        		<label><%= messages("config.404_url") %></label>\n        		<input id="site404Url" class="form-control" type="text" />\n			</div>\n		</div>\n	</div>\n	\n	<div class="form-group">\n		<div class="row">\n			<div class="col-lg-6">\n				<label><%= messages("profile.timezone") %></label>\n        		<select id="timezone" class="form-control"></select>\n			</div>\n			<div class="col-lg-6">\n        		<label><%= messages("page.select_language") %></label>\n        		<select id="language" class="form-control"></select>\n        		\n			</div>\n		</div>\n	</div>\n	\n	<div class="form-group">\n		<div class="row">\n			<div class="col-lg-6">\n				<label></label>\n				<label class="checkbox-inline">\n					<input type="checkbox" id="enablePicasa" value=""> <%= messages("config.enable_picasa") %>\n				</label>\n			</div>\n		</div>\n	</div>\n\n	<div id="picasa" class="form-group">\n		<div class="row">\n			<div class="col-lg-6">\n				<label>Picasa <%= messages("user_email") %></label>\n        		<input id="picasaUser" class="form-control" type="text" />\n			</div>\n			<div class="col-lg-6">\n        		<label>Picasa <%= messages("password") %></label>\n        		<input id="picasaPassword" class="form-control" type="password" />\n			</div>\n		</div>\n	</div>\n	\n	<div class="form-group">\n		<div class="row">\n			<div class="col-lg-6">\n        		<label>Google Analytics ID</label>\n        		<input id="googleAnalyticsId" type="text"  class="form-control"/>\n			</div>\n			<div class="col-lg-6">\n				<label><%= messages("config.db_version") %></label>\n				<span id="version" />\n			</div>\n		</div>\n	</div>\n	\n	<div class="form-group">\n		<div class="row">\n			<div class="col-lg-12">\n				<label><%= messages("config.site_owner_email") %></label>\n        		<input id="siteEmail" type="text"  class="form-control"/>\n			</div>\n		</div>\n	</div>\n	\n	<div class="form-sep">\n		<input id="saveButton" type="submit" class="btn btn-primary" value="<%= messages("save") %>"/>\n		<input id="exportButton" type="button" class="btn" value="<%= messages("export") %>"/>\n		<input id="importButton" type="button" class="btn" value="<%= messages("import") %>"/>\n		<input id="reindexButton" type="button" class="btn" value="<%= messages("config.create_search_index") %>"/>\n		<input id="resetButton" type="button" class="btn" value="<%= messages("reset") %>"/>\n		<input id="loadDefaultSiteButton" type="button" class="btn" value="<%= messages("config.load_default_site") %>"/>\n		<input id="cacheResetButton" type="button" class="btn" value="<%= messages("config.cache_reset") %>"/>\n		<input id="statButton" type="button" class="btn" value="<%= messages("stat") %>"/>\n	</div>\n	\n	\n</form>'}),define("view/config/IndexView",["text!template/config/index.html"],function(e){function f(){$("#upload").ajaxForm(g),Heiduc.initJSONRpc(l),$("#enableRecaptcha").click(v),$("#configForm").submit(function(){return x(),!1}),$("#exportButton").click(T),$("#importButton").click(y),$("#importCancelButton").click(b),$("#resetButton").click(A),$("#cacheResetButton").click(M),$("#reindexButton").click(O),$("#loadDefaultSiteButton").click(D),$("#okForm").submit(function(){return w(),!1}),$("#exportForm").submit(function(){return C(),!1}),$("#exportCancelButton").click(N),$("ul.nav-tabs li:nth-child(1)").addClass("active"),$("#enablePicasa").click(m),$("#statButton").click(P)}function l(){E(),c(),h()}function c(){Heiduc.jsonrpc.userService.getTimezones(function(e){u=e.list,p()})}function h(){Heiduc.jsonrpc.languageService.select(function(e){a=e.list,d()})}function p(){var e="";$.each(u,function(t,n){e+='<option value="'+n+'">'+n+"</option>"}),$("#timezone").html(e),$("#timezone").val(t.defaultTimezone)}function d(){var e="";$.each(a,function(t,n){e+='<option value="'+n.code+'" '+">"+n.title+"</option>"}),$("#language").html(e),$("#language").val(t.defaultLanguage)}function v(){var e=$("#enableRecaptcha:checked").size()>0;e?$("#recaptcha").show():$("#recaptcha").hide()}function m(){var e=$("#enablePicasa:checked").size()>0;e?$("#picasa").show():$("#picasa").hide()}function g(e){var t=e.split("::"),n=t[1],r=t[2];n=="success"?r=messages("config.saved_for_import"):r=messages("error")+". "+r,$("#import-dialog").modal("hide"),$("#afterUpload-dialog .message").text(r),$("#afterUpload-dialog").modal({show:!0})}function y(){$("#import-dialog").modal({show:!0})}function b(){$("#import-dialog").modal("hide")}function w(){$("#afterUpload-dialog").modal("hide"),l()}function E(){Heiduc.jsonrpc.configService.getConfig(function(e){t=e,S()})}function S(){$("#version").html(t.version),$("#googleAnalyticsId").val(t.googleAnalyticsId),$("#siteEmail").val(t.siteEmail),$("#siteDomain").val(t.siteDomain),$("#enableRecaptcha").each(function(){this.checked=t.enableRecaptcha}),$("#recaptchaPublicKey").val(t.recaptchaPublicKey),$("#recaptchaPrivateKey").val(t.recaptchaPrivateKey),v(),$("#editExt").val(t.editExt),$("#siteUserLoginUrl").val(t.siteUserLoginUrl),$("#site404Url").val(t.site404Url),$("#enablePicasa").each(function(){this.checked=t.enablePicasa}),$("#enableCkeditor").each(function(){this.checked=t.enableCkeditor}),$("#picasaUser").val(t.picasaUser),$("#picasaPassword").val(t.picasaPassword),m()}function x(){var e=Heiduc.javaMap({googleAnalyticsId:$("#googleAnalyticsId").val(),siteEmail:$("#siteEmail").val(),siteDomain:$("#siteDomain").val(),enableRecaptcha:String($("#enableRecaptcha:checked").size()>0),recaptchaPublicKey:$("#recaptchaPublicKey").val(),recaptchaPrivateKey:$("#recaptchaPrivateKey").val(),enablePicasa:String($("#enablePicasa:checked").size()>0),enableCkeditor:String($("#enableCkeditor:checked").size()>0),picasaUser:$("#picasaUser").val(),picasaPassword:$("#picasaPassword").val(),editExt:$("#editExt").val(),defaultTimezone:$("#timezone").val(),defaultLanguage:$("#language").val(),siteUserLoginUrl:$("#siteUserLoginUrl").val(),site404Url:$("#site404Url").val()});Heiduc.jsonrpc.configService.saveConfig(function(e){Heiduc.showServiceMessages(e)},e)}function T(){$("#export-dialog").modal({show:!0})}function N(){clearInterval(n),clearInterval(r)}function C(){$("#exportDialogButton").attr("disabled",!0),i=0,L(),o=$("input[name=exportType]:checked").val(),Heiduc.jsonrpc.configService.startExportTask(function(e){e.result=="success"?(s=e.message,Heiduc.info(messages("creating_export_file")),n=setInterval(k,1e4),r=setInterval(L,1e3)):Heiduc.showServiceMessages(e)},o)}function k(){Heiduc.jsonrpc.configService.isExportTaskFinished(function(e){e&&(clearInterval(n),clearInterval(r),$("#export-dialog").modal("hide"),$("#exportDialogButton").attr("disabled",!1),location.href="/file/tmp/"+s)},o)}function L(){$("#timer").html(i++ +" sec.")}function A(){confirm(messages("config.reset_warning1"))&&confirm(messages("config.reset_warning2"))&&Heiduc.jsonrpc.configService.reset(function(e){Heiduc.showServiceMessages(e),e.result=="success"&&(location.href="/")})}function O(){confirm(messages("are_you_sure"))&&Heiduc.jsonrpc.configService.reindex(function(e){Heiduc.showServiceMessages(e)})}function M(){confirm(messages("are_you_sure"))&&Heiduc.jsonrpc.configService.cacheReset(function(e){Heiduc.showServiceMessages(e)})}function D(){confirm(messages("are_you_sure"))&&Heiduc.jsonrpc.configService.loadDefaultSite(function(e){Heiduc.showServiceMessages(e)})}function P(){Heiduc.jsonrpc.configService.getSiteStat(function(e){$("#statPages").text(e.pages),$("#statPagePermissions").text(e.pagePermissions),$("#statStructures").text(e.structures),$("#statStructureTemplates").text(e.structureTemplates),$("#statTemplates").text(e.templates),$("#statFolders").text(e.folders),$("#statFolderPermissions").text(e.folderPermissions),$("#statFiles").text(e.files),$("#statLanguages").text(e.languages),$("#statMessages").text(e.messages),$("#statUsers").text(e.users),$("#statGroups").text(e.groups),$("#statTags").text(e.tags),$("#statTotal").text(e.total),$("#stat-dialog").modal({show:!0})})}function H(){}console.log("Loading IndexView.js");var t="",n=null,r=null,i=0,s=null,o=null,u=null,a=null;return Backbone.View.extend({el:$("#tab-1"),render:function(){this.el=$("#tab-1"),this.el.html(_.template(e,{messages:messages})),f()},remove:function(){this.el.html("")}})}),define("text!template/config/comments.html",[],function(){return'\n<form id="commentsForm">\n	\n	<div class="form-group">\n		<div class="row">\n			<div class="col-lg-12">\n        		<label><%= messages("config.comments_email") %></label>\n        		<input id="commentsEmail" type="text"  class="form-control"/>\n			</div>\n		</div>\n		<div class="row">\n			<div class="col-lg-12">\n        		<label><%= messages("config.comments_template") %></label>\n        		<textarea id="commentsTemplate" class="form-control" cols="80" rows="20"></textarea>\n			</div>\n		</div>\n	</div>\n	\n	<div class="form-sep">\n		<input id="commentsSaveButton" type="submit" class="btn btn-primary" value="<%= messages("save") %>"/>\n		<button id="restoreButton" class="btn"><%= messages("restore_default") %></button>\n		</div>\n	</div>\n\n</form>\n\n\n'}),define("view/config/CommentsView",["text!template/config/comments.html","cm","cm-css","cm-js","cm-xml","cm-html"],function(e){function r(){Heiduc.initJSONRpc(i),$("#commentsForm").submit(function(){return u(),!1}),$("#restoreButton").click(a),$("ul.nav-tabs li:nth-child(2)").addClass("active")}function i(){s()}function s(){Heiduc.jsonrpc.configService.getConfig(function(e){t=e,o()})}function o(){$("#commentsEmail").val(t.commentsEmail),$("#commentsTemplate").val(t.commentsTemplate),n=CodeMirror.fromTextArea(document.getElementById("commentsTemplate"),{lineNumbers:!0,theme:"eclipse",mode:"htmlmixed"}),n.focus(),$(n.getScrollerElement()).css("height",.6*$(window).height()+"px").css("border","1px solid silver"),n.refresh()}function u(){n.save();var e=Heiduc.javaMap({commentsEmail:$("#commentsEmail").val(),commentsTemplate:$("#commentsTemplate").val()});Heiduc.jsonrpc.configService.saveConfig(function(e){Heiduc.showServiceMessages(e)},e)}function a(){Heiduc.jsonrpc.configService.restoreCommentsTemplate(function(e){Heiduc.showServiceMessages(e),s()})}console.log("Loading CommentsView.js");var t="",n=null;return Backbone.View.extend({css:["/static/js/codemirror/codemirror.css","/static/js/codemirror/eclipse.css"],el:$("#tab-1"),render:function(){Heiduc.addCSSFiles(this.css),this.el=$("#tab-1"),this.el.html(_.template(e,{messages:messages})),r()},remove:function(){this.el.html(""),Heiduc.removeCSSFiles(this.css)}})}),define("text!template/config/languages.html",[],function(){return'<div id="languages"> </div>\n<div class="form-sep">\n    <input class="btn btn-primary" id="addLanguageButton" type="button" value="<%= messages("add") %>" />\n    <input class="btn btn-default" id="removeLanguageButton" type="button" value="<%= messages("remove") %>" />\n</div>\n\n<div class="modal fade" id="language-dialog" tabindex="-1" role="dialog" aria-labelledby="" aria-hidden="true">\n  <div class="modal-dialog">\n    <div class="modal-content">\n      <div class="modal-header">\n        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>\n        <h4 class="modal-title"><%= messages("config.site_language") %></h4>\n      </div>\n      <div class="modal-body">\n      	<form id="languageForm">\n		    <div id="pageMessages"></div>\n		    <div id="languageSelection" style="padding-bottom: 10px;">\n        <input id="selectFromListRadio" type="radio" name="select" \n            checked="checked" /> <%= messages("select_from_list") %>\n        <input id="notInListRadio" type="radio" name="select" />\n            <%= messages("config.not_in_list") %> \n    </div>        \n    <div id="listed-language">\n        <select id="selectLanguage"></select>\n    </div>\n    <div id="not-listed-language" style="display:none">\n    <div class="form-row">\n        <label><%= messages("language") %> <a href="http://ftp.ics.uci.edu/pub/ietf/http/related/iso639.txt">iso639</a> 2 letter code</label>\n        <input id="languageCode" type="text"/>\n    </div>\n    <div class="form-row">\n        <label><%= messages("title") %></label>\n        <input id="languageTitle" type="text"/>\n    </div>\n    </div>\n    <div class="modal-footer">\n        <input class="btn btn-primary" id="languageSaveButton" type="submit" value="<%= messages("save") %>" />\n        <input class="btn btn-default" id="languageCancelButton" data-dismiss="modal" type="button" value="<%= messages("cancel") %>" />\n    </div>\n  </form>\n      </div>	\n    </div>\n  </div>\n</div>\n\n'}),define("view/config/LanguagesView",["text!template/config/languages.html"],function(e){function r(){Heiduc.initJSONRpc(i),m(),$("#selectFromListRadio").click(function(){g(!0)}),$("#notInListRadio").click(function(){g(!1)}),$("#languageForm").submit(function(){return c(),!1}),$("#selectLanguage").change(y),$("#languageCancelButton").click(h),$("#addLanguageButton").click(s),$("#removeLanguageButton").click(o),$("ul.nav-tabs li:nth-child(3)").addClass("active")}function i(){p()}function s(){t=null,$("#language-dialog").modal({show:!0}),$("#languageSelection").show(),$("#listed-language").show(),$("#not-listed-language").hide(),$("#language-dialog .messages").html("")}function o(){var e=[];$("#languages input:checked").each(function(){e.push(this.value)});if(e.length==0){Heiduc.info(messages("nothing_selected"));return}confirm(messages("are_you_sure"))&&Heiduc.jsonrpc.languageService.remove(function(e){Heiduc.info(e.message),p()},Heiduc.javaList(e))}function u(e){Heiduc.infoMessage("#language-dialog .messages",e)}function a(e){Heiduc.errorMessage("#language-dialog .messages",e)}function f(e){Heiduc.errorMessages("#language-dialog .messages",e)}function l(e){var t=[];return e.code==""&&t.push(messages("config.code_is_empty")),e.title==""&&t.push(messages("title_is_empty")),t}function c(){var e={id:t!=null?String(t.id):"",code:$("#languageCode").val(),title:$("#languageTitle").val()},n=l(e);n.length==0?Heiduc.jsonrpc.languageService.save(function(e){e.result=="success"?($("#language-dialog").dialog("close"),p()):f(e.messages.list)},Heiduc.javaMap(e)):f(n)}function h(){}function p(){Heiduc.jsonrpc.languageService.select(function(e){n=e.list;var t='<table class="table table-striped"><tr><th></th><th>'+messages("code")+"</th><th>"+messages("title")+"</th></tr>";$.each(e.list,function(e,n){t+='<tr><td><input type="checkbox" value="'+n.id+'"/></td><td>'+n.code+'</td><td>	                <a data-id="'+n.id+'">'+n.title+"</a></td></tr>"}),$("#languages").html(t+"</table>"),$("#languages tr:even").addClass("even"),$("#languages a").click(function(){var e=$(this).attr("data-id");e&&d(e)})})}function d(e){Heiduc.jsonrpc.languageService.getById(function(e){t=e,$("#languageCode").val(e.code),$("#languageTitle").val(e.title),$("#language-dialog").dialog("open"),$("#languageSelection").hide(),$("#listed-language").hide(),$("#not-listed-language").show(),$("#language-dialog .messages").html("")},e)}function m(){var e="";for(var t in v)e+='<option value="'+t+'">'+v[t]+"</option>\n";$("#selectLanguage").html(e),$("#selectLanguage").val("ru"),y()}function g(e){e?($("#listed-language").show(),$("#not-listed-language").hide()):($("#listed-language").hide(),$("#not-listed-language").show())}function y(){var e=$("#selectLanguage").val();$("#languageCode").val(e),$("#languageTitle").val(v[e])}console.log("Loading LanguagesView.js");var t=null,n=null,v={aa:"Afar",ab:"Abkhazian",af:"Afrikaans",am:"Amharic",ar:"Arabic",as:"Assamese",ay:"Aymara",az:"Azerbaijani",ba:"Bashkir",be:"Byelorussian",bg:"Bulgarian",bh:"Bihari",bi:"Bislama",bn:"Bengali; Bangla",bo:"Tibetan",br:"Breton",bs:"Bosnian",ca:"Catalan",co:"Corsican",cs:"Czech",cy:"Welsh",da:"Danish",de:"German",dz:"Bhutani",el:"Greek",en:"English",eo:"Esperanto",es:"Spanish",et:"Estonian",eu:"Basque",fa:"Persian",fi:"Finnish",fj:"Fiji",fo:"Faroese",fr:"French",fy:"Frisian",ga:"Irish",gd:"Scots Gaelic",gl:"Galician",gn:"Guarani",gu:"Gujarati",ha:"Hausa",he:"Hebrew (formerly iw)",hi:"Hindi",hr:"Croatian",hu:"Hungarian",hy:"Armenian",ia:"Interlingua",id:"Indonesian (formerly in)",ie:"Interlingue",ik:"Inupiak",is:"Icelandic",it:"Italian",iu:"Inuktitut",ja:"Japanese",jw:"Javanese",ka:"Georgian",kk:"Kazakh",kl:"Greenlandic",km:"Cambodian",kn:"Kannada",ko:"Korean",ks:"Kashmiri",ku:"Kurdish",ky:"Kirghiz",la:"Latin",ln:"Lingala",lo:"Laothian",lt:"Lithuanian",lv:"Latvian, Lettish",mg:"Malagasy",mi:"Maori",mk:"Macedonian",ml:"Malayalam",mn:"Mongolian",mo:"Moldavian",mr:"Marathi",ms:"Malay",mt:"Maltese",my:"Burmese",na:"Nauru",ne:"Nepali",nl:"Dutch",no:"Norwegian",oc:"Occitan",om:"(Afan) Oromo",or:"Oriya",pa:"Punjabi",pl:"Polish",ps:"Pashto, Pushto",pt:"Portuguese",qu:"Quechua",rm:"Rhaeto-Romance",rn:"Kirundi",ro:"Romanian",ru:"Russian",rw:"Kinyarwanda",sa:"Sanskrit",sd:"Sindhi",sg:"Sangho",sh:"Serbo-Croatian",si:"Sinhalese",sk:"Slovak",sl:"Slovenian",sm:"Samoan",sn:"Shona",so:"Somali",sq:"Albanian",sr:"Serbian",ss:"Siswati",st:"Sesotho",su:"Sundanese",sv:"Swedish",sw:"Swahili",ta:"Tamil",te:"Telugu",tg:"Tajik",th:"Thai",ti:"Tigrinya",tk:"Turkmen",tl:"Tagalog",tn:"Setswana",to:"Tonga",tr:"Turkish",ts:"Tsonga",tt:"Tatar",tw:"Twi",ug:"Uighur",uk:"Ukrainian",ur:"Urdu",uz:"Uzbek",vi:"Vietnamese",vo:"Volapuk",wo:"Wolof",xh:"Xhosa",yi:"Yiddish (formerly ji)",yo:"Yoruba",za:"Zhuang","zh-CN":"Simplified Chinese","zh-TW":"Traditional Chinese",zu:"Zulu"};return Backbone.View.extend({el:$("#tab-1"),render:function(){this.el=$("#tab-1"),this.el.html(_.template(e,{messages:messages})),r()},remove:function(){this.el.html("")}})}),define("text!template/config/messages.html",[],function(){return'\n<div id="messageBundle"> </div>\n<div class="form-sep">\n    <input class="btn btn-primary" id="addMessageButton" type="button" value="<%= messages("add") %>" />\n    <input class="btn btn-default" id="removeMessageButton" type="button" value="<%= messages("remove") %>" />\n</div>\n\n<div class="modal fade" id="message-dialog" tabindex="-1" role="dialog" aria-labelledby="" aria-hidden="true">\n  <div class="modal-dialog">\n    <div class="modal-content">\n      <div class="modal-header">\n        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>\n        <h4 class="modal-title"><%= messages("config.localized_message") %></h4>\n      </div>\n      <div class="modal-body">\n      	<form id="messageForm">\n		    <div class="messages"> </div>\n		    <div class="form-row">\n		        <label><%= messages("config.message_code") %></label>\n		        <input id="messageCode" type="text"/>\n		    </div>\n		    <div id="messagesInput"> </div>\n		    <div class="modal-footer">\n		        <input class="btn btn-primary" id="saveMessageDlgButton" type="submit" value="<%= messages("save") %>" />\n		        <input class="btn btn-default" data-dismiss="modal" id="cancelMessageDlgButton" type="button" value="<%= messages("cancel") %>" />\n		    </div>\n		  </form>\n      </div>	\n    </div>\n  </div>\n</div>'}),define("view/config/MessagesView",["text!template/config/messages.html"],function(e){function n(){Heiduc.initJSONRpc(r),$("#addMessageButton").click(s),$("#removeMessageButton").click(o),$("#messageForm").submit(function(){return f(),!1}),$("#cancelMessageDlgButton").click(l),$("ul.nav-tabs li:nth-child(4)").addClass("active")}function r(){i()}function i(){Heiduc.jsonrpc.languageService.select(function(e){t=e.list,u()})}function s(){p();var e="";$.each(t,function(t,n){e+='<div class="form-row"><label>'+n.title+'</label><input type="text" id="message_'+n.code+'" /></div>'}),$("#messageCode").val(""),$("#messagesInput").html(e),$("#message-dialog").modal({show:!0})}function o(){var e=[];$("#messageBundle input:checked").each(function(){e.push(this.value)});if(e.length==0){Heiduc.info(messages("nothing_selected"));return}confirm(messages("are_you_sure"))&&Heiduc.jsonrpc.messageService.remove(function(e){Heiduc.info(e.message),u()},Heiduc.javaList(e))}function u(){Heiduc.jsonrpc.messageService.select(function(e){var n='<table class="table table-striped"><tr><th></th><th>'+messages("code")+"</th>";$.each(t,function(e,t){n+="<th>"+t.title+"</th>"}),n+="</tr>",$.each(e.list,function(e,r){n+='<tr><td><input type="checkbox" value="'+r.code+'"/></td>	                <td><a data-code="'+r.code+'">'+r.code+"</a></td>",$.each(t,function(e,t){n+="<td>"+r.values.map[t.code]+"</td>"}),n+="</tr>"}),$("#messageBundle").html(n+"</table>"),$("#messageBundle tr:even").addClass("even"),$("#messageBundle td a").click(function(){var e=$(this).attr("data-code");e&&a(e)})})}function a(e){Heiduc.jsonrpc.messageService.selectByCode(function(t){s(),$("#messageCode").val(e),$.each(t.list,function(e,t){$("#message_"+t.languageCode).val(t.value)})},e)}function f(){var e={code:$("#messageCode").val()};$.each(t,function(t,n){e[n.code]=$("#message_"+n.code).val()}),Heiduc.jsonrpc.messageService.save(function(e){e.result=="success"?u():h(e.messages.list)},Heiduc.javaMap(e))}function l(){}function c(e){Heiduc.errorMessage("#message-dialog .messages",e)}function h(e){Heiduc.errorMessages("#message-dialog .messages",e)}function p(){$("#message-dialog .messages").html()}console.log("Loading MessagesView.js");var t=null;return Backbone.View.extend({el:$("#tab-1"),render:function(){this.el=$("#tab-1"),this.el.html(_.template(e,{messages:messages})),n()},remove:function(){this.el.html("")}})}),define("text!template/config/users.html",[],function(){return'<div id="users"> </div>\n<div class="form-sep">\n    <input class="btn btn-primary" id="addUserButton" type="button" value="<%= messages("add") %>" />\n    <input class="btn btn-default" id="removeUserButton" type="button" value="<%= messages("remove") %>" />\n</div>\n\n<div class="modal fade" id="user-dialog" tabindex="-1" role="dialog" aria-labelledby="" aria-hidden="true">\n  <div class="modal-dialog">\n    <div class="modal-content">\n      <div class="modal-header">\n        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>\n        <h4 class="modal-title"><%= messages("config.user_details") %></h4>\n      </div>\n      <div class="modal-body">\n      	<form id="userForm">\n    <div class="messages"> </div>\n    <div class="form-row">\n        <label><%= messages("user_name") %></label>\n        <input id="userName" type="text"/>\n    </div>\n    <div class="form-row">\n        <label><%= messages("user_email") %></label>\n        <input id="userEmail" type="text"/>\n    </div>\n    <div class="form-row">\n        <label><%= messages("user_role") %></label>\n        <select id="userRole">\n            <option value="SITE_USER" selected="selected"><%= messages("site_user") %></option>\n            <option value="USER"><%= messages("user") %></option>\n            <option value="ADMIN"><%= messages("administrator") %></option>\n        </select>\n    </div>\n    <div class="form-row">\n        <label><%= messages("password") %></label>\n        <input id="userPassword1" type="password"/>\n    </div>\n    <div class="form-row">\n        <label><%= messages("retype_password") %></label>\n        <input id="userPassword2" type="password"/>\n    </div>\n    <div class="form-row">\n         <label><%= messages("profile.timezone") %></label>\n         <select id="timezone"></select>\n    </div>    \n    <div class="modal-footer">\n        <input class="btn btn-primary" id="userSaveDlgButton" type="submit" value="<%= messages("save") %>" />\n        <input class="btn btn-default" id="userDisableDlgButton" type="button" value="<%= messages("disable") %>" />\n        <input class="btn btn-default" data-dismiss="modal" id="userCancelDlgButton" type="button" value="<%= messages("cancel") %>" />\n    </div>\n  </form>\n      </div>	\n    </div>\n  </div>\n</div>\n\n'}),define("view/config/UsersView",["text!template/config/users.html"],function(e){function r(){Heiduc.initJSONRpc(i),$("#addUserButton").click(s),$("#removeUserButton").click(o),$("#userForm").submit(function(){return h(),!1}),$("#userCancelDlgButton").click(p),$("#userDisableDlgButton").click(m),$("ul.nav-tabs li:nth-child(5)").addClass("active")}function i(){Heiduc.jsonrpc.userService.getTimezones(function(e){timezones=e.list,g(),u()})}function s(){t=null,l(),$("#user-dialog").modal({show:!0})}function o(){var e=[];$("#users input:checked").each(function(){e.push(String(this.value))});if(e.length==0){Heiduc.info(messages("nothing_selected"));return}confirm(messages("are_you_sure"))&&Heiduc.jsonrpc.userService.remove(function(e){Heiduc.info(e.message),u()},Heiduc.javaList(e))}function u(){Heiduc.jsonrpc.userService.select(function(e){var t='<table class="table table-striped"><tr><th></th><th>'+messages("name")+"</th><th>"+messages("email")+"</th><th>"+messages("role")+"</th><th>"+messages("access")+"</th></tr>";$.each(e.list,function(e,n){var r=n.disabled?messages("disabled"):messages("enabled");t+='<tr><td><input type="checkbox" value="'+n.id+'"/></td><td>'+n.name+'</td><td>	                <a data-id="'+n.id+'">'+n.email+"</a></td><td>"+a(n.role)+"</td>"+"<td>"+r+"</td></tr>"}),$("#users").html(t+"</table>"),$("#users tr:even").addClass("even"),$("#users a").click(function(){var e=$(this).attr("data-id");e&&f(e)})})}function a(e){if(e=="ADMIN")return messages("administrator");if(e=="USER")return messages("user");if(e=="SITE_USER")return messages("site_user")}function f(e){Heiduc.jsonrpc.userService.getById(function(e){t=e,l(),$("#user-dialog").modal({show:!0})},e)}function l(){t==null?($("#userName").val(""),$("#userEmail").val(""),$("#userEmail").removeAttr("disabled"),$("#userRole").val(""),$("#userDisableDlgButton").hide()):($("#userName").val(t.name),$("#userEmail").val(t.email),$("#userEmail").attr("disabled",!0),$("#userRole").val(t.roleString),$("#timezone").val(t.timezone),$("#userDisableDlgButton").val(t.disabled?messages("enable"):messages("disable")).show()),$("#userPassword1").val(""),$("#userPassword2").val(""),$("#user-dialog .messages").html("")}function c(e){var t=[];return e.email==""&&t.push(messages("email_is_empty")),e.password1!=e.password2&&t.push(messages("config.passwords_dont_match")),t}function h(){var e={id:t!=null?String(t.id):"",name:$("#userName").val(),email:$("#userEmail").val(),role:$("#userRole").val(),timezone:$("#timezone").val(),password:$("#userPassword1").val(),password1:$("#userPassword1").val(),password2:$("#userPassword2").val()},n=c(e);n.length==0?Heiduc.jsonrpc.userService.save(function(e){e.result=="success"?(Heiduc.info(e.message),u()):v(e.messages.list)},Heiduc.javaMap(e)):v(n)}function p(){}function d(e){Heiduc.errorMessage("#user-dialog .messages",e)}function v(e){Heiduc.errorMessages("#user-dialog .messages",e)}function m(){Heiduc.jsonrpc.userService.disable(function(e){Heiduc.showServiceMessages(e),u()},t.id,!t.disabled)}function g(){var e="";$.each(timezones,function(t,n){e+='<option value="'+n+'">'+n+"</option>"}),$("#timezone").html(e)}console.log("Loading UsersView.js");var t=null,n=null;return Backbone.View.extend({el:$("#tab-1"),render:function(){this.el=$("#tab-1"),this.el.html(_.template(e,{messages:messages})),r()},remove:function(){this.el.html("")}})}),define("text!template/config/groups.html",[],function(){return'\n<div id="groups"> </div>\n<div class="form-sep">\n    <input class="btn btn-primary" id="addGroupButton" type="button" value="<%= messages("add") %>" />\n    <input class="btn btn-default" id="removeGroupButton" type="button" value="<%= messages("remove") %>" />\n</div>\n\n<div class="modal fade" id="group-dialog" tabindex="-1" role="dialog" aria-labelledby="" aria-hidden="true">\n  <div class="modal-dialog">\n    <div class="modal-content">\n      <div class="modal-header">\n        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>\n        <h4 class="modal-title"><%= messages("config.group_details") %></h4>\n      </div>\n      <div class="modal-body">\n      	<form id="groupForm">\n		    <div class="messages"> </div>\n		    <div class="form-row">\n		        <label><%= messages("config.group_name") %></label>\n		        <input id="groupName" type="text"/>\n		    </div>\n		    <div class="modal-footer">\n		        <input class="btn btn-primary" id="groupSaveDlgButton" type="submit" value="<%= messages("save") %>" />\n		        <input class="btn btn-default" data-dismiss="modal" id="groupCancelDlgButton" type="button" value="<%= messages("cancel") %>" />\n		    </div>\n		  </form>\n      </div>	\n    </div>\n  </div>\n</div>\n\n\n<div class="modal fade" id="user-group-dialog" tabindex="-1" role="dialog" aria-labelledby="" aria-hidden="true">\n  <div class="modal-dialog">\n    <div class="modal-content">\n      <div class="modal-header">\n        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>\n        <h4 class="modal-title"><%= messages("config.group_users") %></h4>\n      </div>\n      <div class="modal-body">\n      	<form id="userGroupForm">\n		    <div id="groupUsers"> </div>\n		    <div class="modal-footer">\n		        <input class="btn btn-primary" id="userGroupSaveDlgButton" type="submit" value="<%= messages("save") %>" />\n		        <input class="btn btn-default" data-dismiss="modal" id="userGroupCancelDlgButton" type="button" value="<%= messages("cancel") %>" />\n		    </div>\n		  </form>\n      </div>	\n    </div>\n  </div>\n</div>\n\n'}),define("view/config/GroupsView",["text!template/config/groups.html"],function(e){function i(){Heiduc.initJSONRpc(s),$("#addGroupButton").click(u),$("#removeGroupButton").click(a),$("#groupForm").submit(function(){return h(),!1}),$("#groupCancelDlgButton").click(p),$("#userGroupForm").submit(function(){return y(),!1}),$("#userGroupCancelDlgButton").click(g),$("ul.nav-tabs li:nth-child(6)").addClass("active")}function s(){o()}function o(){Heiduc.jsonrpc.groupService.select(function(e){n=Heiduc.idMap(e.list);var t='<table class="table table-striped"><tr><th></th><th>'+messages("name")+"</th><th>"+messages("users")+"</th></tr>";$.each(e.list,function(e,n){if(n.name=="guests")return;var r=messages("add_users");n.users.list.length>0&&(r="",$.each(n.users.list,function(e,t){r+=(e==0?"":", ")+t.name}));var i='<a class="groupEdit" data-id="'+n.id+'">'+n.name+"</a>",s='<a class="userGroupEdit" data-id="'+n.id+'">'+r+"</a>";t+='<tr><td><input type="checkbox" value="'+n.id+'"/></td><td>'+i+"</td><td>"+s+"</td></tr>"}),$("#groups").html(t+"</table>"),$("#groups tr:even").addClass("even"),$("#groups .groupEdit").click(function(){f($(this).attr("data-id"))}),$("#groups .userGroupEdit").click(function(){m($(this).attr("data-id"))})})}function u(){t=null,l(),$("#group-dialog").modal({show:!0})}function a(){var e=[];$("#groups input:checked").each(function(){e.push(String(this.value))});if(e.length==0){Heiduc.info(messages("nothing_selected"));return}confirm(messages("are_you_sure"))&&Heiduc.jsonrpc.groupService.remove(function(e){Heiduc.info(e.message),o()},Heiduc.javaList(e))}function f(e){Heiduc.jsonrpc.groupService.getById(function(e){t=e,l(),$("#group-dialog").modal({show:!0})},e)}function l(){t==null?$("#groupName").val(""):$("#groupName").val(t.name),$("#group-dialog .messages").html("")}function c(e){var t=[];return e.name==""&&t.push(messages("name_is_empty")),t}function h(){var e={id:t!=null?String(t.id):"",name:$("#groupName").val()},n=c(e);n.length==0?Heiduc.jsonrpc.groupService.save(function(e){e.result=="success"?(Heiduc.info(e.message),o()):v(e.messages.list)},Heiduc.javaMap(e)):v(n)}function p(){}function d(e){Heiduc.errorMessage("#group-dialog .messages",e)}function v(e){Heiduc.errorMessages("#group-dialog .messages",e)}function m(e){t=n[e],Heiduc.jsonrpc.userService.select(function(e){r=Heiduc.idMap(e.list);var n=Heiduc.idMap(t.users.list),i="";$.each(r,function(e,t){var r="";n[t.id]!=undefined&&(r='checked = "checked"'),i+='<div class="form-row"><input type="checkbox" '+r+' value="'+t.id+'"> '+t.name+"</div>"}),$("#groupUsers").html(i),$("#user-group-dialog").modal({show:!0})})}function g(){}function y(){var e=[];$("#user-group-dialog input:checked").each(function(){e.push(this.value)}),Heiduc.jsonrpc.groupService.setGroupUsers(function(e){Heiduc.showServiceMessages(e),o()},t.id,Heiduc.javaList(e))}console.log("Loading GroupsView.js");var t=null,n=null,r=null;return Backbone.View.extend({el:$("#tab-1"),render:function(){this.el=$("#tab-1"),this.el.html(_.template(e,{messages:messages})),i()},remove:function(){this.el.html("")}})}),define("text!template/config/tags.html",[],function(){return'\n<ul id="tags"></ul>\n<div class="form-sep">\n    <input class="btn btn-primary" id="addButton" type="button" value="<%= messages("add") %>" />\n</div>\n\n<div class="modal fade" id="tag-dialog" tabindex="-1" role="dialog" aria-labelledby="" aria-hidden="true">\n  <div class="modal-dialog">\n    <div class="modal-content">\n      <div class="modal-header">\n        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>\n        <h4 class="modal-title"><%= messages("config.tag_details") %></h4>\n      </div>\n      <div class="modal-body">\n      	<form id="tagForm">\n		    <div class="messages"> </div>\n		    <div class="form-row">\n		        <label><%= messages("title") %></label>\n		        <input id="title" type="text"/>\n		    </div>\n		    <div class="form-row">\n		        <label><%= messages("config.tag_name") %></label>\n		        <input id="tagName" type="text"/>\n		    </div>\n		    <div id="pages"></div>\n		    <div class="modal-footer">\n		        <input class="btn btn-primary" id="tagSaveDlgButton" type="submit" value="<%= messages("save") %>" />\n		        <input class="btn btn-default"  id="tagDeleteDlgButton" type="button" value="<%= messages("delete") %>" />\n		        <input class="btn btn-default" data-dismiss="modal" id="tagCancelDlgButton" type="button" value="<%= messages("cancel") %>" />\n		    </div>\n		  </form>\n      </div>	\n    </div>\n  </div>\n</div>'}),define("view/config/TagsView",["text!template/config/tags.html","jquery.treeview"],function(e){function s(){Heiduc.initJSONRpc(o),$("#addButton").click(function(){u("")}),$("#tagForm").submit(function(){return m(),!1}),$("#tagCancelDlgButton").click(g),$("#tagDeleteDlgButton").click(w),$("ul.nav-tabs li:nth-child(7)").addClass("active"),$("#title").change(S)}function o(){a()}function u(e){n=e,t=null,h(),$("#tag-dialog").modal({show:!0})}function a(){Heiduc.jsonrpc.tagService.getTree(function(e){$("#tags").html(f(e.list)),$("#tags .tagEdit").click(function(){c($(this).attr("data-id"))}),$("#tags .addTag").click(function(){u($(this).attr("data-id"))}),$("#tags").treeview({animated:"fast",collapsed:!0,unique:!0,persist:"cookie",cookieId:"tagTree"})})}function f(e){var t="";return $.each(e,function(e,n){t+=l(n)}),t}function l(e){var t='<li><a class="tagEdit" data-id="'+e.entity.id+'">'+e.entity.name+'</a> <a class="addTag" title="'+messages("add_child")+'" data-id="'+e.entity.id+'">+</a>';return e.children.list.length>0&&(t+="<ul>",$.each(e.children.list,function(e,n){t+=l(n)}),t+="</ul>"),t+"</li>"}function c(e){Heiduc.jsonrpc.tagService.getById(function(e){t=e,n=t.parent,h(),$("#tag-dialog").modal({show:!0})},e)}function h(){t==null?($("#tagName").val(""),$("#title").val(""),$("#pages").html("")):($("#tagName").val(t.name),$("#title").val(t.title),p()),$("#tag-dialog .messages").html("")}function p(){Heiduc.jsonrpc.tagService.getPages(function(e){i=e.list,d()},t.id)}function d(){$("#pages").html("");if(i.length>0){var e="";$.each(i,function(t,n){e+='<span class="tag">'+n.title+' <a data-id="'+t+'"><img src="/static/images/02_x.png" /></a></span>'}),$("#pages").html(e),$("#pages a").click(function(){E($(this).attr("data-id"))})}}function v(e){var t=[];return e.name==""&&t.push(messages("config.tag_is_empty")),t}function m(){var e={id:t!=null?String(t.id):"",parent:n==null?"":String(n),name:$("#tagName").val(),title:$("#title").val()},r=v(e);r.length==0?Heiduc.jsonrpc.tagService.save(function(e){e.result=="success"?(Heiduc.info(e.message),a()):y(e.message)},Heiduc.javaMap(e)):b(r)}function g(){}function y(e){Heiduc.errorMessage("#tag-dialog .messages",e)}function b(e){Heiduc.errorMessages("#tag-dialog .messages",e)}function w(){confirm(messages("are_you_sure"))&&Heiduc.jsonrpc.tagService.remove(function(e){Heiduc.showServiceMessages(e),a()},t.id)}function E(e){confirm(messages("are_you_sure"))&&Heiduc.jsonrpc.tagService.removeTag(function(t){Heiduc.showServiceMessages(t),i.splice(e,1),d()},i[e].friendlyURL,t.id)}function S(){if(t!=null)return;var e=$("#tagName").val(),n=$("#title").val();e==""&&$("#tagName").val(Heiduc.urlFromTitle(n))}console.log("Loading TagsView.js");var t=null,n=null,r=null,i=null;return Backbone.View.extend({css:"/static/css/jquery.treeview.css",el:$("#tab-1"),render:function(){Heiduc.addCSSFile(this.css),this.el=$("#tab-1"),this.el.html(_.template(e,{messages:messages})),s()},remove:function(){this.el.html(""),Heiduc.removeCSSFile(this.css)}})}),define("text!template/config/attributes.html",[],function(){return'\n<div id="attributes"></div>\n  \n<div class="form-sep">\n    <input class="btn btn-primary" id="addButton" type="button" value="<%= messages("add") %>" />\n    <input class="btn btn-default" id="removeButton" type="button" value="<%= messages("remove") %>" />\n</div>\n\n<div class="modal fade" id="attribute-dialog" tabindex="-1" role="dialog" aria-labelledby="" aria-hidden="true">\n  <div class="modal-dialog">\n    <div class="modal-content">\n      <div class="modal-header">\n        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>\n        <h4 class="modal-title"><%= messages("attribute") %></h4>\n      </div>\n      <div class="modal-body">\n      	<form id="attributeForm">\n	    <div class="form-row">\n	        <label><%= messages("name") %></label>\n	        <input id="name" type="text"/>\n	    </div>\n	    <div class="form-row">\n	        <label><%= messages("value") %></label>\n	        <input id="value" type="text" size="40"/>\n	    </div>\n	    <div class="modal-footer">\n	        <input class="btn btn-primary" id="saveButton" type="submit" value="<%= messages("save") %>" />\n	        <input class="btn btn-default" data-dismiss="modal" id="cancelButton" type="button" value="<%= messages("cancel") %>" />\n	    </div>\n	  </form>\n      </div>	\n    </div>\n  </div>\n</div>'}),define("view/config/AttributesView",["text!template/config/attributes.html"],function(e){function n(){$("ul.nav-tabs li:nth-child(8)").addClass("active"),Heiduc.initJSONRpc(r),$("#addButton").click(o),$("#cancelButton").click(function(){}),$("#attributeForm").submit(function(){return a(),!1}),$("#removeButton").click(f)}function r(){i()}function i(){Heiduc.jsonrpc.configService.getConfig(function(e){t=e,s()})}function s(){var e='<table class="table table-striped"><tr><th></th><th>'+messages("name")+"</th><th>"+messages("value")+"</th></tr>";$.each(t.attributes.map,function(t,n){e+='<tr><td><input type="checkbox" value="'+t+'"/></td>'+'<td><a data-name="'+t+'">'+t+"</a></td>"+"<td>"+n+"</td></tr>"}),$("#attributes").html(e+"</table>"),$("#attributes tr:even").addClass("even"),$("#attributes a").click(function(){u($(this).attr("data-name"))})}function o(){$("#attribute-dialog").modal({show:!0}),$("#name").val(""),$("#value").val("")}function u(e){$("#attribute-dialog").modal({show:!0}),$("#name").val(e),$("#value").val(t.attributes.map[e])}function a(){var e=$("#name").val(),t=$("#value").val();Heiduc.jsonrpc.configService.saveAttribute(function(e){Heiduc.showServiceMessages(e),r()},e,t)}function f(){var e=[];$("#attributes input:checked").each(function(){e.push(this.value)});if(e.length==0){Heiduc.info(messages("nothing_selected"));return}confirm(messages("are_you_sure"))&&Heiduc.jsonrpc.configService.removeAttributes(function(e){Heiduc.info(e.message),r()},Heiduc.javaList(e))}console.log("Loading AttributesView.js");var t="";return Backbone.View.extend({el:$("#tab-1"),render:function(){this.el=$("#tab-1"),this.el.html(_.template(e,{messages:messages})),n()},remove:function(){this.el.html("")}})}),define("view/config/ConfigRouter",["view/config/IndexView","view/config/CommentsView","view/config/LanguagesView","view/config/MessagesView","view/config/UsersView","view/config/GroupsView","view/config/TagsView","view/config/AttributesView"],function(e,t,n,r,i,s,o,u){return console.log("Loading ConfigRouter.js"),Backbone.Router.extend({configView:null,currentView:null,indexView:new e,commentsView:new t,languagesView:new n,messagesView:new r,usersView:new i,groupsView:new s,tagsView:new o,attributesView:new u,initialize:function(e){this.configView=e.view},show:function(e){Heiduc.app.currentView!=this.configView&&Heiduc.app.show(this.configView),this.currentView&&(this.currentView.remove(),this.currentView=null),$("ul.nav-tabs li").removeClass("active"),e.render(),this.currentView=e},routes:{"config/comments":"comments","config/languages":"languages","config/messages":"messages","config/users":"users","config/groups":"groups","config/tags":"tags","config/attributes":"attributes"},index:function(){this.show(this.indexView)},comments:function(){this.show(this.commentsView)},languages:function(){this.show(this.languagesView)},messages:function(){this.show(this.messagesView)},users:function(){this.show(this.usersView)},groups:function(){this.show(this.groupsView)},tags:function(){this.show(this.tagsView)},attributes:function(){this.show(this.attributesView)}})}),define("view/config/ConfigView",["text!template/config/config.html","view/config/ConfigRouter","jquery.form"],function(e,t){return console.log("Loading ConfigView.js"),Backbone.View.extend({css:"/static/css/config.css",el:$("#content"),tmpl:_.template(e),viewCmd:null,router:null,initialize:function(){this.router=new t({view:this})},render:function(){Heiduc.addCSSFile(this.css),this.el.html(this.tmpl({messages:messages})),this.router.index()},remove:function(){this.router.currentView&&this.router.currentView.remove(),this.el.html(""),Heiduc.removeCSSFile(this.css)}})}),define("text!template/folders.html",[],function(){return'<div class="row">\n	<div class="col-lg-12">\n		<div class="panel panel-default">\n			<div class="panel-heading"><a href="#folders"><%= messages("resources") %>:</a> / <span id="crumbs"></span> </div>\n			<div class="panel-body">\n				<div class="row">\n					<div class="col-md-12">\n						<ul class="nav nav-tabs" id="tabs_a">\n							<li class="active"><a data-toggle="tab" href="#tab-1"><%= messages("folders") %></a></li>\n						    <li><a data-toggle="tab" href="#tab-2">Picasa</a></li>\n						</ul>\n						<div class="tab-content" id="tabs_content_a">\n							<div id="tab-1" class="tab-pane fade in active">\n								<p id="folder-location"></p>\n    							<ul id="folders-tree"><img src="/static/images/ajax-loader.gif" /></ul>\n							</div>\n							<div id="tab-2" class="tab-pane fade">\n								<div id="albums"><img src="/static/images/ajax-loader.gif" /></div>\n							    <div class="clear">\n							        <a id="createAlbumLink"><%= messages("folders.create_album") %></a>\n							    </div> \n							    <div id="albumDetails">\n							        <hr class="clear picasa-hr" />\n							        <p class="album-name">\n							            Album : <span id="album-location"></span>\n							            <a id="deleteAlbumLink"><%= messages("folders.delete_album") %></a>\n							        </p>\n							        <div id="photos"></div>\n							        <div class="clear">\n							            <a id="uploadPhotoLink"><%= messages("folders.upload_image") %></a>\n							        </div>\n							    </div> \n							    <div class="clear"></div>\n								\n							</div>    \n								\n							</div>\n						</div>\n					</div>\n				</div>\n			</div>\n		</div>\n	</div>\n</div>\n\n\n<div class="modal fade" id="album-dialog" tabindex="-1" role="dialog" aria-labelledby="" aria-hidden="true">\n  <div class="modal-dialog">\n    <div class="modal-content">\n      <div class="modal-header">\n        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>\n        <h4 class="modal-title"><%= messages("folders.new_album") %></h4>\n      </div>\n      <div class="modal-body">\n      	<form id="albumForm">\n		    <div class="form-row">\n		        <label><%= messages("folders.album_title") %></label>\n		        <input id="title"/>\n		    </div>\n		    <div id="albumMessages"></div>\n		    <div class="buttons-dlg">\n		        <input type="submit" value="<%= messages("save") %>" />\n		        <input id="cancelAlbumButton" type="button" value="<%= messages("cancel") %>" />\n		    </div>\n		  </form>  \n      </div>	\n    </div>\n  </div>\n</div>\n\n<div class="modal fade" id="upload-dialog" tabindex="-1" role="dialog" aria-labelledby="" aria-hidden="true">\n  <div class="modal-dialog">\n    <div class="modal-content">\n      <div class="modal-header">\n        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>\n        <h4 class="modal-title"><%= messages("folders.upload_image") %></h4>\n      </div>\n      <div class="modal-body">\n      	<form id="upload" action="/cms/upload" method="post" enctype="multipart/form-data">\n		    <input type="hidden" name="fileType" value="picasa" />\n		    <input type="hidden" name="albumId" />\n		    <input type="file" name="uploadFile" />\n		    <div class="buttons-dlg">\n		        <input type="submit" value="<%= messages("upload") %>" />\n		        <input id="uploadCancelButton" type="button" value="<%= messages("cancel") %>" />\n		    </div>    \n		  </form>\n      </div>	\n    </div>\n  </div>\n</div>\n\n\n\n'}),define("view/FoldersView",["text!template/folders.html","jquery.form","jquery.treeview"],function(e){function t(){Heiduc.initJSONRpc(n),$.cookie("folderReturnPath",null,{path:"/",expires:10})}function n(){Heiduc.jsonrpc.folderService.getTree(function(e){$("#folders-tree").html(r(e)),$("#folders-tree").treeview({animated:"fast",collapsed:!0,unique:!0,persist:"cookie",cookieId:"folderTree"})})}function r(e){var t='<li><a href="#folder/'+e.entity.id+'">'+e.entity.title+'</a> <a title="'+messages("add_child")+'" href="#addFolder/'+e.entity.id+'">+</a>';return e.children.list.length>0&&(t+="<ul>",$.each(e.children.list,function(e,n){t+=r(n)}),t+="</ul>"),t+"</li>"}function a(){$("#upload").ajaxForm(E),Heiduc.initJSONRpc(f),$("#createAlbumLink").click(m),$("#deleteAlbumLink").click(y),$("#uploadPhotoLink").click(w),$("#albumForm").submit(function(){return g(),!1}),$("#cancelAlbumButton").click(function(){$("#album-dialog").dialog("close")}),$("#uploadAlbumButton").click(function(){$("#upload-dialog").dialog("close")}),$("#uploadCancelButton").click(function(){$("#upload-dialog").dialog("close")})}function f(){Heiduc.jsonrpc.configService.getConfig(function(e){i=e,i.enablePicasa?l():($("#albums").html(messages("folders.picasa_not_enabled")),$("#createAlbumLink").hide())})}function l(){Heiduc.jsonrpc.picasaService.selectAlbums(function(e){s=e.list,c()})}function c(){var e="";$.each(s,function(t,n){var r="";$.each(n.categories.list,function(e,t){r+=t+" "}),e+='<a class="album" data-i="'+t+'">'+'<img src="/static/images/Photos.png" /><p>'+n.title+" "+r+"</p></a>"}),$("#albums").html(e),$("#albums a.album").click(function(){h($(this).attr("data-i"))})}function h(e){u=s[e],p()}function p(){$("#album-location").text(u.title),Heiduc.jsonrpc.picasaService.selectPhotos(function(e){o=e.list,d()},u.id)}function d(){$("#albumDetails").show();var e="";$.each(o,function(t,n){var r="";$.each(n.categories.list,function(e,t){r+=t+" "}),e+='<div class="photo"><img class="remove" src="/static/images/02_x.png" data-i="'+t+'" />'+'<a data-i="'+t+'"><img src="'+n.thumbnailURL+'" />'+"<p>"+n.title+"<br/>"+r+"</p></a></div>"}),$("#photos").html(e),$("#photos img.remove").click(function(){b($(this).attr("data-i"))}),$("#photos a").click(function(){v($(this).attr("data-i"))})}function v(e){window.open(o[e].URL,"preview")}function m(){$("#album-dialog").dialog("open")}function g(){var e=$("#title").val();if(!e){Heiduc.errorMessage("#albumMessages",messages("title_is_empty"));return}Heiduc.jsonrpc.picasaService.addAlbum(function(e){e.result=="success"?($("#album-dialog").dialog("close"),l()):Heiduc.errorMessage("#albumMessages",e.message)},e)}function y(){confirm(messages("folders.you_delete_album")+" "+u.title+". "+messages("are_you_sure"))&&Heiduc.jsonrpc.picasaService.removeAlbum(function(e){e.result=="success"&&(l(),$("#albumDetails").hide()),Heiduc.showServiceMessages(e)},u.id)}function b(e){photo=o[e],confirm(messages("folders.you_delete_photo")+" "+photo.title+". "+messages("are_you_sure"))&&Heiduc.jsonrpc.picasaService.removePhoto(function(e){e.result=="success"&&p(),Heiduc.showServiceMessages(e)},u.id,photo.id)}function w(){$("#upload-dialog input[name=albumId]").val(u.id),$("#upload-dialog").dialog("open")}function E(e){var t=e.split("::"),n=t[1],r=t[2];n=="success"?(Heiduc.info("Success."),setTimeout(p,3e3)):(r=messages("error")+". "+r,Heiduc.error(r)),$("#upload-dialog").dialog("close")}console.log("Loading FoldersView.js");var i=null,s=null,o=null,u=null;return Backbone.View.extend({css:["/static/css/jquery.treeview.css","/static/css/picasa.css"],el:$("#content"),tmpl:_.template(e),render:function(){Heiduc.addCSSFiles(this.css),this.el.html(this.tmpl({messages:messages})),t(),a()},remove:function(){this.el.html(""),Heiduc.removeCSSFiles(this.css)}})}),define("text!template/folder.html",[],function(){return'<div class="row">\n	<div class="col-lg-12">\n		<div class="panel panel-default">\n			<div class="panel-heading"><a href="#folders"><%= messages("resources") %>:</a> / <span id="crumbs"></span> </div>\n			<div class="panel-body">\n				<div class="row">\n					<div class="col-md-12">\n						<ul class="nav nav-tabs" id="tabs_a">\n							<li class="active"><a data-toggle="tab" href="#tab-1"><%= messages("folder") %></a></li>\n						    <li><a data-toggle="tab" href="#tab-2"><%= messages("files") %></a></li>\n						    <li><a data-toggle="tab" href="#tab-3"><%= messages("subfolders") %></a></li>\n						    <li><a data-toggle="tab" href="#tab-4"><%= messages("security") %></a></li>\n						</ul>\n						<div class="tab-content" id="tabs_content_a">\n							<div id="tab-1" class="tab-pane fade in active">\n								<form id="folderForm">\n								\n								<div class="form-group">\n									<div class="row">\n										<div class="col-lg-6">\n											<label><%= messages("title") %></label>\n							        		<input id="title" class="form-control" type="text" />\n										</div>\n									</div>\n								</div>\n								<div class="form-group">\n									<div class="row">\n										<div class="col-lg-6">\n											<label><%= messages("folder.name_for_url") %></label>\n							        		<input id="name" class="form-control" type="text" />\n										</div>\n									</div>\n								</div>\n								\n								<div class="form-sep">\n									<input class="btn btn-primary" id="saveButton" type="submit" value="<%= messages("save") %>" />\n								    <input class="btn btn-default" id="cancelButton" type="button" value="<%= messages("cancel") %>" />\n								    <input class="btn btn-default" id="exportButton" type="button" value="<%= messages("export") %>" />\n								</div>\n								</form>\n								\n							</div>\n							<div id="tab-2" class="tab-pane fade">\n								<div id="filesTable"> </div>\n							    <div class="form-sep">\n							        <input class="btn btn-primary" id="createFileButton" type="button" \n							            value="<%= messages("create_file") %>" />\n							        <input class="btn btn-default" id="uploadButton" type="button" \n							            value="<%= messages("upload_file") %>" />\n							        <input class="btn btn-default" id="deleteFilesButton" type="button" \n							            value="<%= messages("delete_files") %>" />\n							        <input class="btn btn-default" id="fileCancelButton" type="button" \n							            value="<%= messages("cancel") %>" />\n							    </div>\n							</div>\n							<div id="tab-3" class="tab-pane fade">\n								<div id="children"> </div>\n							    <div class="form-sep">\n							        <input class="btn btn-primary" id="addChildButton" type="button" \n							            value="<%= messages("folder.add_child_folder") %>" />\n							        <input class="btn btn-default" id="deleteFoldersButton" type="button" \n							            value="<%= messages("folder.delete_folders") %>" />\n							        <input class="btn btn-default" id="folderCancelButton" type="button" \n							            value="<%= messages("cancel") %>" />\n							    </div>    \n							</div>\n							<div id="tab-4" class="tab-pane fade">\n								<div id="permissions"> </div>\n							    <div class="form-sep">\n							        <input class="btn btn-primary" id="addPermissionButton" type="button" \n							            value="<%= messages("add_permission") %>" />\n							        <input class="btn btn-default" id="deletePermissionButton" type="button" \n							            value="<%= messages("delete_permission") %>" />\n							    </div>    \n							</div>\n						</div>\n					</div>\n				</div>\n			</div>\n		</div>\n	</div>\n</div>\n\n\n<div class="modal fade" id="file-upload" tabindex="-1" role="dialog" aria-labelledby="" aria-hidden="true">\n  <div class="modal-dialog">\n    <div class="modal-content">\n      <div class="modal-header">\n        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>\n        <h4 class="modal-title"><%= messages("folder.upload_file") %></h4>\n      </div>\n      <div class="modal-body">\n      	<form id="upload" action="/cms/upload" method="post" enctype="multipart/form-data">\n	    	<%= messages("file_upload") %>:\n	    	<input type="hidden" name="fileType" value="resource" />\n	    	<input type="hidden" name="folderId" />\n	    	<input type="file" name="uploadFile" multiple="true" />\n		    <div class="modal-footer">\n	    	    <input type="submit" class="btn btn-primary" value="<%= messages("send") %>" />\n	        	<input class="btn btn-default" data-dismiss="modal" id="fileUploadCancelButton" type="button" \n	            	value="<%= messages("cancel") %>" />\n	    	</div>\n		</form>\n      </div>	\n    </div>\n  </div>\n</div>\n\n<div class="modal fade" id="permission-dialog" tabindex="-1" role="dialog" aria-labelledby="" aria-hidden="true">\n  <div class="modal-dialog">\n    <div class="modal-content">\n      <div class="modal-header">\n        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>\n        <h4 class="modal-title"><%= messages("permission_details") %></h4>\n      </div>\n      <div class="modal-body">\n      	<form id="permissionForm">\n		    <div class="form-row">\n		        <label><%= messages("group") %></label>\n		        <select id="groupSelect"></select>\n		        <span id="groupName"></span>        \n		    </div>\n		    <div id="permissionList" class="form-row">\n		        <fieldset>\n		            <legend><%= messages("permission") %></legend>\n		            <input type="radio" name="permission" value="DENIED"/> <%= messages("denied") %> <br />\n		            <input type="radio" name="permission" value="READ" /> <%= messages("read") %> <br />\n		            <input type="radio" name="permission" value="WRITE" /> <%= messages("read_write") %> <br />\n		        </fieldset>        \n		    </div>\n		    <div class="modal-footer">\n		        <input id="permissionSaveButton" class="btn btn-primary" type="submit" value="<%= messages("save") %>" />\n		        <input id="permissionCancelButton" class="btn btn-default" data-dismiss="modal" type="button" value="<%= messages("cancel") %>" />\n		    </div>\n		</form>\n      </div>	\n    </div>\n  </div>\n</div>\n\n<div class="modal fade" id="export-dialog" tabindex="-1" role="dialog" aria-labelledby="" aria-hidden="true">\n  <div class="modal-dialog">\n    <div class="modal-content">\n      <div class="modal-header">\n        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>\n        <h4 class="modal-title"><<%= messages("folder.export_window") %></h4>\n      </div>\n      <div class="modal-body">\n      	<form id="exportForm">\n		    <p><%= messages("folder.export_window_info") %></p>\n		    <div id="exportInfo" class="form-row"></div>    \n		    <div id="timer" class="form-row"></div>\n		    <div class="buttons-dlg">\n		        <input id="exportCancelButton" type="button" value="<%= messages("cancel") %>" />\n		    </div>\n		  </form>\n      </div>	\n    </div>\n  </div>\n</div>\n\n\n'}),define("view/FolderView",["text!template/folder.html","jquery.form"],function(e){function h(){s=t!="",$("#upload").ajaxForm(y),Heiduc.initJSONRpc(p),$("#title").change(T),$("#folderForm").submit(function(){return k(),!1}),$("#cancelButton").click(L),$("#exportButton").click(A),$("#exportCancelButton").click(J),$("#createFileButton").click(x),$("#uploadButton").click(m),$("#deleteFilesButton").click(S),$("#fileCancelButton").click(L),$("#addChildButton").click(D),$("#deleteFoldersButton").click(H),$("#folderCancelButton").click(L),$("#addPermissionButton").click(z),$("#deletePermissionButton").click(W),$("#permissionForm").submit(function(){return U(),!1}),$("#permissionCancelButton").click(X),$("#file-upload input[name=folderId]").val(t)}function p(){Heiduc.jsonrpc.folderService.getFolderRequest(function(e){o=e,d(),I(),K(),s?(j(o.permissions),C(),w(),$(".filesTab").show(),$(".childrenTab").show(),i.root?($("#saveButton").attr("disabled","disabled"),$("#title").attr("disabled","disabled"),$("#name").attr("disabled","disabled")):($("#saveButton").removeAttr("disabled"),$("#title").removeAttr("disabled"),$("#name").removeAttr("disabled"))):($(".filesTab").hide(),$(".childrenTab").hide())},t,n)}function d(){i=o.folder,s&&(n=String(i.parent)),v(),V()}function v(){s?($("#title").val(i.title),$("#name").val(i.name)):($("#title").val(""),$("#name").val(""))}function m(){$("#file-upload").modal({show:!0})}function g(){}function y(e){var t=e.split("::"),n=t[1],r=t[2];n=="success"?(Heiduc.info(messages("folder.file_success_upload")),b()):Heiduc.error(messages("folder.error_during_upload")+" "+r),$("#file-upload").modal({show:!1})}function b(){Heiduc.jsonrpc.fileService.getByFolder(function(e){o.files=e,w()},t)}function w(){r=o.files;var e='<table class="table table-striped"><tr><th></th><th>'+messages("title")+"</th><th>"+messages("filename")+"</th><th>"+messages("mimetype")+"</th><th>"+messages("size")+"</th></tr>";$.each(r.list,function(t,n){e+='<tr>	<td><input type="checkbox" name="item'+t+'" value="'+n.id+'"/></td>	<td><a href="#file/'+n.id+'">'+n.title+"</a></td>	<td>"+n.filename+"</td>	<td>"+n.mimeType+"</td>	<td>"+n.size+" "+messages("bytes")+"</td></tr>"}),e+="</table>",$("#filesTable").html(e),$("#filesTable tr:even").addClass("even")}function E(){var e=[];return $("#filesTable input[type=checkbox]:checked").each(function(){e.push(this.value)}),e}function S(){var e=Heiduc.javaList(E());if(e.list.length==0){Heiduc.info(messages("nothing_selected"));return}confirm(messages("are_you_sure"))&&Heiduc.jsonrpc.fileService.deleteFiles(function(e){e.result=="success"?(b(),Heiduc.info(messages("folder.files_success_delete"))):Heiduc.error(messages("folder.error_deleting_files")+" "+e.messsage)},e)}function x(){location.href="#addFile/"+t}function T(){if(s)return;var e=$("#name").val(),t=$("#title").val();e==""&&$("#name").val(Heiduc.urlFromTitle(t))}function N(){Heiduc.jsonrpc.folderService.getByParent(function(e){o.children=e,C()},t)}function C(){if(!s)return;var e='<table class="table table-striped"><tr><th></th><th>'+messages("title")+"</th><th>"+messages("name")+"</th></tr>";$.each(o.children.list,function(t,n){e+='<tr><td><input type="checkbox" value="'+n.id+'"/></td><td><a href="#folder/'+n.id+'">'+n.title+"</td><td>"+n.name+"</td></tr>"}),$("#children").html(e+"</table>"),$("#children tr:even").addClass("even")}function k(){var e=Heiduc.javaMap({id:t,parent:n,name:$("#name").val(),title:$("#title").val()});Heiduc.jsonrpc.folderService.saveFolder(function(e){e.result=="success"?(Heiduc.info(messages("folder.success_save")),t==""&&(t=e.message,s=!0,$('#file-upload input[name="folderId"]').val(t),p())):Heiduc.showServiceMessages(e)},e)}function L(){$.cookie("folderReturnPath")?location.href=$.cookie("folderReturnPath"):location.href="#folders"}function A(){l=0,M(),$("#export-dialog").modal({show:!0}),Heiduc.jsonrpc.configService.startExportFolderTask(function(e){e.result=="success"?(c=e.message,Heiduc.infoMessage("#exportInfo",messages("creating_export_file")),a=setInterval(O,1e4),f=setInterval(M,1e3)):Heiduc.showServiceMessages(e)},i.id)}function O(){Heiduc.jsonrpc.configService.isExportTaskFinished(function(e){e&&(clearInterval(a),clearInterval(f),$("#export-dialog").dialog("close"),$("#exportDialogButton").attr("disabled",!1),location.href="/file/tmp/"+c)},"folder")}function M(){$("#timer").html(l++ +" "+messages("sec")+".")}function D(){location.href="#addFolder/"+t}function P(){var e=[];return $("#children input[type=checkbox]:checked").each(function(){e.push(this.value)}),e}function H(){var e=Heiduc.javaList(P());if(e.list.length==0){Heiduc.info(messages("nothing_selected"));return}confirm(messages("are_you_sure"))&&Heiduc.jsonrpc.folderService.deleteFolder(function(e){e.result=="success"?(N(),Heiduc.info(messages("folder.success_delete"))):Heiduc.error(messages("folder.error_deleting")+" "+e.messsage)},e)}function B(e){if(e=="DENIED")return messages("denied");if(e=="READ")return messages("read");if(e=="WRITE")return messages("read_write");if(e=="ADMIN")return messages("read_write_grant")}function j(e){u=Heiduc.idMap(e.list);var t='<table class="table table-striped"><tr><th></th><th>'+messages("group")+"</th><th>"+messages("permission")+"</th></tr>";$.each(u,function(e,n){var r="",i=n.group.name;n.inherited||(r='<input type="checkbox" value="'+n.id+'">',i='<a data-id="'+n.id+'"> '+n.group.name+"</a>"),t+="<tr><td>"+r+"</td><td>"+i+"</td><td>"+B(n.permission)+"</td></tr>"}),$("#permissions").html(t+"</table>"),$("#permissions tr:even").addClass("even"),$("#permissions a").click(function(){q($(this).attr("data-id"))})}function F(){Heiduc.jsonrpc.folderPermissionService.selectByFolder(function(e){j(e)},t)}function I(){var e=o.groups;groups=Heiduc.idMap(e.list);var t="";$.each(groups,function(e,n){t+='<option value="'+n.id+'">'+n.name+"</option>"}),$("#groupSelect").html(t)}function q(e){permission=u[e],R(),$("#permission-dialog").modal({show:!0})}function R(){$("#permission-dialog input[type=radio]").removeAttr("checked"),permission==null?($("#permission-dialog input[value=READ]").attr("checked","checked"),$("#groupSelect").show(),$("#groupName").hide()):($("#permissionList input[value="+permission.permission+"]").attr("checked","checked"),$("#groupSelect").hide(),$("#groupName").show(),$("#groupName").text(permission.group.name))}function U(){var e={folderId:t,groupId:permission==null?$("#groupSelect").val():String(permission.group.id),permission:$("#permissionList input:checked")[0].value};Heiduc.jsonrpc.folderPermissionService.save(function(e){Heiduc.showServiceMessages(e),e.result=="success"&&F()},Heiduc.javaMap(e))}function z(){permission=null,R(),$("#permission-dialog").modal({show:!0})}function W(){var e=[];$("#permissions input:checked").each(function(){e.push(this.value)});if(e.length==0){Heiduc.info(messages("nothing_selected"));return}confirm(messages("are_you_sure"))&&Heiduc.jsonrpc.folderPermissionService.remove(function(e){Heiduc.showServiceMessages(e),F()},Heiduc.javaList(e))}function X(){}function V(){var e=o.folderPermission;e.changeGranted?($("#saveButton").show(),$("#createFileButton").show(),$("#uploadButton").show(),$("#deleteFilesButton").show(),$("#addChildButton").show(),$("#deleteFoldersButton").show()):($("#saveButton").hide(),$("#createFileButton").hide(),$("#uploadButton").hide(),$("#deleteFilesButton").hide(),$("#addChildButton").hide(),$("#deleteFoldersButton").hide()),e.admin&&s?$(".securityTab").show():$(".securityTab").hide()}function J(){clearInterval(a),clearInterval(f)}function K(){var e="",t=o.parent;$.each(o.ancestors.list,function(t,n){var r=n.name=="/"?"file":n.name;e+='<a href="#folder/'+n.id+'">'+r+"</a> / "}),s?e+=" "+(i.name=="/"?"file":i.name):e+='<a href="#folder/'+t.id+'">'+t.name+"</a>",$("#crumbs").html(e)}console.log("Loading FolderView.js");var t=null,n=null,r="",i=null,s=t!="",o=null,u=null,a=null,f=null,l=0,c=null;return Backbone.View.extend({el:$("#content"),tmpl:_.template(e),render:function(){this.el.html(this.tmpl({messages:messages})),h()},remove:function(){this.el.html("")},setFolderId:function(e){t=e},setFolderParentId:function(e){n=e}})}),define("text!template/file.html",[],function(){return'<div class="row">\n	<div class="col-lg-12">\n		<div class="panel panel-default">\n			<div class="panel-body">\n				<div class="row">\n					<div class="col-md-12">\n						<ul class="nav nav-tabs" id="tabs_a">\n							<li class="active"><a data-toggle="tab" href="#tab-1"><%= messages("file") %></a></li>\n							<li class ="contentTab"><a id= "_fileContent" data-toggle= "tab" href= "#tab-2" ><%= messages("content")%></a></li>\n						</ul>\n						<div class="tab-content" id="tabs_content_a">\n							<div id="tab-1" class="tab-pane fade in active">\n								<form id="fileForm">\n									<div class="form-group">\n										<div class="row">\n											<div class="col-lg-6">\n												<label><%= messages("title") %></label>\n								        		<input id="title" class="form-control" type="text" />\n											</div>\n										</div>\n									</div>\n									<div class="form-group">\n										<div class="row">\n											<div class="col-lg-6">\n												<label><%= messages("name") %></label>\n								        		<input id="name" class="form-control" type="text" />\n											</div>\n										</div>\n									</div>\n									<div class="form-group">\n										<div class="row">\n											<div class="col-lg-6">\n												<label><%= messages("content_type") %></label>\n								        		<span id="mimeType"> </span>\n											</div>\n										</div>\n									</div>\n									<div class="form-group">\n										<div class="row">\n											<div class="col-lg-6">\n												<label><%= messages("size") %></label>\n								        		<span id="size"> </span>\n											</div>\n										</div>\n									</div>\n									<div class="form-group">\n										<div class="row">\n											<div class="col-lg-6">\n												<label><%= messages("external_link") %></label>\n								        		<span id="fileLink"> </span>\n											</div>\n										</div>\n									</div>\n									<div class="form-group">\n										<div class="row">\n											<div class="col-lg-6">\n												<label></label>\n								        		<span id="download"> </span>\n											</div>\n										</div>\n									</div>\n									<div id="imageContent" style="float:left;margin-left: 20px;"> </div>\n									<div class="form-sep">\n										<input id="saveButton" class="btn btn-primary" type="submit" value="<%= messages("save") %>" />\n								    	<input id="cancelButton" class="btn btn-default" type="button" value="<%= messages("cancel") %>" />\n									</div>\n									\n								</form>	\n								\n							</div>\n							<div id="tab-2" class="tab-pane fade">\n								<form id="contentForm">\n									<div class="form-group">\n										<div class="row">\n											<div class="col-lg-6">\n								        		<span id="filename"></span>\n											</div>\n										</div>\n									</div>\n									<div class="form-group">\n										<div class="row">\n											<div class="col-lg-6">\n												<label></label>\n												<label class="checkbox-inline">\n													<input id="autosave" type="checkbox" id="enablePicasa" value=""> <%= messages("autosave") %>\n												</label>\n											</div>\n										</div>\n									</div>\n									<div class="form-group">\n										<div class="row">\n											<div class="col-lg-6">\n												<label></label>\n												<textarea id="fileContent" rows="20" cols="80"></textarea>\n											</div>\n										</div>\n									</div>\n								    <div class="form-sep">\n								        <input id="saveContentButton" class="btn btn-primary" type="submit" value="<%= messages("save_continue") %>" />\n								        <input id="contentCancelButton" class="btn btn-default" type="button" value="<%= messages("cancel") %>" />\n								    </div>    \n							  </form>\n							</div>\n						</div>\n					</div>\n				</div>\n			</div>\n		</div>\n	</div>\n</div>\n\n\n'}),define("view/FileView",["text!template/file.html","cm","cm-css","cm-js","cm-xml","cm-html"],function(e){function u(){i=t!="",$('a[data-toggle="tab"]').on("shown.bs.tab",a),Heiduc.initJSONRpc(p),$("#fileForm").submit(function(){return m(),!1}),$("#cancelButton").click(g),$("#autosave").change(h),$("#contentForm").submit(function(){return c(),!1}),$("#contentCancelButton").click(g)}function a(e,t){e.target.id==="_fileContent"?(f(),o&&(o.focus(),$(o.getScrollerElement()).css("height",.6*$(window).height()+"px").css("border","1px solid silver"),o.refresh())):l()}function f(){t!="null"&&$("#autosave:checked").length>0&&s==""&&(s=setInterval(c,Heiduc.AUTOSAVE_TIMEOUT*1e3))}function l(){s!=""&&(clearInterval(s),s="")}function c(){o&&o.save();var e=$("textarea").val();Heiduc.jsonrpc.fileService.updateContent(function(e){if(e.result=="success"){var t=new Date;Heiduc.info(e.message+" "+t)}else Heiduc.error(e.message)},t,e)}function h(){$("#autosave:checked").length>0?f():l()}function p(){Heiduc.jsonrpc.fileService.getFile(function(e){r=e,i&&(n=r.folderId),v()},t)}function d(e){var t="html";r.mimeType=="text/css"&&(t="css"),r.mimeType=="text/xml"&&(t="xml"),r.mimeType=="text/html"&&(t="htmlmixed"),r.mimeType.indexOf("javascript")!=-1&&(t="javascript"),o=CodeMirror.fromTextArea(document.getElementById("fileContent"),{lineNumbers:!0,theme:"eclipse",mode:t})}function v(){i?($("#filename").html(r.name),$("#title").val(r.title),$("#name").val(r.name),$("#fileEditDiv").show(),$("#mimeType").html(r.mimeType),$("#size").html(r.size),$("#fileLink").html(r.link),$("#download").html('<a href="'+r.link+'">'+messages("download")+"</a>"),r.textFile?($(".contentTab").show(),$("#fileContent").val(r.content),d(r.mimetype)):$(".contentTab").hide(),r.imageFile?$("#imageContent").html('<img src="'+r.link+'" />'):$("#imageContent").html("")):($("#filename").html(""),$("#title").val(""),$("#name").val(""),$("#fileEditDiv").hide(),$(".contentTab").hide(),$("#imageContent").html(""))}function m(){var e=Heiduc.javaMap({id:t,folderId:String(n),title:$("#title").val(),name:$("#name").val()});Heiduc.jsonrpc.fileService.saveFile(function(e){Heiduc.showServiceMessages(e),e.result=="success"&&(location.href="#file/"+e.data)},e)}function g(){location.href="#folder/"+n}console.log("Loading FileView.js");var t=null,n=null,r="",i=t!="",s="",o=null;return Backbone.View.extend({css:["/static/js/codemirror/codemirror.css","/static/js/codemirror/eclipse.css","/static/css/file.css"],el:$("#content"),tmpl:_.template(e),render:function(){Heiduc.addCSSFiles(this.css),this.el.html(this.tmpl({messages:messages})),u()},remove:function(){this.el.html(""),Heiduc.removeCSSFiles(this.css)},setFileId:function(e){t=e},setFolderId:function(e){n=e}})}),define("text!template/topbar.html",[],function(){return'<!-- HEADER -->\n<nav class="header-navbar">\n    <div class="navbar-header clearfix">\n	<a class="navbar-toggle collapsed" data-toggle="collapse" data-target="#mini-navbar-collapse">\n	    <span class="sr-only">Toggle navigation</span>\n	    <i class="fa fa-plus"></i>\n	</a>\n	\n	<a class="logo pull-left" href="#">\n	    <img src="/static/assets/img/logo.png" width="110" alt="Heiduc Logo">\n	</a>\n	\n	<a class="sidebar-switch pull-right"><span class="icon fa"></span></a>\n    </div>\n  \n    <div class="collapse navbar-collapse" id="mini-navbar-collapse">\n	\n	\n	<ul class="nav navbar-nav navbar-right">\n		<li>\n			<%= locale %>\n		</li>\n		<li><a href="#">\n		<i class="fa fa-lock"></i>\n		<span>Locked</span>\n	    </a></li>\n	    <li class="turn-off"><a href="#logout">\n		<i class="fa fa-power-off"></i>\n		<span><%= messages("logout") %></span>\n	    </a></li>\n	</ul>\n    </div><!-- navbar-collapse -->\n</nav>\n<!-- HEADER -->\n\n'}),define("text!template/sidebar.html",[],function(){return'<!-- side navigation -->\n<aside class="sidebar affix" role="complementary">\n	<div class="sidebar-user">\n		<div class="media sidebar-padding">\n			<div class="media-left media-middle">\n				<img src="/static/images/guy.jpg" alt="person" style="width: 60px" class="img-circle">\n			</div>\n			<div class="media-body media-middle">\n				<a href="#profile" class="h4 margin-none"><%= Heiduc.app.user.name %></a>\n				<ul class="list-unstyled list-inline margin-none">\n					<li><a href="#profile"><i class="fa fa-user"></i><%= Heiduc.app.user.email %></a></li>\n				</ul>\n			</div>\n		</div>\n	</div>\n	<!-- Wrapper Reqired by Nicescroll (start scroll from here) -->\n	<div class="nicescroll">\n		<div class="wrapper" style="margin-bottom: 140px; overflow-y: hidden; outline: none;" tabindex="0">\n			<% if (Heiduc.app.user.admin) { %>\n			<ul class="nav nav-sidebar" id="sidebar-menu">\n                <h4 class="sidebar-headline">管理</h4>\n                <li class="active"><a href="#index"><i class="fa fa-desktop"></i> Dashboard <span class="sr-only">(current)</span></a></li>\n				<li><a href="#pages"><i class="fa fa-dashboard"></i> <%= messages("content") %></a></li>\n                <li><a href="#templates"><i class="fa fa-group"></i> <%= messages("templates") %></a></li>\n                <li><a href="#folders"><i class="fa fa-rmb"></i> <%= messages("resources") %></a></li>\n                <li><a href="#config"><i class="fa fa-cogs"></i><%= messages("configuration") %></a></li>\n			</ul>\n			<% } %>\n			<ul class="nav nav-sidebar">\n                <h4 class="sidebar-headline">功能</h4>\n                <%= plugins %>\n			</ul>\n			<% if (Heiduc.app.user.admin) { %>\n			<h4 class="sidebar-headline">支持</h4>\n\n			<ul class="nav nav-sidebar">\n				<li class="submenu">\n					<a href="#plugins"><i class="fa fa-plus-square"></i><%= messages("plugins") %></a>\n					<ul>\n						<li><a href="#plugins/config"><%= messages("plugins.config") %></a></li>\n						<li>\n							<a href="#plugins/forms">\n								<%= messages("forms") %><!--  &nbsp;<span class="label label-primary">1468</span> -->\n							</a>\n						</li>\n						<li><a href="#plugins/seo-urls"><%= messages("plugins.seo_urls") %> </a></li>\n					</ul>\n				</li>\n			</ul>\n			<% } %>\n		</div>\n	</aside>\n\n'}),define("app",["view/LoginView","view/PagesView","view/IndexView","view/StructuresView","view/StructureView","view/StructureTemplateView","view/TemplatesView","view/TemplateView","view/page/PageView","view/ProfileView","view/plugins/PluginsView","view/plugins/PluginView","view/plugins/ConfigView","view/plugins/FormsView","view/plugins/FormView","view/plugins/SeoUrlsView","view/plugins/AddonsView","view/config/ConfigView","view/FoldersView","view/FolderView","view/FileView","text!template/topbar.html","text!template/locale.html","text!template/sidebar.html"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x){return Backbone.Router.extend({initialize:function(){function e(){var e=$(window).innerHeight();$(".main").css("min-height",e)}this.bind("login",this.login,this),this.bind("renderSide",this.renderSide,this),Heiduc.loggedIn?this.login():this.currentView=this.loginView.render(),$("#topbar, #main_wrapper").fadeIn(),$("#main_wrapper").append('<!-- FOOTER --><footer id="footer" role="contentinfo">Copyright &copy; 20213-2015 ubunta.cn</footer><!-- FOOTER -->'),e(),$(window).on("resize",function(){e()})},currentView:null,indexView:new n,loginView:new e,pagesView:new t,structuresView:new r,structureView:new i,structureTemplateView:new s,templatesView:new o,templateView:new u,pageView:new a,profileView:new f,pluginsView:new l,pluginView:new c,pluginsConfigView:new h,pluginsFormsView:new p,pluginsFormView:new d,pluginsSeoUrlsView:new v,pluginsAddonsView:new m,configView:new g,foldersView:new y,folderView:new b,fileView:new w,routes:{index:"index",pages:"pages","page/content/:id":"editContent","page/:id":"editPage",structures:"structures",structure:"addStructure","structure/:id":"editStructure","addStructureTemplate/:id":"addStructureTemplate","structureTemplate/:id":"structureTemplate",profile:"profile",logout:"logout",plugins:"plugins","plugins/config":"pluginsConfig","plugins/forms":"pluginsForms","plugins/form":"pluginsFormNew","plugins/form/:id":"pluginsFormEdit","plugins/seo-urls":"pluginsSeoUrls","plugin/:id":"plugin","addons/*path":"pluginsAddons",templates:"templates",template:"createTemplate","template/:id":"editTemplate",config:"config",folders:"folders","folder/:id":"editFolder","addFolder/:id":"addFolder","file/:id":"editFile","addFile/:id":"addFile"},show:function(e){this.currentView&&(this.currentView.remove(),this.currentView=null),this.currentView=e,$("#content").hide(),e.render(),$("#content").fadeIn()},pages:function(){this.show(this.pagesView)},index:function(){this.show(this.indexView)},structures:function(){this.show(this.structuresView)},addStructure:function(){this.structureView.setId(""),this.show(this.structureView)},editStructure:function(e){this.structureView.setId(e),this.show(this.structureView)},addStructureTemplate:function(e){this.structureTemplateView.create(e),this.show(this.structureTemplateView)},structureTemplate:function(e){this.structureTemplateView.edit(e),this.show(this.structureTemplateView)},templates:function(){this.show(this.templatesView)},createTemplate:function(){this.templateView.create(),this.show(this.templateView)},editTemplate:function(e){this.templateView.edit(e),this.show(this.templateView)},editContent:function(e){this.pageView.editContent(e),this.show(this.pageView)},editPage:function(e){this.pageView.editPage(e),this.show(this.pageView)},profile:function(e){this.show(this.profileView)},plugins:function(){this.show(this.pluginsView)},pluginsConfig:function(){this.show(this.pluginsConfigView)},pluginsForms:function(){this.show(this.pluginsFormsView)},pluginsFormNew:function(){this.pluginsFormView.setId(""),this.show(this.pluginsFormView)},pluginsFormEdit:function(e){this.pluginsFormView.setId(e),this.show(this.pluginsFormView)},pluginsSeoUrls:function(){this.show(this.pluginsSeoUrlsView)},pluginsAddons:function(e){this.pluginsAddonsView.setAddonsId(e),this.show(this.pluginsAddonsView)},config:function(){this.show(this.configView)},folders:function(){this.show(this.foldersView)},editFolder:function(e){this.folderView.setFolderId(e),this.folderView.setFolderParentId(""),this.show(this.folderView)},addFolder:function(e){this.folderView.setFolderId(""),this.folderView.setFolderParentId(e),this.show(this.folderView)},editFile:function(e){this.fileView.setFileId(e),this.fileView.setFolderId(""),this.show(this.fileView)},addFile:function(e){this.fileView.setFileId(""),this.fileView.setFolderId(e),this.show(this.fileView)},logout:function(){Heiduc.jsonrpc.loginFrontService.logout(function(e,t){if(Heiduc.serviceFailed(t))return;e.result=="success"?location.href="/cms":Heiduc.showServiceMessages(e)})},plugin:function(e){this.pluginView.setPluginId(e),this.show(this.pluginView)},login:function(){Heiduc.jsonrpcInitialized=!1,Heiduc.createJSONRpc(),Heiduc.initJSONRpcSystem(Heiduc.initBackServices),Heiduc.initJSONRpc(function(){try{Heiduc.jsonrpc.userService.getLoggedIn(function(e){Heiduc.app.user=e;var t=_.template(S,{messages:messages});$("#topbar").html(_.template(E,{locale:t,Heiduc:Heiduc,messages:messages})),Heiduc.app.trigger("renderSide"),Backbone.history.start()||Heiduc.app.navigate("index",!0)})}catch(e){alert(e)}})},renderSide:function(){try{var e=_.template(S,{messages:messages});Heiduc.jsonrpc.pluginService.select(function(e){plugins=e.list;var t="";$.each(plugins,function(e,n){var r="#plugin/"+n.id;n.configURL&&(r="#addons/"+n.name);var i=n.role==null?[]:n.role.split(",");if(Heiduc.app.user.user&&$.inArray("ALL",i)<0&&$.inArray("USER",i)<0)return!0;t+='<li><a href="'+r+'">'+Heiduc.message(n.title)+"</a></li>\r\n"});var n=_.template(S,{messages:messages});$("#topbar").after(_.template(x,{locale:n,Heiduc:Heiduc,messages:messages,plugins:t})),$(".sidebar .nicescroll .wrapper").niceScroll({scrollspeed:26,cursorcolor:"#429eee",cursorborder:0,horizrailenabled:!1,railoffset:{left:-1}}),$(".nav-sidebar .submenu > a").on("click",function(e){e.preventDefault();var t=$(this).closest(".sidebar"),n=t.find(".submenu .in");n.collapse("hide"),$(this).next("ul").show().collapse("show"),n.hide(),$(this).hasClass("open")&&$(this).removeClass("open"),t.find("a.open").removeClass("open"),$(this).addClass("open")}),$("sidebar").find(".collapse").on("shown.bs.collapse",function(){$(".sidebar").getNiceScroll().show().onResize()}),$(".sidebar-switch").on("click",function(){parseInt($(window).width())<1169?($(".wrapper").removeClass("sidebar-toggle"),$(".wrapper").toggleClass("sidebar-toggle-sm")):parseInt($(window).width())>1170&&$(".wrapper").toggleClass("sidebar-toggle")}),$(window).on("resize",function(){$(window).width()>1169?$(".wrapper").removeClass("sidebar-toggle-sm"):$(window).width()<1170&&$(".wrapper").removeClass("sidebar-toggle")})})}catch(t){alert(t)}},pluginRouter:{navigate:function(e,t){hashStrip=/^#*/;var n=window.location.hash,r=(n||"").replace(hashStrip,"");return e.routes instanceof Object&&e.routes.hasOwnProperty(r)&&(e.navigate("loader"),e.navigate(r,t),e.route("addons/*path","pluginsAddons",function(e){Heiduc.app.pluginsAddons(e)})),e}}})}),function(e,t,n){function i(e){return e}function s(e){return o(decodeURIComponent(e.replace(r," ")))}function o(e){return e.indexOf('"')===0&&(e=e.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\")),e}function u(e){return a.json?JSON.parse(e):e}var r=/\+/g,a=e.cookie=function(r,o,f){if(o!==n){f=e.extend({},a.defaults,f),o===null&&(f.expires=-1);if(typeof f.expires=="number"){var l=f.expires,c=f.expires=new Date;c.setDate(c.getDate()+l)}return o=a.json?JSON.stringify(o):String(o),t.cookie=[encodeURIComponent(r),"=",a.raw?o:encodeURIComponent(o),f.expires?"; expires="+f.expires.toUTCString():"",f.path?"; path="+f.path:"",f.domain?"; domain="+f.domain:"",f.secure?"; secure":""].join("")}var h=a.raw?i:s,p=t.cookie.split("; "),d=r?null:{};for(var v=0,m=p.length;v<m;v++){var g=p[v].split("="),y=h(g.shift()),b=h(g.join("="));if(r&&r===y){d=u(b);break}r||(d[y]=u(b))}return d};a.defaults={},e.removeCookie=function(t,n){return e.cookie(t)!==null?(e.cookie(t,null,n),!0):!1}}(jQuery,document),define("jquery.cookie",function(){}),function(e){window.DOMParser==undefined&&window.ActiveXObject&&(DOMParser=function(){},DOMParser.prototype.parseFromString=function(e){var t=new ActiveXObject("Microsoft.XMLDOM");return t.async="false",t.loadXML(e),t}),e.xmlDOM=function(t,n){try{var r=(new DOMParser).parseFromString(t,"text/xml");if(!e.isXMLDoc(r))throw"Unable to parse XML";var i=e("parsererror",r);if(i.length==1)throw"Error: "+e(r).text()}catch(s){var o=s.name==undefined?s:s.name+": "+s.message;return e.isFunction(n)?n(o):e(document).trigger("xmlParseError",[o]),e([])}return e(r)}}(jQuery),define("jquery.xmldom",function(){}),function(e){function h(t,n){throw e.extend(t,n),t}function p(e){var n=[];if(c.call(e)!==s)return t;for(var r=0,i=e.length;r<i;r++)n[r]=e[r].jqote_id;return n.length?n.sort().join(".").replace(/(\b\d+\b)\.(?:\1(\.|$))+/g,"$1$2"):t}function d(n,r){var i,o=[],r=r||f,a=c.call(n);if(a===u)return n.jqote_id?[n]:t;if(a!==s)return[e.jqotec(n,r)];if(a===s)for(var l=0,h=n.length;l<h;l++)return o.length?o:t}var t=!1,n="UndefinedTemplateError",r="TemplateCompilationError",i="TemplateExecutionError",s="[object Array]",o="[object String]",u="[object Function]",a=1,f="%",l=/^[^<]*(<[\w\W]+>)[^>]*$/,c=Object.prototype.toString;e.fn.extend({jqote:function(t,n){var t=c.call(t)===s?t:[t],r="";return this.each(function(i){var s=e.jqotec(this,n);for(var o=0;o<t.length;o++)r+=s.call(t[o],i,o,t,s)}),r}}),e.each({app:"append",pre:"prepend",sub:"html"},function(t,n){e.fn["jqote"+t]=function(r,i,s){var o,u,a=e.jqote(r,i,s),f=l.test(a)?e:function(t){return e(document.createTextNode(t))};return!(o=p(d(r)))||(u=new RegExp("(^|\\.)"+o.split(".").join("\\.(.*)?")+"(\\.|$)")),this.each(function(){var r=f(a);e(this)[n](r),(r[0].nodeType===3?e(this):r).trigger("jqote."+t,[r,u])})}}),e.extend({jqote:function(e,r,i){var o="",i=i||f,u=d(e);u===t&&h(new Error("Empty or undefined template passed to $.jqote"),{type:n}),r=c.call(r)!==s?[r]:r;for(var a=0,l=u.length;a<l;a++)for(var p=0;p<r.length;p++)o+=u[a].call(r[p],a,p,r,u[a]);return o},jqotec:function(t,s){var u,p,d,s=s||f,v=c.call(t);if(v===o&&l.test(t)){p=d=t;if(u=e.jqotecache[t])return u}else{p=v===o||t.nodeType?e(t):t instanceof jQuery?t:null,(!p[0]||!(d=p[0].innerHTML)&&!(d=p.text()))&&h(new Error("Empty or undefined template passed to $.jqotec"),{type:n});if(u=e.jqotecache[e.data(p[0],"jqote_id")])return u}var m="",g,y=d.replace(/\s*<!\[CDATA\[\s*|\s*\]\]>\s*|[\r\n\t]/g,"").split("<"+s).join(s+">").split(s+">");for(var b=0,w=y.length;b<w;b++)m+=y[b].charAt(0)!==""?"out+='"+y[b].replace(/(\\|["'])/g,"\\$1")+"'":y[b].charAt(1)==="="?";out+=("+y[b].substr(2)+");":y[b].charAt(1)==="!"?";out+=$.jqotenc(("+y[b].substr(2)+"));":";"+y[b].substr(1);m="try{"+('var out="";'+m+";return out;").split("out+='';").join("").split('var out="";out+=').join("var out=")+'}catch(e){e.type="'+i+'";e.args=arguments;e.template=arguments.callee.toString();throw e;}';try{var E=new Function("i, j, data, fn",m)}catch(p){h(p,{type:r})}return g=p instanceof jQuery?e.data(p[0],"jqote_id",a):p,e.jqotecache[g]=(E.jqote_id=a++,E)},jqotefn:function(n){var r=c.call(n),i=r===o&&l.test(n)?n:e.data(e(n)[0],"jqote_id");return e.jqotecache[i]||t},jqotetag:function(e){c.call(e)===o&&(f=e)},jqotenc:function(e){return e.toString().replace(/&(?!\w+;)/g,"&#38;").split("<").join("&#60;").split(">").join("&#62;").split('"').join("&#34;").split("'").join("&#39;")},jqotecache:{}}),e.event.special.jqote={add:function(e){var t,n=e.handler,r=e.data?c.call(e.data)!==s?[e.data]:e.data:[];e.namespace||(e.namespace="app.pre.sub");if(!r.length||!(t=p(d(r))))return;e.handler=function(e,r,i){return!i||i.test(t)?n.apply(this,[e,r]):null}}}}(jQuery),define("jquery.jquote2",function(){}),Heiduc==undefined&&alert(messages("heiduc.namespace_error")),Heiduc.AUTOSAVE_TIMEOUT=60,Heiduc.ENGLISH_CODE="en",Heiduc.info=function(e){noty({text:e,layout:"bottomRight",type:"success",theme:"tisa_theme",timeout:1e4,closeWith:["button"],maxVisible:10})},Heiduc.error=function(e){noty({text:e,layout:"bottomRight",type:"error",theme:"tisa_theme",timeout:!1,closeWith:["button"],maxVisible:10})},Heiduc.infoMessage=function(e,t){noty({text:t,layout:"bottomRight",type:"info",theme:"tisa_theme",timeout:1e3,dismissQueue:!1,closeWith:["click"],maxVisible:10})},Heiduc.errorMessage=function(e,t){noty({text:t,layout:"bottomRight",type:"error",theme:"tisa_theme",dismissQueue:!1,timeout:3e3,closeWith:["click"],maxVisible:10})},Heiduc.errorMessages=function(e,t){var n="";$.each(t,function(e,t){n+=(e==0?"":"<br />")+t}),Heiduc.errorMessage(e,n)},Heiduc.showServiceMessages=function(e){e.result=="success"?(Heiduc.info(e.message),e.messages.list.length>0&&$.each(e.messages.list,function(e,t){Heiduc.info(t)})):(Heiduc.error(e.message),e.messages.list.length>0&&$.each(e.messages.list,function(e,t){Heiduc.error(t)}))},Heiduc.idMap=function(e){var t={};return $.each(e,function(e,n){t[n.id]=n}),t},Heiduc.message=function(e){return e.charAt(0)=="$"?messages(e.substr(1)):e},Heiduc.addCSSFile=function(e){$("head").append('<link rel="stylesheet" href="'+e+'" type="text/css" />')},Heiduc.addCSSFiles=function(e){$.each(e,function(e,t){Heiduc.addCSSFile(t)})},Heiduc.removeCSSFile=function(e){$('head link[href="'+e+'"]').remove()},Heiduc.removeCSSFiles=function(e){$.each(e,function(e,t){Heiduc.removeCSSFile(t)})},Heiduc.clientId=Heiduc.generateGUID(),Heiduc.channel=null,Heiduc.socket=null,Heiduc.initChannel=function(e,t,n,r){var i=atmosphere;Heiduc.socket!=null&&i.unsubscribe();var s="websocket",o={url:"/_ah/channel/"+Heiduc.clientId,contentType:"application/json",logLevel:"error",transport:s,fallbackTransport:"long-polling",trackMessageLength:!1,reconnectInterval:5e3,enableXDR:!0,enableProtocol:!0,timeout:6e4};o.onOpen=e,o.onMessage=t,o.onError=n,o.onClose=r;var u=i.subscribe(o);Heiduc.socket=u},Heiduc.sendChannelCommand=function(e,t){var n="&clientId="+Heiduc.clientId;$.each(t,function(e,t){n+="&"+e+"="+t});var r=new XMLHttpRequest;r.open("POST","/_ah/channelCommand?cmd="+e+n,!0),r.send()},Heiduc.changeLanguageCall=function(e){Heiduc.jsonrpc.loginFrontService.setLanguage(function(e){location.reload()},e)},define("cms",function(){}),Heiduc==undefined&&alert(messages("heiduc.namespace_error")),Heiduc.backServiceFailed=function(e){return e!=null?(Heiduc.error(messages("heiduc.cant_connect")+" "+e+" "+e.message+" "+e.code+" "+e.msg),!0):!1},Heiduc.serviceHandler=function(e){return function(){var t=arguments[0],n=arguments;n[0]=function(e,n){$("#loading").hide();if(Heiduc.backServiceFailed(n))return;t(e)},$("#loading").show(),e.apply(null,n)}},Heiduc.setupJSONRpcHooks=function(){for(var e in Heiduc.jsonrpc)if(e.indexOf("Service")!=-1&&e.indexOf("FrontService")==-1)for(var t in Heiduc.jsonrpc[e])if(typeof Heiduc.jsonrpc[e][t]=="function"){var n=Heiduc.jsonrpc[e][t];Heiduc.jsonrpc[e][t]=Heiduc.serviceHandler(n)}},Heiduc.initBackServices=function(){Heiduc.setupJSONRpcHooks()},define("back-services",function(){}),function(e){function t(e,t){return function(n){return a(e.call(this,n),t)}}function n(e,t){return function(n){return this.lang().ordinal(e.call(this,n),t)}}function r(){}function i(e){w(e),o(this,e)}function s(e){var t=d(e),n=t.year||0,r=t.month||0,i=t.week||0,s=t.day||0,o=t.hour||0,u=t.minute||0,a=t.second||0,f=t.millisecond||0;this._input=e,this._milliseconds=+f+1e3*a+6e4*u+36e5*o,this._days=+s+7*i,this._months=+r+12*n,this._data={},this._bubble()}function o(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return t.hasOwnProperty("toString")&&(e.toString=t.toString),t.hasOwnProperty("valueOf")&&(e.valueOf=t.valueOf),e}function u(e){return 0>e?Math.ceil(e):Math.floor(e)}function a(e,t){for(var n=e+"";n.length<t;)n="0"+n;return n}function f(e,t,n,r){var i,s,o=t._milliseconds,u=t._days,a=t._months;o&&e._d.setTime(+e._d+o*n),(u||a)&&(i=e.minute(),s=e.hour()),u&&e.date(e.date()+u*n),a&&e.month(e.month()+a*n),o&&!r&&tt.updateOffset(e),(u||a)&&(e.minute(i),e.hour(s))}function l(e){return"[object Array]"===Object.prototype.toString.call(e)}function c(e){return"[object Date]"===Object.prototype.toString.call(e)||e instanceof Date}function h(e,t,n){var r,i=Math.min(e.length,t.length),s=Math.abs(e.length-t.length),o=0;for(r=0;i>r;r++)(n&&e[r]!==t[r]||!n&&m(e[r])!==m(t[r]))&&o++;return o+s}function p(e){if(e){var t=e.toLowerCase().replace(/(.)s$/,"$1");e=Bt[e]||jt[t]||t}return e}function d(e){var t,n,r={};for(n in e)e.hasOwnProperty(n)&&(t=p(n),t&&(r[t]=e[n]));return r}function v(t){var n,r;if(0===t.indexOf("week"))n=7,r="day";else{if(0!==t.indexOf("month"))return;n=12,r="month"}tt[t]=function(i,s){var o,u,a=tt.fn._lang[t],f=[];if("number"==typeof i&&(s=i,i=e),u=function(e){var t=tt().utc().set(r,e);return a.call(tt.fn._lang,t,i||"")},null!=s)return u(s);for(o=0;n>o;o++)f.push(u(o));return f}}function m(e){var t=+e,n=0;return 0!==t&&isFinite(t)&&(n=t>=0?Math.floor(t):Math.ceil(t)),n}function g(e,t){return(new Date(Date.UTC(e,t+1,0))).getUTCDate()}function y(e){return b(e)?366:365}function b(e){return 0===e%4&&0!==e%100||0===e%400}function w(e){var t;e._a&&-2===e._pf.overflow&&(t=e._a[ot]<0||e._a[ot]>11?ot:e._a[ut]<1||e._a[ut]>g(e._a[st],e._a[ot])?ut:e._a[at]<0||e._a[at]>23?at:e._a[ft]<0||e._a[ft]>59?ft:e._a[lt]<0||e._a[lt]>59?lt:e._a[ct]<0||e._a[ct]>999?ct:-1,e._pf._overflowDayOfYear&&(st>t||t>ut)&&(t=ut),e._pf.overflow=t)}function E(e){e._pf={empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1}}function S(e){return null==e._isValid&&(e._isValid=!isNaN(e._d.getTime())&&e._pf.overflow<0&&!e._pf.empty&&!e._pf.invalidMonth&&!e._pf.nullInput&&!e._pf.invalidFormat&&!e._pf.userInvalidated,e._strict&&(e._isValid=e._isValid&&0===e._pf.charsLeftOver&&0===e._pf.unusedTokens.length)),e._isValid}function x(e){return e?e.toLowerCase().replace("_","-"):e}function T(e,t){return t.abbr=e,ht[e]||(ht[e]=new r),ht[e].set(t),ht[e]}function N(e){delete ht[e]}function C(e){var t,n,r,i,s=0,o=function(e){if(!ht[e]&&pt)try{require("./lang/"+e)}catch(t){}return ht[e]};if(!e)return tt.fn._lang;if(!l(e)){if(n=o(e))return n;e=[e]}for(;s<e.length;){for(i=x(e[s]).split("-"),t=i.length,r=x(e[s+1]),r=r?r.split("-"):null;t>0;){if(n=o(i.slice(0,t).join("-")))return n;if(r&&r.length>=t&&h(i,r,!0)>=t-1)break;t--}s++}return tt.fn._lang}function k(e){return e.match(/\[[\s\S]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"")}function L(e){var t,n,r=e.match(gt);for(t=0,n=r.length;n>t;t++)r[t]=Rt[r[t]]?Rt[r[t]]:k(r[t]);return function(i){var s="";for(t=0;n>t;t++)s+=r[t]instanceof Function?r[t].call(i,e):r[t];return s}}function A(e,t){return e.isValid()?(t=O(t,e.lang()),Ft[t]||(Ft[t]=L(t)),Ft[t](e)):e.lang().invalidDate()}function O(e,t){function n(e){return t.longDateFormat(e)||e}var r=5;for(yt.lastIndex=0;r>=0&&yt.test(e);)e=e.replace(yt,n),yt.lastIndex=0,r-=1;return e}function M(e,t){var n;switch(e){case"DDDD":return Et;case"YYYY":case"GGGG":case"gggg":return St;case"YYYYY":case"GGGGG":case"ggggg":return xt;case"S":case"SS":case"SSS":case"DDD":return wt;case"MMM":case"MMMM":case"dd":case"ddd":case"dddd":return Nt;case"a":case"A":return C(t._l)._meridiemParse;case"X":return Lt;case"Z":case"ZZ":return Ct;case"T":return kt;case"SSSS":return Tt;case"MM":case"DD":case"YY":case"GG":case"gg":case"HH":case"hh":case"mm":case"ss":case"M":case"D":case"d":case"H":case"h":case"m":case"s":case"w":case"ww":case"W":case"WW":case"e":case"E":return bt;default:return n=new RegExp(I(F(e.replace("\\","")),"i"))}}function _(e){var t=(Ct.exec(e)||[])[0],n=(t+"").match(Dt)||["-",0,0],r=+(60*n[1])+m(n[2]);return"+"===n[0]?-r:r}function D(e,t,n){var r,i=n._a;switch(e){case"M":case"MM":null!=t&&(i[ot]=m(t)-1);break;case"MMM":case"MMMM":r=C(n._l).monthsParse(t),null!=r?i[ot]=r:n._pf.invalidMonth=t;break;case"D":case"DD":null!=t&&(i[ut]=m(t));break;case"DDD":case"DDDD":null!=t&&(n._dayOfYear=m(t));break;case"YY":i[st]=m(t)+(m(t)>68?1900:2e3);break;case"YYYY":case"YYYYY":i[st]=m(t);break;case"a":case"A":n._isPm=C(n._l).isPM(t);break;case"H":case"HH":case"h":case"hh":i[at]=m(t);break;case"m":case"mm":i[ft]=m(t);break;case"s":case"ss":i[lt]=m(t);break;case"S":case"SS":case"SSS":case"SSSS":i[ct]=m(1e3*("0."+t));break;case"X":n._d=new Date(1e3*parseFloat(t));break;case"Z":case"ZZ":n._useUTC=!0,n._tzm=_(t);break;case"w":case"ww":case"W":case"WW":case"d":case"dd":case"ddd":case"dddd":case"e":case"E":e=e.substr(0,1);case"gg":case"gggg":case"GG":case"GGGG":case"GGGGG":e=e.substr(0,2),t&&(n._w=n._w||{},n._w[e]=t)}}function P(e){var t,n,r,i,s,o,u,a,f,l,c=[];if(!e._d){for(r=B(e),e._w&&null==e._a[ut]&&null==e._a[ot]&&(s=function(t){return t?t.length<3?parseInt(t,10)>68?"19"+t:"20"+t:t:null==e._a[st]?tt().weekYear():e._a[st]},o=e._w,null!=o.GG||null!=o.W||null!=o.E?u=K(s(o.GG),o.W||1,o.E,4,1):(a=C(e._l),f=null!=o.d?X(o.d,a):null!=o.e?parseInt(o.e,10)+a._week.dow:0,l=parseInt(o.w,10)||1,null!=o.d&&f<a._week.dow&&l++,u=K(s(o.gg),l,f,a._week.doy,a._week.dow)),e._a[st]=u.year,e._dayOfYear=u.dayOfYear),e._dayOfYear&&(i=null==e._a[st]?r[st]:e._a[st],e._dayOfYear>y(i)&&(e._pf._overflowDayOfYear=!0),n=W(i,0,e._dayOfYear),e._a[ot]=n.getUTCMonth(),e._a[ut]=n.getUTCDate()),t=0;3>t&&null==e._a[t];++t)e._a[t]=c[t]=r[t];for(;7>t;t++)e._a[t]=c[t]=null==e._a[t]?2===t?1:0:e._a[t];c[at]+=m((e._tzm||0)/60),c[ft]+=m((e._tzm||0)%60),e._d=(e._useUTC?W:z).apply(null,c)}}function H(e){var t;e._d||(t=d(e._i),e._a=[t.year,t.month,t.day,t.hour,t.minute,t.second,t.millisecond],P(e))}function B(e){var t=new Date;return e._useUTC?[t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()]:[t.getFullYear(),t.getMonth(),t.getDate()]}function j(e){e._a=[],e._pf.empty=!0;var t,n,r,i,s,o=C(e._l),u=""+e._i,a=u.length,f=0;for(r=O(e._f,o).match(gt)||[],t=0;t<r.length;t++)i=r[t],n=(M(i,e).exec(u)||[])[0],n&&(s=u.substr(0,u.indexOf(n)),s.length>0&&e._pf.unusedInput.push(s),u=u.slice(u.indexOf(n)+n.length),f+=n.length),Rt[i]?(n?e._pf.empty=!1:e._pf.unusedTokens.push(i),D(i,n,e)):e._strict&&!n&&e._pf.unusedTokens.push(i);e._pf.charsLeftOver=a-f,u.length>0&&e._pf.unusedInput.push(u),e._isPm&&e._a[at]<12&&(e._a[at]+=12),e._isPm===!1&&12===e._a[at]&&(e._a[at]=0),P(e),w(e)}function F(e){return e.replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(e,t,n,r,i){return t||n||r||i})}function I(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function q(e){var t,n,r,i,s;if(0===e._f.length)return e._pf.invalidFormat=!0,e._d=new Date(0/0),void 0;for(i=0;i<e._f.length;i++)s=0,t=o({},e),E(t),t._f=e._f[i],j(t),S(t)&&(s+=t._pf.charsLeftOver,s+=10*t._pf.unusedTokens.length,t._pf.score=s,(null==r||r>s)&&(r=s,n=t));o(e,n||t)}function R(e){var t,n=e._i,r=At.exec(n);if(r){for(e._pf.iso=!0,t=4;t>0;t--)if(r[t]){e._f=Mt[t-1]+(r[6]||" ");break}for(t=0;4>t;t++)if(_t[t][1].exec(n)){e._f+=_t[t][0];break}Ct.exec(n)&&(e._f+="Z"),j(e)}else e._d=new Date(n)}function U(t){var n=t._i,r=dt.exec(n);n===e?t._d=new Date:r?t._d=new Date(+r[1]):"string"==typeof n?R(t):l(n)?(t._a=n.slice(0),P(t)):c(n)?t._d=new Date(+n):"object"==typeof n?H(t):t._d=new Date(n)}function z(e,t,n,r,i,s,o){var u=new Date(e,t,n,r,i,s,o);return 1970>e&&u.setFullYear(e),u}function W(e){var t=new Date(Date.UTC.apply(null,arguments));return 1970>e&&t.setUTCFullYear(e),t}function X(e,t){if("string"==typeof e)if(isNaN(e)){if(e=t.weekdaysParse(e),"number"!=typeof e)return null}else e=parseInt(e,10);return e}function V(e,t,n,r,i){return i.relativeTime(t||1,!!n,e,r)}function $(e,t,n){var r=it(Math.abs(e)/1e3),i=it(r/60),s=it(i/60),o=it(s/24),u=it(o/365),a=45>r&&["s",r]||1===i&&["m"]||45>i&&["mm",i]||1===s&&["h"]||22>s&&["hh",s]||1===o&&["d"]||25>=o&&["dd",o]||45>=o&&["M"]||345>o&&["MM",it(o/30)]||1===u&&["y"]||["yy",u];return a[2]=t,a[3]=e>0,a[4]=n,V.apply({},a)}function J(e,t,n){var r,i=n-t,s=n-e.day();return s>i&&(s-=7),i-7>s&&(s+=7),r=tt(e).add("d",s),{week:Math.ceil(r.dayOfYear()/7),year:r.year()}}function K(e,t,n,r,i){var s,o,u=(new Date(Date.UTC(e,0))).getUTCDay();return n=null!=n?n:i,s=i-u+(u>r?7:0),o=7*(t-1)+(n-i)+s+1,{year:o>0?e:e-1,dayOfYear:o>0?o:y(e-1)+o}}function Q(e){var t=e._i,n=e._f;return"undefined"==typeof e._pf&&E(e),null===t?tt.invalid({nullInput:!0}):("string"==typeof t&&(e._i=t=C().preparse(t)),tt.isMoment(t)?(e=o({},t),e._d=new Date(+t._d)):n?l(n)?q(e):j(e):U(e),new i(e))}function G(e,t){tt.fn[e]=tt.fn[e+"s"]=function(e){var n=this._isUTC?"UTC":"";return null!=e?(this._d["set"+n+t](e),tt.updateOffset(this),this):this._d["get"+n+t]()}}function Y(e){tt.duration.fn[e]=function(){return this._data[e]}}function Z(e,t){tt.duration.fn["as"+e]=function(){return+this/t}}function et(e){var t=!1,n=tt;"undefined"==typeof ender&&(this.moment=e?function(){return!t&&console&&console.warn&&(t=!0,console.warn("Accessing Moment through the global scope is deprecated, and will be removed in an upcoming release.")),n.apply(null,arguments)}:tt)}for(var tt,nt,rt="2.4.0",it=Math.round,st=0,ot=1,ut=2,at=3,ft=4,lt=5,ct=6,ht={},pt="undefined"!=typeof module&&module.exports,dt=/^\/?Date\((\-?\d+)/i,vt=/(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/,mt=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/,gt=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,4}|X|zz?|ZZ?|.)/g,yt=/(\[[^\[]*\])|(\\)?(LT|LL?L?L?|l{1,4})/g,bt=/\d\d?/,wt=/\d{1,3}/,Et=/\d{3}/,St=/\d{1,4}/,xt=/[+\-]?\d{1,6}/,Tt=/\d+/,Nt=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,Ct=/Z|[\+\-]\d\d:?\d\d/i,kt=/T/i,Lt=/[\+\-]?\d+(\.\d{1,3})?/,At=/^\s*\d{4}-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d:?\d\d|Z)?)?$/,Ot="YYYY-MM-DDTHH:mm:ssZ",Mt=["YYYY-MM-DD","GGGG-[W]WW","GGGG-[W]WW-E","YYYY-DDD"],_t=[["HH:mm:ss.SSSS",/(T| )\d\d:\d\d:\d\d\.\d{1,3}/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],Dt=/([\+\-]|\d\d)/gi,Pt="Date|Hours|Minutes|Seconds|Milliseconds".split("|"),Ht={Milliseconds:1,Seconds:1e3,Minutes:6e4,Hours:36e5,Days:864e5,Months:2592e6,Years:31536e6},Bt={ms:"millisecond",s:"second",m:"minute",h:"hour",d:"day",D:"date",w:"week",W:"isoWeek",M:"month",y:"year",DDD:"dayOfYear",e:"weekday",E:"isoWeekday",gg:"weekYear",GG:"isoWeekYear"},jt={dayofyear:"dayOfYear",isoweekday:"isoWeekday",isoweek:"isoWeek",weekyear:"weekYear",isoweekyear:"isoWeekYear"},Ft={},It="DDD w W M D d".split(" "),qt="M D H h m s w W".split(" "),Rt={M:function(){return this.month()+1},MMM:function(e){return this.lang().monthsShort(this,e)},MMMM:function(e){return this.lang().months(this,e)},D:function(){return this.date()},DDD:function(){return this.dayOfYear()},d:function(){return this.day()},dd:function(e){return this.lang().weekdaysMin(this,e)},ddd:function(e){return this.lang().weekdaysShort(this,e)},dddd:function(e){return this.lang().weekdays(this,e)},w:function(){return this.week()},W:function(){return this.isoWeek()},YY:function(){return a(this.year()%100,2)},YYYY:function(){return a(this.year(),4)},YYYYY:function(){return a(this.year(),5)},gg:function(){return a(this.weekYear()%100,2)},gggg:function(){return this.weekYear()},ggggg:function(){return a(this.weekYear(),5)},GG:function(){return a(this.isoWeekYear()%100,2)},GGGG:function(){return this.isoWeekYear()},GGGGG:function(){return a(this.isoWeekYear(),5)},e:function(){return this.weekday()},E:function(){return this.isoWeekday()},a:function(){return this.lang().meridiem(this.hours(),this.minutes(),!0)},A:function(){return this.lang().meridiem(this.hours(),this.minutes(),!1)},H:function(){return this.hours()},h:function(){return this.hours()%12||12},m:function(){return this.minutes()},s:function(){return this.seconds()},S:function(){return m(this.milliseconds()/100)},SS:function(){return a(m(this.milliseconds()/10),2)},SSS:function(){return a(this.milliseconds(),3)},SSSS:function(){return a(this.milliseconds(),3)},Z:function(){var e=-this.zone(),t="+";return 0>e&&(e=-e,t="-"),t+a(m(e/60),2)+":"+a(m(e)%60,2)},ZZ:function(){var e=-this.zone(),t="+";return 0>e&&(e=-e,t="-"),t+a(m(10*e/6),4)},z:function(){return this.zoneAbbr()},zz:function(){return this.zoneName()},X:function(){return this.unix()}},Ut=["months","monthsShort","weekdays","weekdaysShort","weekdaysMin"];It.length;)nt=It.pop(),Rt[nt+"o"]=n(Rt[nt],nt);for(;qt.length;)nt=qt.pop(),Rt[nt+nt]=t(Rt[nt],2);for(Rt.DDDD=t(Rt.DDD,3),o(r.prototype,{set:function(e){var t,n;for(n in e)t=e[n],"function"==typeof t?this[n]=t:this["_"+n]=t},_months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),months:function(e){return this._months[e.month()]},_monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),monthsShort:function(e){return this._monthsShort[e.month()]},monthsParse:function(e){var t,n,r;for(this._monthsParse||(this._monthsParse=[]),t=0;12>t;t++)if(this._monthsParse[t]||(n=tt.utc([2e3,t]),r="^"+this.months(n,"")+"|^"+this.monthsShort(n,""),this._monthsParse[t]=new RegExp(r.replace(".",""),"i")),this._monthsParse[t].test(e))return t},_weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdays:function(e){return this._weekdays[e.day()]},_weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysShort:function(e){return this._weekdaysShort[e.day()]},_weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),weekdaysMin:function(e){return this._weekdaysMin[e.day()]},weekdaysParse:function(e){var t,n,r;for(this._weekdaysParse||(this._weekdaysParse=[]),t=0;7>t;t++)if(this._weekdaysParse[t]||(n=tt([2e3,1]).day(t),r="^"+this.weekdays(n,"")+"|^"+this.weekdaysShort(n,"")+"|^"+this.weekdaysMin(n,""),this._weekdaysParse[t]=new RegExp(r.replace(".",""),"i")),this._weekdaysParse[t].test(e))return t},_longDateFormat:{LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D YYYY",LLL:"MMMM D YYYY LT",LLLL:"dddd, MMMM D YYYY LT"},longDateFormat:function(e){var t=this._longDateFormat[e];return!t&&this._longDateFormat[e.toUpperCase()]&&(t=this._longDateFormat[e.toUpperCase()].replace(/MMMM|MM|DD|dddd/g,function(e){return e.slice(1)}),this._longDateFormat[e]=t),t},isPM:function(e){return"p"===(e+"").toLowerCase().charAt(0)},_meridiemParse:/[ap]\.?m?\.?/i,meridiem:function(e,t,n){return e>11?n?"pm":"PM":n?"am":"AM"},_calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},calendar:function(e,t){var n=this._calendar[e];return"function"==typeof n?n.apply(t):n},_relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},relativeTime:function(e,t,n,r){var i=this._relativeTime[n];return"function"==typeof i?i(e,t,n,r):i.replace(/%d/i,e)},pastFuture:function(e,t){var n=this._relativeTime[e>0?"future":"past"];return"function"==typeof n?n(t):n.replace(/%s/i,t)},ordinal:function(e){return this._ordinal.replace("%d",e)},_ordinal:"%d",preparse:function(e){return e},postformat:function(e){return e},week:function(e){return J(e,this._week.dow,this._week.doy).week},_week:{dow:0,doy:6},_invalidDate:"Invalid date",invalidDate:function(){return this._invalidDate}}),tt=function(t,n,r,i){return"boolean"==typeof r&&(i=r,r=e),Q({_i:t,_f:n,_l:r,_strict:i,_isUTC:!1})},tt.utc=function(t,n,r,i){var s;return"boolean"==typeof r&&(i=r,r=e),s=Q({_useUTC:!0,_isUTC:!0,_l:r,_i:t,_f:n,_strict:i}).utc()},tt.unix=function(e){return tt(1e3*e)},tt.duration=function(e,t){var n,r,i,o=tt.isDuration(e),u="number"==typeof e,a=o?e._input:u?{}:e,f=null;return u?t?a[t]=e:a.milliseconds=e:(f=vt.exec(e))?(n="-"===f[1]?-1:1,a={y:0,d:m(f[ut])*n,h:m(f[at])*n,m:m(f[ft])*n,s:m(f[lt])*n,ms:m(f[ct])*n}):(f=mt.exec(e))&&(n="-"===f[1]?-1:1,i=function(e){var t=e&&parseFloat(e.replace(",","."));return(isNaN(t)?0:t)*n},a={y:i(f[2]),M:i(f[3]),d:i(f[4]),h:i(f[5]),m:i(f[6]),s:i(f[7]),w:i(f[8])}),r=new s(a),o&&e.hasOwnProperty("_lang")&&(r._lang=e._lang),r},tt.version=rt,tt.defaultFormat=Ot,tt.updateOffset=function(){},tt.lang=function(e,t){var n;return e?(t?T(x(e),t):null===t?(N(e),e="en"):ht[e]||C(e),n=tt.duration.fn._lang=tt.fn._lang=C(e),n._abbr):tt.fn._lang._abbr},tt.langData=function(e){return e&&e._lang&&e._lang._abbr&&(e=e._lang._abbr),C(e)},tt.isMoment=function(e){return e instanceof i},tt.isDuration=function(e){return e instanceof s},nt=Ut.length-1;nt>=0;--nt)v(Ut[nt]);for(tt.normalizeUnits=function(e){return p(e)},tt.invalid=function(e){var t=tt.utc(0/0);return null!=e?o(t._pf,e):t._pf.userInvalidated=!0,t},tt.parseZone=function(e){return tt(e).parseZone()},o(tt.fn=i.prototype,{clone:function(){return tt(this)},valueOf:function(){return+this._d+6e4*(this._offset||0)},unix:function(){return Math.floor(+this/1e3)},toString:function(){return this.clone().lang("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},toDate:function(){return this._offset?new Date(+this):this._d},toISOString:function(){return A(tt(this).utc(),"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]")},toArray:function(){var e=this;return[e.year(),e.month(),e.date(),e.hours(),e.minutes(),e.seconds(),e.milliseconds()]},isValid:function(){return S(this)},isDSTShifted:function(){return this._a?this.isValid()&&h(this._a,(this._isUTC?tt.utc(this._a):tt(this._a)).toArray())>0:!1},parsingFlags:function(){return o({},this._pf)},invalidAt:function(){return this._pf.overflow},utc:function(){return this.zone(0)},local:function(){return this.zone(0),this._isUTC=!1,this},format:function(e){var t=A(this,e||tt.defaultFormat);return this.lang().postformat(t)},add:function(e,t){var n;return n="string"==typeof e?tt.duration(+t,e):tt.duration(e,t),f(this,n,1),this},subtract:function(e,t){var n;return n="string"==typeof e?tt.duration(+t,e):tt.duration(e,t),f(this,n,-1),this},diff:function(e,t,n){var r,i,s=this._isUTC?tt(e).zone(this._offset||0):tt(e).local(),o=6e4*(this.zone()-s.zone());return t=p(t),"year"===t||"month"===t?(r=432e5*(this.daysInMonth()+s.daysInMonth()),i=12*(this.year()-s.year())+(this.month()-s.month()),i+=(this-tt(this).startOf("month")-(s-tt(s).startOf("month")))/r,i-=6e4*(this.zone()-tt(this).startOf("month").zone()-(s.zone()-tt(s).startOf("month").zone()))/r,"year"===t&&(i/=12)):(r=this-s,i="second"===t?r/1e3:"minute"===t?r/6e4:"hour"===t?r/36e5:"day"===t?(r-o)/864e5:"week"===t?(r-o)/6048e5:r),n?i:u(i)},from:function(e,t){return tt.duration(this.diff(e)).lang(this.lang()._abbr).humanize(!t)},fromNow:function(e){return this.from(tt(),e)},calendar:function(){var e=this.diff(tt().zone(this.zone()).startOf("day"),"days",!0),t=-6>e?"sameElse":-1>e?"lastWeek":0>e?"lastDay":1>e?"sameDay":2>e?"nextDay":7>e?"nextWeek":"sameElse";return this.format(this.lang().calendar(t,this))},isLeapYear:function(){return b(this.year())},isDST:function(){return this.zone()<this.clone().month(0).zone()||this.zone()<this.clone().month(5).zone()},day:function(e){var t=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=e?(e=X(e,this.lang()),this.add({d:e-t})):t},month:function(e){var t,n=this._isUTC?"UTC":"";return null!=e?"string"==typeof e&&(e=this.lang().monthsParse(e),"number"!=typeof e)?this:(t=this.date(),this.date(1),this._d["set"+n+"Month"](e),this.date(Math.min(t,this.daysInMonth())),tt.updateOffset(this),this):this._d["get"+n+"Month"]()},startOf:function(e){switch(e=p(e)){case"year":this.month(0);case"month":this.date(1);case"week":case"isoWeek":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===e?this.weekday(0):"isoWeek"===e&&this.isoWeekday(1),this},endOf:function(e){return e=p(e),this.startOf(e).add("isoWeek"===e?"week":e,1).subtract("ms",1)},isAfter:function(e,t){return t="undefined"!=typeof t?t:"millisecond",+this.clone().startOf(t)>+tt(e).startOf(t)},isBefore:function(e,t){return t="undefined"!=typeof t?t:"millisecond",+this.clone().startOf(t)<+tt(e).startOf(t)},isSame:function(e,t){return t="undefined"!=typeof t?t:"millisecond",+this.clone().startOf(t)===+tt(e).startOf(t)},min:function(e){return e=tt.apply(null,arguments),this>e?this:e},max:function(e){return e=tt.apply(null,arguments),e>this?this:e},zone:function(e){var t=this._offset||0;return null==e?this._isUTC?t:this._d.getTimezoneOffset():("string"==typeof e&&(e=_(e)),Math.abs(e)<16&&(e=60*e),this._offset=e,this._isUTC=!0,t!==e&&f(this,tt.duration(t-e,"m"),1,!0),this)},zoneAbbr:function(){return this._isUTC?"UTC":""},zoneName:function(){return this._isUTC?"Coordinated Universal Time":""},parseZone:function(){return"string"==typeof this._i&&this.zone(this._i),this},hasAlignedHourOffset:function(e){return e=e?tt(e).zone():0,0===(this.zone()-e)%60},daysInMonth:function(){return g(this.year(),this.month())},dayOfYear:function(e){var t=it((tt(this).startOf("day")-tt(this).startOf("year"))/864e5)+1;return null==e?t:this.add("d",e-t)},weekYear:function(e){var t=J(this,this.lang()._week.dow,this.lang()._week.doy).year;return null==e?t:this.add("y",e-t)},isoWeekYear:function(e){var t=J(this,1,4).year;return null==e?t:this.add("y",e-t)},week:function(e){var t=this.lang().week(this);return null==e?t:this.add("d",7*(e-t))},isoWeek:function(e){var t=J(this,1,4).week;return null==e?t:this.add("d",7*(e-t))},weekday:function(e){var t=(this.day()+7-this.lang()._week.dow)%7;return null==e?t:this.add("d",e-t)},isoWeekday:function(e){return null==e?this.day()||7:this.day(this.day()%7?e:e-7)},get:function(e){return e=p(e),this[e]()},set:function(e,t){return e=p(e),"function"==typeof this[e]&&this[e](t),this},lang:function(t){return t===e?this._lang:(this._lang=C(t),this)}}),nt=0;nt<Pt.length;nt++)G(Pt[nt].toLowerCase().replace(/s$/,""),Pt[nt]);G("year","FullYear"),tt.fn.days=tt.fn.day,tt.fn.months=tt.fn.month,tt.fn.weeks=tt.fn.week,tt.fn.isoWeeks=tt.fn.isoWeek,tt.fn.toJSON=tt.fn.toISOString,o(tt.duration.fn=s.prototype,{_bubble:function(){var e,t,n,r,i=this._milliseconds,s=this._days,o=this._months,a=this._data;a.milliseconds=i%1e3,e=u(i/1e3),a.seconds=e%60,t=u(e/60),a.minutes=t%60,n=u(t/60),a.hours=n%24,s+=u(n/24),a.days=s%30,o+=u(s/30),a.months=o%12,r=u(o/12),a.years=r},weeks:function(){return u(this.days()/7)},valueOf:function(){return this._milliseconds+864e5*this._days+2592e6*(this._months%12)+31536e6*m(this._months/12)},humanize:function(e){var t=+this,n=$(t,!e,this.lang());return e&&(n=this.lang().pastFuture(t,n)),this.lang().postformat(n)},add:function(e,t){var n=tt.duration(e,t);return this._milliseconds+=n._milliseconds,this._days+=n._days,this._months+=n._months,this._bubble(),this},subtract:function(e,t){var n=tt.duration(e,t);return this._milliseconds-=n._milliseconds,this._days-=n._days,this._months-=n._months,this._bubble(),this},get:function(e){return e=p(e),this[e.toLowerCase()+"s"]()},as:function(e){return e=p(e),this["as"+e.charAt(0).toUpperCase()+e.slice(1)+"s"]()},lang:tt.fn.lang,toIsoString:function(){var e=Math.abs(this.years()),t=Math.abs(this.months()),n=Math.abs(this.days()),r=Math.abs(this.hours()),i=Math.abs(this.minutes()),s=Math.abs(this.seconds()+this.milliseconds()/1e3);return this.asSeconds()?(this.asSeconds()<0?"-":"")+"P"+(e?e+"Y":"")+(t?t+"M":"")+(n?n+"D":"")+(r||i||s?"T":"")+(r?r+"H":"")+(i?i+"M":"")+(s?s+"S":""):"P0D"}});for(nt in Ht)Ht.hasOwnProperty(nt)&&(Z(nt,Ht[nt]),Y(nt.toLowerCase()));Z("Weeks",6048e5),tt.duration.fn.asMonths=function(){return(+this-31536e6*this.years())/2592e6+12*this.years()},tt.lang("en",{ordinal:function(e){var t=e%10,n=1===m(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th";return e+n}}),pt?(module.exports=tt,et(!0)):"function"==typeof define&&define.amd?define("moment",["require","exports","module"],function(t,n,r){return r.config().noGlobal!==!0&&et(r.config().noGlobal===e),tt}):et()}.call(this),define("moment-js",function(){}),typeof Object.create!="function"&&(Object.create=function(e){function t(){}return t.prototype=e,new t}),function(e){var t={init:function(t){return this.options=e.extend({},e.noty.defaults,t),this.options.layout=this.options.custom?e.noty.layouts.inline:e.noty.layouts[this.options.layout],e.noty.themes[this.options.theme]?this.options.theme=e.noty.themes[this.options.theme]:t.themeClassName=this.options.theme,delete t.layout,delete t.theme,this.options=e.extend({},this.options,this.options.layout.options),this.options.id="noty_"+(new Date).getTime()*Math.floor(Math.random()*1e6),this.options=e.extend({},this.options,t),this._build(),this},_build:function(){var t=e('<div class="noty_bar noty_type_'+this.options.type+'"></div>').attr("id",this.options.id);t.append(this.options.template).find(".noty_text").html(this.options.text),this.$bar=this.options.layout.parent.object!==null?e(this.options.layout.parent.object).css(this.options.layout.parent.css).append(t):t,this.options.themeClassName&&this.$bar.addClass(this.options.themeClassName).addClass("noty_container_type_"+this.options.type);if(this.options.buttons){this.options.closeWith=[],this.options.timeout=!1;var n=e("<div/>").addClass("noty_buttons");this.options.layout.parent.object!==null?this.$bar.find(".noty_bar").append(n):this.$bar.append(n);var r=this;e.each(this.options.buttons,function(t,n){var i=e("<button/>").addClass(n.addClass?n.addClass:"gray").html(n.text).attr("id",n.id?n.id:"button-"+t).appendTo(r.$bar.find(".noty_buttons")).bind("click",function(){e.isFunction(n.onClick)&&n.onClick.call(i,r)})})}this.$message=this.$bar.find(".noty_message"),this.$closeButton=this.$bar.find(".noty_close"),this.$buttons=this.$bar.find(".noty_buttons"),e.noty.store[this.options.id]=this},show:function(){var t=this;return t.options.custom?t.options.custom.find(t.options.layout.container.selector).append(t.$bar):e(t.options.layout.container.selector).append(t.$bar),t.options.theme&&t.options.theme.style&&t.options.theme.style.apply(t),e.type(t.options.layout.css)==="function"?this.options.layout.css.apply(t.$bar):t.$bar.css(this.options.layout.css||{}),t.$bar.addClass(t.options.layout.addClass),t.options.layout.container.style.apply(e(t.options.layout.container.selector)),t.showing=!0,t.options.theme&&t.options.theme.style&&t.options.theme.callback.onShow.apply(this),e.inArray("click",t.options.closeWith)>-1&&t.$bar.css("cursor","pointer").one("click",function(e){t.stopPropagation(e),t.options.callback.onCloseClick&&t.options.callback.onCloseClick.apply(t),t.close()}),e.inArray("hover",t.options.closeWith)>-1&&t.$bar.one("mouseenter",function(){t.close()}),e.inArray("button",t.options.closeWith)>-1&&t.$closeButton.one("click",function(e){t.stopPropagation(e),t.close()}),e.inArray("button",t.options.closeWith)==-1&&t.$closeButton.remove(),t.options.callback.onShow&&t.options.callback.onShow.apply(t),t.$bar.animate(t.options.animation.open,t.options.animation.speed,t.options.animation.easing,function(){t.options.callback.afterShow&&t.options.callback.afterShow.apply(t),t.showing=!1,t.shown=!0}),t.options.timeout&&t.$bar.delay(t.options.timeout).promise().done(function(){t.close()}),this},close:function(){if(this.closed)return;if(this.$bar&&this.$bar.hasClass("i-am-closing-now"))return;var t=this;if(this.showing){t.$bar.queue(function(){t.close.apply(t)});return}if(!this.shown&&!this.showing){var n=[];e.each(e.noty.queue,function(e,r){r.options.id!=t.options.id&&n.push(r)}),e.noty.queue=n;return}t.$bar.addClass("i-am-closing-now"),t.options.callback.onClose&&t.options.callback.onClose.apply(t),t.$bar.clearQueue().stop().animate(t.options.animation.close,t.options.animation.speed,t.options.animation.easing,function(){t.options.callback.afterClose&&t.options.callback.afterClose.apply(t)}).promise().done(function(){t.options.modal&&(e.notyRenderer.setModalCount(-1),e.notyRenderer.getModalCount()==0&&e(".noty_modal").fadeOut("fast",function(){e(this).remove()})),e.notyRenderer.setLayoutCountFor(t,-1),e.notyRenderer.getLayoutCountFor(t)==0&&e(t.options.layout.container.selector,t.options.custom).remove(),typeof t.$bar!="undefined"&&t.$bar!==null&&(t.$bar.remove(),t.$bar=null,t.closed=!0),delete e.noty.store[t.options.id],t.options.theme.callback&&t.options.theme.callback.onClose&&t.options.theme.callback.onClose.apply(t),t.options.dismissQueue||(e.noty.ontap=!0,e.notyRenderer.render()),t.options.maxVisible>0&&t.options.dismissQueue&&e.notyRenderer.render()})},setText:function(e){return this.closed||(this.options.text=e,this.$bar.find(".noty_text").html(e)),this},setType:function(e){return this.closed||(this.options.type=e,this.options.theme.style.apply(this),this.options.theme.callback.onShow.apply(this)),this},setTimeout:function(e){if(!this.closed){var t=this;this.options.timeout=e,t.$bar.delay(t.options.timeout).promise().done(function(){t.close()})}return this},stopPropagation:function(e){e=e||window.event,typeof e.stopPropagation!="undefined"?e.stopPropagation():e.cancelBubble=!0},closed:!1,showing:!1,shown:!1};e.notyRenderer={},e.notyRenderer.init=function(n){var r=Object.create(t).init(n);return r.options.killer&&e.noty.closeAll(),r.options.force?e.noty.queue.unshift(r):e.noty.queue.push(r),e.notyRenderer.render(),e.noty.returns=="object"?r:r.options.id},e.notyRenderer.render=function(){var t=e.noty.queue[0];e.type(t)==="object"?t.options.dismissQueue?t.options.maxVisible>0?e(t.options.layout.container.selector+" li").length<t.options.maxVisible&&e.notyRenderer.show(e.noty.queue.shift()):e.notyRenderer.show(e.noty.queue.shift()):e.noty.ontap&&(e.notyRenderer.show(e.noty.queue.shift()),e.noty.ontap=!1):e.noty.ontap=!0},e.notyRenderer.show=function(t){t.options.modal&&(e.notyRenderer.createModalFor(t),e.notyRenderer.setModalCount(1)),t.options.custom?t.options.custom.find(t.options.layout.container.selector).length==0?t.options.custom.append(e(t.options.layout.container.object).addClass("i-am-new")):t.options.custom.find(t.options.layout.container.selector).removeClass("i-am-new"):e(t.options.layout.container.selector).length==0?e("body").append(e(t.options.layout.container.object).addClass("i-am-new")):e(t.options.layout.container.selector).removeClass("i-am-new"),e.notyRenderer.setLayoutCountFor(t,1),t.show()},e.notyRenderer.createModalFor=function(t){if(e(".noty_modal").length==0){var n=e("<div/>").addClass("noty_modal").addClass(t.options.theme).data("noty_modal_count",0);t.options.theme.modal&&t.options.theme.modal.css&&n.css(t.options.theme.modal.css),n.prependTo(e("body")).fadeIn("fast")}},e.notyRenderer.getLayoutCountFor=function(t){return e(t.options.layout.container.selector,t.options.custom).data("noty_layout_count")||0},e.notyRenderer.setLayoutCountFor=function(t,n){return e(t.options.layout.container.selector,t.options.custom).data("noty_layout_count",e.notyRenderer.getLayoutCountFor(t)+n)},e.notyRenderer.getModalCount=function(){return e(".noty_modal").data("noty_modal_count")||0},e.notyRenderer.setModalCount=function(t){return e(".noty_modal").data("noty_modal_count",e.notyRenderer.getModalCount()+t)},e.fn.noty=function(t){return t.custom=e(this),e.notyRenderer.init(t)},e.noty={},e.noty.queue=[],e.noty.ontap=!0,e.noty.layouts={},e.noty.themes={},e.noty.returns="object",e.noty.store={},e.noty.get=function(t){return e.noty.store.hasOwnProperty(t)?e.noty.store[t]:!1},e.noty.close=function(t){return e.noty.get(t)?e.noty.get(t).close():!1},e.noty.setText=function(t,n){return e.noty.get(t)?e.noty.get(t).setText(n):!1},e.noty.setType=function(t,n){return e.noty.get(t)?e.noty.get(t).setType(n):!1},e.noty.clearQueue=function(){e.noty.queue=[]},e.noty.closeAll=function(){e.noty.clearQueue(),e.each(e.noty.store,function(e,t){t.close()})};var n=window.alert;e.noty.consumeAlert=function(t){window.alert=function(n){t?t.text=n:t={text:n},e.notyRenderer.init(t)}},e.noty.stopConsumeAlert=function(){window.alert=n},e.noty.defaults={layout:"top",theme:"defaultTheme",type:"alert",text:"",dismissQueue:!0,template:'<div class="noty_message"><span class="noty_text"></span><div class="noty_close"></div></div>',animation:{open:{height:"toggle"},close:{height:"toggle"},easing:"swing",speed:500},timeout:!1,force:!1,modal:!1,maxVisible:5,killer:!1,closeWith:["click"],callback:{onShow:function(){},afterShow:function(){},onClose:function(){},afterClose:function(){},onCloseClick:function(){}},buttons:!1},e(window).resize(function(){e.each(e.noty.layouts,function(t,n){n.container.style.apply(e(n.container.selector))})})}(jQuery),window.noty=function(t){return jQuery.notyRenderer.init(t)},define("noty",function(){}),function(e){e.noty.layouts.bottomRight={name:"bottomRight",options:{},container:{object:'<ul id="noty_bottomRight_layout_container" />',selector:"ul#noty_bottomRight_layout_container",style:function(){e(this).css({bottom:20,right:20,position:"fixed",width:"310px",height:"auto",margin:0,padding:0,listStyleType:"none",zIndex:1e7}),window.innerWidth<600&&e(this).css({right:5})}},parent:{object:"<li />",selector:"li",css:{}},css:{display:"none",width:"310px"},addClass:""}}(jQuery),define("noty-layout",function(){}),jQuery.easing.jswing=jQuery.easing.swing,jQuery.extend(jQuery.easing,{def:"easeOutQuad",swing:function(e,t,n,r,i){return jQuery.easing[jQuery.easing.def](e,t,n,r,i)},easeInQuad:function(e,t,n,r,i){return r*(t/=i)*t+n},easeOutQuad:function(e,t,n,r,i){return-r*(t/=i)*(t-2)+n},easeInOutQuad:function(e,t,n,r,i){return(t/=i/2)<1?r/2*t*t+n:-r/2*(--t*(t-2)-1)+n},easeInCubic:function(e,t,n,r,i){return r*(t/=i)*t*t+n},easeOutCubic:function(e,t,n,r,i){return r*((t=t/i-1)*t*t+1)+n},easeInOutCubic:function(e,t,n,r,i){return(t/=i/2)<1?r/2*t*t*t+n:r/2*((t-=2)*t*t+2)+n},easeInQuart:function(e,t,n,r,i){return r*(t/=i)*t*t*t+n},easeOutQuart:function(e,t,n,r,i){return-r*((t=t/i-1)*t*t*t-1)+n},easeInOutQuart:function(e,t,n,r,i){return(t/=i/2)<1?r/2*t*t*t*t+n:-r/2*((t-=2)*t*t*t-2)+n},easeInQuint:function(e,t,n,r,i){return r*(t/=i)*t*t*t*t+n},easeOutQuint:function(e,t,n,r,i){return r*((t=t/i-1)*t*t*t*t+1)+n},easeInOutQuint:function(e,t,n,r,i){return(t/=i/2)<1?r/2*t*t*t*t*t+n:r/2*((t-=2)*t*t*t*t+2)+n},easeInSine:function(e,t,n,r,i){return-r*Math.cos(t/i*(Math.PI/2))+r+n},easeOutSine:function(e,t,n,r,i){return r*Math.sin(t/i*(Math.PI/2))+n},easeInOutSine:function(e,t,n,r,i){return-r/2*(Math.cos(Math.PI*t/i)-1)+n},easeInExpo:function(e,t,n,r,i){return t==0?n:r*Math.pow(2,10*(t/i-1))+n},easeOutExpo:function(e,t,n,r,i){return t==i?n+r:r*(-Math.pow(2,-10*t/i)+1)+n},easeInOutExpo:function(e,t,n,r,i){return t==0?n:t==i?n+r:(t/=i/2)<1?r/2*Math.pow(2,10*(t-1))+n:r/2*(-Math.pow(2,-10*--t)+2)+n},easeInCirc:function(e,t,n,r,i){return-r*(Math.sqrt(1-(t/=i)*t)-1)+n},easeOutCirc:function(e,t,n,r,i){return r*Math.sqrt(1-(t=t/i-1)*t)+n},easeInOutCirc:function(e,t,n,r,i){return(t/=i/2)<1?-r/2*(Math.sqrt(1-t*t)-1)+n:r/2*(Math.sqrt(1-(t-=2)*t)+1)+n},easeInElastic:function(e,t,n,r,i){var s=1.70158,o=0,u=r;if(t==0)return n;if((t/=i)==1)return n+r;o||(o=i*.3);if(u<Math.abs(r)){u=r;var s=o/4}else var s=o/(2*Math.PI)*Math.asin(r/u);return-(u*Math.pow(2,10*(t-=1))*Math.sin((t*i-s)*2*Math.PI/o))+n},easeOutElastic:function(e,t,n,r,i){var s=1.70158,o=0,u=r;if(t==0)return n;if((t/=i)==1)return n+r;o||(o=i*.3);if(u<Math.abs(r)){u=r;var s=o/4}else var s=o/(2*Math.PI)*Math.asin(r/u);return u*Math.pow(2,-10*t)*Math.sin((t*i-s)*2*Math.PI/o)+r+n},easeInOutElastic:function(e,t,n,r,i){var s=1.70158,o=0,u=r;if(t==0)return n;if((t/=i/2)==2)return n+r;o||(o=i*.3*1.5);if(u<Math.abs(r)){u=r;var s=o/4}else var s=o/(2*Math.PI)*Math.asin(r/u);return t<1?-0.5*u*Math.pow(2,10*(t-=1))*Math.sin((t*i-s)*2*Math.PI/o)+n:u*Math.pow(2,-10*(t-=1))*Math.sin((t*i-s)*2*Math.PI/o)*.5+r+n},easeInBack:function(e,t,n,r,i,s){return s==undefined&&(s=1.70158),r*(t/=i)*t*((s+1)*t-s)+n},easeOutBack:function(e,t,n,r,i,s){return s==undefined&&(s=1.70158),r*((t=t/i-1)*t*((s+1)*t+s)+1)+n},easeInOutBack:function(e,t,n,r,i,s){return s==undefined&&(s=1.70158),(t/=i/2)<1?r/2*t*t*(((s*=1.525)+1)*t-s)+n:r/2*((t-=2)*t*(((s*=1.525)+1)*t+s)+2)+n},easeInBounce:function(e,t,n,r,i){return r-jQuery.easing.easeOutBounce(e,i-t,0,r,i)+n},easeOutBounce:function(e,t,n,r,i){return(t/=i)<1/2.75?r*7.5625*t*t+n:t<2/2.75?r*(7.5625*(t-=1.5/2.75)*t+.75)+n:t<2.5/2.75?r*(7.5625*(t-=2.25/2.75)*t+.9375)+n:r*(7.5625*(t-=2.625/2.75)*t+.984375)+n},easeInOutBounce:function(e,t,n,r,i){return t<i/2?jQuery.easing.easeInBounce(e,t*2,0,r,i)*.5+n:jQuery.easing.easeOutBounce(e,t*2-i,0,r,i)*.5+r*.5+n}}),define("jquery.easing",function(){});if("undefined"==typeof jQuery)throw new Error("Bootstrap's JavaScript requires jQuery");+function(e){var t=e.fn.jquery.split(" ")[0].split(".");if(t[0]<2&&t[1]<9||1==t[0]&&9==t[1]&&t[2]<1)throw new Error("Bootstrap's JavaScript requires jQuery version 1.9.1 or higher")}(jQuery),+function(e){function t(){var e=document.createElement("bootstrap"),t={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var n in t)if(void 0!==e.style[n])return{end:t[n]};return!1}e.fn.emulateTransitionEnd=function(t){var n=!1,r=this;e(this).one("bsTransitionEnd",function(){n=!0});var i=function(){n||e(r).trigger(e.support.transition.end)};return setTimeout(i,t),this},e(function(){e.support.transition=t(),e.support.transition&&(e.event.special.bsTransitionEnd={bindType:e.support.transition.end,delegateType:e.support.transition.end,handle:function(t){return e(t.target).is(this)?t.handleObj.handler.apply(this,arguments):void 0}})})}(jQuery),+function(e){function t(t){return this.each(function(){var n=e(this),i=n.data("bs.alert");i||n.data("bs.alert",i=new r(this)),"string"==typeof t&&i[t].call(n)})}var n='[data-dismiss="alert"]',r=function(t){e(t).on("click",n,this.close)};r.VERSION="3.3.4",r.TRANSITION_DURATION=150,r.prototype.close=function(t){function n(){o.detach().trigger("closed.bs.alert").remove()}var i=e(this),s=i.attr("data-target");s||(s=i.attr("href"),s=s&&s.replace(/.*(?=#[^\s]*$)/,""));var o=e(s);t&&t.preventDefault(),o.length||(o=i.closest(".alert")),o.trigger(t=e.Event("close.bs.alert")),t.isDefaultPrevented()||(o.removeClass("in"),e.support.transition&&o.hasClass("fade")?o.one("bsTransitionEnd",n).emulateTransitionEnd(r.TRANSITION_DURATION):n())};var i=e.fn.alert;e.fn.alert=t,e.fn.alert.Constructor=r,e.fn.alert.noConflict=function(){return e.fn.alert=i,this},e(document).on("click.bs.alert.data-api",n,r.prototype.close)}(jQuery),+function(e){function t(t){return this.each(function(){var r=e(this),i=r.data("bs.button"),s="object"==typeof t&&t;i||r.data("bs.button",i=new n(this,s)),"toggle"==t?i.toggle():t&&i.setState(t)})}var n=function(t,r){this.$element=e(t),this.options=e.extend({},n.DEFAULTS,r),this.isLoading=!1};n.VERSION="3.3.4",n.DEFAULTS={loadingText:"loading..."},n.prototype.setState=function(t){var n="disabled",r=this.$element,i=r.is("input")?"val":"html",s=r.data();t+="Text",null==s.resetText&&r.data("resetText",r[i]()),setTimeout(e.proxy(function(){r[i](null==s[t]?this.options[t]:s[t]),"loadingText"==t?(this.isLoading=!0,r.addClass(n).attr(n,n)):this.isLoading&&(this.isLoading=!1,r.removeClass(n).removeAttr(n))},this),0)},n.prototype.toggle=function(){var e=!0,t=this.$element.closest('[data-toggle="buttons"]');if(t.length){var n=this.$element.find("input");"radio"==n.prop("type")&&(n.prop("checked")&&this.$element.hasClass("active")?e=!1:t.find(".active").removeClass("active")),e&&n.prop("checked",!this.$element.hasClass("active")).trigger("change")}else this.$element.attr("aria-pressed",!this.$element.hasClass("active"));e&&this.$element.toggleClass("active")};var r=e.fn.button;e.fn.button=t,e.fn.button.Constructor=n,e.fn.button.noConflict=function(){return e.fn.button=r,this},e(document).on("click.bs.button.data-api",'[data-toggle^="button"]',function(n){var r=e(n.target);r.hasClass("btn")||(r=r.closest(".btn")),t.call(r,"toggle"),n.preventDefault()}).on("focus.bs.button.data-api blur.bs.button.data-api",'[data-toggle^="button"]',function(t){e(t.target).closest(".btn").toggleClass("focus",/^focus(in)?$/.test(t.type))})}(jQuery),+function(e){function t(t){return this.each(function(){var r=e(this),i=r.data("bs.carousel"),s=e.extend({},n.DEFAULTS,r.data(),"object"==typeof t&&t),o="string"==typeof t?t:s.slide;i||r.data("bs.carousel",i=new n(this,s)),"number"==typeof t?i.to(t):o?i[o]():s.interval&&i.pause().cycle()})}var n=function(t,n){this.$element=e(t),this.$indicators=this.$element.find(".carousel-indicators"),this.options=n,this.paused=null,this.sliding=null,this.interval=null,this.$active=null,this.$items=null,this.options.keyboard&&this.$element.on("keydown.bs.carousel",e.proxy(this.keydown,this)),"hover"==this.options.pause&&!("ontouchstart"in document.documentElement)&&this.$element.on("mouseenter.bs.carousel",e.proxy(this.pause,this)).on("mouseleave.bs.carousel",e.proxy(this.cycle,this))};n.VERSION="3.3.4",n.TRANSITION_DURATION=600,n.DEFAULTS={interval:5e3,pause:"hover",wrap:!0,keyboard:!0},n.prototype.keydown=function(e){if(!/input|textarea/i.test(e.target.tagName)){switch(e.which){case 37:this.prev();break;case 39:this.next();break;default:return}e.preventDefault()}},n.prototype.cycle=function(t){return t||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(e.proxy(this.next,this),this.options.interval)),this},n.prototype.getItemIndex=function(e){return this.$items=e.parent().children(".item"),this.$items.index(e||this.$active)},n.prototype.getItemForDirection=function(e,t){var n=this.getItemIndex(t),r="prev"==e&&0===n||"next"==e&&n==this.$items.length-1;if(r&&!this.options.wrap)return t;var i="prev"==e?-1:1,s=(n+i)%this.$items.length;return this.$items.eq(s)},n.prototype.to=function(e){var t=this,n=this.getItemIndex(this.$active=this.$element.find(".item.active"));return e>this.$items.length-1||0>e?void 0:this.sliding?this.$element.one("slid.bs.carousel",function(){t.to(e)}):n==e?this.pause().cycle():this.slide(e>n?"next":"prev",this.$items.eq(e))},n.prototype.pause=function(t){return t||(this.paused=!0),this.$element.find(".next, .prev").length&&e.support.transition&&(this.$element.trigger(e.support.transition.end),this.cycle(!0)),this.interval=clearInterval(this.interval),this},n.prototype.next=function(){return this.sliding?void 0:this.slide("next")},n.prototype.prev=function(){return this.sliding?void 0:this.slide("prev")},n.prototype.slide=function(t,r){var i=this.$element.find(".item.active"),s=r||this.getItemForDirection(t,i),o=this.interval,u="next"==t?"left":"right",f=this;if(s.hasClass("active"))return this.sliding=!1;var l=s[0],h=e.Event("slide.bs.carousel",{relatedTarget:l,direction:u});if(this.$element.trigger(h),!h.isDefaultPrevented()){if(this.sliding=!0,o&&this.pause(),this.$indicators.length){this.$indicators.find(".active").removeClass("active");var p=e(this.$indicators.children()[this.getItemIndex(s)]);p&&p.addClass("active")}var d=e.Event("slid.bs.carousel",{relatedTarget:l,direction:u});return e.support.transition&&this.$element.hasClass("slide")?(s.addClass(t),s[0].offsetWidth,i.addClass(u),s.addClass(u),i.one("bsTransitionEnd",function(){s.removeClass([t,u].join(" ")).addClass("active"),i.removeClass(["active",u].join(" ")),f.sliding=!1,setTimeout(function(){f.$element.trigger(d)},0)}).emulateTransitionEnd(n.TRANSITION_DURATION)):(i.removeClass("active"),s.addClass("active"),this.sliding=!1,this.$element.trigger(d)),o&&this.cycle(),this}};var r=e.fn.carousel;e.fn.carousel=t,e.fn.carousel.Constructor=n,e.fn.carousel.noConflict=function(){return e.fn.carousel=r,this};var i=function(n){var r,i=e(this),s=e(i.attr("data-target")||(r=i.attr("href"))&&r.replace(/.*(?=#[^\s]+$)/,""));if(s.hasClass("carousel")){var o=e.extend({},s.data(),i.data()),u=i.attr("data-slide-to");u&&(o.interval=!1),t.call(s,o),u&&s.data("bs.carousel").to(u),n.preventDefault()}};e(document).on("click.bs.carousel.data-api","[data-slide]",i).on("click.bs.carousel.data-api","[data-slide-to]",i),e(window).on("load",function(){e('[data-ride="carousel"]').each(function(){var n=e(this);t.call(n,n.data())})})}(jQuery),+function(e){function t(t){var n,r=t.attr("data-target")||(n=t.attr("href"))&&n.replace(/.*(?=#[^\s]+$)/,"");return e(r)}function n(t){return this.each(function(){var n=e(this),i=n.data("bs.collapse"),s=e.extend({},r.DEFAULTS,n.data(),"object"==typeof t&&t);!i&&s.toggle&&/show|hide/.test(t)&&(s.toggle=!1),i||n.data("bs.collapse",i=new r(this,s)),"string"==typeof t&&i[t]()})}var r=function(t,n){this.$element=e(t),this.options=e.extend({},r.DEFAULTS,n),this.$trigger=e('[data-toggle="collapse"][href="#'+t.id+'"],[data-toggle="collapse"][data-target="#'+t.id+'"]'),this.transitioning=null,this.options.parent?this.$parent=this.getParent():this.addAriaAndCollapsedClass(this.$element,this.$trigger),this.options.toggle&&this.toggle()};r.VERSION="3.3.4",r.TRANSITION_DURATION=350,r.DEFAULTS={toggle:!0},r.prototype.dimension=function(){var e=this.$element.hasClass("width");return e?"width":"height"},r.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var t,i=this.$parent&&this.$parent.children(".panel").children(".in, .collapsing");if(!(i&&i.length&&(t=i.data("bs.collapse"),t&&t.transitioning))){var s=e.Event("show.bs.collapse");if(this.$element.trigger(s),!s.isDefaultPrevented()){i&&i.length&&(n.call(i,"hide"),t||i.data("bs.collapse",null));var o=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[o](0).attr("aria-expanded",!0),this.$trigger.removeClass("collapsed").attr("aria-expanded",!0),this.transitioning=1;var u=function(){this.$element.removeClass("collapsing").addClass("collapse in")[o](""),this.transitioning=0,this.$element.trigger("shown.bs.collapse")};if(!e.support.transition)return u.call(this);var f=e.camelCase(["scroll",o].join("-"));this.$element.one("bsTransitionEnd",e.proxy(u,this)).emulateTransitionEnd(r.TRANSITION_DURATION)[o](this.$element[0][f])}}}},r.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var t=e.Event("hide.bs.collapse");if(this.$element.trigger(t),!t.isDefaultPrevented()){var n=this.dimension();this.$element[n](this.$element[n]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse in").attr("aria-expanded",!1),this.$trigger.addClass("collapsed").attr("aria-expanded",!1),this.transitioning=1;var i=function(){this.transitioning=0,this.$element.removeClass("collapsing").addClass("collapse").trigger("hidden.bs.collapse")};return e.support.transition?void this.$element[n](0).one("bsTransitionEnd",e.proxy(i,this)).emulateTransitionEnd(r.TRANSITION_DURATION):i.call(this)}}},r.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()},r.prototype.getParent=function(){return e(this.options.parent).find('[data-toggle="collapse"][data-parent="'+this.options.parent+'"]').each(e.proxy(function(n,r){var i=e(r);this.addAriaAndCollapsedClass(t(i),i)},this)).end()},r.prototype.addAriaAndCollapsedClass=function(e,t){var n=e.hasClass("in");e.attr("aria-expanded",n),t.toggleClass("collapsed",!n).attr("aria-expanded",n)};var i=e.fn.collapse;e.fn.collapse=n,e.fn.collapse.Constructor=r,e.fn.collapse.noConflict=function(){return e.fn.collapse=i,this},e(document).on("click.bs.collapse.data-api",'[data-toggle="collapse"]',function(r){var i=e(this);i.attr("data-target")||r.preventDefault();var s=t(i),o=s.data("bs.collapse"),u=o?"toggle":i.data();n.call(s,u)})}(jQuery),+function(e){function t(t){t&&3===t.which||(e(i).remove(),e(s).each(function(){var r=e(this),i=n(r),s={relatedTarget:this};i.hasClass("open")&&(i.trigger(t=e.Event("hide.bs.dropdown",s)),t.isDefaultPrevented()||(r.attr("aria-expanded","false"),i.removeClass("open").trigger("hidden.bs.dropdown",s)))}))}function n(t){var n=t.attr("data-target");n||(n=t.attr("href"),n=n&&/#[A-Za-z]/.test(n)&&n.replace(/.*(?=#[^\s]*$)/,""));var r=n&&e(n);return r&&r.length?r:t.parent()}function r(t){return this.each(function(){var n=e(this),r=n.data("bs.dropdown");r||n.data("bs.dropdown",r=new o(this)),"string"==typeof t&&r[t].call(n)})}var i=".dropdown-backdrop",s='[data-toggle="dropdown"]',o=function(t){e(t).on("click.bs.dropdown",this.toggle)};o.VERSION="3.3.4",o.prototype.toggle=function(r){var i=e(this);if(!i.is(".disabled, :disabled")){var s=n(i),o=s.hasClass("open");if(t(),!o){"ontouchstart"in document.documentElement&&!s.closest(".navbar-nav").length&&e('<div class="dropdown-backdrop"/>').insertAfter(e(this)).on("click",t);var u={relatedTarget:this};if(s.trigger(r=e.Event("show.bs.dropdown",u)),r.isDefaultPrevented())return;i.trigger("focus").attr("aria-expanded","true"),s.toggleClass("open").trigger("shown.bs.dropdown",u)}return!1}},o.prototype.keydown=function(t){if(/(38|40|27|32)/.test(t.which)&&!/input|textarea/i.test(t.target.tagName)){var r=e(this);if(t.preventDefault(),t.stopPropagation(),!r.is(".disabled, :disabled")){var i=n(r),o=i.hasClass("open");if(!o&&27!=t.which||o&&27==t.which)return 27==t.which&&i.find(s).trigger("focus"),r.trigger("click");var u=" li:not(.disabled):visible a",l=i.find('[role="menu"]'+u+', [role="listbox"]'+u);if(l.length){var h=l.index(t.target);38==t.which&&h>0&&h--,40==t.which&&h<l.length-1&&h++,~h||(h=0),l.eq(h).trigger("focus")}}}};var u=e.fn.dropdown;e.fn.dropdown=r,e.fn.dropdown.Constructor=o,e.fn.dropdown.noConflict=function(){return e.fn.dropdown=u,this},e(document).on("click.bs.dropdown.data-api",t).on("click.bs.dropdown.data-api",".dropdown form",function(e){e.stopPropagation()}).on("click.bs.dropdown.data-api",s,o.prototype.toggle).on("keydown.bs.dropdown.data-api",s,o.prototype.keydown).on("keydown.bs.dropdown.data-api",'[role="menu"]',o.prototype.keydown).on("keydown.bs.dropdown.data-api",'[role="listbox"]',o.prototype.keydown)}(jQuery),+function(e){function t(t,r){return this.each(function(){var i=e(this),s=i.data("bs.modal"),o=e.extend({},n.DEFAULTS,i.data(),"object"==typeof t&&t);s||i.data("bs.modal",s=new n(this,o)),"string"==typeof t?s[t](r):o.show&&s.show(r)})}var n=function(t,n){this.options=n,this.$body=e(document.body),this.$element=e(t),this.$dialog=this.$element.find(".modal-dialog"),this.$backdrop=null,this.isShown=null,this.originalBodyPad=null,this.scrollbarWidth=0,this.ignoreBackdropClick=!1,this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,e.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))};n.VERSION="3.3.4",n.TRANSITION_DURATION=300,n.BACKDROP_TRANSITION_DURATION=150,n.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},n.prototype.toggle=function(e){return this.isShown?this.hide():this.show(e)},n.prototype.show=function(t){var r=this,i=e.Event("show.bs.modal",{relatedTarget:t});this.$element.trigger(i),this.isShown||i.isDefaultPrevented()||(this.isShown=!0,this.checkScrollbar(),this.setScrollbar(),this.$body.addClass("modal-open"),this.escape(),this.resize(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',e.proxy(this.hide,this)),this.$dialog.on("mousedown.dismiss.bs.modal",function(){r.$element.one("mouseup.dismiss.bs.modal",function(t){e(t.target).is(r.$element)&&(r.ignoreBackdropClick=!0)})}),this.backdrop(function(){var i=e.support.transition&&r.$element.hasClass("fade");r.$element.parent().length||r.$element.appendTo(r.$body),r.$element.show().scrollTop(0),r.adjustDialog(),i&&r.$element[0].offsetWidth,r.$element.addClass("in").attr("aria-hidden",!1),r.enforceFocus();var s=e.Event("shown.bs.modal",{relatedTarget:t});i?r.$dialog.one("bsTransitionEnd",function(){r.$element.trigger("focus").trigger(s)}).emulateTransitionEnd(n.TRANSITION_DURATION):r.$element.trigger("focus").trigger(s)}))},n.prototype.hide=function(t){t&&t.preventDefault(),t=e.Event("hide.bs.modal"),this.$element.trigger(t),this.isShown&&!t.isDefaultPrevented()&&(this.isShown=!1,this.escape(),this.resize(),e(document).off("focusin.bs.modal"),this.$element.removeClass("in").attr("aria-hidden",!0).off("click.dismiss.bs.modal").off("mouseup.dismiss.bs.modal"),this.$dialog.off("mousedown.dismiss.bs.modal"),e.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",e.proxy(this.hideModal,this)).emulateTransitionEnd(n.TRANSITION_DURATION):this.hideModal())},n.prototype.enforceFocus=function(){e(document).off("focusin.bs.modal").on("focusin.bs.modal",e.proxy(function(e){this.$element[0]===e.target||this.$element.has(e.target).length||this.$element.trigger("focus")},this))},n.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keydown.dismiss.bs.modal",e.proxy(function(e){27==e.which&&this.hide()},this)):this.isShown||this.$element.off("keydown.dismiss.bs.modal")},n.prototype.resize=function(){this.isShown?e(window).on("resize.bs.modal",e.proxy(this.handleUpdate,this)):e(window).off("resize.bs.modal")},n.prototype.hideModal=function(){var e=this;this.$element.hide(),this.backdrop(function(){e.$body.removeClass("modal-open"),e.resetAdjustments(),e.resetScrollbar(),e.$element.trigger("hidden.bs.modal")})},n.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},n.prototype.backdrop=function(t){var r=this,i=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var s=e.support.transition&&i;if(this.$backdrop=e('<div class="modal-backdrop '+i+'" />').appendTo(this.$body),this.$element.on("click.dismiss.bs.modal",e.proxy(function(e){return this.ignoreBackdropClick?void (this.ignoreBackdropClick=!1):void (e.target===e.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus():this.hide()))},this)),s&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!t)return;s?this.$backdrop.one("bsTransitionEnd",t).emulateTransitionEnd(n.BACKDROP_TRANSITION_DURATION):t()}else if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("in");var o=function(){r.removeBackdrop(),t&&t()};e.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("bsTransitionEnd",o).emulateTransitionEnd(n.BACKDROP_TRANSITION_DURATION):o()}else t&&t()},n.prototype.handleUpdate=function(){this.adjustDialog()},n.prototype.adjustDialog=function(){var e=this.$element[0].scrollHeight>document.documentElement.clientHeight;this.$element.css({paddingLeft:!this.bodyIsOverflowing&&e?this.scrollbarWidth:"",paddingRight:this.bodyIsOverflowing&&!e?this.scrollbarWidth:""})},n.prototype.resetAdjustments=function(){this.$element.css({paddingLeft:"",paddingRight:""})},n.prototype.checkScrollbar=function(){var e=window.innerWidth;if(!e){var t=document.documentElement.getBoundingClientRect();e=t.right-Math.abs(t.left)}this.bodyIsOverflowing=document.body.clientWidth<e,this.scrollbarWidth=this.measureScrollbar()},n.prototype.setScrollbar=function(){var e=parseInt(this.$body.css("padding-right")||0,10);this.originalBodyPad=document.body.style.paddingRight||"",this.bodyIsOverflowing&&this.$body.css("padding-right",e+this.scrollbarWidth)},n.prototype.resetScrollbar=function(){this.$body.css("padding-right",this.originalBodyPad)},n.prototype.measureScrollbar=function(){var e=document.createElement("div");e.className="modal-scrollbar-measure",this.$body.append(e);var t=e.offsetWidth-e.clientWidth;return this.$body[0].removeChild(e),t};var r=e.fn.modal;e.fn.modal=t,e.fn.modal.Constructor=n,e.fn.modal.noConflict=function(){return e.fn.modal=r,this},e(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(n){var r=e(this),i=r.attr("href"),s=e(r.attr("data-target")||i&&i.replace(/.*(?=#[^\s]+$)/,"")),o=s.data("bs.modal")?"toggle":e.extend({remote:!/#/.test(i)&&i},s.data(),r.data());r.is("a")&&n.preventDefault(),s.one("show.bs.modal",function(e){e.isDefaultPrevented()||s.one("hidden.bs.modal",function(){r.is(":visible")&&r.trigger("focus")})}),t.call(s,o,this)})}(jQuery),+function(e){function t(t){return this.each(function(){var r=e(this),i=r.data("bs.tooltip"),s="object"==typeof t&&t;(i||!/destroy|hide/.test(t))&&(i||r.data("bs.tooltip",i=new n(this,s)),"string"==typeof t&&i[t]())})}var n=function(e,t){this.type=null,this.options=null,this.enabled=null,this.timeout=null,this.hoverState=null,this.$element=null,this.init("tooltip",e,t)};n.VERSION="3.3.4",n.TRANSITION_DURATION=150,n.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1,viewport:{selector:"body",padding:0}},n.prototype.init=function(t,n,r){if(this.enabled=!0,this.type=t,this.$element=e(n),this.options=this.getOptions(r),this.$viewport=this.options.viewport&&e(this.options.viewport.selector||this.options.viewport),this.$element[0]instanceof document.constructor&&!this.options.selector)throw new Error("`selector` option must be specified when initializing "+this.type+" on the window.document object!");for(var i=this.options.trigger.split(" "),s=i.length;s--;){var o=i[s];if("click"==o)this.$element.on("click."+this.type,this.options.selector,e.proxy(this.toggle,this));else if("manual"!=o){var u="hover"==o?"mouseenter":"focusin",f="hover"==o?"mouseleave":"focusout";this.$element.on(u+"."+this.type,this.options.selector,e.proxy(this.enter,this)),this.$element.on(f+"."+this.type,this.options.selector,e.proxy(this.leave,this))}}this.options.selector?this._options=e.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},n.prototype.getDefaults=function(){return n.DEFAULTS},n.prototype.getOptions=function(t){return t=e.extend({},this.getDefaults(),this.$element.data(),t),t.delay&&"number"==typeof t.delay&&(t.delay={show:t.delay,hide:t.delay}),t},n.prototype.getDelegateOptions=function(){var t={},n=this.getDefaults();return this._options&&e.each(this._options,function(e,r){n[e]!=r&&(t[e]=r)}),t},n.prototype.enter=function(t){var n=t instanceof this.constructor?t:e(t.currentTarget).data("bs."+this.type);return n&&n.$tip&&n.$tip.is(":visible")?void (n.hoverState="in"):(n||(n=new this.constructor(t.currentTarget,this.getDelegateOptions()),e(t.currentTarget).data("bs."+this.type,n)),clearTimeout(n.timeout),n.hoverState="in",n.options.delay&&n.options.delay.show?void (n.timeout=setTimeout(function(){"in"==n.hoverState&&n.show()},n.options.delay.show)):n.show())},n.prototype.leave=function(t){var n=t instanceof this.constructor?t:e(t.currentTarget).data("bs."+this.type);return n||(n=new this.constructor(t.currentTarget,this.getDelegateOptions()),e(t.currentTarget).data("bs."+this.type,n)),clearTimeout(n.timeout),n.hoverState="out",n.options.delay&&n.options.delay.hide?void (n.timeout=setTimeout(function(){"out"==n.hoverState&&n.hide()},n.options.delay.hide)):n.hide()},n.prototype.show=function(){var t=e.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(t);var r=e.contains(this.$element[0].ownerDocument.documentElement,this.$element[0]);if(t.isDefaultPrevented()||!r)return;var i=this,s=this.tip(),o=this.getUID(this.type);this.setContent(),s.attr("id",o),this.$element.attr("aria-describedby",o),this.options.animation&&s.addClass("fade");var u="function"==typeof this.options.placement?this.options.placement.call(this,s[0],this.$element[0]):this.options.placement,f=/\s?auto?\s?/i,l=f.test(u);l&&(u=u.replace(f,"")||"top"),s.detach().css({top:0,left:0,display:"block"}).addClass(u).data("bs."+this.type,this),this.options.container?s.appendTo(this.options.container):s.insertAfter(this.$element);var h=this.getPosition(),p=s[0].offsetWidth,d=s[0].offsetHeight;if(l){var v=u,m=this.options.container?e(this.options.container):this.$element.parent(),g=this.getPosition(m);u="bottom"==u&&h.bottom+d>g.bottom?"top":"top"==u&&h.top-d<g.top?"bottom":"right"==u&&h.right+p>g.width?"left":"left"==u&&h.left-p<g.left?"right":u,s.removeClass(v).addClass(u)}var y=this.getCalculatedOffset(u,h,p,d);this.applyPlacement(y,u);var b=function(){var e=i.hoverState;i.$element.trigger("shown.bs."+i.type),i.hoverState=null,"out"==e&&i.leave(i)};e.support.transition&&this.$tip.hasClass("fade")?s.one("bsTransitionEnd",b).emulateTransitionEnd(n.TRANSITION_DURATION):b()}},n.prototype.applyPlacement=function(t,n){var r=this.tip(),i=r[0].offsetWidth,s=r[0].offsetHeight,o=parseInt(r.css("margin-top"),10),u=parseInt(r.css("margin-left"),10);isNaN(o)&&(o=0),isNaN(u)&&(u=0),t.top=t.top+o,t.left=t.left+u,e.offset.setOffset(r[0],e.extend({using:function(e){r.css({top:Math.round(e.top),left:Math.round(e.left)})}},t),0),r.addClass("in");var f=r[0].offsetWidth,l=r[0].offsetHeight;"top"==n&&l!=s&&(t.top=t.top+s-l);var c=this.getViewportAdjustedDelta(n,t,f,l);c.left?t.left+=c.left:t.top+=c.top;var h=/top|bottom/.test(n),p=h?2*c.left-i+f:2*c.top-s+l,d=h?"offsetWidth":"offsetHeight";r.offset(t),this.replaceArrow(p,r[0][d],h)},n.prototype.replaceArrow=function(e,t,n){this.arrow().css(n?"left":"top",50*(1-e/t)+"%").css(n?"top":"left","")},n.prototype.setContent=function(){var e=this.tip(),t=this.getTitle();e.find(".tooltip-inner")[this.options.html?"html":"text"](t),e.removeClass("fade in top bottom left right")},n.prototype.hide=function(t){function r(){"in"!=i.hoverState&&s.detach(),i.$element.removeAttr("aria-describedby").trigger("hidden.bs."+i.type),t&&t()}var i=this,s=e(this.$tip),o=e.Event("hide.bs."+this.type);return this.$element.trigger(o),o.isDefaultPrevented()?void 0:(s.removeClass("in"),e.support.transition&&s.hasClass("fade")?s.one("bsTransitionEnd",r).emulateTransitionEnd(n.TRANSITION_DURATION):r(),this.hoverState=null,this)},n.prototype.fixTitle=function(){var e=this.$element;(e.attr("title")||"string"!=typeof e.attr("data-original-title"))&&e.attr("data-original-title",e.attr("title")||"").attr("title","")},n.prototype.hasContent=function(){return this.getTitle()},n.prototype.getPosition=function(t){t=t||this.$element;var n=t[0],r="BODY"==n.tagName,i=n.getBoundingClientRect();null==i.width&&(i=e.extend({},i,{width:i.right-i.left,height:i.bottom-i.top}));var s=r?{top:0,left:0}:t.offset(),o={scroll:r?document.documentElement.scrollTop||document.body.scrollTop:t.scrollTop()},u=r?{width:e(window).width(),height:e(window).height()}:null;return e.extend({},i,o,u,s)},n.prototype.getCalculatedOffset=function(e,t,n,r){return"bottom"==e?{top:t.top+t.height,left:t.left+t.width/2-n/2}:"top"==e?{top:t.top-r,left:t.left+t.width/2-n/2}:"left"==e?{top:t.top+t.height/2-r/2,left:t.left-n}:{top:t.top+t.height/2-r/2,left:t.left+t.width}},n.prototype.getViewportAdjustedDelta=function(e,t,n,r){var i={top:0,left:0};if(!this.$viewport)return i;var s=this.options.viewport&&this.options.viewport.padding||0,o=this.getPosition(this.$viewport);if(/right|left/.test(e)){var u=t.top-s-o.scroll,a=t.top+s-o.scroll+r;u<o.top?i.top=o.top-u:a>o.top+o.height&&(i.top=o.top+o.height-a)}else{var f=t.left-s,l=t.left+s+n;f<o.left?i.left=o.left-f:l>o.width&&(i.left=o.left+o.width-l)}return i},n.prototype.getTitle=function(){var e,t=this.$element,n=this.options;return e=t.attr("data-original-title")||("function"==typeof n.title?n.title.call(t[0]):n.title)},n.prototype.getUID=function(e){do e+=~~(1e6*Math.random());while(document.getElementById(e));return e},n.prototype.tip=function(){return this.$tip=this.$tip||e(this.options.template)},n.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},n.prototype.enable=function(){this.enabled=!0},n.prototype.disable=function(){this.enabled=!1},n.prototype.toggleEnabled=function(){this.enabled=!this.enabled},n.prototype.toggle=function(t){var n=this;t&&(n=e(t.currentTarget).data("bs."+this.type),n||(n=new this.constructor(t.currentTarget,this.getDelegateOptions()),e(t.currentTarget).data("bs."+this.type,n))),n.tip().hasClass("in")?n.leave(n):n.enter(n)},n.prototype.destroy=function(){var e=this;clearTimeout(this.timeout),this.hide(function(){e.$element.off("."+e.type).removeData("bs."+e.type)})};var r=e.fn.tooltip;e.fn.tooltip=t,e.fn.tooltip.Constructor=n,e.fn.tooltip.noConflict=function(){return e.fn.tooltip=r,this}}(jQuery),+function(e){function t(t){return this.each(function(){var r=e(this),i=r.data("bs.popover"),s="object"==typeof t&&t;(i||!/destroy|hide/.test(t))&&(i||r.data("bs.popover",i=new n(this,s)),"string"==typeof t&&i[t]())})}var n=function(e,t){this.init("popover",e,t)};if(!e.fn.tooltip)throw new Error("Popover requires tooltip.js");n.VERSION="3.3.4",n.DEFAULTS=e.extend({},e.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),n.prototype=e.extend({},e.fn.tooltip.Constructor.prototype),n.prototype.constructor=n,n.prototype.getDefaults=function(){return n.DEFAULTS},n.prototype.setContent=function(){var e=this.tip(),t=this.getTitle(),n=this.getContent();e.find(".popover-title")[this.options.html?"html":"text"](t),e.find(".popover-content").children().detach().end()[this.options.html?"string"==typeof n?"html":"append":"text"](n),e.removeClass("fade top bottom left right in"),e.find(".popover-title").html()||e.find(".popover-title").hide()},n.prototype.hasContent=function(){return this.getTitle()||this.getContent()},n.prototype.getContent=function(){var e=this.$element,t=this.options;return e.attr("data-content")||("function"==typeof t.content?t.content.call(e[0]):t.content)},n.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")};var r=e.fn.popover;e.fn.popover=t,e.fn.popover.Constructor=n,e.fn.popover.noConflict=function(){return e.fn.popover=r,this}}(jQuery),+function(e){function t(n,r){this.$body=e(document.body),this.$scrollElement=e(e(n).is(document.body)?window:n),this.options=e.extend({},t.DEFAULTS,r),this.selector=(this.options.target||"")+" .nav li > a",this.offsets=[],this.targets=[],this.activeTarget=null,this.scrollHeight=0,this.$scrollElement.on("scroll.bs.scrollspy",e.proxy(this.process,this)),this.refresh(),this.process()}function n(n){return this.each(function(){var r=e(this),i=r.data("bs.scrollspy"),s="object"==typeof n&&n;i||r.data("bs.scrollspy",i=new t(this,s)),"string"==typeof n&&i[n]()})}t.VERSION="3.3.4",t.DEFAULTS={offset:10},t.prototype.getScrollHeight=function(){return this.$scrollElement[0].scrollHeight||Math.max(this.$body[0].scrollHeight,document.documentElement.scrollHeight)},t.prototype.refresh=function(){var t=this,n="offset",r=0;this.offsets=[],this.targets=[],this.scrollHeight=this.getScrollHeight(),e.isWindow(this.$scrollElement[0])||(n="position",r=this.$scrollElement.scrollTop()),this.$body.find(this.selector).map(function(){var t=e(this),i=t.data("target")||t.attr("href"),s=/^#./.test(i)&&e(i);return s&&s.length&&s.is(":visible")&&[[s[n]().top+r,i]]||null}).sort(function(e,t){return e[0]-t[0]}).each(function(){t.offsets.push(this[0]),t.targets.push(this[1])})},t.prototype.process=function(){var e,t=this.$scrollElement.scrollTop()+this.options.offset,n=this.getScrollHeight(),r=this.options.offset+n-this.$scrollElement.height(),i=this.offsets,s=this.targets,o=this.activeTarget;if(this.scrollHeight!=n&&this.refresh(),t>=r)return o!=(e=s[s.length-1])&&this.activate(e);if(o&&t<i[0])return this.activeTarget=null,this.clear();for(e=i.length;e--;)o!=s[e]&&t>=i[e]&&(void 0===i[e+1]||t<i[e+1])&&this.activate(s[e])},t.prototype.activate=function(t){this.activeTarget=t,this.clear();var n=this.selector+'[data-target="'+t+'"],'+this.selector+'[href="'+t+'"]',r=e(n).parents("li").addClass("active");r.parent(".dropdown-menu").length&&(r=r.closest("li.dropdown").addClass("active")),r.trigger("activate.bs.scrollspy")},t.prototype.clear=function(){e(this.selector).parentsUntil(this.options.target,".active").removeClass("active")};var r=e.fn.scrollspy;e.fn.scrollspy=n,e.fn.scrollspy.Constructor=t,e.fn.scrollspy.noConflict=function(){return e.fn.scrollspy=r,this},e(window).on("load.bs.scrollspy.data-api",function(){e('[data-spy="scroll"]').each(function(){var t=e(this);n.call(t,t.data())})})}(jQuery),+function(e){function t(t){return this.each(function(){var r=e(this),i=r.data("bs.tab");i||r.data("bs.tab",i=new n(this)),"string"==typeof t&&i[t]()})}var n=function(t){this.element=e(t)};n.VERSION="3.3.4",n.TRANSITION_DURATION=150,n.prototype.show=function(){var t=this.element,n=t.closest("ul:not(.dropdown-menu)"),r=t.data("target");if(r||(r=t.attr("href"),r=r&&r.replace(/.*(?=#[^\s]*$)/,"")),!t.parent("li").hasClass("active")){var i=n.find(".active:last a"),s=e.Event("hide.bs.tab",{relatedTarget:t[0]}),o=e.Event("show.bs.tab",{relatedTarget:i[0]});if(i.trigger(s),t.trigger(o),!o.isDefaultPrevented()&&!s.isDefaultPrevented()){var u=e(r);this.activate(t.closest("li"),n),this.activate(u,u.parent(),function(){i.trigger({type:"hidden.bs.tab",relatedTarget:t[0]}),t.trigger({type:"shown.bs.tab",relatedTarget:i[0]})})}}},n.prototype.activate=function(t,r,i){function s(){o.removeClass("active").find("> .dropdown-menu > .active").removeClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!1),t.addClass("active").find('[data-toggle="tab"]').attr("aria-expanded",!0),u?(t[0].offsetWidth,t.addClass("in")):t.removeClass("fade"),t.parent(".dropdown-menu").length&&t.closest("li.dropdown").addClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!0),i&&i()}var o=r.find("> .active"),u=i&&e.support.transition&&(o.length&&o.hasClass("fade")||!!r.find("> .fade").length);o.length&&u?o.one("bsTransitionEnd",s).emulateTransitionEnd(n.TRANSITION_DURATION):s(),o.removeClass("in")};var r=e.fn.tab;e.fn.tab=t,e.fn.tab.Constructor=n,e.fn.tab.noConflict=function(){return e.fn.tab=r,this};var i=function(n){n.preventDefault(),t.call(e(this),"show")};e(document).on("click.bs.tab.data-api",'[data-toggle="tab"]',i).on("click.bs.tab.data-api",'[data-toggle="pill"]',i)}(jQuery),+function(e){function t(t){return this.each(function(){var r=e(this),i=r.data("bs.affix"),s="object"==typeof t&&t;i||r.data("bs.affix",i=new n(this,s)),"string"==typeof t&&i[t]()})}var n=function(t,r){this.options=e.extend({},n.DEFAULTS,r),this.$target=e(this.options.target).on("scroll.bs.affix.data-api",e.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",e.proxy(this.checkPositionWithEventLoop,this)),this.$element=e(t),this.affixed=null,this.unpin=null,this.pinnedOffset=null,this.checkPosition()};n.VERSION="3.3.4",n.RESET="affix affix-top affix-bottom",n.DEFAULTS={offset:0,target:window},n.prototype.getState=function(e,t,n,r){var i=this.$target.scrollTop(),s=this.$element.offset(),o=this.$target.height();if(null!=n&&"top"==this.affixed)return n>i?"top":!1;if("bottom"==this.affixed)return null!=n?i+this.unpin<=s.top?!1:"bottom":e-r>=i+o?!1:"bottom";var u=null==this.affixed,a=u?i:s.top,f=u?o:t;return null!=n&&n>=i?"top":null!=r&&a+f>=e-r?"bottom":!1},n.prototype.getPinnedOffset=function(){if(this.pinnedOffset)return this.pinnedOffset;this.$element.removeClass(n.RESET).addClass("affix");var e=this.$target.scrollTop(),t=this.$element.offset();return this.pinnedOffset=t.top-e},n.prototype.checkPositionWithEventLoop=function(){setTimeout(e.proxy(this.checkPosition,this),1)},n.prototype.checkPosition=function(){if(this.$element.is(":visible")){var t=this.$element.height(),r=this.options.offset,i=r.top,s=r.bottom,o=e(document.body).height();"object"!=typeof r&&(s=i=r),"function"==typeof i&&(i=r.top(this.$element)),"function"==typeof s&&(s=r.bottom(this.$element));var u=this.getState(o,t,i,s);if(this.affixed!=u){null!=this.unpin&&this.$element.css("top","");var f="affix"+(u?"-"+u:""),l=e.Event(f+".bs.affix");if(this.$element.trigger(l),l.isDefaultPrevented())return;this.affixed=u,this.unpin="bottom"==u?this.getPinnedOffset():null,this.$element.removeClass(n.RESET).addClass(f).trigger(f.replace("affix","affixed")+".bs.affix")}"bottom"==u&&this.$element.offset({top:o-t-s})}};var r=e.fn.affix;e.fn.affix=t,e.fn.affix.Constructor=n,e.fn.affix.noConflict=function(){return e.fn.affix=r,this},e(window).on("load",function(){e('[data-spy="affix"]').each(function(){var n=e(this),r=n.data();r.offset=r.offset||{},null!=r.offsetBottom&&(r.offset.bottom=r.offsetBottom),null!=r.offsetTop&&(r.offset.top=r.offsetTop),t.call(n,r)})})}(jQuery),define("bootstrap",function(){}),function(e,t){function r(){return new Date(Date.UTC.apply(Date,arguments))}function i(){var e=new Date;return r(e.getFullYear(),e.getMonth(),e.getDate())}function s(e){return function(){return this[e].apply(this,arguments)}}function f(t,n){function u(e,t){return t.toLowerCase()}var r=e(t).data(),i={},s,o=new RegExp("^"+n.toLowerCase()+"([A-Z])");n=new RegExp("^"+n.toLowerCase());for(var a in r)n.test(a)&&(s=a.replace(o,u),i[s]=r[a]);return i}function l(t){var n={};if(!d[t]){t=t.split("-")[0];if(!d[t])return}var r=d[t];return e.each(p,function(e,t){t in r&&(n[t]=r[t])}),n}var n=e(window),o=function(){var t={get:function(e){return this.slice(e)[0]},contains:function(e){var t=e&&e.valueOf();for(var n=0,r=this.length;n<r;n++)if(this[n].valueOf()===t)return n;return-1},remove:function(e){this.splice(e,1)},replace:function(t){if(!t)return;e.isArray(t)||(t=[t]),this.clear(),this.push.apply(this,t)},clear:function(){this.splice(0)},copy:function(){var e=new o;return e.replace(this),e}};return function(){var n=[];return n.push.apply(n,arguments),e.extend(n,t),n}}(),u=function(t,n){this.dates=new o,this.viewDate=i(),this.focusDate=null,this._process_options(n),this.element=e(t),this.isInline=!1,this.isInput=this.element.is("input"),this.component=this.element.is(".date")?this.element.find(".add-on, .input-group-addon, .btn"):!1,this.hasInput=this.component&&this.element.find("input").length,this.component&&this.component.length===0&&(this.component=!1),this.picker=e(v.template),this._buildEvents(),this._attachEvents(),this.isInline?this.picker.addClass("datepicker-inline").appendTo(this.element):this.picker.addClass("datepicker-dropdown dropdown-menu"),this.o.rtl&&this.picker.addClass("datepicker-rtl"),this.viewMode=this.o.startView,this.o.calendarWeeks&&this.picker.find("tfoot th.today").attr("colspan",function(e,t){return parseInt(t)+1}),this._allow_update=!1,this.setStartDate(this._o.startDate),this.setEndDate(this._o.endDate),this.setDaysOfWeekDisabled(this.o.daysOfWeekDisabled),this.fillDow(),this.fillMonths(),this._allow_update=!0,this.update(),this.showMode(),this.isInline&&this.show()};u.prototype={constructor:u,_process_options:function(t){this._o=e.extend({},this._o,t);var n=this.o=e.extend({},this._o),r=n.language;d[r]||(r=r.split("-")[0],d[r]||(r=h.language)),n.language=r;switch(n.startView){case 2:case"decade":n.startView=2;break;case 1:case"year":n.startView=1;break;default:n.startView=0}switch(n.minViewMode){case 1:case"months":n.minViewMode=1;break;case 2:case"years":n.minViewMode=2;break;default:n.minViewMode=0}n.startView=Math.max(n.startView,n.minViewMode),n.multidate!==!0&&(n.multidate=Number(n.multidate)||!1,n.multidate!==!1?n.multidate=Math.max(0,n.multidate):n.multidate=1),n.multidateSeparator=String(n.multidateSeparator),n.weekStart%=7,n.weekEnd=(n.weekStart+6)%7;var i=v.parseFormat(n.format);n.startDate!==-Infinity&&(n.startDate?n.startDate instanceof Date?n.startDate=this._local_to_utc(this._zero_time(n.startDate)):n.startDate=v.parseDate(n.startDate,i,n.language):n.startDate=-Infinity),n.endDate!==Infinity&&(n.endDate?n.endDate instanceof Date?n.endDate=this._local_to_utc(this._zero_time(n.endDate)):n.endDate=v.parseDate(n.endDate,i,n.language):n.endDate=Infinity),n.daysOfWeekDisabled=n.daysOfWeekDisabled||[],e.isArray(n.daysOfWeekDisabled)||(n.daysOfWeekDisabled=n.daysOfWeekDisabled.split(/[,\s]*/)),n.daysOfWeekDisabled=e.map(n.daysOfWeekDisabled,function(e){return parseInt(e,10)});var s=String(n.orientation).toLowerCase().split(/\s+/g),o=n.orientation.toLowerCase();s=e.grep(s,function(e){return/^auto|left|right|top|bottom$/.test(e)}),n.orientation={x:"auto",y:"auto"};if(!!o&&o!=="auto")if(s.length===1)switch(s[0]){case"top":case"bottom":n.orientation.y=s[0];break;case"left":case"right":n.orientation.x=s[0]}else o=e.grep(s,function(e){return/^left|right$/.test(e)}),n.orientation.x=o[0]||"auto",o=e.grep(s,function(e){return/^top|bottom$/.test(e)}),n.orientation.y=o[0]||"auto"},_events:[],_secondaryEvents:[],_applyEvents:function(e){for(var n=0,r,i,s;n<e.length;n++)r=e[n][0],e[n].length===2?(i=t,s=e[n][1]):e[n].length===3&&(i=e[n][1],s=e[n][2]),r.on(s,i)},_unapplyEvents:function(e){for(var n=0,r,i,s;n<e.length;n++)r=e[n][0],e[n].length===2?(s=t,i=e[n][1]):e[n].length===3&&(s=e[n][1],i=e[n][2]),r.off(i,s)},_buildEvents:function(){this.isInput?this._events=[[this.element,{focus:e.proxy(this.show,this),keyup:e.proxy(function(t){e.inArray(t.keyCode,[27,37,39,38,40,32,13,9])===-1&&this.update()},this),keydown:e.proxy(this.keydown,this)}]]:this.component&&this.hasInput?this._events=[[this.element.find("input"),{focus:e.proxy(this.show,this),keyup:e.proxy(function(t){e.inArray(t.keyCode,[27,37,39,38,40,32,13,9])===-1&&this.update()},this),keydown:e.proxy(this.keydown,this)}],[this.component,{click:e.proxy(this.show,this)}]]:this.element.is("div")?this.isInline=!0:this._events=[[this.element,{click:e.proxy(this.show,this)}]],this._events.push([this.element,"*",{blur:e.proxy(function(e){this._focused_from=e.target},this)}],[this.element,{blur:e.proxy(function(e){this._focused_from=e.target},this)}]),this._secondaryEvents=[[this.picker,{click:e.proxy(this.click,this)}],[e(window),{resize:e.proxy(this.place,this)}],[e(document),{"mousedown touchstart":e.proxy(function(e){this.element.is(e.target)||this.element.find(e.target).length||this.picker.is(e.target)||this.picker.find(e.target).length||this.hide()},this)}]]},_attachEvents:function(){this._detachEvents(),this._applyEvents(this._events)},_detachEvents:function(){this._unapplyEvents(this._events)},_attachSecondaryEvents:function(){this._detachSecondaryEvents(),this._applyEvents(this._secondaryEvents)},_detachSecondaryEvents:function(){this._unapplyEvents(this._secondaryEvents)},_trigger:function(t,n){var r=n||this.dates.get(-1),i=this._utc_to_local(r);this.element.trigger({type:t,date:i,dates:e.map(this.dates,this._utc_to_local),format:e.proxy(function(e,t){arguments.length===0?(e=this.dates.length-1,t=this.o.format):typeof e=="string"&&(t=e,e=this.dates.length-1),t=t||this.o.format;var n=this.dates.get(e);return v.formatDate(n,t,this.o.language)},this)})},show:function(){this.isInline||this.picker.appendTo("body"),this.picker.show(),this.place(),this._attachSecondaryEvents(),this._trigger("show")},hide:function(){if(this.isInline)return;if(!this.picker.is(":visible"))return;this.focusDate=null,this.picker.hide().detach(),this._detachSecondaryEvents(),this.viewMode=this.o.startView,this.showMode(),this.o.forceParse&&(this.isInput&&this.element.val()||this.hasInput&&this.element.find("input").val())&&this.setValue(),this._trigger("hide")},remove:function(){this.hide(),this._detachEvents(),this._detachSecondaryEvents(),this.picker.remove(),delete this.element.data().datepicker,this.isInput||delete this.element.data().date},_utc_to_local:function(e){return e&&new Date(e.getTime()+e.getTimezoneOffset()*6e4)},_local_to_utc:function(e){return e&&new Date(e.getTime()-e.getTimezoneOffset()*6e4)},_zero_time:function(e){return e&&new Date(e.getFullYear(),e.getMonth(),e.getDate())},_zero_utc_time:function(e){return e&&new Date(Date.UTC(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()))},getDates:function(){return e.map(this.dates,this._utc_to_local)},getUTCDates:function(){return e.map(this.dates,function(e){return new Date(e)})},getDate:function(){return this._utc_to_local(this.getUTCDate())},getUTCDate:function(){return new Date(this.dates.get(-1))},setDates:function(){var t=e.isArray(arguments[0])?arguments[0]:arguments;this.update.apply(this,t),this._trigger("changeDate"),this.setValue()},setUTCDates:function(){var t=e.isArray(arguments[0])?arguments[0]:arguments;this.update.apply(this,e.map(t,this._utc_to_local)),this._trigger("changeDate"),this.setValue()},setDate:s("setDates"),setUTCDate:s("setUTCDates"),setValue:function(){var e=this.getFormattedDate();this.isInput?this.element.val(e).change():this.component&&this.element.find("input").val(e).change()},getFormattedDate:function(n){n===t&&(n=this.o.format);var r=this.o.language;return e.map(this.dates,function(e){return v.formatDate(e,n,r)}).join(this.o.multidateSeparator)},setStartDate:function(e){this._process_options({startDate:e}),this.update(),this.updateNavArrows()},setEndDate:function(e){this._process_options({endDate:e}),this.update(),this.updateNavArrows()},setDaysOfWeekDisabled:function(e){this._process_options({daysOfWeekDisabled:e}),this.update(),this.updateNavArrows()},place:function(){if(this.isInline)return;var t=this.picker.outerWidth(),r=this.picker.outerHeight(),i=10,s=n.width(),o=n.height(),u=n.scrollTop(),a=[];this.element.parents().each(function(){var t=e(this).css("z-index");t!="auto"&&t!==0&&a.push(parseInt(t))});var f=Math.max.apply(Math,a)+10,l=this.component?this.component.parent().offset():this.element.offset(),c=this.component?this.component.outerHeight(!0):this.element.outerHeight(!1),h=this.component?this.component.outerWidth(!0):this.element.outerWidth(!1),p=l.left,d=l.top;this.picker.removeClass("datepicker-orient-top datepicker-orient-bottom datepicker-orient-right datepicker-orient-left"),this.o.orientation.x!=="auto"?(this.picker.addClass("datepicker-orient-"+this.o.orientation.x),this.o.orientation.x==="right"&&(p-=t-h)):(this.picker.addClass("datepicker-orient-left"),l.left<0?p-=l.left-i:l.left+t>s&&(p=s-t-i));var v=this.o.orientation.y,m,g;v==="auto"&&(m=-u+l.top-r,g=u+o-(l.top+c+r),Math.max(m,g)===g?v="top":v="bottom"),this.picker.addClass("datepicker-orient-"+v),v==="top"?d+=c:d-=r+parseInt(this.picker.css("padding-top")),this.picker.css({top:d,left:p,zIndex:f})},_allow_update:!0,update:function(){if(!this._allow_update)return;var t=this.dates.copy(),n=[],r=!1;arguments.length?(e.each(arguments,e.proxy(function(e,t){t instanceof Date&&(t=this._local_to_utc(t)),n.push(t)},this)),r=!0):(n=this.isInput?this.element.val():this.element.data("date")||this.element.find("input").val(),n&&this.o.multidate?n=n.split(this.o.multidateSeparator):n=[n],delete this.element.data().date),n=e.map(n,e.proxy(function(e){return v.parseDate(e,this.o.format,this.o.language)},this)),n=e.grep(n,e.proxy(function(e){return e<this.o.startDate||e>this.o.endDate||!e},this),!0),this.dates.replace(n),this.dates.length?this.viewDate=new Date(this.dates.get(-1)):this.viewDate<this.o.startDate?this.viewDate=new Date(this.o.startDate):this.viewDate>this.o.endDate&&(this.viewDate=new Date(this.o.endDate)),r?this.setValue():n.length&&String(t)!==String(this.dates)&&this._trigger("changeDate"),!this.dates.length&&t.length&&this._trigger("clearDate"),this.fill()},fillDow:function(){var e=this.o.weekStart,t="<tr>";if(this.o.calendarWeeks){var n='<th class="cw">&nbsp;</th>';t+=n,this.picker.find(".datepicker-days thead tr:first-child").prepend(n)}while(e<this.o.weekStart+7)t+='<th class="dow">'+d[this.o.language].daysMin[e++%7]+"</th>";t+="</tr>",this.picker.find(".datepicker-days thead").append(t)},fillMonths:function(){var e="",t=0;while(t<12)e+='<span class="month">'+d[this.o.language].monthsShort[t++]+"</span>";this.picker.find(".datepicker-months td").html(e)},setRange:function(t){!t||!t.length?delete this.range:this.range=e.map(t,function(e){return e.valueOf()}),this.fill()},getClassNames:function(t){var n=[],r=this.viewDate.getUTCFullYear(),i=this.viewDate.getUTCMonth(),s=new Date;return t.getUTCFullYear()<r||t.getUTCFullYear()===r&&t.getUTCMonth()<i?n.push("old"):(t.getUTCFullYear()>r||t.getUTCFullYear()===r&&t.getUTCMonth()>i)&&n.push("new"),this.focusDate&&t.valueOf()===this.focusDate.valueOf()&&n.push("focused"),this.o.todayHighlight&&t.getUTCFullYear()===s.getFullYear()&&t.getUTCMonth()===s.getMonth()&&t.getUTCDate()===s.getDate()&&n.push("today"),this.dates.contains(t)!==-1&&n.push("active"),(t.valueOf()<this.o.startDate||t.valueOf()>this.o.endDate||e.inArray(t.getUTCDay(),this.o.daysOfWeekDisabled)!==-1)&&n.push("disabled"),this.range&&(t>this.range[0]&&t<this.range[this.range.length-1]&&n.push("range"),e.inArray(t.valueOf(),this.range)!==-1&&n.push("selected")),n},fill:function(){var n=new Date(this.viewDate),i=n.getUTCFullYear(),s=n.getUTCMonth(),o=this.o.startDate!==-Infinity?this.o.startDate.getUTCFullYear():-Infinity,u=this.o.startDate!==-Infinity?this.o.startDate.getUTCMonth():-Infinity,a=this.o.endDate!==Infinity?this.o.endDate.getUTCFullYear():Infinity,f=this.o.endDate!==Infinity?this.o.endDate.getUTCMonth():Infinity,l=d[this.o.language].today||d.en.today||"",c=d[this.o.language].clear||d.en.clear||"",h;this.picker.find(".datepicker-days thead th.datepicker-switch").text(d[this.o.language].months[s]+" "+i),this.picker.find("tfoot th.today").text(l).toggle(this.o.todayBtn!==!1),this.picker.find("tfoot th.clear").text(c).toggle(this.o.clearBtn!==!1),this.updateNavArrows(),this.fillMonths();var p=r(i,s-1,28),m=v.getDaysInMonth(p.getUTCFullYear(),p.getUTCMonth());p.setUTCDate(m),p.setUTCDate(m-(p.getUTCDay()-this.o.weekStart+7)%7);var g=new Date(p);g.setUTCDate(g.getUTCDate()+42),g=g.valueOf();var y=[],b;while(p.valueOf()<g){if(p.getUTCDay()===this.o.weekStart){y.push("<tr>");if(this.o.calendarWeeks){var w=new Date(+p+(this.o.weekStart-p.getUTCDay()-7)%7*864e5),E=new Date(Number(w)+(11-w.getUTCDay())%7*864e5),S=new Date(Number(S=r(E.getUTCFullYear(),0,1))+(11-S.getUTCDay())%7*864e5),x=(E-S)/864e5/7+1;y.push('<td class="cw">'+x+"</td>")}}b=this.getClassNames(p),b.push("day");if(this.o.beforeShowDay!==e.noop){var T=this.o.beforeShowDay(this._utc_to_local(p));T===t?T={}:typeof T=="boolean"?T={enabled:T}:typeof T=="string"&&(T={classes:T}),T.enabled===!1&&b.push("disabled"),T.classes&&(b=b.concat(T.classes.split(/\s+/))),T.tooltip&&(h=T.tooltip)}b=e.unique(b),y.push('<td class="'+b.join(" ")+'"'+(h?' title="'+h+'"':"")+">"+p.getUTCDate()+"</td>"),p.getUTCDay()===this.o.weekEnd&&y.push("</tr>"),p.setUTCDate(p.getUTCDate()+1)}this.picker.find(".datepicker-days tbody").empty().append(y.join(""));var N=this.picker.find(".datepicker-months").find("th:eq(1)").text(i).end().find("span").removeClass("active");e.each(this.dates,function(e,t){t.getUTCFullYear()===i&&N.eq(t.getUTCMonth()).addClass("active")}),(i<o||i>a)&&N.addClass("disabled"),i===o&&N.slice(0,u).addClass("disabled"),i===a&&N.slice(f+1).addClass("disabled"),y="",i=parseInt(i/10,10)*10;var C=this.picker.find(".datepicker-years").find("th:eq(1)").text(i+"-"+(i+9)).end().find("td");i-=1;var k=e.map(this.dates,function(e){return e.getUTCFullYear()}),L;for(var A=-1;A<11;A++)L=["year"],A===-1?L.push("old"):A===10&&L.push("new"),e.inArray(i,k)!==-1&&L.push("active"),(i<o||i>a)&&L.push("disabled"),y+='<span class="'+L.join(" ")+'">'+i+"</span>",i+=1;C.html(y)},updateNavArrows:function(){if(!this._allow_update)return;var e=new Date(this.viewDate),t=e.getUTCFullYear(),n=e.getUTCMonth();switch(this.viewMode){case 0:this.o.startDate!==-Infinity&&t<=this.o.startDate.getUTCFullYear()&&n<=this.o.startDate.getUTCMonth()?this.picker.find(".prev").css({visibility:"hidden"}):this.picker.find(".prev").css({visibility:"visible"}),this.o.endDate!==Infinity&&t>=this.o.endDate.getUTCFullYear()&&n>=this.o.endDate.getUTCMonth()?this.picker.find(".next").css({visibility:"hidden"}):this.picker.find(".next").css({visibility:"visible"});break;case 1:case 2:this.o.startDate!==-Infinity&&t<=this.o.startDate.getUTCFullYear()?this.picker.find(".prev").css({visibility:"hidden"}):this.picker.find(".prev").css({visibility:"visible"}),this.o.endDate!==Infinity&&t>=this.o.endDate.getUTCFullYear()?this.picker.find(".next").css({visibility:"hidden"}):this.picker.find(".next").css({visibility:"visible"})}},click:function(t){t.preventDefault();var n=e(t.target).closest("span, td, th"),i,s,o;if(n.length===1)switch(n[0].nodeName.toLowerCase()){case"th":switch(n[0].className){case"datepicker-switch":this.showMode(1);break;case"prev":case"next":var u=v.modes[this.viewMode].navStep*(n[0].className==="prev"?-1:1);switch(this.viewMode){case 0:this.viewDate=this.moveMonth(this.viewDate,u),this._trigger("changeMonth",this.viewDate);break;case 1:case 2:this.viewDate=this.moveYear(this.viewDate,u),this.viewMode===1&&this._trigger("changeYear",this.viewDate)}this.fill();break;case"today":var a=new Date;a=r(a.getFullYear(),a.getMonth(),a.getDate(),0,0,0),this.showMode(-2);var f=this.o.todayBtn==="linked"?null:"view";this._setDate(a,f);break;case"clear":var l;this.isInput?l=this.element:this.component&&(l=this.element.find("input")),l&&l.val("").change(),this.update(),this._trigger("changeDate"),this.o.autoclose&&this.hide()}break;case"span":n.is(".disabled")||(this.viewDate.setUTCDate(1),n.is(".month")?(o=1,s=n.parent().find("span").index(n),i=this.viewDate.getUTCFullYear(),this.viewDate.setUTCMonth(s),this._trigger("changeMonth",this.viewDate),this.o.minViewMode===1&&this._setDate(r(i,s,o))):(o=1,s=0,i=parseInt(n.text(),10)||0,this.viewDate.setUTCFullYear(i),this._trigger("changeYear",this.viewDate),this.o.minViewMode===2&&this._setDate(r(i,s,o))),this.showMode(-1),this.fill());break;case"td":n.is(".day")&&!n.is(".disabled")&&(o=parseInt(n.text(),10)||1,i=this.viewDate.getUTCFullYear(),s=this.viewDate.getUTCMonth(),n.is(".old")?s===0?(s=11,i-=1):s-=1:n.is(".new")&&(s===11?(s=0,i+=1):s+=1),this._setDate(r(i,s,o)))}this.picker.is(":visible")&&this._focused_from&&e(this._focused_from).focus(),delete this._focused_from},_toggle_multidate:function(e){var t=this.dates.contains(e);e?t!==-1?this.dates.remove(t):this.dates.push(e):this.dates.clear();if(typeof this.o.multidate=="number")while(this.dates.length>this.o.multidate)this.dates.remove(0)},_setDate:function(e,t){(!t||t==="date")&&this._toggle_multidate(e&&new Date(e));if(!t||t==="view")this.viewDate=e&&new Date(e);this.fill(),this.setValue(),this._trigger("changeDate");var n;this.isInput?n=this.element:this.component&&(n=this.element.find("input")),n&&n.change(),this.o.autoclose&&(!t||t==="date")&&this.hide()},moveMonth:function(e,n){if(!e)return t;if(!n)return e;var r=new Date(e.valueOf()),i=r.getUTCDate(),s=r.getUTCMonth(),o=Math.abs(n),u,a;n=n>0?1:-1;if(o===1){a=n===-1?function(){return r.getUTCMonth()===s}:function(){return r.getUTCMonth()!==u},u=s+n,r.setUTCMonth(u);if(u<0||u>11)u=(u+12)%12}else{for(var f=0;f<o;f++)r=this.moveMonth(r,n);u=r.getUTCMonth(),r.setUTCDate(i),a=function(){return u!==r.getUTCMonth()}}while(a())r.setUTCDate(--i),r.setUTCMonth(u);return r},moveYear:function(e,t){return this.moveMonth(e,t*12)},dateWithinRange:function(e){return e>=this.o.startDate&&e<=this.o.endDate},keydown:function(e){if(this.picker.is(":not(:visible)")){e.keyCode===27&&this.show();return}var t=!1,n,r,s,o=this.focusDate||this.viewDate;switch(e.keyCode){case 27:this.focusDate?(this.focusDate=null,this.viewDate=this.dates.get(-1)||this.viewDate,this.fill()):this.hide(),e.preventDefault();break;case 37:case 39:if(!this.o.keyboardNavigation)break;n=e.keyCode===37?-1:1,e.ctrlKey?(r=this.moveYear(this.dates.get(-1)||i(),n),s=this.moveYear(o,n),this._trigger("changeYear",this.viewDate)):e.shiftKey?(r=this.moveMonth(this.dates.get(-1)||i(),n),s=this.moveMonth(o,n),this._trigger("changeMonth",this.viewDate)):(r=new Date(this.dates.get(-1)||i()),r.setUTCDate(r.getUTCDate()+n),s=new Date(o),s.setUTCDate(o.getUTCDate()+n)),this.dateWithinRange(r)&&(this.focusDate=this.viewDate=s,this.setValue(),this.fill(),e.preventDefault());break;case 38:case 40:if(!this.o.keyboardNavigation)break;n=e.keyCode===38?-1:1,e.ctrlKey?(r=this.moveYear(this.dates.get(-1)||i(),n),s=this.moveYear(o,n),this._trigger("changeYear",this.viewDate)):e.shiftKey?(r=this.moveMonth(this.dates.get(-1)||i(),n),s=this.moveMonth(o,n),this._trigger("changeMonth",this.viewDate)):(r=new Date(this.dates.get(-1)||i()),r.setUTCDate(r.getUTCDate()+n*7),s=new Date(o),s.setUTCDate(o.getUTCDate()+n*7)),this.dateWithinRange(r)&&(this.focusDate=this.viewDate=s,this.setValue(),this.fill(),e.preventDefault());break;case 32:break;case 13:o=this.focusDate||this.dates.get(-1)||this.viewDate,this._toggle_multidate(o),t=!0,this.focusDate=null,this.viewDate=this.dates.get(-1)||this.viewDate,this.setValue(),this.fill(),this.picker.is(":visible")&&(e.preventDefault(),this.o.autoclose&&this.hide());break;case 9:this.focusDate=null,this.viewDate=this.dates.get(-1)||this.viewDate,this.fill(),this.hide()}if(t){this.dates.length?this._trigger("changeDate"):this._trigger("clearDate");var u;this.isInput?u=this.element:this.component&&(u=this.element.find("input")),u&&u.change()}},showMode:function(e){e&&(this.viewMode=Math.max(this.o.minViewMode,Math.min(2,this.viewMode+e))),this.picker.find(">div").hide().filter(".datepicker-"+v.modes[this.viewMode].clsName).css("display","block"),this.updateNavArrows()}};var a=function(t,n){this.element=e(t),this.inputs=e.map(n.inputs,function(e){return e.jquery?e[0]:e}),delete n.inputs,e(this.inputs).datepicker(n).bind("changeDate",e.proxy(this.dateUpdated,this)),this.pickers=e.map(this.inputs,function(t){return e(t).data("datepicker")}),this.updateDates()};a.prototype={updateDates:function(){this.dates=e.map(this.pickers,function(e){return e.getUTCDate()}),this.updateRanges()},updateRanges:function(){var t=e.map(this.dates,function(e){return e.valueOf()});e.each(this.pickers,function(e,n){n.setRange(t)})},dateUpdated:function(t){if(this.updating)return;this.updating=!0;var n=e(t.target).data("datepicker"),r=n.getUTCDate(),i=e.inArray(t.target,this.inputs),s=this.inputs.length;if(i===-1)return;e.each(this.pickers,function(e,t){t.getUTCDate()||t.setUTCDate(r)});if(r<this.dates[i])while(i>=0&&r<this.dates[i])this.pickers[i--].setUTCDate(r);else if(r>this.dates[i])while(i<s&&r>this.dates[i])this.pickers[i++].setUTCDate(r);this.updateDates(),delete this.updating},remove:function(){e.map(this.pickers,function(e){e.remove()}),delete this.element.data().datepicker}};var c=e.fn.datepicker;e.fn.datepicker=function(n){var r=Array.apply(null,arguments);r.shift();var i;return this.each(function(){var s=e(this),o=s.data("datepicker"),c=typeof n=="object"&&n;if(!o){var p=f(this,"date"),d=e.extend({},h,p,c),v=l(d.language),m=e.extend({},h,v,p,c);if(s.is(".input-daterange")||m.inputs){var g={inputs:m.inputs||s.find("input").toArray()};s.data("datepicker",o=new a(this,e.extend(m,g)))}else s.data("datepicker",o=new u(this,m))}if(typeof n=="string"&&typeof o[n]=="function"){i=o[n].apply(o,r);if(i!==t)return!1}}),i!==t?i:this};var h=e.fn.datepicker.defaults={autoclose:!1,beforeShowDay:e.noop,calendarWeeks:!1,clearBtn:!1,daysOfWeekDisabled:[],endDate:Infinity,forceParse:!0,format:"mm/dd/yyyy",keyboardNavigation:!0,language:"en",minViewMode:0,multidate:!1,multidateSeparator:",",orientation:"auto",rtl:!1,startDate:-Infinity,startView:0,todayBtn:!1,todayHighlight:!1,weekStart:0},p=e.fn.datepicker.locale_opts=["format","rtl","weekStart"];e.fn.datepicker.Constructor=u;var d=e.fn.datepicker.dates={en:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sun"],daysMin:["Su","Mo","Tu","We","Th","Fr","Sa","Su"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],today:"Today",clear:"Clear"}},v={modes:[{clsName:"days",navFnc:"Month",navStep:1},{clsName:"months",navFnc:"FullYear",navStep:1},{clsName:"years",navFnc:"FullYear",navStep:10}],isLeapYear:function(e){return e%4===0&&e%100!==0||e%400===0},getDaysInMonth:function(e,t){return[31,v.isLeapYear(e)?29:28,31,30,31,30,31,31,30,31,30,31][t]},validParts:/dd?|DD?|mm?|MM?|yy(?:yy)?/g,nonpunctuation:/[^ -\/:-@\[\u3400-\u9fff-`{-~\t\n\r]+/g,parseFormat:function(e){var t=e.replace(this.validParts,"\0").split("\0"),n=e.match(this.validParts);if(!t||!t.length||!n||n.length===0)throw new Error("Invalid date format.");return{separators:t,parts:n}},parseDate:function(n,i,s){function w(){var e=this.slice(0,a[c].length),t=a[c].slice(0,e.length);return e===t}if(!n)return t;if(n instanceof Date)return n;typeof i=="string"&&(i=v.parseFormat(i));var o=/([\-+]\d+)([dmwy])/,a=n.match(/([\-+]\d+)([dmwy])/g),f,l,c;if(/^[\-+]\d+[dmwy]([\s,]+[\-+]\d+[dmwy])*$/.test(n)){n=new Date;for(c=0;c<a.length;c++){f=o.exec(a[c]),l=parseInt(f[1]);switch(f[2]){case"d":n.setUTCDate(n.getUTCDate()+l);break;case"m":n=u.prototype.moveMonth.call(u.prototype,n,l);break;case"w":n.setUTCDate(n.getUTCDate()+l*7);break;case"y":n=u.prototype.moveYear.call(u.prototype,n,l)}}return r(n.getUTCFullYear(),n.getUTCMonth(),n.getUTCDate(),0,0,0)}a=n&&n.match(this.nonpunctuation)||[],n=new Date;var h={},p=["yyyy","yy","M","MM","m","mm","d","dd"],m={yyyy:function(e,t){return e.setUTCFullYear(t)},yy:function(e,t){return e.setUTCFullYear(2e3+t)},m:function(e,t){if(isNaN(e))return e;t-=1;while(t<0)t+=12;t%=12,e.setUTCMonth(t);while(e.getUTCMonth()!==t)e.setUTCDate(e.getUTCDate()-1);return e},d:function(e,t){return e.setUTCDate(t)}},g,y;m.M=m.MM=m.mm=m.m,m.dd=m.d,n=r(n.getFullYear(),n.getMonth(),n.getDate(),0,0,0);var b=i.parts.slice();a.length!==b.length&&(b=e(b).filter(function(t,n){return e.inArray(n,p)!==-1}).toArray());if(a.length===b.length){var E;for(c=0,E=b.length;c<E;c++){g=parseInt(a[c],10),f=b[c];if(isNaN(g))switch(f){case"MM":y=e(d[s].months).filter(w),g=e.inArray(y[0],d[s].months)+1;break;case"M":y=e(d[s].monthsShort).filter(w),g=e.inArray(y[0],d[s].monthsShort)+1}h[f]=g}var S,x;for(c=0;c<p.length;c++)x=p[c],x in h&&!isNaN(h[x])&&(S=new Date(n),m[x](S,h[x]),isNaN(S)||(n=S))}return n},formatDate:function(t,n,r){if(!t)return"";typeof n=="string"&&(n=v.parseFormat(n));var i={d:t.getUTCDate(),D:d[r].daysShort[t.getUTCDay()],DD:d[r].days[t.getUTCDay()],m:t.getUTCMonth()+1,M:d[r].monthsShort[t.getUTCMonth()],MM:d[r].months[t.getUTCMonth()],yy:t.getUTCFullYear().toString().substring(2),yyyy:t.getUTCFullYear()};i.dd=(i.d<10?"0":"")+i.d,i.mm=(i.m<10?"0":"")+i.m,t=[];var s=e.extend([],n.separators);for(var o=0,u=n.parts.length;o<=u;o++)s.length&&t.push(s.shift()),t.push(i[n.parts[o]]);return t.join("")},headTemplate:'<thead><tr><th class="prev"><i class="glyphicon glyphicon-chevron-left"></i></th><th colspan="5" class="datepicker-switch"></th><th class="next"><i class="glyphicon glyphicon-chevron-right"></i></th></tr></thead>',contTemplate:'<tbody><tr><td colspan="7"></td></tr></tbody>',footTemplate:'<tfoot><tr><th colspan="7" class="today"></th></tr><tr><th colspan="7" class="clear"></th></tr></tfoot>'};v.template='<div class="datepicker"><div class="datepicker-days"><table class=" table-condensed">'+v.headTemplate+"<tbody></tbody>"+v.footTemplate+"</table>"+"</div>"+'<div class="datepicker-months">'+'<table class="table-condensed">'+v.headTemplate+v.contTemplate+v.footTemplate+"</table>"+"</div>"+'<div class="datepicker-years">'+'<table class="table-condensed">'+v.headTemplate+v.contTemplate+v.footTemplate+"</table>"+"</div>"+"</div>",e.fn.datepicker.DPGlobal=v,e.fn.datepicker.noConflict=function(){return e.fn.datepicker=c,this},e(document).on("focus.datepicker.data-api click.datepicker.data-api",'[data-provide="datepicker"]',function(t){var n=e(this);if(n.data("datepicker"))return;t.preventDefault(),n.datepicker("show")}),e(function(){e('[data-provide="datepicker-inline"]').datepicker()})}(window.jQuery),define("datepicker",function(){}),!function(e){"function"==typeof define&&define.amd?define("jquery.nicescroll",["jquery"],e):e(jQuery)}(function(e){function t(){var e=document.getElementsByTagName("script"),t=e[e.length-1].src.split("?")[0];return t.split("/").length>0?t.split("/").slice(0,-1).join("/")+"/":""}function n(e,t,n){for(var r=0;r<t.length;r++)n(e,t[r])}var r=!1,i=!1,s=0,o=2e3,u=0,a=e,f=["ms","moz","webkit","o"],l=window.requestAnimationFrame||!1,c=window.cancelAnimationFrame||!1;if(!l)for(var h in f){var p=f[h];l||(l=window[p+"RequestAnimationFrame"]),c||(c=window[p+"CancelAnimationFrame"]||window[p+"CancelRequestAnimationFrame"])}var d=window.MutationObserver||window.WebKitMutationObserver||!1,v={zindex:"auto",cursoropacitymin:0,cursoropacitymax:1,cursorcolor:"#424242",cursorwidth:"5px",cursorborder:"1px solid #fff",cursorborderradius:"5px",scrollspeed:60,mousescrollstep:24,touchbehavior:!1,hwacceleration:!0,usetransition:!0,boxzoom:!1,dblclickzoom:!0,gesturezoom:!0,grabcursorenabled:!0,autohidemode:!0,background:"",iframeautoresize:!0,cursorminheight:32,preservenativescrolling:!0,railoffset:!1,railhoffset:!1,bouncescroll:!0,spacebarenabled:!0,railpadding:{top:0,right:0,left:0,bottom:0},disableoutline:!0,horizrailenabled:!0,railalign:"right",railvalign:"bottom",enabletranslate3d:!0,enablemousewheel:!0,enablekeyboard:!0,smoothscroll:!0,sensitiverail:!0,enablemouselockapi:!0,cursorfixedheight:!1,directionlockdeadzone:6,hidecursordelay:400,nativeparentscrolling:!0,enablescrollonselection:!0,overflowx:!0,overflowy:!0,cursordragspeed:.3,rtlmode:"auto",cursordragontouch:!1,oneaxismousemode:"auto",scriptpath:t()},m=!1,g=function(){function e(){var e=["-moz-grab","-webkit-grab","grab"];(n.ischrome&&!n.ischrome22||n.isie)&&(e=[]);for(var r=0;r<e.length;r++){var i=e[r];if(t.style.cursor=i,t.style.cursor==i)return i}return"url(//mail.google.com/mail/images/2/openhand.cur),n-resize"}if(m)return m;var t=document.createElement("DIV"),n={};n.haspointerlock="pointerLockElement"in document||"mozPointerLockElement"in document||"webkitPointerLockElement"in document,n.isopera="opera"in window,n.isopera12=n.isopera&&"getUserMedia"in navigator,n.isoperamini="[object OperaMini]"===Object.prototype.toString.call(window.operamini),n.isie="all"in document&&"attachEvent"in t&&!n.isopera,n.isieold=n.isie&&!("msInterpolationMode"in t.style),n.isie7=!(!n.isie||n.isieold||"documentMode"in document&&7!=document.documentMode),n.isie8=n.isie&&"documentMode"in document&&8==document.documentMode,n.isie9=n.isie&&"performance"in window&&document.documentMode>=9,n.isie10=n.isie&&"performance"in window&&document.documentMode>=10,n.isie9mobile=/iemobile.9/i.test(navigator.userAgent),n.isie9mobile&&(n.isie9=!1),n.isie7mobile=!n.isie9mobile&&n.isie7&&/iemobile/i.test(navigator.userAgent),n.ismozilla="MozAppearance"in t.style,n.iswebkit="WebkitAppearance"in t.style,n.ischrome="chrome"in window,n.ischrome22=n.ischrome&&n.haspointerlock,n.ischrome26=n.ischrome&&"transition"in t.style,n.cantouch="ontouchstart"in document.documentElement||"ontouchstart"in window,n.hasmstouch=window.navigator.msPointerEnabled||!1,n.ismac=/^mac$/i.test(navigator.platform),n.isios=n.cantouch&&/iphone|ipad|ipod/i.test(navigator.platform),n.isios4=n.isios&&!("seal"in Object),n.isandroid=/android/i.test(navigator.userAgent),n.trstyle=!1,n.hastransform=!1,n.hastranslate3d=!1,n.transitionstyle=!1,n.hastransition=!1,n.transitionend=!1;for(var r=["transform","msTransform","webkitTransform","MozTransform","OTransform"],i=0;i<r.length;i++)if(void 0!==t.style[r[i]]){n.trstyle=r[i];break}n.hastransform=0!=n.trstyle,n.hastransform&&(t.style[n.trstyle]="translate3d(1px,2px,3px)",n.hastranslate3d=/translate3d/.test(t.style[n.trstyle])),n.transitionstyle=!1,n.prefixstyle="",n.transitionend=!1;for(var r=["transition","webkitTransition","MozTransition","OTransition","OTransition","msTransition","KhtmlTransition"],s=["","-webkit-","-moz-","-o-","-o","-ms-","-khtml-"],o=["transitionend","webkitTransitionEnd","transitionend","otransitionend","oTransitionEnd","msTransitionEnd","KhtmlTransitionEnd"],i=0;i<r.length;i++)if(r[i]in t.style){n.transitionstyle=r[i],n.prefixstyle=s[i],n.transitionend=o[i];break}return n.ischrome26&&(n.prefixstyle=s[1]),n.hastransition=n.transitionstyle,n.cursorgrabvalue=e(),n.hasmousecapture="setCapture"in t,n.hasMutationObserver=d!==!1,t=null,m=n,n},y=function(e,t){function n(){var e=y.doc.css(E.trstyle);return e&&"matrix"==e.substr(0,6)?e.replace(/^.*\((.*)\)$/g,"$1").replace(/px/g,"").split(/, +/):!1}function f(){var e=y.win;if("zIndex"in e)return e.zIndex();for(;e.length>0;){if(9==e[0].nodeType)return!1;var t=e.css("zIndex");if(!isNaN(t)&&0!=t)return parseInt(t);e=e.parent()}return!1}function h(e,t,n){var r=e.css(t),i=parseFloat(r);if(isNaN(i)){i=T[r]||0;var s=3==i?n?y.win.outerHeight()-y.win.innerHeight():y.win.outerWidth()-y.win.innerWidth():1;return y.isie8&&i&&(i+=1),s?i:0}return i}function p(e,t,n,r){y._bind(e,t,function(r){var r=r?r:window.event,i={original:r,target:r.target||r.srcElement,type:"wheel",deltaMode:"MozMousePixelScroll"==r.type?0:1,deltaX:0,deltaZ:0,preventDefault:function(){return r.preventDefault?r.preventDefault():r.returnValue=!1,!1},stopImmediatePropagation:function(){r.stopImmediatePropagation?r.stopImmediatePropagation():r.cancelBubble=!0}};return"mousewheel"==t?(i.deltaY=-1/40*r.wheelDelta,r.wheelDeltaX&&(i.deltaX=-1/40*r.wheelDeltaX)):i.deltaY=r.detail,n.call(e,i)},r)}function m(e,t,n){var r,i;if(0==e.deltaMode?(r=-Math.floor(e.deltaX*(y.opt.mousescrollstep/54)),i=-Math.floor(e.deltaY*(y.opt.mousescrollstep/54))):1==e.deltaMode&&(r=-Math.floor(e.deltaX*y.opt.mousescrollstep),i=-Math.floor(e.deltaY*y.opt.mousescrollstep)),t&&y.opt.oneaxismousemode&&0==r&&i&&(r=i,i=0),r&&(y.scrollmom&&y.scrollmom.stop(),y.lastdeltax+=r,y.debounced("mousewheelx",function(){var e=y.lastdeltax;y.lastdeltax=0,y.rail.drag||y.doScrollLeftBy(e)},15)),i){if(y.opt.nativeparentscrolling&&n&&!y.ispage&&!y.zoomactive)if(0>i){if(y.getScrollTop()>=y.page.maxh)return!0}else if(y.getScrollTop()<=0)return!0;y.scrollmom&&y.scrollmom.stop(),y.lastdeltay+=i,y.debounced("mousewheely",function(){var e=y.lastdeltay;y.lastdeltay=0,y.rail.drag||y.doScrollBy(e)},15)}return e.stopImmediatePropagation(),e.preventDefault()}var y=this;if(this.version="3.5.6",this.name="nicescroll",this.me=t,this.opt={doc:a("body"),win:!1},a.extend(this.opt,v),this.opt.snapbackspeed=80,e)for(var w in y.opt)void 0!==e[w]&&(y.opt[w]=e[w]);this.doc=y.opt.doc,this.iddoc=this.doc&&this.doc[0]?this.doc[0].id||"":"",this.ispage=/^BODY|HTML/.test(y.opt.win?y.opt.win[0].nodeName:this.doc[0].nodeName),this.haswrapper=y.opt.win!==!1,this.win=y.opt.win||(this.ispage?a(window):this.doc),this.docscroll=this.ispage&&!this.haswrapper?a(window):this.win,this.body=a("body"),this.viewport=!1,this.isfixed=!1,this.iframe=!1,this.isiframe="IFRAME"==this.doc[0].nodeName&&"IFRAME"==this.win[0].nodeName,this.istextarea="TEXTAREA"==this.win[0].nodeName,this.forcescreen=!1,this.canshowonmouseevent="scroll"!=y.opt.autohidemode,this.onmousedown=!1,this.onmouseup=!1,this.onmousemove=!1,this.onmousewheel=!1,this.onkeypress=!1,this.ongesturezoom=!1,this.onclick=!1,this.onscrollstart=!1,this.onscrollend=!1,this.onscrollcancel=!1,this.onzoomin=!1,this.onzoomout=!1,this.view=!1,this.page=!1,this.scroll={x:0,y:0},this.scrollratio={x:0,y:0},this.cursorheight=20,this.scrollvaluemax=0,this.isrtlmode="auto"==this.opt.rtlmode?"rtl"==(this.win[0]==window?this.body:this.win).css("direction"):this.opt.rtlmode===!0,this.scrollrunning=!1,this.scrollmom=!1,this.observer=!1,this.observerremover=!1;do this.id="ascrail"+o++;while(document.getElementById(this.id));this.rail=!1,this.cursor=!1,this.cursorfreezed=!1,this.selectiondrag=!1,this.zoom=!1,this.zoomactive=!1,this.hasfocus=!1,this.hasmousefocus=!1,this.visibility=!0,this.locked=!1,this.hidden=!1,this.cursoractive=!0,this.wheelprevented=!1,this.overflowx=y.opt.overflowx,this.overflowy=y.opt.overflowy,this.nativescrollingarea=!1,this.checkarea=0,this.events=[],this.saved={},this.delaylist={},this.synclist={},this.lastdeltax=0,this.lastdeltay=0,this.detected=g();var E=a.extend({},this.detected);this.canhwscroll=E.hastransform&&y.opt.hwacceleration,this.ishwscroll=this.canhwscroll&&y.haswrapper,this.istouchcapable=!1,E.cantouch&&E.iswebkit&&!E.isios&&!E.isandroid&&(this.istouchcapable=!0,E.cantouch=!1),E.cantouch&&E.ismozilla&&!E.isios&&!E.isandroid&&(this.istouchcapable=!0,E.cantouch=!1),y.opt.enablemouselockapi||(E.hasmousecapture=!1,E.haspointerlock=!1),this.delayed=function(e,t,n,r){var i=y.delaylist[e],s=(new Date).getTime();return!r&&i&&i.tt?!1:(i&&i.tt&&clearTimeout(i.tt),void (i&&i.last+n>s&&!i.tt?y.delaylist[e]={last:s+n,tt:setTimeout(function(){y&&(y.delaylist[e].tt=0,t.call())},n)}:i&&i.tt||(y.delaylist[e]={last:s,tt:0},setTimeout(function(){t.call()},0))))},this.debounced=function(e,t,n){var r=y.delaylist[e];(new Date).getTime(),y.delaylist[e]=t,r||setTimeout(function(){var t=y.delaylist[e];y.delaylist[e]=!1,t.call()},n)};var S=!1;if(this.synched=function(e,t){function n(){S||(l(function(){S=!1;for(e in y.synclist){var t=y.synclist[e];t&&t.call(y),y.synclist[e]=!1}}),S=!0)}return y.synclist[e]=t,n(),e},this.unsynched=function(e){y.synclist[e]&&(y.synclist[e]=!1)},this.css=function(e,t){for(var n in t)y.saved.css.push([e,n,e.css(n)]),e.css(n,t[n])},this.scrollTop=function(e){return void 0===e?y.getScrollTop():y.setScrollTop(e)},this.scrollLeft=function(e){return void 0===e?y.getScrollLeft():y.setScrollLeft(e)},BezierClass=function(e,t,n,r,i,s,o){this.st=e,this.ed=t,this.spd=n,this.p1=r||0,this.p2=i||1,this.p3=s||0,this.p4=o||1,this.ts=(new Date).getTime(),this.df=this.ed-this.st},BezierClass.prototype={B2:function(e){return 3*e*e*(1-e)},B3:function(e){return 3*e*(1-e)*(1-e)},B4:function(e){return(1-e)*(1-e)*(1-e)},getNow:function(){var e=(new Date).getTime(),t=1-(e-this.ts)/this.spd,n=this.B2(t)+this.B3(t)+this.B4(t);return 0>t?this.ed:this.st+Math.round(this.df*n)},update:function(e,t){return this.st=this.getNow(),this.ed=e,this.spd=t,this.ts=(new Date).getTime(),this.df=this.ed-this.st,this}},this.ishwscroll){this.doc.translate={x:0,y:0,tx:"0px",ty:"0px"},E.hastranslate3d&&E.isios&&this.doc.css("-webkit-backface-visibility","hidden"),this.getScrollTop=function(e){if(!e){var t=n();if(t)return 16==t.length?-t[13]:-t[5];if(y.timerscroll&&y.timerscroll.bz)return y.timerscroll.bz.getNow()}return y.doc.translate.y},this.getScrollLeft=function(e){if(!e){var t=n();if(t)return 16==t.length?-t[12]:-t[4];if(y.timerscroll&&y.timerscroll.bh)return y.timerscroll.bh.getNow()}return y.doc.translate.x},this.notifyScrollEvent=document.createEvent?function(e){var t=document.createEvent("UIEvents");t.initUIEvent("scroll",!1,!0,window,1),e.dispatchEvent(t)}:document.fireEvent?function(e){var t=document.createEventObject();e.fireEvent("onscroll"),t.cancelBubble=!0}:function(){};var x=this.isrtlmode?1:-1;E.hastranslate3d&&y.opt.enabletranslate3d?(this.setScrollTop=function(e,t){y.doc.translate.y=e,y.doc.translate.ty=-1*e+"px",y.doc.css(E.trstyle,"translate3d("+y.doc.translate.tx+","+y.doc.translate.ty+",0px)"),t||y.notifyScrollEvent(y.win[0])},this.setScrollLeft=function(e,t){y.doc.translate.x=e,y.doc.translate.tx=e*x+"px",y.doc.css(E.trstyle,"translate3d("+y.doc.translate.tx+","+y.doc.translate.ty+",0px)"),t||y.notifyScrollEvent(y.win[0])}):(this.setScrollTop=function(e,t){y.doc.translate.y=e,y.doc.translate.ty=-1*e+"px",y.doc.css(E.trstyle,"translate("+y.doc.translate.tx+","+y.doc.translate.ty+")"),t||y.notifyScrollEvent(y.win[0])},this.setScrollLeft=function(e,t){y.doc.translate.x=e,y.doc.translate.tx=e*x+"px",y.doc.css(E.trstyle,"translate("+y.doc.translate.tx+","+y.doc.translate.ty+")"),t||y.notifyScrollEvent(y.win[0])})}else this.getScrollTop=function(){return y.docscroll.scrollTop()},this.setScrollTop=function(e){return y.docscroll.scrollTop(e)},this.getScrollLeft=function(){return y.detected.ismozilla&&y.isrtlmode?Math.abs(y.docscroll.scrollLeft()):y.docscroll.scrollLeft()},this.setScrollLeft=function(e){return y.docscroll.scrollLeft(y.detected.ismozilla&&y.isrtlmode?-e:e)};this.getTarget=function(e){return e?e.target?e.target:e.srcElement?e.srcElement:!1:!1},this.hasParent=function(e,t){if(!e)return!1;for(var n=e.target||e.srcElement||e||!1;n&&n.id!=t;)n=n.parentNode||!1;return n!==!1};var T={thin:1,medium:3,thick:5};this.getOffset=function(){if(y.isfixed)return{top:parseFloat(y.win.css("top")),left:parseFloat(y.win.css("left"))};if(!y.viewport)return y.win.offset();var e=y.win.offset(),t=y.viewport.offset();return{top:e.top-t.top+y.viewport.scrollTop(),left:e.left-t.left+y.viewport.scrollLeft()}},this.updateScrollBar=function(e){if(y.ishwscroll)y.rail.css({height:y.win.innerHeight()}),y.railh&&y.railh.css({width:y.win.innerWidth()});else{var t=y.getOffset(),n={top:t.top,left:t.left};n.top+=h(y.win,"border-top-width",!0),(y.win.outerWidth()-y.win.innerWidth())/2,n.left+=y.rail.align?y.win.outerWidth()-h(y.win,"border-right-width")-y.rail.width:h(y.win,"border-left-width");var r=y.opt.railoffset;if(r&&(r.top&&(n.top+=r.top),y.rail.align&&r.left&&(n.left+=r.left)),y.locked||y.rail.css({top:n.top,left:n.left,height:e?e.h:y.win.innerHeight()}),y.zoom&&y.zoom.css({top:n.top+1,left:1==y.rail.align?n.left-20:n.left+y.rail.width+4}),y.railh&&!y.locked){var n={top:t.top,left:t.left},r=y.opt.railhoffset;r&&(r.top&&(n.top+=r.top),r.left&&(n.left+=r.left));var i=y.railh.align?n.top+h(y.win,"border-top-width",!0)+y.win.innerHeight()-y.railh.height:n.top+h(y.win,"border-top-width",!0),s=n.left+h(y.win,"border-left-width");y.railh.css({top:i,left:s,width:y.railh.width})}}},this.doRailClick=function(e,t,n){var r,i,s,o;y.locked||(y.cancelEvent(e),t?(r=n?y.doScrollLeft:y.doScrollTop,s=n?(e.pageX-y.railh.offset().left-y.cursorwidth/2)*y.scrollratio.x:(e.pageY-y.rail.offset().top-y.cursorheight/2)*y.scrollratio.y,r(s)):(r=n?y.doScrollLeftBy:y.doScrollBy,s=n?y.scroll.x:y.scroll.y,o=n?e.pageX-y.railh.offset().left:e.pageY-y.rail.offset().top,i=n?y.view.w:y.view.h,r(s>=o?i:-i)))},y.hasanimationframe=l,y.hascancelanimationframe=c,y.hasanimationframe?y.hascancelanimationframe||(c=function(){y.cancelAnimationFrame=!0}):(l=function(e){return setTimeout(e,15-Math.floor(+(new Date)/1e3)%16)},c=clearInterval),this.init=function(){function e(t){if(y.selectiondrag){if(t){var n=y.win.outerHeight(),r=t.pageY-y.selectiondrag.top;r>0&&n>r&&(r=0),r>=n&&(r-=n),y.selectiondrag.df=r}if(0!=y.selectiondrag.df){var i=2*-Math.floor(y.selectiondrag.df/6);y.doScrollBy(i),y.debounced("doselectionscroll",function(){e()},50)}}}function t(){y.iframexd=!1;try{var e="contentDocument"in this?this.contentDocument:this.contentWindow.document;e.domain}catch(t){y.iframexd=!0,e=!1}if(y.iframexd)return"console"in window&&console.log("NiceScroll error: policy restriced iframe"),!0;if(y.forcescreen=!0,y.isiframe&&(y.iframe={doc:a(e),html:y.doc.contents().find("html")[0],body:y.doc.contents().find("body")[0]},y.getContentSize=function(){return{w:Math.max(y.iframe.html.scrollWidth,y.iframe.body.scrollWidth),h:Math.max(y.iframe.html.scrollHeight,y.iframe.body.scrollHeight)}},y.docscroll=a(y.iframe.body)),!E.isios&&y.opt.iframeautoresize&&!y.isiframe){y.win.scrollTop(0),y.doc.height("");var n=Math.max(e.getElementsByTagName("html")[0].scrollHeight,e.body.scrollHeight);y.doc.height(n)}y.lazyResize(30),E.isie7&&y.css(a(y.iframe.html),{"overflow-y":"hidden"}),y.css(a(y.iframe.body),{"overflow-y":"hidden"}),E.isios&&y.haswrapper&&y.css(a(e.body),{"-webkit-transform":"translate3d(0,0,0)"}),"contentWindow"in this?y.bind(this.contentWindow,"scroll",y.onscroll):y.bind(e,"scroll",y.onscroll),y.opt.enablemousewheel&&y.bind(e,"mousewheel",y.onmousewheel),y.opt.enablekeyboard&&y.bind(e,E.isopera?"keypress":"keydown",y.onkeypress),(E.cantouch||y.opt.touchbehavior)&&(y.bind(e,"mousedown",y.ontouchstart),y.bind(e,"mousemove",function(e){y.ontouchmove(e,!0)}),y.opt.grabcursorenabled&&E.cursorgrabvalue&&y.css(a(e.body),{cursor:E.cursorgrabvalue})),y.bind(e,"mouseup",y.ontouchend),y.zoom&&(y.opt.dblclickzoom&&y.bind(e,"dblclick",y.doZoom),y.ongesturezoom&&y.bind(e,"gestureend",y.ongesturezoom))}if(y.saved.css=[],E.isie7mobile)return!0;if(E.isoperamini)return!0;if(E.hasmstouch&&y.css(y.ispage?a("html"):y.win,{"-ms-touch-action":"none"}),y.zindex="auto",y.zindex=y.ispage||"auto"!=y.opt.zindex?y.opt.zindex:f()||"auto",y.ispage||"auto"==y.zindex||y.zindex>u&&(u=y.zindex),y.isie&&0==y.zindex&&"auto"==y.opt.zindex&&(y.zindex="auto"),!y.ispage||!E.cantouch&&!E.isieold&&!E.isie9mobile){var n=y.docscroll;y.ispage&&(n=y.haswrapper?y.win:y.doc),E.isie9mobile||y.css(n,{"overflow-y":"hidden"}),y.ispage&&E.isie7&&("BODY"==y.doc[0].nodeName?y.css(a("html"),{"overflow-y":"hidden"}):"HTML"==y.doc[0].nodeName&&y.css(a("body"),{"overflow-y":"hidden"})),!E.isios||y.ispage||y.haswrapper||y.css(a("body"),{"-webkit-overflow-scrolling":"touch"});var o=a(document.createElement("div"));o.css({position:"relative",top:0,"float":"right",width:y.opt.cursorwidth,height:"0px","background-color":y.opt.cursorcolor,border:y.opt.cursorborder,"background-clip":"padding-box","-webkit-border-radius":y.opt.cursorborderradius,"-moz-border-radius":y.opt.cursorborderradius,"border-radius":y.opt.cursorborderradius}),o.hborder=parseFloat(o.outerHeight()-o.innerHeight()),y.cursor=o;var l=a(document.createElement("div"));l.attr("id",y.id),l.addClass("nicescroll-rails");var c,h,p=["left","right"];for(var v in p)h=p[v],c=y.opt.railpadding[h],c?l.css("padding-"+h,c+"px"):y.opt.railpadding[h]=0;l.append(o),l.width=Math.max(parseFloat(y.opt.cursorwidth),o.outerWidth())+y.opt.railpadding.left+y.opt.railpadding.right,l.css({width:l.width+"px",zIndex:y.zindex,background:y.opt.background,cursor:"default"}),l.visibility=!0,l.scrollable=!0,l.align="left"==y.opt.railalign?0:1,y.rail=l,y.rail.drag=!1;var m=!1;if(!y.opt.boxzoom||y.ispage||E.isieold||(m=document.createElement("div"),y.bind(m,"click",y.doZoom),y.zoom=a(m),y.zoom.css({cursor:"pointer","z-index":y.zindex,backgroundImage:"url("+y.opt.scriptpath+"zoomico.png)",height:18,width:18,backgroundPosition:"0px 0px"}),y.opt.dblclickzoom&&y.bind(y.win,"dblclick",y.doZoom),E.cantouch&&y.opt.gesturezoom&&(y.ongesturezoom=function(e){return e.scale>1.5&&y.doZoomIn(e),e.scale<.8&&y.doZoomOut(e),y.cancelEvent(e)},y.bind(y.win,"gestureend",y.ongesturezoom))),y.railh=!1,y.opt.horizrailenabled){y.css(n,{"overflow-x":"hidden"});var o=a(document.createElement("div"));o.css({position:"absolute",top:0,height:y.opt.cursorwidth,width:"0px","background-color":y.opt.cursorcolor,border:y.opt.cursorborder,"background-clip":"padding-box","-webkit-border-radius":y.opt.cursorborderradius,"-moz-border-radius":y.opt.cursorborderradius,"border-radius":y.opt.cursorborderradius}),o.wborder=parseFloat(o.outerWidth()-o.innerWidth()),y.cursorh=o;var g=a(document.createElement("div"));g.attr("id",y.id+"-hr"),g.addClass("nicescroll-rails"),g.height=Math.max(parseFloat(y.opt.cursorwidth),o.outerHeight()),g.css({height:g.height+"px",zIndex:y.zindex,background:y.opt.background}),g.append(o),g.visibility=!0,g.scrollable=!0,g.align="top"==y.opt.railvalign?0:1,y.railh=g,y.railh.drag=!1}if(y.ispage)l.css({position:"fixed",top:"0px",height:"100%"}),l.css(l.align?{right:"0px"}:{left:"0px"}),y.body.append(l),y.railh&&(g.css({position:"fixed",left:"0px",width:"100%"}),g.css(g.align?{bottom:"0px"}:{top:"0px"}),y.body.append(g));else{if(y.ishwscroll){"static"==y.win.css("position")&&y.css(y.win,{position:"relative"});var w="HTML"==y.win[0].nodeName?y.body:y.win;y.zoom&&(y.zoom.css({position:"absolute",top:1,right:0,"margin-right":l.width+4}),w.append(y.zoom)),l.css({position:"absolute",top:0}),l.css(l.align?{right:0}:{left:0}),w.append(l),g&&(g.css({position:"absolute",left:0,bottom:0}),g.css(g.align?{bottom:0}:{top:0}),w.append(g))}else{y.isfixed="fixed"==y.win.css("position");var S=y.isfixed?"fixed":"absolute";y.isfixed||(y.viewport=y.getViewport(y.win[0])),y.viewport&&(y.body=y.viewport,0==/fixed|relative|absolute/.test(y.viewport.css("position"))&&y.css(y.viewport,{position:"relative"})),l.css({position:S}),y.zoom&&y.zoom.css({position:S}),y.updateScrollBar(),y.body.append(l),y.zoom&&y.body.append(y.zoom),y.railh&&(g.css({position:S}),y.body.append(g))}E.isios&&y.css(y.win,{"-webkit-tap-highlight-color":"rgba(0,0,0,0)","-webkit-touch-callout":"none"}),E.isie&&y.opt.disableoutline&&y.win.attr("hideFocus","true"),E.iswebkit&&y.opt.disableoutline&&y.win.css({outline:"none"})}if(y.opt.autohidemode===!1?(y.autohidedom=!1,y.rail.css({opacity:y.opt.cursoropacitymax}),y.railh&&y.railh.css({opacity:y.opt.cursoropacitymax})):y.opt.autohidemode===!0||"leave"===y.opt.autohidemode?(y.autohidedom=a().add(y.rail),E.isie8&&(y.autohidedom=y.autohidedom.add(y.cursor)),y.railh&&(y.autohidedom=y.autohidedom.add(y.railh)),y.railh&&E.isie8&&(y.autohidedom=y.autohidedom.add(y.cursorh))):"scroll"==y.opt.autohidemode?(y.autohidedom=a().add(y.rail),y.railh&&(y.autohidedom=y.autohidedom.add(y.railh))):"cursor"==y.opt.autohidemode?(y.autohidedom=a().add(y.cursor),y.railh&&(y.autohidedom=y.autohidedom.add(y.cursorh))):"hidden"==y.opt.autohidemode&&(y.autohidedom=!1,y.hide(),y.locked=!1),E.isie9mobile){y.scrollmom=new b(y),y.onmangotouch=function(){var e=y.getScrollTop(),t=y.getScrollLeft();if(e==y.scrollmom.lastscrolly&&t==y.scrollmom.lastscrollx)return!0;var n=e-y.mangotouch.sy,r=t-y.mangotouch.sx,i=Math.round(Math.sqrt(Math.pow(r,2)+Math.pow(n,2)));if(0!=i){var s=0>n?-1:1,o=0>r?-1:1,u=+(new Date);if(y.mangotouch.lazy&&clearTimeout(y.mangotouch.lazy),u-y.mangotouch.tm>80||y.mangotouch.dry!=s||y.mangotouch.drx!=o)y.scrollmom.stop(),y.scrollmom.reset(t,e),y.mangotouch.sy=e,y.mangotouch.ly=e,y.mangotouch.sx=t,y.mangotouch.lx=t,y.mangotouch.dry=s,y.mangotouch.drx=o,y.mangotouch.tm=u;else{y.scrollmom.stop(),y.scrollmom.update(y.mangotouch.sx-r,y.mangotouch.sy-n),u-y.mangotouch.tm,y.mangotouch.tm=u;var a=Math.max(Math.abs(y.mangotouch.ly-e),Math.abs(y.mangotouch.lx-t));y.mangotouch.ly=e,y.mangotouch.lx=t,a>2&&(y.mangotouch.lazy=setTimeout(function(){y.mangotouch.lazy=!1,y.mangotouch.dry=0,y.mangotouch.drx=0,y.mangotouch.tm=0,y.scrollmom.doMomentum(30)},100))}}};var x=y.getScrollTop(),T=y.getScrollLeft();y.mangotouch={sy:x,ly:x,dry:0,sx:T,lx:T,drx:0,lazy:!1,tm:0},y.bind(y.docscroll,"scroll",y.onmangotouch)}else{if(E.cantouch||y.istouchcapable||y.opt.touchbehavior||E.hasmstouch){y.scrollmom=new b(y),y.ontouchstart=function(e){if(e.pointerType&&2!=e.pointerType&&"touch"!=e.pointerType)return!1;if(y.hasmoving=!1,!y.locked){if(E.hasmstouch)for(var t=e.target?e.target:!1;t;){var n=a(t).getNiceScroll();if(n.length>0&&n[0].me==y.me)break;if(n.length>0)return!1;if("DIV"==t.nodeName&&t.id==y.id)break;t=t.parentNode?t.parentNode:!1}y.cancelScroll();var t=y.getTarget(e);if(t){var r=/INPUT/i.test(t.nodeName)&&/range/i.test(t.type);if(r)return y.stopPropagation(e)}if(!("clientX"in e)&&"changedTouches"in e&&(e.clientX=e.changedTouches[0].clientX,e.clientY=e.changedTouches[0].clientY),y.forcescreen){var i=e,e={original:e.original?e.original:e};e.clientX=i.screenX,e.clientY=i.screenY}if(y.rail.drag={x:e.clientX,y:e.clientY,sx:y.scroll.x,sy:y.scroll.y,st:y.getScrollTop(),sl:y.getScrollLeft(),pt:2,dl:!1},y.ispage||!y.opt.directionlockdeadzone)y.rail.drag.dl="f";else{var s={w:a(window).width(),h:a(window).height()},o={w:Math.max(document.body.scrollWidth,document.documentElement.scrollWidth),h:Math.max(document.body.scrollHeight,document.documentElement.scrollHeight)},u=Math.max(0,o.h-s.h),f=Math.max(0,o.w-s.w);y.rail.drag.ck=!y.rail.scrollable&&y.railh.scrollable?u>0?"v":!1:y.rail.scrollable&&!y.railh.scrollable&&f>0?"h":!1,y.rail.drag.ck||(y.rail.drag.dl="f")}if(y.opt.touchbehavior&&y.isiframe&&E.isie){var l=y.win.position();y.rail.drag.x+=l.left,y.rail.drag.y+=l.top}if(y.hasmoving=!1,y.lastmouseup=!1,y.scrollmom.reset(e.clientX,e.clientY),!E.cantouch&&!this.istouchcapable&&!E.hasmstouch){var c=t?/INPUT|SELECT|TEXTAREA/i.test(t.nodeName):!1;if(!c)return!y.ispage&&E.hasmousecapture&&t.setCapture(),y.opt.touchbehavior?(t.onclick&&!t._onclick&&(t._onclick=t.onclick,t.onclick=function(e){return y.hasmoving?!1:void t._onclick.call(this,e)}),y.cancelEvent(e)):y.stopPropagation(e);/SUBMIT|CANCEL|BUTTON/i.test(a(t).attr("type"))&&(pc={tg:t,click:!1},y.preventclick=pc)}}},y.ontouchend=function(e){return e.pointerType&&2!=e.pointerType&&"touch"!=e.pointerType?!1:y.rail.drag&&2==y.rail.drag.pt&&(y.scrollmom.doMomentum(),y.rail.drag=!1,y.hasmoving&&(y.lastmouseup=!0,y.hideCursor(),E.hasmousecapture&&document.releaseCapture(),!E.cantouch))?y.cancelEvent(e):void 0};var N=y.opt.touchbehavior&&y.isiframe&&!E.hasmousecapture;y.ontouchmove=function(e,t){if(e.pointerType&&2!=e.pointerType&&"touch"!=e.pointerType)return!1;if(y.rail.drag&&2==y.rail.drag.pt){if(E.cantouch&&void 0===e.original)return!0;y.hasmoving=!0,y.preventclick&&!y.preventclick.click&&(y.preventclick.click=y.preventclick.tg.onclick||!1,y.preventclick.tg.onclick=y.onpreventclick);var n=a.extend({original:e},e);if(e=n,"changedTouches"in e&&(e.clientX=e.changedTouches[0].clientX,e.clientY=e.changedTouches[0].clientY),y.forcescreen){var r=e,e={original:e.original?e.original:e};e.clientX=r.screenX,e.clientY=r.screenY}var i=ofy=0;if(N&&!t){var s=y.win.position();i=-s.left,ofy=-s.top}var o=e.clientY+ofy,u=o-y.rail.drag.y,f=e.clientX+i,l=f-y.rail.drag.x,c=y.rail.drag.st-u;if(y.ishwscroll&&y.opt.bouncescroll?0>c?c=Math.round(c/2):c>y.page.maxh&&(c=y.page.maxh+Math.round((c-y.page.maxh)/2)):(0>c&&(c=0,o=0),c>y.page.maxh&&(c=y.page.maxh,o=0)),y.railh&&y.railh.scrollable){var h=y.isrtlmode?l-y.rail.drag.sl:y.rail.drag.sl-l;y.ishwscroll&&y.opt.bouncescroll?0>h?h=Math.round(h/2):h>y.page.maxw&&(h=y.page.maxw+Math.round((h-y.page.maxw)/2)):(0>h&&(h=0,f=0),h>y.page.maxw&&(h=y.page.maxw,f=0))}var p=!1;if(y.rail.drag.dl)p=!0,"v"==y.rail.drag.dl?h=y.rail.drag.sl:"h"==y.rail.drag.dl&&(c=y.rail.drag.st);else{var d=Math.abs(u),v=Math.abs(l),m=y.opt.directionlockdeadzone;if("v"==y.rail.drag.ck){if(d>m&&.3*d>=v)return y.rail.drag=!1,!0;v>m&&(y.rail.drag.dl="f",a("body").scrollTop(a("body").scrollTop()))}else if("h"==y.rail.drag.ck){if(v>m&&.3*v>=d)return y.rail.drag=!1,!0;d>m&&(y.rail.drag.dl="f",a("body").scrollLeft(a("body").scrollLeft()))}}if(y.synched("touchmove",function(){y.rail.drag&&2==y.rail.drag.pt&&(y.prepareTransition&&y.prepareTransition(0),y.rail.scrollable&&y.setScrollTop(c),y.scrollmom.update(f,o),y.railh&&y.railh.scrollable?(y.setScrollLeft(h),y.showCursor(c,h)):y.showCursor(c),E.isie10&&document.selection.clear())}),E.ischrome&&y.istouchcapable&&(p=!1),p)return y.cancelEvent(e)}}}y.onmousedown=function(e,t){if(!y.rail.drag||1==y.rail.drag.pt){if(y.locked)return y.cancelEvent(e);y.cancelScroll(),y.rail.drag={x:e.clientX,y:e.clientY,sx:y.scroll.x,sy:y.scroll.y,pt:1,hr:!!t};var n=y.getTarget(e);return!y.ispage&&E.hasmousecapture&&n.setCapture(),y.isiframe&&!E.hasmousecapture&&(y.saved.csspointerevents=y.doc.css("pointer-events"),y.css(y.doc,{"pointer-events":"none"})),y.hasmoving=!1,y.cancelEvent(e)}},y.onmouseup=function(e){if(y.rail.drag){if(E.hasmousecapture&&document.releaseCapture(),y.isiframe&&!E.hasmousecapture&&y.doc.css("pointer-events",y.saved.csspointerevents),1!=y.rail.drag.pt)return;return y.rail.drag=!1,y.hasmoving&&y.triggerScrollEnd(),y.cancelEvent(e)}},y.onmousemove=function(e){if(y.rail.drag){if(1!=y.rail.drag.pt)return;if(E.ischrome&&0==e.which)return y.onmouseup(e);if(y.cursorfreezed=!0,y.hasmoving=!0,y.rail.drag.hr){y.scroll.x=y.rail.drag.sx+(e.clientX-y.rail.drag.x),y.scroll.x<0&&(y.scroll.x=0);var t=y.scrollvaluemaxw;y.scroll.x>t&&(y.scroll.x=t)}else{y.scroll.y=y.rail.drag.sy+(e.clientY-y.rail.drag.y),y.scroll.y<0&&(y.scroll.y=0);var n=y.scrollvaluemax;y.scroll.y>n&&(y.scroll.y=n)}return y.synched("mousemove",function(){y.rail.drag&&1==y.rail.drag.pt&&(y.showCursor(),y.rail.drag.hr?y.doScrollLeft(Math.round(y.scroll.x*y.scrollratio.x),y.opt.cursordragspeed):y.doScrollTop(Math.round(y.scroll.y*y.scrollratio.y),y.opt.cursordragspeed))}),y.cancelEvent(e)}},E.cantouch||y.opt.touchbehavior?(y.onpreventclick=function(e){return y.preventclick?(y.preventclick.tg.onclick=y.preventclick.click,y.preventclick=!1,y.cancelEvent(e)):void 0},y.bind(y.win,"mousedown",y.ontouchstart),y.onclick=E.isios?!1:function(e){return y.lastmouseup?(y.lastmouseup=!1,y.cancelEvent(e)):!0},y.opt.grabcursorenabled&&E.cursorgrabvalue&&(y.css(y.ispage?y.doc:y.win,{cursor:E.cursorgrabvalue}),y.css(y.rail,{cursor:E.cursorgrabvalue}))):(y.hasTextSelected="getSelection"in document?function(){return document.getSelection().rangeCount>0}:"selection"in document?function(){return"None"!=document.selection.type}:function(){return!1},y.onselectionstart=function(){y.ispage||(y.selectiondrag=y.win.offset())},y.onselectionend=function(){y.selectiondrag=!1},y.onselectiondrag=function(t){y.selectiondrag&&y.hasTextSelected()&&y.debounced("selectionscroll",function(){e(t)},250)}),E.hasmstouch&&(y.css(y.rail,{"-ms-touch-action":"none"}),y.css(y.cursor,{"-ms-touch-action":"none"}),y.bind(y.win,"MSPointerDown",y.ontouchstart),y.bind(document,"MSPointerUp",y.ontouchend),y.bind(document,"MSPointerMove",y.ontouchmove),y.bind(y.cursor,"MSGestureHold",function(e){e.preventDefault()}),y.bind(y.cursor,"contextmenu",function(e){e.preventDefault()})),this.istouchcapable&&(y.bind(y.win,"touchstart",y.ontouchstart),y.bind(document,"touchend",y.ontouchend),y.bind(document,"touchcancel",y.ontouchend),y.bind(document,"touchmove",y.ontouchmove)),y.bind(y.cursor,"mousedown",y.onmousedown),y.bind(y.cursor,"mouseup",y.onmouseup),y.railh&&(y.bind(y.cursorh,"mousedown",function(e){y.onmousedown(e,!0)}),y.bind(y.cursorh,"mouseup",y.onmouseup)),(y.opt.cursordragontouch||!E.cantouch&&!y.opt.touchbehavior)&&(y.rail.css({cursor:"default"}),y.railh&&y.railh.css({cursor:"default"}),y.jqbind(y.rail,"mouseenter",function(){return y.win.is(":visible")?(y.canshowonmouseevent&&y.showCursor(),void (y.rail.active=!0)):!1}),y.jqbind(y.rail,"mouseleave",function(){y.rail.active=!1,y.rail.drag||y.hideCursor()}),y.opt.sensitiverail&&(y.bind(y.rail,"click",function(e){y.doRailClick(e,!1,!1)}),y.bind(y.rail,"dblclick",function(e){y.doRailClick(e,!0,!1)}),y.bind(y.cursor,"click",function(e){y.cancelEvent(e)}),y.bind(y.cursor,"dblclick",function(e){y.cancelEvent(e)})),y.railh&&(y.jqbind(y.railh,"mouseenter",function(){return y.win.is(":visible")?(y.canshowonmouseevent&&y.showCursor(),void (y.rail.active=!0)):!1}),y.jqbind(y.railh,"mouseleave",function(){y.rail.active=!1,y.rail.drag||y.hideCursor()}),y.opt.sensitiverail&&(y.bind(y.railh,"click",function(e){y.doRailClick(e,!1,!0)}),y.bind(y.railh,"dblclick",function(e){y.doRailClick(e,!0,!0)}),y.bind(y.cursorh,"click",function(e){y.cancelEvent(e)}),y.bind(y.cursorh,"dblclick",function(e){y.cancelEvent(e)})))),E.cantouch||y.opt.touchbehavior?(y.bind(E.hasmousecapture?y.win:document,"mouseup",y.ontouchend),y.bind(document,"mousemove",y.ontouchmove),y.onclick&&y.bind(document,"click",y.onclick),y.opt.cursordragontouch&&(y.bind(y.cursor,"mousedown",y.onmousedown),y.bind(y.cursor,"mousemove",y.onmousemove),y.cursorh&&y.bind(y.cursorh,"mousedown",function(e){y.onmousedown(e,!0)}),y.cursorh&&y.bind(y.cursorh,"mousemove",y.onmousemove))):(y.bind(E.hasmousecapture?y.win:document,"mouseup",y.onmouseup),y.bind(document,"mousemove",y.onmousemove),y.onclick&&y.bind(document,"click",y.onclick),!y.ispage&&y.opt.enablescrollonselection&&(y.bind(y.win[0],"mousedown",y.onselectionstart),y.bind(document,"mouseup",y.onselectionend),y.bind(y.cursor,"mouseup",y.onselectionend),y.cursorh&&y.bind(y.cursorh,"mouseup",y.onselectionend),y.bind(document,"mousemove",y.onselectiondrag)),y.zoom&&(y.jqbind(y.zoom,"mouseenter",function(){y.canshowonmouseevent&&y.showCursor(),y.rail.active=!0}),y.jqbind(y.zoom,"mouseleave",function(){y.rail.active=!1,y.rail.drag||y.hideCursor()}))),y.opt.enablemousewheel&&(y.isiframe||y.bind(E.isie&&y.ispage?document:y.win,"mousewheel",y.onmousewheel),y.bind(y.rail,"mousewheel",y.onmousewheel),y.railh&&y.bind(y.railh,"mousewheel",y.onmousewheelhr)),y.ispage||E.cantouch||/HTML|^BODY/.test(y.win[0].nodeName)||(y.win.attr("tabindex")||y.win.attr({tabindex:s++}),y.jqbind(y.win,"focus",function(e){r=y.getTarget(e).id||!0,y.hasfocus=!0,y.canshowonmouseevent&&y.noticeCursor()}),y.jqbind(y.win,"blur",function(){r=!1,y.hasfocus=!1}),y.jqbind(y.win,"mouseenter",function(e){i=y.getTarget(e).id||!0,y.hasmousefocus=!0,y.canshowonmouseevent&&y.noticeCursor()}),y.jqbind(y.win,"mouseleave",function(){i=!1,y.hasmousefocus=!1,y.rail.drag||y.hideCursor()}))}if(y.onkeypress=function(e){if(y.locked&&0==y.page.maxh)return!0;e=e?e:window.e;var t=y.getTarget(e);if(t&&/INPUT|TEXTAREA|SELECT|OPTION/.test(t.nodeName)){var n=t.getAttribute("type")||t.type||!1;if(!n||!/submit|button|cancel/i.tp)return!0}if(a(t).attr("contenteditable"))return!0;if(y.hasfocus||y.hasmousefocus&&!r||y.ispage&&!r&&!i){var s=e.keyCode;if(y.locked&&27!=s)return y.cancelEvent(e);var o=e.ctrlKey||!1,u=e.shiftKey||!1,f=!1;switch(s){case 38:case 63233:y.doScrollBy(72),f=!0;break;case 40:case 63235:y.doScrollBy(-72),f=!0;break;case 37:case 63232:y.railh&&(o?y.doScrollLeft(0):y.doScrollLeftBy(72),f=!0);break;case 39:case 63234:y.railh&&(o?y.doScrollLeft(y.page.maxw):y.doScrollLeftBy(-72),f=!0);break;case 33:case 63276:y.doScrollBy(y.view.h),f=!0;break;case 34:case 63277:y.doScrollBy(-y.view.h),f=!0;break;case 36:case 63273:y.railh&&o?y.doScrollPos(0,0):y.doScrollTo(0),f=!0;break;case 35:case 63275:y.railh&&o?y.doScrollPos(y.page.maxw,y.page.maxh):y.doScrollTo(y.page.maxh),f=!0;break;case 32:y.opt.spacebarenabled&&(y.doScrollBy(u?y.view.h:-y.view.h),f=!0);break;case 27:y.zoomactive&&(y.doZoom(),f=!0)}if(f)return y.cancelEvent(e)}},y.opt.enablekeyboard&&y.bind(document,E.isopera&&!E.isopera12?"keypress":"keydown",y.onkeypress),y.bind(document,"keydown",function(e){var t=e.ctrlKey||!1;t&&(y.wheelprevented=!0)}),y.bind(document,"keyup",function(e){var t=e.ctrlKey||!1;t||(y.wheelprevented=!1)}),y.bind(window,"resize",y.lazyResize),y.bind(window,"orientationchange",y.lazyResize),y.bind(window,"load",y.lazyResize),E.ischrome&&!y.ispage&&!y.haswrapper){var C=y.win.attr("style"),k=parseFloat(y.win.css("width"))+1;y.win.css("width",k),y.synched("chromefix",function(){y.win.attr("style",C)})}y.onAttributeChange=function(){y.lazyResize(250)},y.ispage||y.haswrapper||(d!==!1?(y.observer=new d(function(e){e.forEach(y.onAttributeChange)}),y.observer.observe(y.win[0],{childList:!0,characterData:!1,attributes:!0,subtree:!1}),y.observerremover=new d(function(e){e.forEach(function(e){if(e.removedNodes.length>0)for(var t in e.removedNodes)if(e.removedNodes[t]==y.win[0])return y.remove()})}),y.observerremover.observe(y.win[0].parentNode,{childList:!0,characterData:!1,attributes:!1,subtree:!1})):(y.bind(y.win,E.isie&&!E.isie9?"propertychange":"DOMAttrModified",y.onAttributeChange),E.isie9&&y.win[0].attachEvent("onpropertychange",y.onAttributeChange),y.bind(y.win,"DOMNodeRemoved",function(e){e.target==y.win[0]&&y.remove()}))),!y.ispage&&y.opt.boxzoom&&y.bind(window,"resize",y.resizeZoom),y.istextarea&&y.bind(y.win,"mouseup",y.lazyResize),y.lazyResize(30)}"IFRAME"==this.doc[0].nodeName&&(this.doc[0].readyState&&"complete"==this.doc[0].readyState&&setTimeout(function(){t.call(y.doc[0],!1)},500),y.bind(this.doc,"load",t))},this.showCursor=function(e,t){y.cursortimeout&&(clearTimeout(y.cursortimeout),y.cursortimeout=0),y.rail&&(y.autohidedom&&(y.autohidedom.stop().css({opacity:y.opt.cursoropacitymax}),y.cursoractive=!0),y.rail.drag&&1==y.rail.drag.pt||(void 0!==e&&e!==!1&&(y.scroll.y=Math.round(1*e/y.scrollratio.y)),void 0!==t&&(y.scroll.x=Math.round(1*t/y.scrollratio.x))),y.cursor.css({height:y.cursorheight,top:y.scroll.y}),y.cursorh&&(y.cursorh.css(!y.rail.align&&y.rail.visibility?{width:y.cursorwidth,left:y.scroll.x+y.rail.width}:{width:y.cursorwidth,left:y.scroll.x}),y.cursoractive=!0),y.zoom&&y.zoom.stop().css({opacity:y.opt.cursoropacitymax}))},this.hideCursor=function(e){y.cursortimeout||y.rail&&y.autohidedom&&(y.hasmousefocus&&"leave"==y.opt.autohidemode||(y.cursortimeout=setTimeout(function(){y.rail.active&&y.showonmouseevent||(y.autohidedom.stop().animate({opacity:y.opt.cursoropacitymin}),y.zoom&&y.zoom.stop().animate({opacity:y.opt.cursoropacitymin}),y.cursoractive=!1),y.cursortimeout=0},e||y.opt.hidecursordelay)))},this.noticeCursor=function(e,t,n){y.showCursor(t,n),y.rail.active||y.hideCursor(e)},this.getContentSize=y.ispage?function(){return{w:Math.max(document.body.scrollWidth,document.documentElement.scrollWidth),h:Math.max(document.body.scrollHeight,document.documentElement.scrollHeight)}}:y.haswrapper?function(){return{w:y.doc.outerWidth()+parseInt(y.win.css("paddingLeft"))+parseInt(y.win.css("paddingRight")),h:y.doc.outerHeight()+parseInt(y.win.css("paddingTop"))+parseInt(y.win.css("paddingBottom"))}}:function(){return{w:y.docscroll[0].scrollWidth,h:y.docscroll[0].scrollHeight}},this.onResize=function(e,t){if(!y||!y.win)return!1;if(!y.haswrapper&&!y.ispage){if("none"==y.win.css("display"))return y.visibility&&y.hideRail().hideRailHr(),!1;y.hidden||y.visibility||y.showRail().showRailHr()}var n=y.page.maxh,r=y.page.maxw,i={h:y.view.h,w:y.view.w};if(y.view={w:y.ispage?y.win.width():parseInt(y.win[0].clientWidth),h:y.ispage?y.win.height():parseInt(y.win[0].clientHeight)},y.page=t?t:y.getContentSize(),y.page.maxh=Math.max(0,y.page.h-y.view.h),y.page.maxw=Math.max(0,y.page.w-y.view.w),y.page.maxh==n&&y.page.maxw==r&&y.view.w==i.w){if(y.ispage)return y;var s=y.win.offset();if(y.lastposition){var o=y.lastposition;if(o.top==s.top&&o.left==s.left)return y}y.lastposition=s}if(0==y.page.maxh?(y.hideRail(),y.scrollvaluemax=0,y.scroll.y=0,y.scrollratio.y=0,y.cursorheight=0,y.setScrollTop(0),y.rail.scrollable=!1):y.rail.scrollable=!0,0==y.page.maxw?(y.hideRailHr(),y.scrollvaluemaxw=0,y.scroll.x=0,y.scrollratio.x=0,y.cursorwidth=0,y.setScrollLeft(0),y.railh.scrollable=!1):y.railh.scrollable=!0,y.locked=0==y.page.maxh&&0==y.page.maxw,y.locked)return y.ispage||y.updateScrollBar(y.view),!1;y.hidden||y.visibility?y.hidden||y.railh.visibility||y.showRailHr():y.showRail().showRailHr(),y.istextarea&&y.win.css("resize")&&"none"!=y.win.css("resize")&&(y.view.h-=20),y.cursorheight=Math.min(y.view.h,Math.round(y.view.h*(y.view.h/y.page.h))),y.cursorheight=y.opt.cursorfixedheight?y.opt.cursorfixedheight:Math.max(y.opt.cursorminheight,y.cursorheight),y.cursorwidth=Math.min(y.view.w,Math.round(y.view.w*(y.view.w/y.page.w))),y.cursorwidth=y.opt.cursorfixedheight?y.opt.cursorfixedheight:Math.max(y.opt.cursorminheight,y.cursorwidth),y.scrollvaluemax=y.view.h-y.cursorheight-y.cursor.hborder,y.railh&&(y.railh.width=y.page.maxh>0?y.view.w-y.rail.width:y.view.w,y.scrollvaluemaxw=y.railh.width-y.cursorwidth-y.cursorh.wborder),y.ispage||y.updateScrollBar(y.view),y.scrollratio={x:y.page.maxw/y.scrollvaluemaxw,y:y.page.maxh/y.scrollvaluemax};var u=y.getScrollTop();return u>y.page.maxh?y.doScrollTop(y.page.maxh):(y.scroll.y=Math.round(y.getScrollTop()*(1/y.scrollratio.y)),y.scroll.x=Math.round(y.getScrollLeft()*(1/y.scrollratio.x)),y.cursoractive&&y.noticeCursor()),y.scroll.y&&0==y.getScrollTop()&&y.doScrollTo(Math.floor(y.scroll.y*y.scrollratio.y)),y},this.resize=y.onResize,this.lazyResize=function(e){return e=isNaN(e)?30:e,y.delayed("resize",y.resize,e),y},this._bind=function(e,t,n,r){y.events.push({e:e,n:t,f:n,b:r,q:!1}),e.addEventListener?e.addEventListener(t,n,r||!1):e.attachEvent?e.attachEvent("on"+t,n):e["on"+t]=n},this.jqbind=function(e,t,n){y.events.push({e:e,n:t,f:n,q:!0}),a(e).bind(t,n)},this.bind=function(e,t,n,r){var i="jquery"in e?e[0]:e;if("mousewheel"==t)if("onwheel"in document||document.documentMode>=9)y._bind(i,"wheel",n,r||!1);else{var s=void 0!==document.onmousewheel?"mousewheel":"DOMMouseScroll";p(i,s,n,r||!1),"DOMMouseScroll"==s&&p(i,"MozMousePixelScroll",n,r||!1)}else if(i.addEventListener){if(E.cantouch&&/mouseup|mousedown|mousemove/.test(t)){var o="mousedown"==t?"touchstart":"mouseup"==t?"touchend":"touchmove";y._bind(i,o,function(e){if(e.touches){if(e.touches.length<2){var t=e.touches.length?e.touches[0]:e;t.original=e,n.call(this,t)}}else if(e.changedTouches){var t=e.changedTouches[0];t.original=e,n.call(this,t)}},r||!1)}y._bind(i,t,n,r||!1),E.cantouch&&"mouseup"==t&&y._bind(i,"touchcancel",n,r||!1)}else y._bind(i,t,function(e){return e=e||window.event||!1,e&&e.srcElement&&(e.target=e.srcElement),"pageY"in e||(e.pageX=e.clientX+document.documentElement.scrollLeft,e.pageY=e.clientY+document.documentElement.scrollTop),n.call(i,e)===!1||r===!1?y.cancelEvent(e):!0})},this._unbind=function(e,t,n,r){e.removeEventListener?e.removeEventListener(t,n,r):e.detachEvent?e.detachEvent("on"+t,n):e["on"+t]=!1},this.unbindAll=function(){for(var e=0;e<y.events.length;e++){var t=y.events[e];t.q?t.e.unbind(t.n,t.f):y._unbind(t.e,t.n,t.f,t.b)}},this.cancelEvent=function(e){var e=e.original?e.original:e?e:window.event||!1;return e?(e.preventDefault&&e.preventDefault(),e.stopPropagation&&e.stopPropagation(),e.preventManipulation&&e.preventManipulation(),e.cancelBubble=!0,e.cancel=!0,e.returnValue=!1,!1):!1},this.stopPropagation=function(e){var e=e.original?e.original:e?e:window.event||!1;return e?e.stopPropagation?e.stopPropagation():(e.cancelBubble&&(e.cancelBubble=!0),!1):!1},this.showRail=function(){return 0==y.page.maxh||!y.ispage&&"none"==y.win.css("display")||(y.visibility=!0,y.rail.visibility=!0,y.rail.css("display","block")),y},this.showRailHr=function(){return y.railh?(0==y.page.maxw||!y.ispage&&"none"==y.win.css("display")||(y.railh.visibility=!0,y.railh.css("display","block")),y):y},this.hideRail=function(){return y.visibility=!1,y.rail.visibility=!1,y.rail.css("display","none"),y},this.hideRailHr=function(){return y.railh?(y.railh.visibility=!1,y.railh.css("display","none"),y):y},this.show=function(){return y.hidden=!1,y.locked=!1,y.showRail().showRailHr()},this.hide=function(){return y.hidden=!0,y.locked=!0,y.hideRail().hideRailHr()},this.toggle=function(){return y.hidden?y.show():y.hide()},this.remove=function(){y.stop(),y.cursortimeout&&clearTimeout(y.cursortimeout),y.doZoomOut(),y.unbindAll(),E.isie9&&y.win[0].detachEvent("onpropertychange",y.onAttributeChange),y.observer!==!1&&y.observer.disconnect(),y.observerremover!==!1&&y.observerremover.disconnect(),y.events=null,y.cursor&&y.cursor.remove(),y.cursorh&&y.cursorh.remove(),y.rail&&y.rail.remove(),y.railh&&y.railh.remove(),y.zoom&&y.zoom.remove();for(var e=0;e<y.saved.css.length;e++){var t=y.saved.css[e];t[0].css(t[1],void 0===t[2]?"":t[2])}y.saved=!1,y.me.data("__nicescroll","");var n=a.nicescroll;n.each(function(e){if(this&&this.id===y.id){delete n[e];for(var t=++e;t<n.length;t++,e++)n[e]=n[t];n.length--,n.length&&delete n[n.length]}});for(var r in y)y[r]=null,delete y[r];y=null},this.scrollstart=function(e){return this.onscrollstart=e,y},this.scrollend=function(e){return this.onscrollend=e,y},this.scrollcancel=function(e){return this.onscrollcancel=e,y},this.zoomin=function(e){return this.onzoomin=e,y},this.zoomout=function(e){return this.onzoomout=e,y},this.isScrollable=function(e){var t=e.target?e.target:e;if("OPTION"==t.nodeName)return!0;for(;t&&1==t.nodeType&&!/^BODY|HTML/.test(t.nodeName);){var n=a(t),r=n.css("overflowY")||n.css("overflowX")||n.css("overflow")||"";if(/scroll|auto/.test(r))return t.clientHeight!=t.scrollHeight;t=t.parentNode?t.parentNode:!1}return!1},this.getViewport=function(e){for(var t=e&&e.parentNode?e.parentNode:!1;t&&1==t.nodeType&&!/^BODY|HTML/.test(t.nodeName);){var n=a(t);if(/fixed|absolute/.test(n.css("position")))return n;var r=n.css("overflowY")||n.css("overflowX")||n.css("overflow")||"";if(/scroll|auto/.test(r)&&t.clientHeight!=t.scrollHeight)return n;if(n.getNiceScroll().length>0)return n;t=t.parentNode?t.parentNode:!1}return t?a(t):!1},this.triggerScrollEnd=function(){if(y.onscrollend){var e=y.getScrollLeft(),t=y.getScrollTop(),n={type:"scrollend",current:{x:e,y:t},end:{x:e,y:t}};y.onscrollend.call(y,n)}},this.onmousewheel=function(e){if(!y.wheelprevented){if(y.locked)return y.debounced("checkunlock",y.resize,250),!0;if(y.rail.drag)return y.cancelEvent(e);if("auto"==y.opt.oneaxismousemode&&0!=e.deltaX&&(y.opt.oneaxismousemode=!1),y.opt.oneaxismousemode&&0==e.deltaX&&!y.rail.scrollable)return y.railh&&y.railh.scrollable?y.onmousewheelhr(e):!0;var t=+(new Date),n=!1;if(y.opt.preservenativescrolling&&y.checkarea+600<t&&(y.nativescrollingarea=y.isScrollable(e),n=!0),y.checkarea=t,y.nativescrollingarea)return!0;var r=m(e,!1,n);return r&&(y.checkarea=0),r}},this.onmousewheelhr=function(e){if(!y.wheelprevented){if(y.locked||!y.railh.scrollable)return!0;if(y.rail.drag)return y.cancelEvent(e);var t=+(new Date),n=!1;return y.opt.preservenativescrolling&&y.checkarea+600<t&&(y.nativescrollingarea=y.isScrollable(e),n=!0),y.checkarea=t,y.nativescrollingarea?!0:y.locked?y.cancelEvent(e):m(e,!0,n)}},this.stop=function(){return y.cancelScroll(),y.scrollmon&&y.scrollmon.stop(),y.cursorfreezed=!1,y.scroll.y=Math.round(y.getScrollTop()*(1/y.scrollratio.y)),y.noticeCursor(),y},this.getTransitionSpeed=function(e){var t=Math.round(10*y.opt.scrollspeed),n=Math.min(t,Math.round(e/20*y.opt.scrollspeed));return n>20?n:0},y.opt.smoothscroll?y.ishwscroll&&E.hastransition&&y.opt.usetransition?(this.prepareTransition=function(e,t){var n=t?e>20?e:0:y.getTransitionSpeed(e),r=n?E.prefixstyle+"transform "+n+"ms ease-out":"";return y.lasttransitionstyle&&y.lasttransitionstyle==r||(y.lasttransitionstyle=r,y.doc.css(E.transitionstyle,r)),n},this.doScrollLeft=function(e,t){var n=y.scrollrunning?y.newscrolly:y.getScrollTop();y.doScrollPos(e,n,t)},this.doScrollTop=function(e,t){var n=y.scrollrunning?y.newscrollx:y.getScrollLeft();y.doScrollPos(n,e,t)},this.doScrollPos=function(e,t,n){var r=y.getScrollTop(),i=y.getScrollLeft();return((y.newscrolly-r)*(t-r)<0||(y.newscrollx-i)*(e-i)<0)&&y.cancelScroll(),0==y.opt.bouncescroll&&(0>t?t=0:t>y.page.maxh&&(t=y.page.maxh),0>e?e=0:e>y.page.maxw&&(e=y.page.maxw)),y.scrollrunning&&e==y.newscrollx&&t==y.newscrolly?!1:(y.newscrolly=t,y.newscrollx=e,y.newscrollspeed=n||!1,y.timer?!1:void (y.timer=setTimeout(function(){var n=y.getScrollTop(),r=y.getScrollLeft(),i={};i.x=e-r,i.y=t-n,i.px=r,i.py=n;var s=Math.round(Math.sqrt(Math.pow(i.x,2)+Math.pow(i.y,2))),o=y.newscrollspeed&&y.newscrollspeed>1?y.newscrollspeed:y.getTransitionSpeed(s);if(y.newscrollspeed&&y.newscrollspeed<=1&&(o*=y.newscrollspeed),y.prepareTransition(o,!0),y.timerscroll&&y.timerscroll.tm&&clearInterval(y.timerscroll.tm),o>0){if(!y.scrollrunning&&y.onscrollstart){var u={type:"scrollstart",current:{x:r,y:n},request:{x:e,y:t},end:{x:y.newscrollx,y:y.newscrolly},speed:o};y.onscrollstart.call(y,u)}E.transitionend?y.scrollendtrapped||(y.scrollendtrapped=!0,y.bind(y.doc,E.transitionend,y.onScrollTransitionEnd,!1)):(y.scrollendtrapped&&clearTimeout(y.scrollendtrapped),y.scrollendtrapped=setTimeout(y.onScrollTransitionEnd,o));var a=n,f=r;y.timerscroll={bz:new BezierClass(a,y.newscrolly,o,0,0,.58,1),bh:new BezierClass(f,y.newscrollx,o,0,0,.58,1)},y.cursorfreezed||(y.timerscroll.tm=setInterval(function(){y.showCursor(y.getScrollTop(),y.getScrollLeft())},60))}y.synched("doScroll-set",function(){y.timer=0,y.scrollendtrapped&&(y.scrollrunning=!0),y.setScrollTop(y.newscrolly),y.setScrollLeft(y.newscrollx),y.scrollendtrapped||y.onScrollTransitionEnd()})},50)))},this.cancelScroll=function(){if(!y.scrollendtrapped)return!0;var e=y.getScrollTop(),t=y.getScrollLeft();return y.scrollrunning=!1,E.transitionend||clearTimeout(E.transitionend),y.scrollendtrapped=!1,y._unbind(y.doc,E.transitionend,y.onScrollTransitionEnd),y.prepareTransition(0),y.setScrollTop(e),y.railh&&y.setScrollLeft(t),y.timerscroll&&y.timerscroll.tm&&clearInterval(y.timerscroll.tm),y.timerscroll=!1,y.cursorfreezed=!1,y.showCursor(e,t),y},this.onScrollTransitionEnd=function(){y.scrollendtrapped&&y._unbind(y.doc,E.transitionend,y.onScrollTransitionEnd),y.scrollendtrapped=!1,y.prepareTransition(0),y.timerscroll&&y.timerscroll.tm&&clearInterval(y.timerscroll.tm),y.timerscroll=!1;var e=y.getScrollTop(),t=y.getScrollLeft();return y.setScrollTop(e),y.railh&&y.setScrollLeft(t),y.noticeCursor(!1,e,t),y.cursorfreezed=!1,0>e?e=0:e>y.page.maxh&&(e=y.page.maxh),0>t?t=0:t>y.page.maxw&&(t=y.page.maxw),e!=y.newscrolly||t!=y.newscrollx?y.doScrollPos(t,e,y.opt.snapbackspeed):(y.onscrollend&&y.scrollrunning&&y.triggerScrollEnd(),void (y.scrollrunning=!1))}):(this.doScrollLeft=function(e,t){var n=y.scrollrunning?y.newscrolly:y.getScrollTop();y.doScrollPos(e,n,t)},this.doScrollTop=function(e,t){var n=y.scrollrunning?y.newscrollx:y.getScrollLeft();y.doScrollPos(n,e,t)},this.doScrollPos=function(e,t,n){function r(){if(y.cancelAnimationFrame)return!0;if(y.scrollrunning=!0,h=1-h)return y.timer=l(r)||1;var e=0,t=sy=y.getScrollTop();if(y.dst.ay){t=y.bzscroll?y.dst.py+y.bzscroll.getNow()*y.dst.ay:y.newscrolly;var n=t-sy;(0>n&&t<y.newscrolly||n>0&&t>y.newscrolly)&&(t=y.newscrolly),y.setScrollTop(t),t==y.newscrolly&&(e=1)}else e=1;var i=sx=y.getScrollLeft();if(y.dst.ax){i=y.bzscroll?y.dst.px+y.bzscroll.getNow()*y.dst.ax:y.newscrollx;var n=i-sx;(0>n&&i<y.newscrollx||n>0&&i>y.newscrollx)&&(i=y.newscrollx),y.setScrollLeft(i),i==y.newscrollx&&(e+=1)}else e+=1;2==e?(y.timer=0,y.cursorfreezed=!1,y.bzscroll=!1,y.scrollrunning=!1,0>t?t=0:t>y.page.maxh&&(t=y.page.maxh),0>i?i=0:i>y.page.maxw&&(i=y.page.maxw),i!=y.newscrollx||t!=y.newscrolly?y.doScrollPos(i,t):y.onscrollend&&y.triggerScrollEnd()):y.timer=l(r)||1}var t=void 0===t||t===!1?y.getScrollTop(!0):t;if(y.timer&&y.newscrolly==t&&y.newscrollx==e)return!0;y.timer&&c(y.timer),y.timer=0;var i=y.getScrollTop(),s=y.getScrollLeft();((y.newscrolly-i)*(t-i)<0||(y.newscrollx-s)*(e-s)<0)&&y.cancelScroll(),y.newscrolly=t,y.newscrollx=e,y.bouncescroll&&y.rail.visibility||(y.newscrolly<0?y.newscrolly=0:y.newscrolly>y.page.maxh&&(y.newscrolly=y.page.maxh)),y.bouncescroll&&y.railh.visibility||(y.newscrollx<0?y.newscrollx=0:y.newscrollx>y.page.maxw&&(y.newscrollx=y.page.maxw)),y.dst={},y.dst.x=e-s,y.dst.y=t-i,y.dst.px=s,y.dst.py=i;var o=Math.round(Math.sqrt(Math.pow(y.dst.x,2)+Math.pow(y.dst.y,2)));y.dst.ax=y.dst.x/o,y.dst.ay=y.dst.y/o;var u=0,a=o;0==y.dst.x?(u=i,a=t,y.dst.ay=1,y.dst.py=0):0==y.dst.y&&(u=s,a=e,y.dst.ax=1,y.dst.px=0);var f=y.getTransitionSpeed(o);if(n&&1>=n&&(f*=n),y.bzscroll=f>0?y.bzscroll?y.bzscroll.update(a,f):new BezierClass(u,a,f,0,1,0,1):!1,!y.timer){(i==y.page.maxh&&t>=y.page.maxh||s==y.page.maxw&&e>=y.page.maxw)&&y.checkContentSize();var h=1;if(y.cancelAnimationFrame=!1,y.timer=1,y.onscrollstart&&!y.scrollrunning){var p={type:"scrollstart",current:{x:s,y:i},request:{x:e,y:t},end:{x:y.newscrollx,y:y.newscrolly},speed:f};y.onscrollstart.call(y,p)}r(),(i==y.page.maxh&&t>=i||s==y.page.maxw&&e>=s)&&y.checkContentSize(),y.noticeCursor()}},this.cancelScroll=function(){return y.timer&&c(y.timer),y.timer=0,y.bzscroll=!1,y.scrollrunning=!1,y}):(this.doScrollLeft=function(e,t){var n=y.getScrollTop();y.doScrollPos(e,n,t)},this.doScrollTop=function(e,t){var n=y.getScrollLeft();y.doScrollPos(n,e,t)},this.doScrollPos=function(e,t){var n=e>y.page.maxw?y.page.maxw:e;0>n&&(n=0);var r=t>y.page.maxh?y.page.maxh:t;0>r&&(r=0),y.synched("scroll",function(){y.setScrollTop(r),y.setScrollLeft(n)})},this.cancelScroll=function(){}),this.doScrollBy=function(e,t){var n=0;if(t)n=Math.floor((y.scroll.y-e)*y.scrollratio.y);else{var r=y.timer?y.newscrolly:y.getScrollTop(!0);n=r-e}if(y.bouncescroll){var i=Math.round(y.view.h/2);-i>n?n=-i:n>y.page.maxh+i&&(n=y.page.maxh+i)}return y.cursorfreezed=!1,py=y.getScrollTop(!0),0>n&&0>=py?y.noticeCursor():n>y.page.maxh&&py>=y.page.maxh?(y.checkContentSize(),y.noticeCursor()):void y.doScrollTop(n)},this.doScrollLeftBy=function(e,t){var n=0;if(t)n=Math.floor((y.scroll.x-e)*y.scrollratio.x);else{var r=y.timer?y.newscrollx:y.getScrollLeft(!0);n=r-e}if(y.bouncescroll){var i=Math.round(y.view.w/2);-i>n?n=-i:n>y.page.maxw+i&&(n=y.page.maxw+i)}return y.cursorfreezed=!1,px=y.getScrollLeft(!0),0>n&&0>=px?y.noticeCursor():n>y.page.maxw&&px>=y.page.maxw?y.noticeCursor():void y.doScrollLeft(n)},this.doScrollTo=function(e,t){var n=t?Math.round(e*y.scrollratio.y):e;0>n?n=0:n>y.page.maxh&&(n=y.page.maxh),y.cursorfreezed=!1,y.doScrollTop(e)},this.checkContentSize=function(){var e=y.getContentSize();(e.h!=y.page.h||e.w!=y.page.w)&&y.resize(!1,e)},y.onscroll=function(){y.rail.drag||y.cursorfreezed||y.synched("scroll",function(){y.scroll.y=Math.round(y.getScrollTop()*(1/y.scrollratio.y)),y.railh&&(y.scroll.x=Math.round(y.getScrollLeft()*(1/y.scrollratio.x))),y.noticeCursor()})},y.bind(y.docscroll,"scroll",y.onscroll),this.doZoomIn=function(e){if(!y.zoomactive){y.zoomactive=!0,y.zoomrestore={style:{}};var t=["position","top","left","zIndex","backgroundColor","marginTop","marginBottom","marginLeft","marginRight"],n=y.win[0].style;for(var r in t){var i=t[r];y.zoomrestore.style[i]=void 0!==n[i]?n[i]:""}y.zoomrestore.style.width=y.win.css("width"),y.zoomrestore.style.height=y.win.css("height"),y.zoomrestore.padding={w:y.win.outerWidth()-y.win.width(),h:y.win.outerHeight()-y.win.height()},E.isios4&&(y.zoomrestore.scrollTop=a(window).scrollTop(),a(window).scrollTop(0)),y.win.css({position:E.isios4?"absolute":"fixed",top:0,left:0,"z-index":u+100,margin:"0px"});var s=y.win.css("backgroundColor");return(""==s||/transparent|rgba\(0, 0, 0, 0\)|rgba\(0,0,0,0\)/.test(s))&&y.win.css("backgroundColor","#fff"),y.rail.css({"z-index":u+101}),y.zoom.css({"z-index":u+102}),y.zoom.css("backgroundPosition","0px -18px"),y.resizeZoom(),y.onzoomin&&y.onzoomin.call(y),y.cancelEvent(e)}},this.doZoomOut=function(e){return y.zoomactive?(y.zoomactive=!1,y.win.css("margin",""),y.win.css(y.zoomrestore.style),E.isios4&&a(window).scrollTop(y.zoomrestore.scrollTop),y.rail.css({"z-index":y.zindex}),y.zoom.css({"z-index":y.zindex}),y.zoomrestore=!1,y.zoom.css("backgroundPosition","0px 0px"),y.onResize(),y.onzoomout&&y.onzoomout.call(y),y.cancelEvent(e)):void 0},this.doZoom=function(e){return y.zoomactive?y.doZoomOut(e):y.doZoomIn(e)},this.resizeZoom=function(){if(y.zoomactive){var e=y.getScrollTop();y.win.css({width:a(window).width()-y.zoomrestore.padding.w+"px",height:a(window).height()-y.zoomrestore.padding.h+"px"}),y.onResize(),y.setScrollTop(Math.min(y.page.maxh,e))}},this.init(),a.nicescroll.push(this)},b=function(e){var t=this;this.nc=e,this.lastx=0,this.lasty=0,this.speedx=0,this.speedy=0,this.lasttime=0,this.steptime=0,this.snapx=!1,this.snapy=!1,this.demulx=0,this.demuly=0,this.lastscrollx=-1,this.lastscrolly=-1,this.chkx=0,this.chky=0,this.timer=0,this.time=function(){return+(new Date)},this.reset=function(e,n){t.stop();var r=t.time();t.steptime=0,t.lasttime=r,t.speedx=0,t.speedy=0,t.lastx=e,t.lasty=n,t.lastscrollx=-1,t.lastscrolly=-1},this.update=function(e,n){var r=t.time();t.steptime=r-t.lasttime,t.lasttime=r;var i=n-t.lasty,s=e-t.lastx,o=t.nc.getScrollTop(),u=t.nc.getScrollLeft(),a=o+i,f=u+s;t.snapx=0>f||f>t.nc.page.maxw,t.snapy=0>a||a>t.nc.page.maxh,t.speedx=s,t.speedy=i,t.lastx=e,t.lasty=n},this.stop=function(){t.nc.unsynched("domomentum2d"),t.timer&&clearTimeout(t.timer),t.timer=0,t.lastscrollx=-1,t.lastscrolly=-1},this.doSnapy=function(e,n){var r=!1;0>n?(n=0,r=!0):n>t.nc.page.maxh&&(n=t.nc.page.maxh,r=!0),0>e?(e=0,r=!0):e>t.nc.page.maxw&&(e=t.nc.page.maxw,r=!0),r?t.nc.doScrollPos(e,n,t.nc.opt.snapbackspeed):t.nc.triggerScrollEnd()},this.doMomentum=function(e){var n=t.time(),r=e?n+e:t.lasttime,i=t.nc.getScrollLeft(),s=t.nc.getScrollTop(),o=t.nc.page.maxh,u=t.nc.page.maxw;t.speedx=u>0?Math.min(60,t.speedx):0,t.speedy=o>0?Math.min(60,t.speedy):0;var a=r&&60>=n-r;(0>s||s>o||0>i||i>u)&&(a=!1);var f=t.speedy&&a?t.speedy:!1,l=t.speedx&&a?t.speedx:!1;if(f||l){var c=Math.max(16,t.steptime);if(c>50){var h=c/50;t.speedx*=h,t.speedy*=h,c=50}t.demulxy=0,t.lastscrollx=t.nc.getScrollLeft(),t.chkx=t.lastscrollx,t.lastscrolly=t.nc.getScrollTop(),t.chky=t.lastscrolly;var p=t.lastscrollx,d=t.lastscrolly,v=function(){var e=t.time()-n>600?.04:.02;t.speedx&&(p=Math.floor(t.lastscrollx-t.speedx*(1-t.demulxy)),t.lastscrollx=p,(0>p||p>u)&&(e=.1)),t.speedy&&(d=Math.floor(t.lastscrolly-t.speedy*(1-t.demulxy)),t.lastscrolly=d,(0>d||d>o)&&(e=.1)),t.demulxy=Math.min(1,t.demulxy+e),t.nc.synched("domomentum2d",function(){if(t.speedx){var e=t.nc.getScrollLeft();e!=t.chkx&&t.stop(),t.chkx=p,t.nc.setScrollLeft(p)}if(t.speedy){var n=t.nc.getScrollTop();n!=t.chky&&t.stop(),t.chky=d,t.nc.setScrollTop(d)}t.timer||(t.nc.hideCursor(),t.doSnapy(p,d))}),t.demulxy<1?t.timer=setTimeout(v,c):(t.stop(),t.nc.hideCursor(),t.doSnapy(p,d))};v()}else t.doSnapy(t.nc.getScrollLeft(),t.nc.getScrollTop())}},w=e.fn.scrollTop;e.cssHooks.pageYOffset={get:function(e){var t=a.data(e,"__nicescroll")||!1;return t&&t.ishwscroll?t.getScrollTop():w.call(e)},set:function(e,t){var n=a.data(e,"__nicescroll")||!1;return n&&n.ishwscroll?n.setScrollTop(parseInt(t)):w.call(e,t),this}},e.fn.scrollTop=function(e){if(void 0===e){var t=this[0]?a.data(this[0],"__nicescroll")||!1:!1;return t&&t.ishwscroll?t.getScrollTop():w.call(this)}return this.each(function(){var t=a.data(this,"__nicescroll")||!1;t&&t.ishwscroll?t.setScrollTop(parseInt(e)):w.call(a(this),e)})};var E=e.fn.scrollLeft;a.cssHooks.pageXOffset={get:function(e){var t=a.data(e,"__nicescroll")||!1;return t&&t.ishwscroll?t.getScrollLeft():E.call(e)},set:function(e,t){var n=a.data(e,"__nicescroll")||!1;return n&&n.ishwscroll?n.setScrollLeft(parseInt(t)):E.call(e,t),this}},e.fn.scrollLeft=function(e){if(void 0===e){var t=this[0]?a.data(this[0],"__nicescroll")||!1:!1;return t&&t.ishwscroll?t.getScrollLeft():E.call(this)}return this.each(function(){var t=a.data(this,"__nicescroll")||!1;t&&t.ishwscroll?t.setScrollLeft(parseInt(e)):E.call(a(this),e)})};var S=function(e){var t=this;if(this.length=0,this.name="nicescrollarray",this.each=function(e){for(var n=0,r=0;n<t.length;n++)e.call(t[n],r++);return t},this.push=function(e){t[t.length]=e,t.length++},this.eq=function(e){return t[e]},e)for(var n=0;n<e.length;n++){var r=a.data(e[n],"__nicescroll")||!1;r&&(this[this.length]=r,this.length++)}return this};n(S.prototype,["show","hide","toggle","onResize","resize","remove","stop","doScrollPos"],function(e,t){e[t]=function(){var e=arguments;return this.each(function(){this[t].apply(this,e)})}}),e.fn.getNiceScroll=function(e){if(void 0===e)return new S(this);var t=this[e]&&a.data(this[e],"__nicescroll")||!1;return t},e.extend(e.expr[":"],{nicescroll:function(e){return a.data(e,"__nicescroll")?!0:!1}}),a.fn.niceScroll=function(e,t){void 0===t&&("object"!=typeof e||"jquery"in e||(t=e,e=!1));var n=new S;void 0===t&&(t={}),e&&(t.doc=a(e),t.win=a(this));var r=!("doc"in t);return r||"win"in t||(t.win=a(this)),this.each(function(){var e=a(this).data("__nicescroll")||!1;e||(t.doc=r?a(this):t.doc,e=new y(t,a(this)),a(this).data("__nicescroll",e)),n.push(e)}),1==n.length?n[0]:n},window.NiceScroll={getjQuery:function(){return e}},a.nicescroll||(a.nicescroll=new S,a.nicescroll.options=v)}),require.config({paths:{jquery:"/static/assets/js/jquery.min",underscore:"libs/underscore",backbone:"libs/backbone",text:"libs/text","jquery.cookie":"/static/js/jquery.cookie","jquery.xmldom":"/static/js/jquery.xmldom","jquery.form":"/static/js/jquery.form","jquery.treeview":"/static/js/jquery.treeview","jquery.jquote2":"libs/jquery.jquote2.min",jsonrpc:"/static/js/jsonrpc",heiduc:"/static/js/heiduc",cms:"/static/js/cms",i18n:"/i18n","back-services":"/static/js/back-services",cm:"/static/js/codemirror/codemirror","cm-css":"/static/js/codemirror/css","cm-html":"/static/js/codemirror/htmlmixed","cm-js":"/static/js/codemirror/javascript","cm-xml":"/static/js/codemirror/xml","moment-js":"/static/assets/lib/moment-js/moment.min","jquery.easing":"/static/assets/js/jquery.easing.1.3.min",bootstrap:"/static/assets/bootstrap/js/bootstrap.min",datepicker:"/static/assets/lib/bootstrap-datepicker/js/bootstrap-datepicker",noty:"/static/assets/lib/noty/jquery.noty","noty-layout":"/static/assets/lib/noty/layouts/bottomRight","jquery.nicescroll":"/static/assets/lib/nicescroll/jquery.nicescroll.min"},shim:{underscore:{exports:"_"},backbone:{deps:["jquery","underscore"],exports:"Backbone"},bootstrap:["jquery"],"jquery.cookie":["jquery"],"jquery.xmldom":["jquery"],"jquery.form":["jquery"],"jquery.treeview":["jquery"],"jquery.jquote2":["jquery"],"jquery.easing":["jquery"],"jquery.nicescroll":["jquery"],"cm-css":["cm"],"cm-html":["cm"],"cm-js":["cm"],"cm-xml":["cm"],heiduc:["jsonrpc"],cms:["heiduc"],"back-services":["heiduc"],datepicker:["bootstrap"],noty:["jquery"],"noty-layout":["jquery","noty"],app:["jquery","heiduc","backbone"]}}),require(["app","jquery","underscore","backbone","jquery.cookie","jquery.xmldom","jquery.jquote2","i18n","jsonrpc","heiduc","cms","back-services","moment-js","noty","noty-layout","jquery.easing","bootstrap","datepicker","jquery.nicescroll"],function(e){Heiduc.initJSONRpc(function(){Heiduc.jsonrpc.loginFrontService.getSystemProperties(function(t){Heiduc.version=t.map.version,Heiduc.fullVersion=t.map.fullVersion,Heiduc.loggedIn=t.map.loggedIn==="true",Heiduc.app=new e})})}),define("main",function(){});